function checkout_giftcard_validation(){$(".wcs-remove").off("click").on("click",function(e){var d=this;e.preventDefault();var t=$(this).parent().find(".wcs-gift-card-number").attr("payInstId"),a={};a.piId=t,a.orderId=$("#orderId").val(),a.pimCurrency=$("#pimCurrency").val();var c=$("#countryCode").val(),p=$("#wcs-env_currency").val();currencyFormat(c);$.ajax({type:"POST",url:"RemoveGiftCard",data:a,success:function(e){var n,t,a=$.parseJSON(e),o=null,i=null,r=null,s=$("#wcs-env_decimal_places").val(),l=$("#wcs-env_currency").val();localStorage.setItem("showBtn",null),location.reload(),$(a).each(function(e,t){$.each(t,function(a,r){$.each($("input.wcs-gift-card-number"),function(e,t){$(t).val()==a&&$(t).parent(".applied_gift_card").find("#gift-bal").text(l+r.toFixed(s)),$(t).attr("payInstId")==a&&$(t).attr("payInstId",r)}),"errorMessage"==a&&(o=r,$(".payment-information-ajax-red").find(".number").val("1"),$(".payment-information-ajax-red").show().find(".wcs-note-red-gift p").html(decodeURIComponent(escape(r)))),"GiftCardPay"==a&&(i="PL"==c?r+" "+p:p+" "+r),"balanceAmount"==a&&(i="PL"==c?r+" "+p:p+" "+r),"currFmtBalanceAmount"==a&&(n=r,currFmtBalanceAmount="PL"==c?r+" "+p:p+" "+r)})}),null===o&&($(".payment-information-ajax-red").hide(),$("#wcs-giftbalpaid").val(i),t=$("#wcs-gift-count").val(),--t,$("#wcs-gift-count").val(t),$("#piAmount").val(r),0<i?($(".wcs-one-and-half").find(".wcs-payment-cost").text(l+i),$(".wcs-one-and-half").find(".wcs-color0").text(l+r)):$(".wcs-payment-cost").parent().parent("div").addClass("wcs-hidden"),$(d).closest(".applied_gift_card").empty(),$(".gift_card_form input").val(""),show_gift_card_form(),$(".giftCardLinks span").removeClass("wcs-promo-applied-price"),$("#cart_gc_Amount").addClass("wcs-hidden"),$("#cart_gc_paid_label").addClass("wcs-hidden"),$(".wcs-shopping-grandtotal-js").html(currFmtBalanceAmount),Rayban&&Rayban.AfterPay&&Rayban.AfterPay.updateAfterpayAmount(n,2,".",",",p,c)),$(".gift_card_form").removeClass("wcs-hidden")},error:function(e){var t=$.parseJSON(e);$(t).each(function(e,t){$.each(t,function(e,t){"errorMessage"==e&&(error=t,$(".payment-information-ajax-red").find(".number").val("1"),$(".payment-information-ajax-red").show().find(".wcs-note-red-gift p").html(t))})})}})}),giftCardFormValidate()}function giftCardFormValidate(){var e,t,a,r,n=$("input.pin_1");0!==n.length&&(e=$("input.giftcard_pin_number"),t=$("a.gift_apply"),a=new RegExp(n.attr("pattern")),r=new RegExp(e.attr("pattern")),n.add(e).off("keyup.gift input.gift").on("keyup.gift input.gift",function(){window.setTimeout(function(){a.test(n[0].value)&&r.test(e[0].value)?t.removeClass("wcs-btn-disable").removeAttr("disabled"):t.addClass("wcs-btn-disable")},50)}))}(function(){var l,n,d,e,t,a,r,o,i,s,c,p,u,m,v,h,f,g,w,$,_,y,b,C=[].slice,k=[].indexOf||function(e){for(var t=0,a=this.length;t<a;t++)if(t in this&&this[t]===e)return t;return-1},x=window.jQuery||window.Zepto||window.$;x.payment={},x.payment.fn={},x.fn.payment=function(){var e=arguments[0],t=2<=arguments.length?C.call(arguments,1):[];return x.payment.fn[e].apply(this,t)},e=/(\d{1,4})/g,x.payment.cards=d=[{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:e,length:[12,13,14,15,16,17,18,19],cvcLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"visa",patterns:[4],format:e,length:[13,16],cvcLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvcLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvcLength:[3],luhn:!0},{type:"discover",patterns:[64,65,6011,622],format:e,length:[16],cvcLength:[3],luhn:!0},{type:"hipercard",patterns:[60],format:e,length:[13,16,19],cvcLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:e,length:[16,17,18,19],cvcLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:e,length:[16],cvcLength:[3],luhn:!0}],l=function(e){var t,a,r,n,o,i,s;for(e=(e+"").replace(/\D/g,""),r=0,o=d.length;r<o;r++)for(n=0,i=(s=(t=d[r]).patterns).length;n<i;n++)if(a=s[n]+"",e.substr(0,a.length)===a)return t},n=function(e){for(var t,a=0,r=d.length;a<r;a++)if((t=d[a]).type===e)return t},p=function(e){for(var t,a=!0,r=0,n=(e+"").split("").reverse(),o=0,i=n.length;o<i;o++)t=n[o],t=parseInt(t,10),(a=!a)&&(t*=2),9<t&&(t-=9),r+=t;return r%10==0},c=function(e){var t;return null!=e.prop("selectionStart")&&e.prop("selectionStart")!==e.prop("selectionEnd")||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},y=function(e,t){var a,r,n,o,i;try{r=t.prop("selectionStart")}catch(e){r=null}if(o=t.val(),t.val(e),null!==r&&t.is(":focus"))return r===o.length&&(r=e.length),o!==e&&(i=o.slice(r-1,+r+1||9e9),a=e.slice(r-1,+r+1||9e9),n=e[r],/\d/.test(n)&&i===n+" "&&a===" "+n&&(r+=1)),t.prop("selectionStart",r),t.prop("selectionEnd",r)},f=function(e){var t,a,r,n,o,i;for(null==e&&(e=""),n="",o=0,i=(t=e.split("")).length;o<i;o++)a=t[o],-1<(r="０１２３４５６７８９".indexOf(a))&&(a="0123456789"[r]),n+=a;return n},h=function(e){var t=x(e.currentTarget);return setTimeout(function(){var e=t.val();return e=(e=f(e)).replace(/\D/g,""),y(e,t)})},m=function(e){var t=x(e.currentTarget);return setTimeout(function(){var e=t.val();return e=f(e),e=x.payment.formatCardNumber(e),y(e,t)})},r=function(e){var t,a,r,n,o,i,s=String.fromCharCode(e.which);if(/^\d+$/.test(s)&&(t=x(e.currentTarget),i=t.val(),a=l(i+s),r=(i.replace(/\D/g,"")+s).length,o=16,a&&(o=a.length[a.length.length-1]),!(o<=r||null!=t.prop("selectionStart")&&t.prop("selectionStart")!==i.length)))return(n=a&&"amex"===a.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/).test(i)?(e.preventDefault(),setTimeout(function(){return t.val(i+" "+s)})):n.test(i+s)?(e.preventDefault(),setTimeout(function(){return t.val(i+s+" ")})):void 0},t=function(e){var t=x(e.currentTarget),a=t.val();if(8===e.which&&(null==t.prop("selectionStart")||t.prop("selectionStart")===a.length))return/\d\s$/.test(a)?(e.preventDefault(),setTimeout(function(){return t.val(a.replace(/\d\s$/,""))})):/\s\d?$/.test(a)?(e.preventDefault(),setTimeout(function(){return t.val(a.replace(/\d$/,""))})):void 0},v=function(e){var t=x(e.currentTarget);return setTimeout(function(){var e=t.val();return e=f(e),e=x.payment.formatExpiry(e),y(e,t)})},o=function(e){var a,r,t=String.fromCharCode(e.which);if(/^\d+$/.test(t))return a=x(e.currentTarget),r=a.val()+t,/^\d$/.test(r)&&"0"!==r&&"1"!==r?(e.preventDefault(),setTimeout(function(){return a.val("0"+r+" / ")})):/^\d\d$/.test(r)?(e.preventDefault(),setTimeout(function(){var e=parseInt(r[0],10),t=parseInt(r[1],10);return 2<t&&0!==e?a.val("0"+e+" / "+t):a.val(r+" / ")})):void 0},i=function(e){var t,a,r=String.fromCharCode(e.which);if(/^\d+$/.test(r))return a=(t=x(e.currentTarget)).val(),/^\d\d$/.test(a)?t.val(a+" / "):void 0},s=function(e){var t,a,r=String.fromCharCode(e.which);if("/"===r||" "===r)return a=(t=x(e.currentTarget)).val(),/^\d$/.test(a)&&"0"!==a?t.val("0"+a+" / "):void 0},a=function(e){var t=x(e.currentTarget),a=t.val();if(8===e.which&&(null==t.prop("selectionStart")||t.prop("selectionStart")===a.length))return/\d\s\/\s$/.test(a)?(e.preventDefault(),setTimeout(function(){return t.val(a.replace(/\d\s\/\s$/,""))})):void 0},u=function(e){var t=x(e.currentTarget);return setTimeout(function(){var e=t.val();return e=(e=f(e)).replace(/\D/g,"").slice(0,4),y(e,t)})},_=function(e){var t;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},w=function(e){var t,a,r=x(e.currentTarget),n=String.fromCharCode(e.which);if(/^\d+$/.test(n)&&!c(r))return a=(r.val()+n).replace(/\D/g,""),(t=l(a))?a.length<=t.length[t.length.length-1]:a.length<=16},$=function(e){var t=x(e.currentTarget),a=String.fromCharCode(e.which);if(/^\d+$/.test(a)&&!c(t))return!(6<(t.val()+a).replace(/\D/g,"").length)&&void 0},g=function(e){var t=x(e.currentTarget),a=String.fromCharCode(e.which);if(/^\d+$/.test(a)&&!c(t))return(t.val()+a).length<=4},b=function(e){var t,r,a=x(e.currentTarget),n=a.val(),o=x.payment.cardType(n)||"unknown";if(!a.hasClass(o)){t=function(){for(var e=[],t=0,a=d.length;t<a;t++)r=d[t],e.push(r.type);return e}(),a.removeClass("unknown"),a.removeClass(t.join(" ")),a.addClass(o),a.toggleClass("identified","unknown"!==o);var i,s=x("#onlyCounty").val();return"discover"==o&&"MX"==s&&(a.removeClass("discover"),a.addClass("unknown")),"visa"!=o&&"discover"!=o&&"mastercard"!=o&&"amex"!=o&&"elo"!=o&&"dinersclub"!=o&&"hipercard"!=o||void 0!==x("#payment_confirm_creditCard")&&(i="STD CreditCard "+o,x("#payment_confirm_creditCard").attr("data-analytics-Action_Events_CheckoutPaymentGateway",i)),a.trigger("payment.cardType",o)}},x.payment.fn.formatCardCVC=function(){return this.on("keypress",_),this.on("keypress",g),this.on("paste",u),this.on("change",u),this.on("input",u),this},x.payment.fn.formatCardExpiry=function(){return this.on("keypress",_),this.on("keypress",$),this.on("keypress",o),this.on("keypress",s),this.on("keypress",i),this.on("keydown",a),this.on("change",v),this.on("input",v),this},x.payment.fn.formatCardNumber=function(){return this.on("keypress",_),this.on("keypress",w),this.on("keypress",r),this.on("keydown",t),this.on("keyup",b),this.on("paste",m),this.on("change",m),this.on("input",m),this.on("input",b),this},x.payment.fn.restrictNumeric=function(){return this.on("keypress",_),this.on("paste",h),this.on("change",h),this.on("input",h),this},x.payment.fn.cardExpiryVal=function(){return x.payment.cardExpiryVal(x(this).val())},x.payment.cardExpiryVal=function(e){var t=e.split(/[\s\/]+/,2),a=t[0],r=t[1];return 2===(null!=r?r.length:void 0)&&/^\d+$/.test(r)&&(r=(new Date).getFullYear().toString().slice(0,2)+r),{month:a=parseInt(a,10),year:r=parseInt(r,10)}},x.payment.validateCardNumber=function(e){var t,a;return e=(e+"").replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(!!(t=l(e))&&(a=e.length,0<=k.call(t.length,a)&&(!1===t.luhn||p(e))))},x.payment.validateCardExpiry=function(e,t){var a,r,n;return"object"==typeof e&&"month"in e&&(e=(n=e).month,t=n.year),!(!e||!t)&&(e=x.trim(e),t=x.trim(t),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(1<=e&&e<=12&&(2===t.length&&(t=t<70?"20"+t:"19"+t),4===t.length&&(r=new Date(t,e),a=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),a<r)))))},x.payment.validateCardCVC=function(e,t){var a,r;return e=x.trim(e),!!/^\d+$/.test(e)&&(null!=(a=n(t))?(r=e.length,0<=k.call(a.cvcLength,r)):3<=e.length&&e.length<=4)},x.payment.cardType=function(e){var t;return e&&(null!=(t=l(e))?t.type:void 0)||null},x.payment.formatCardNumber=function(e){var t,a,r,n;return e=e.replace(/\D/g,""),(t=l(e))?(r=t.length[t.length.length-1],e=e.slice(0,r),t.format.global?null!=(n=e.match(t.format))?n.join(" "):void 0:null!=(a=t.format.exec(e))?(a.shift(),(a=x.grep(a,function(e){return e})).join(" ")):void 0):e},x.payment.formatExpiry=function(e){var t,a,r,n=e.match(/^\D*(\d{1,2})(\D+)?(\d{1,4})?/);return n?(t=n[1]||"",a=n[2]||"",0<(r=n[3]||"").length?a=" / ":" /"===a?(t=t.substring(0,1),a=""):2===t.length||0<a.length?a=" / ":1===t.length&&"0"!==t&&"1"!==t&&(t="0"+t,a=" / "),t+a+r):""}}).call(this),function(e){e.config=e.config||{},e.config.delivery={po:{},constants:{SPCStoreIdValue:$("#storeIdentifier").val()}}}(window.Rayban=window.Rayban||{}),function(t){var a=t(".wcs-address-invalid-message");a.parent().css("position","relative");var e=(a.outerHeight()-t("#address_line_one").outerHeight())/2;a.css("top","-"+e+"px");var r=(a.outerHeight()-a.find(".wcs-icon").outerHeight())/2;a.find(".wcs-icon").css("top",r+"px"),t("body").on("click",function(e){"DeliveryPage"!=t("#pgTemplate").val()||t(e.target).closest(".wcs-delivery-shopping-cart-accordian").length||a.addClass("wcs-hide")}),t("#delivery_information_form").find(".wcs-address-invalid").find("input").each(function(e){t(this).on("focusin",function(e){t(this).parents(".wcs-address-invalid").removeClass("wcs-address-invalid")})})}(jQuery);var giftcard_valid=function(){var e=$("#piAmount").val();return null!==e&&0===e},add_required=function(){$("#payment_mode_creditCard .required_swap").attr("required","").addClass("required").removeClass("required_swap"),$("form").removeAttr("novalidate"),$("#payment_mode_creditCard .wcs-dropdown-text").addClass("wcs-dropdown-validation")},remove_required=function(){$("#payment_mode_creditCard .required").addClass("required_swap").removeClass("required").removeAttr("required"),$("#payment_mode_creditCard .wcs-dropdown-validation").removeClass("wcs-dropdown-validation")};function globalFunctions(){var e,t;NewPaymentMethods(),$(".wcs-checkout-login #loginEmail").on("keyup",function(){$(".wcs-checkout-login #forgotPassword_email").val($(this).val())}),$("#loginEmail").on("focusout",function(){$("#forgotPassword_email").val($(this).val())}),$(".wcs-quick-buy-full-click").off("click").on("click",function(e){window.newTabEnabled?e.target===this&&window.open($(this).data("url")):(window.location.href=$(this).data("url"),e.preventDefault())}),promo_textbox_focusBlur(),$("#wcs_compare_recentItems").removeClass("wcs-hide"),$("#wcs-myrec-count").html($("#recViewItems").val()),0===$("#recViewItems").val()&&$("#wcs_compare_recentItems").addClass("wcs-hide"),window.getCookie=function(e){var t,a=document.cookie,r=null,n=-1;return e+="=",0<=(t=a.indexOf(e))&&((n=a.indexOf(";",t))<0&&(n=a.length),r=a.substring(t+e.length,n)),r},window.SetCookie=function(e,t,a){var r=new Date,n=new Date;null!==a&&0!==a||(a=1),n.setTime(r.getTime()+864e5*a),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()+";path=/;"},null!==getCookie("promotionPageReload")&&($("#promosuccessGWP").removeClass("wcs-hide").find(".wcs-note-green").show(),document.cookie="promotionPageReload=;expires=Thu, 01 Jan 1970 00:00:01 GMT"),null!==getCookie("promotionAppliedPageReload")&&($("#promosuccess").removeClass("wcs-hide").find(".wcs-note-green").show(),document.cookie="promotionAppliedPageReload=;expires=Thu, 01 Jan 1970 00:00:01 GMT"),null!==getCookie("promotionRemovedPageReload")&&(null!==getCookie("insPromotionRemovedPageReload")?($("#promoremove").removeClass("wcs-hide").find("#wcs-note-green_eyemed").removeClass("wcs-hide").show(),document.cookie="insPromotionRemovedPageReload=;expires=Thu, 01 Jan 1970 00:00:01 GMT"):$("#promoremove").removeClass("wcs-hide").find("#wcs-note-green").removeClass("wcs-hide").show(),document.cookie="promotionRemovedPageReload=;expires=Thu, 01 Jan 1970 00:00:01 GMT"),$("#wcs-apply-promo").off("mouseover.note mouseout.note").on("mouseover.note",function(){var e=$(this).find("p.wcs-notification-box");e.addClass("wcs-show").find(".wcs-notification-arrow-down").css("top",e.height())}).on("mouseout.note",function(){$(this).find("p.wcs-notification-box").removeClass("wcs-show")}),$("#wcs-promo-apply-button").off("click").on("click",function(){if($(this).hasClass("wcs-color-fff")&&(getValue=$("#D_CartPage_PromoCode_Input").val(),(""!==getValue||"Enter promotion code"!==getValue)&&!$("#wcs-apply-promo").hasClass("wcs-promotion-added"))){var e={};return e.promoCode=getValue,e.orderId=$("#orderId").val(),e.taskType="A",e.URL="PaymentDetailsView",e.isCalculateViewRequired="true",e.isFromPaymentView="true",e.promoAjax="true",e.piAmount=$("#piAmount").val(),e.check_routing_number=_self.find($(".giftcard_pin_number")).val(),void $.ajax({type:"POST",url:"AjaxPromotionCodeManage",data:e,dataType:"html",success:function(e){$("#checkout-summary-container").html(e);var t,a=$("#promo-val").val(),r=$("#promoCodePresent").val();""!==a&&void 0!==a&&($(".promotion_form").hide(),$(".promotion-applied-container").show(),$("#pcodeText").text($("#pcode").val()),$("#pnameText").text($("input[name='pname']").val()),$(".promo-val").css("height",$(".promo-label").height())),void 0!==r&&""!==r&&($(".promotion_form").hide(),$(".promotion-applied-container").show(),$(".payment-remove-promotion").hide(),$(".remove-icon").hide(),$("#pcodeText").text($("#pcode").val()),$("#pnameText").text($("input[name='pname']").val()),$(".promo-val").css("height",$(".promo-label").height())),$(".applied_gift_card #gift-bal-paid").text($(".wcs-payment-cost").text().trim()),$(".applied_gift_card #remaining-bal-paid").text($(".wcs-payment-cost").next().text().trim()),"true"!=$("#promoCodeErrorMessage").val()?((t=$(".wcs-note-red")).parent("div").addClass("wcs-hide"),t.show().parent("div#promoerror").removeClass("wcs-hide"),$(".payment-information-ajax-red").hide(),$(".giftCardLinks span").html($(".wcs-delivery-total-price").html()),$(".giftCardLinks span").addClass("wcs-promo-applied-price"),calculate_tax_fn(),giftcard_bindevents_fn(),dropscrollerFn(),select_dropbox_value(),expand_dropbox(),collapse_dropbox(),key_nav_dropdown(),tax_submit_fn(),apply_promo_link_click(),apply_promo_idme_link_click(),idme_links(),promo_textbox_focusBlur(),remove_promotion(),dropscroller_hover_fn(),160<$(window).scrollTop()&&$(window).scrollTop(160)):($(".payment-information-ajax-red").find(".number").val("1"),$(".payment-information-ajax-red").show().find(".wcs-note-red-gift p").html($("#ajaxErrorMessage").val()),$(window).scrollTop(0),$("#subTotal").html($("#subTotalCalc").html()),calculate_tax_fn(),giftcard_bindevents_fn(),dropscrollerFn(),select_dropbox_value(),expand_dropbox(),collapse_dropbox(),key_nav_dropdown(),tax_submit_fn(),apply_promo_link_click(),apply_promo_idme_link_click(),idme_links(),promo_textbox_focusBlur(),remove_promotion(),dropscroller_hover_fn(),$("#wcs-cart-container").load("MiniCartView?storeId="+$("#storeId").val()+"&catalogId="+$("#catalogId").val()+"&langId="+$("#langId").val(),function(){openLinksInNewTab()}))},error:function(e,t,a){}})}}),apply_promotion(),$("div.wcs-zipcode-tax-cal").focus(function(){$(this).val($("#wcs-zipcode-text").val())&&$(this).val("")}),$("div.wcs-zipcode-tax-cal").blur(function(){""===$(this).val()&&$(this).val($("#wcs-zipcode-text").val())}),window.show_payment_mode_creditCard=function(){$cached.payment_mode_creditCard.show()},window.hide_payment_mode_creditCard=function(){$cached.payment_mode_creditCard.hide()},window.show_payment_mode_payPal=function(){$cached.payment_mode_payPal.show()},window.hide_payment_mode_payPal=function(){$cached.payment_mode_payPal.hide()},window.show_delivery_information=function(){$cached.delivery_information.show()},window.hide_delivery_information=function(){$cached.delivery_information.hide()},window.show_gift_card_form=function(){$cached.gift_card_form.removeClass("wcs-hide"),$cached.gift_card_form.removeClass("wcs-hidden")},window.hide_gift_card_form=function(){$cached.gift_card_form.addClass("wcs-hidden")},window.show_add_gift_card=function(){$cached.add_gift_card.removeClass("wcs-hide"),$cached.add_gift_card.removeClass("wcs-hidden")},window.hide_add_gift_card=function(){$cached.add_gift_card.addClass("wcs-hidden")},window.change_radio_icon=function(e){$.each(e,function(){var e=$(this);e.is(":checked")?e.prev("label").find(".wcs-icon").addClass("wcs-radio-icon-checked"):e.prev("label").find(".wcs-icon").removeClass("wcs-radio-icon-checked")})},window.validate_gift_card_number=function(e){var t=e.find($(".pin_1"));return""!==t.val()||(show_error(t),!1)},window.validate_gift_card_pin=function(e){var t=e.find($(".giftcard_pin_number"));return""===$.trim(t.val())?(show_error(t),!1):(hide_error(t),hide_error_message(t),!0)},window.validate_gift_card=function(e){var t=validate_gift_card_number(e),a=validate_gift_card_pin(e);return t&&a},window.show_applied_gift_card=function(e,t,a,r){$("#wcs-env_decimal_places").val(),$("#wcs-env_currency").val();var n=e.parents("div.gift-card"),o=n.find(".pin_1").val(),i=n.find(".applied_gift_card_template").children(".wcs-row").clone(!0,!0);i.find(".wcs-gift-card-number").val(o),i.find(".wcs-gift-card-number").attr("payInstId",r),i.find("#gift-val").text(t),i.find("#gift-bal").text(a),i.appendTo(n.find($(".applied_gift_card"))),n.find($(".applied_gift_card")).show()},$('input[type="text"], input[type="password"], input[type="email"], textarea, select').focus(function(){$(this).css("border-color","#333")}),$('input[type="text"], input[type="password"], input[type="email"], textarea, select').blur(function(){$(this).css("border-color","#888")}),window.show_guest_user_register=function(){$("#guest_user_register").show()},window.hide_guest_user_register=function(){$("#guest_user_register").hide()},window.show_guest_user_checkout=function(){$("#guest_user_checkout").show()},window.hide_guest_user_checkout=function(){$("#guest_user_checkout").hide()},$("#create_account").off("click").on("click",function(){show_guest_user_register(),hide_guest_user_checkout()}),$("#guest_checkout").off("click").on("click",function(){hide_guest_user_register(),show_guest_user_checkout()}),checkout_giftcard_validation(),window.hide_show_favorite_selection=function(){0===$("#wcs-myfav-count").text()?$("#wcs-myfav-count").parent("h4").next("a").hide():$("#wcs-myfav-count").parent("h4").next("a").show()},window.hide_show_selection=function(){"true"==$("#emptyfav").val()&&"true"==$("#emptyPur").val()&&"0"==$("#recViewItems").val()&&"R"==$("#typeUser").val()||"true"==$("#emptyfav").val()&&"0"==$("#recViewItems").val()&&void 0===$("#typeUser").val()?$("#emptypage").removeClass("wcs-hide"):$("#mainone").removeClass("wcs-hide")},hide_show_favorite_selection(),hide_show_selection(),$("form .wcs-btn-disable").each(function(){$(this).attr("disabled",!0)}),$(".agreeConsent.wcs-padLeft-4").on("click",function(e){if(!$(e.target).is("a"))return!1}),window.refresh_checkout_summary=function(){var e="",t=$("#orderId").val(),a=$("#storeId").val(),r=$("#langId").val();void 0===t&&(t=$("#shp_orderId").val()),void 0===a&&(a=$("#shp_storeId").val()),e=(e=(e=e+"orderId="+t)+"&storeId="+a)+"&langId="+r,$.ajax({type:"POST",url:"CheckoutSummaryView",data:e,success:function(e){$("#chk_summary").html(e),$cached.you_shopping_cart=$(".wcs-delivery-shopping-cart-accordian > h5"),$cached.shopping_toggle_items=$(".wcs-delivery-shopping-cart-accordian > div"),bindEvents(),0<$(".wcs_shopping_items").length&&($(".wcs_shopping_items").removeClass("wcs-hide"),shoppingBagScrollerFn(),$(".wcs_shopping_items").hide())}})},window.displayDeliveryMessage=function(){var e=$("#orderId").val(),t=$("#storeId").val(),a=$("#catalogId").val(),r=$("#langId").val(),n=($("#orderItemId").val(),{});n.orderId=e,n.storeId=t,n.catalogId=a,n.langId=r,$.ajax({type:"POST",url:"AjaxShipDateUpdate",data:n,async:!1,success:function(e){"object"!=typeof e&&(e=jQuery.parseJSON(e),$.each(e.orderItem,function(e,t){var a=t.availabilityDate.search("&lt;span&gt;"),r=t.availabilityDate.search("&lt;/span&gt;"),n=0<=a&&0<=r?t.availabilityDate.substring(a+12,r):t.availabilityDate;$(".clsOrderItem_"+t.orderItemId+" span:first-child").html(n)}))}})},window.refresh_order_summary=function(){var b,C,k=this,e=$("#orderId").val(),x=$("#currFmt").val(),I=$("#valFree").val(),S=$("#countryCode").val(),t={};$(".wcs-shipping-selector").click(function(){"wcs-shipping-selector-exp"==$(this).attr("id")?$(".wcs-shopping-ExpressShipping").show():$(".wcs-shopping-ExpressShipping").hide(),C=$(this).val(),$(".wcs-shipping-mode-title--agendada").toggleClass("wcs-hide","SCH"!==$(this).data("key")),t.orderId=e,t.shipModeId=C,$.ajax({type:"POST",url:"AjaxShipChargeUpdate",data:t,async:!1,success:function(a){var e,t;"object"!=typeof a&&(a=jQuery.parseJSON(a),k.displayDeliveryMessage()),$(".wcs-checkout-with-paypal").each(function(){var e=$(this).attr("href-url");"undefined"!=e&&$(this).attr("href-url",e.replace(/piAmount=[^&]+/,"piAmount="+Number(a.orderDetails.TotalAmount)));var t=$(this).attr("href");"undefined"!=t&&$(this).attr("href",t.replace(/piAmount=[^&]+/,"piAmount="+Number(a.orderDetails.TotalAmount)))}),"0"===a.orderDetails.TotalShipping?($(".wcs-shopping-total-text").html(I),null!==getCookie("sr_token")&&($(".sr_cartMessage").prev().addClass("wcs-hide"),$(".sr_cartMessage").removeClass("wcs-hide"))):(b=currencyFormat(S),t="",e=Number(a.orderDetails.TotalShipping),t="PL"==S?e.formatMoney(2,b.decimalSeparator,b.thousandsSeparator)+" "+x:x+" "+e.formatMoney(2,b.decimalSeparator,b.thousandsSeparator),$(".wcs-shopping-total-text").html(t),null!==getCookie("sr_token")&&($(".sr_cartMessage").prev().removeClass("wcs-hide"),$(".sr_cartMessage").addClass("wcs-hide"))),$("#shipModeId").val(C);var r,n,o,i,s=$("#checkoutnow").attr("href");-1!=s.indexOf("&shipModeId=")&&((s=s.split("&shipModeId="))[0]=s[0]+"&shipModeId="+C,s[1]=s[1].substr(s[1].indexOf("&"),s[1].length),$("#checkoutnow").attr("href",s[0]+s[1]),"us"==$("#country_value")&&(r="&city="+city,-1!=(o=(n=$("#checkoutnow").attr("href")).search("&city"))?($("#checkoutnow").attr("href",n.slice(0,o)),i=$("#checkoutnow").attr("href"),$("#checkoutnow").attr("href",i.concat(r))):$("#checkoutnow").attr("href",n+r)));var l=x+a.orderDetails.TotalTax.toFixed(2);$(".wcs-shopping-total-tax").html(l),b=currencyFormat(S);var d="",d="PL"==S?a.orderDetails.TotalAmount.formatMoney(2,b.decimalSeparator,b.thousandsSeparator)+" "+x:x+" "+a.orderDetails.TotalAmount.formatMoney(2,b.decimalSeparator,b.thousandsSeparator);$(".wcs-shopping-grandtotal-js").html(d),Rayban&&Rayban.AfterPay&&Rayban.AfterPay.updateAfterpayAmount(a.orderDetails.TotalAmount,2,b.decimalSeparator,b.thousandsSeparator,x,S);var c,p,u,m,v,h,f,g,w,_,y=a.orderDetails.TotalAmount;null!==a.value&&null!==a.balanceAmount&&(u=parseFloat(a.value).toFixed(2),m=x+" "+u,$(".gift_card_div").find("#gift-val").text(m),v=parseFloat(a.balanceAmount).toFixed(2),h=x+" "+v,$(".gift_card_div").find("#gift-bal").text(h),y<=u&&(c=parseFloat(y).toFixed(2),p=parseFloat(0).toFixed(2),g=x+" "+c,w=x+" "+p,$(".gift_card_div").find("#gift-bal-paid").text(g),$(".gift_card_div").find("#remaining-bal-paid").text(w),$(".wcs-shopping-total").find(".wcs-shopping-grandtotal-js").text(w),console.log($(".wcs-two wcs-columns wcs-fill wcs-omega").find(".wcs-shopping-total-title wcs-shopping-grandtotal-js").val)),u<y&&(c=parseFloat(u).toFixed(2),p=y-u,f=parseFloat(p).toFixed(2),g=x+" "+c,w=x+" "+f,$(".gift_card_div").find("#gift-bal-paid").text(g),$(".gift_card_div").find("#remaining-bal-paid").text(w),$(".wcs-shopping-total").find(".wcs-shopping-grandtotal-js").text(w))),null!==a.payInstId&&(_=a.payInstId,$(".wcs-gift-card-number").attr("payinstid",_))}})})},window.gift_wrap_confirm=function(t,a,r){var e=$("#giftWrapForm input[name=giftWrapEligibleItemCount]").val(),n="",o="";for(n=(n=(n=(n=(n=(n=(n=n+"giftWrapSelection="+(o=t?$("#giftWrap").is(":checked")?"off":"on":$("#giftWrap").is(":checked")?"on":"off"))+"&orderId="+$("#giftWrapForm input[name=orderId]").val())+"&storeId="+$("#giftWrapForm input[name=storeId]").val())+"&doInventory="+$("#giftWrapForm input[name=doInventory]").val())+"&calculateOrder="+$("#giftWrapForm input[name=calculateOrder]").val())+"&calculationUsage="+$("#giftWrapForm input[name=calculationUsage]").val())+"&URL="+$("#giftWrapForm input[name=URL]").val(),i=1;i<=e;i++)n=(n=(n=(n=n+"&orderItemId="+$("#giftWrapForm input[id=orderItemId_"+i+"]").val())+"&orderItemqty="+$("#giftWrapForm input[id=orderItemqty_"+i+"]").val())+"&catEntryId="+$("#giftWrapForm input[id=catEntryId_"+i+"]").val())+"&giftmessage="+encodeURIComponent($("#giftWrapForm textarea[id=giftmessage_"+i+"]").val());if(t&&"on"==o)for(i=1;i<=e;i++)n=n+"&"+$("#giftWrapForm input[id=orderItemId_"+i+"]").val()+"=";else if(t&&"off"==o)for(i=1;i<=e;i++)n=n+"&"+$("#giftWrapForm input[id=orderItemId_"+i+"]").val()+"=off";else for(i=1;i<=e;i++)n=$("#giftWrapForm input[id="+$("#giftWrapForm input[id=orderItemId_"+i+"]").val()+"]").parent().hasClass("wcs-c-on")?n+"&"+$("#giftWrapForm input[id=orderItemId_"+i+"]").val()+"=on":n+"&"+$("#giftWrapForm input[id=orderItemId_"+i+"]").val()+"=off";$.ajax({type:"POST",url:"AjaxGiftWrapDeliveryCmd",data:n,success:function(e){t||$(".wcs-gw-exapandable").slideUp(function(){$(".wcs-gw-static-bar").addClass("wcs-gw-collapsed")}),a?$(".wcs-delivery-information").find("form").submit():r?$("#payment_mode_form").submit():refresh_checkout_summary()}})},$("#wcs-gw-exapandable-item-confirm").click(function(){gift_wrap_confirm(!1,!1,!1)}),$(".wcs-gw-static-bar").find(".wcs-label-check").on("click",function(){gift_wrap_confirm(!0,!1,!1)}),refresh_order_summary(),window.remove_shipping_mode=function(){var e=$(".wcs-modified-table .wcs-shopping-item-content").length;e!=$(".wcs-wrapper-standard-modified-table .promotionalItem").length&&1<=e?($(".wcs-shipping-mode,.wcs-shopping-cart-horizontal-line").show(),$(".wcs-wrapper-standard-modified-table").addClass("wcs-wrapper-standard-modified-table")):($(".wcs-shipping-mode,.wcs-shopping-cart-horizontal-line").hide(),$(".wcs-wrapper-standard-modified-table").removeClass("wcs-wrapper-standard-modified-table"));var t=!1,a=!1,r=!1;$(".wcs-shopping-item-qtyCount").each(function(){var e="span[data-element-id='wcs-remove-item"+$(this).attr("rel")+"']";$(e).attr("itemno")==$('input[name="egift"]').val()&&(r=!0),""!==$(e).attr("rel-configurationid")&&($(".note").show(),t=!0),null!=$(e).attr("rel-roxExpressNotAvail")&&""!==$(e).attr("rel-roxExpressNotAvail")&&"false"!==$(e).attr("rel-roxExpressNotAvail")?($(".note").show(),a=!0):t||a||$(".note").show()}),!0!==a&&!0!==r&&$(".wcs-shipping-mode").removeClass("wcs-hide")},remove_shipping_mode(),window.populateCreditCardDetailsFromLocalStorage=function(){null!==localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardnumber")&&$("#WC_PaymentInfoForm_creditCardNumber_1").val(localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardnumber")),null!==localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardtype")&&$("#WC_PaymentInfoForm_creditCardType").val(localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardtype")),null!==localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.nameoncard")&&$("#name_on_card").val(localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.nameoncard")),null!==localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expiremonth")&&$("#WC_PaymentInfoForm_expireMonth_1").val(localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expiremonth")),null!==localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expireyear")&&$("#WC_PaymentInfoForm_expireYear_1").val(localStorage.getItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expireyear"))},window.clearCreditCardDetailsFromLocalStorage=function(){localStorage.removeItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardnumber"),localStorage.removeItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardtype"),localStorage.removeItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.nameoncard"),localStorage.removeItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expiremonth"),localStorage.removeItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expireyear")},window.populateCreditCardDetailsToLocalStorage=function(){localStorage.setItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardnumber",$("#WC_PaymentInfoForm_creditCardNumber_1").val()),localStorage.setItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.cardtype",$("#WC_PaymentInfoForm_creditCardType").val()),localStorage.setItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.nameoncard",$("#name_on_card").val()),localStorage.setItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expiremonth",$("#WC_PaymentInfoForm_expireMonth_1").val()),localStorage.setItem("rayban."+$("#storeId").val()+"."+$("#langId").val()+".card_details.expireyear",$("#WC_PaymentInfoForm_expireYear_1").val())},0<$("#pgTemplate").length&&"PaymentPage"==$("#pgTemplate").val()&&$("#credit_card_radio").is(":checked")&&$("#WC_PaymentInfoForm_creditCardNumber_1").is(":visible")&&populateCreditCardDetailsFromLocalStorage(),$("#payment_mode_form input[type != hidden][id !=WC_PaymentInfoForm_cardVerificationNumber_1],#WC_PaymentInfoForm_expireMonth_1,#WC_PaymentInfoForm_expireYear_1").on("blur change",function(){populateCreditCardDetailsToLocalStorage()}),window.populateAddressFromLocalStorage=function(){getCookie("deliveryAddressStore");var e=getCookie("TaxChange");sessionStorage.deliveryAddressStore="no","yes"==sessionStorage.deliveryAddressStore||"yes"==sessionStorage.guest?($("#delivery_information_form input[type != hidden][type != checkbox][type != submit],#emailSignUp, #delivery_information_form select, #delivery_information_form textarea").each(function(e){var t=void 0!==$(this).attr("name")?$(this).attr("name"):$(this).attr("id"),a=t?t.split("-")[0]:"",r=t?t.split("-")[1]:"";"stateBill"==a&&(a="state",r="bill");var n=sessionStorage["rayban."+$("#store").val()+".address.billing.same"],o=sessionStorage["rayban."+$("#store").val()+".address.delivery.isRfcNeeded"],i="bill"==r?"billing":"delivery";$("#WC_State_DropDown-bill").is(":visible")?$("#state-bill").val(sessionStorage["rayban."+$("#store").val()+".address.billing.state"]):$("#state-bill").val(sessionStorage["rayban."+$("#store").val()+".address.billing.country"]),storedval="sameAsDeliveryAddress"==a?n:sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a],null!==storedval&&void 0!==storedval?"no"==n&&"bill"==r?($(this).val(storedval),"country"==a&&setTimeout(function(){$("#country-bill").change()},100),"state"==a&&setTimeout(function(){$("#WC_State_DropDown-bill").val(sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a])},300)):"isRfcNeeded"==a&&"MX"==$("#country").val()?"yes"==o?($("#isRfcNeeded").attr("checked",!0),$("#rfc_section").removeClass("wcs-hide"),$("#is_rfc_needed").val("yes"),$("#isRfcNeeded").val("true"),"MX"==$("#country").val()&&$("#zip_code-bill").trigger("keyup")):"no"==o&&($("#isRfcNeeded").attr("checked",!1),$("#rfc_section").addClass("wcs-hide"),$("#is_rfc_needed").val("no"),$("#isRfcNeeded").val("false")):"sameAsDeliveryAddress"==a?"yes"==n?($("#sameAsDeliveryAddress").attr("checked",!0),$("#same_as_checked").val("yes"),$("#isSameAddress").val("true"),"MX"==$("#country").val()&&$("#zip_code-bill").trigger("keyup")):"no"==n&&($("#sameAsDeliveryAddress").attr("checked",!1),$("#billing_address_section").removeClass("wcs-hide"),$("#same_as_checked").val("no"),$("#isSameAddress").val("false")):"checkbox"==$(this).attr("type")?"true"==sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a]&&$(this).attr("checked","checked"):"next"!=$(this).attr("name")&&"bill"!=r&&(void 0!==$("#country_value").val()&&"CN"==$("#country_value").val()&&("city"==$(this).attr("id")?populateChinaCityFromSessionStorage($(this),sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a]):"address_line_two"==$(this).attr("id")&&populateChinaDistrictFromSessionStorage($(this),sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a])),$(this).val(sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a]),"email1"==a&&$('div.help-us-offline form#help_contact_us_form input[name="email"]').val(sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a]),"phone1"==a&&$('div.help-us-offline form#help_contact_us_form input[name="mobile_number"]').val(sessionStorage["rayban."+$("#store").val()+".address."+i+"."+a])):0<$("#selectAdd").length&&(null===storedval||void 0===storedval)&&"billing-country"!=$(this).attr("id")&&($(this).val()||$(this).val(""))}),"yes"==e&&(document.cookie="TaxChange=yes; path=/; expires=Thu, 01-Jan-1970 00:00:01 GMT")):"yes"!=sessionStorage.deliveryAddressStore&&(sessionStorage.deliveryAddressStore="yes",""!==$("#zipCode").val()&&"MX"==$("#country").val()&&""!==$("#zip_code-bill").val()&&$("#zip_code-bill").trigger("keyup")),$("#isDeliveryAddressEdited").val(sessionStorage["rayban."+$("#store").val()+".address.delivery.isDeliveryAddressEdited"])},window.populateAddressToLocalStorage=function(e){var t=$(e).val(),a=void 0!==$(e).attr("name")?$(e).attr("name"):$(e).attr("id"),r=a?a.split("-")[0]:"",n=a?a.split("-")[1]:"";"stateBill"==r&&(r="state",n="bill"),"email1"==r&&$('div.help-us-offline form#help_contact_us_form input[name="email"]').val(t),"phone1"==r&&$('div.help-us-offline form#help_contact_us_form input[name="mobile_number"]').val(t);var o="bill"==n?"billing":"delivery";sessionStorage["rayban."+$("#store").val()+".address."+o+"."+r];sessionStorage["rayban."+$("#store").val()+".address."+o+"."+r]=t,"zipCode"==r&&setTimeout(function(){"bill"!=n?("CN"==$("#country").val()?(sessionStorage["rayban."+$("#store").val()+".address."+o+".city"]=$.trim($("#city option:selected").text()),sessionStorage["rayban."+$("#store").val()+".address."+o+".address2"]=$.trim($("#address_line_two option:selected").text())):sessionStorage["rayban."+$("#store").val()+".address."+o+".city"]=$("#city").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".state"]=$("#WC_State_DropDown").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".country"]=$("#billing-country").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field2"]=$("#field2").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field3"]=$("#field3").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field4"]=$("#mobilePhone1").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field5"]=$("#mobilePhone1Country").val()):(sessionStorage["rayban."+$("#store").val()+".address."+o+".city"]=$("#WC_PaymentInfoForm_city_1").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".state"]=$("#WC_State_DropDown-bill:selected").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".country"]=$("#country-bill").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".countrytext"]=$("#country-bill:selected").text(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field2text"]=$("#WC_PaymentInfoForm_addressField2_1").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field3text"]=$("#WC_PaymentInfoForm_addressField3_1").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field4text"]=$("#WC_PaymentInfoForm_mobilePhone1_1").val(),sessionStorage["rayban."+$("#store").val()+".address."+o+".field5text"]=$("#WC_PaymentInfoForm_mobilePhone1Country_1").val())},1e3)},$("#delivery_information_form").on("blur change","input[type != hidden], select, #delivery_information_form textarea",function(){window.populateAddressToLocalStorage(this)}),$("#delivery_information_form .wcs-label-check").on("click",function(){var e,t,a;0<$(this).find("#sameAsDeliveryAddress").length?("GB"==(e=$("#country-bill").val())||"FR"==e||"DE"==e||"BE"==e||"AT"==e||"PT"==e||"NL"==e||"PL"==e||"SE"==e||"DK"==e||"NO"==e||"FI"==e||"CH"==e?$("#stateDiv").hide():$("#stateDiv").show(),setTimeout(function(){sessionStorage["rayban."+$("#store").val()+".address.billing.same"]=!0===$("#sameAsDeliveryAddress").is(":checked")?"yes":"no"},100)):0<$(this).find("input[type = checkbox]").length&&(t=void 0!==$(this).find("input[type = checkbox]").attr("name")?$(this).find("input[type = checkbox]").attr("name"):$(this).find("input[type = checkbox]").attr("id"),a=$(this).find("input[type = checkbox]"),setTimeout(function(){sessionStorage["rayban."+$("#store").val()+".address.delivery."+t]=$(a).is(":checked")},200))}),0<$("#pgTemplate").length&&"DeliveryPage"==$("#pgTemplate").val()&&(e=0<$("#selectAdd").length?$("#selectAdd").prop("selectedIndex"):0,getCookie("deliveryAddressStore"),$("#selectAdd option").length<2?$("#delivery_information_form #selectAdd").closest(".wcs-row").hide():$("#delivery_information_form #selectAdd").closest(".wcs-row").show(),e?0<e&&"yes"!==Rayban.storage.fetch("deliveryAddressStore")?($("#delivery_information_form input[type != hidden][type != submit],#delivery_information_form select, #delivery_information_form textarea").each(function(e){populateAddressToLocalStorage(this)}),Rayban.storage.save("deliveryAddressStore","yes"),Rayban.storage.save("guest","no")):(Rayban.storage.save("guest","no"),populateAddressFromLocalStorage()):(Rayban.storage.save("guest","yes"),populateAddressFromLocalStorage()),t=$("#delivery_information #country-bill option:selected").data("zipregex"),$("#zip_code-bill").attr("pattern",t)),0<$("#pgTemplate").length&&"PaymentPage"==$("#pgTemplate").val()&&Rayban.storage.save("deliveryAddressStore","no"),$(".shipping-returns-link").on("click",function(){$("#wcs-shippingreturns-popup-div").show();var e=$("#wcs-shippingreturns-popup-div"),t=$(document).scrollTop(),a=$(window).height(),r=e.height();a<r+40&&((t-=r+40-a)<1&&(t=0),$(document).scrollTop(t));var n=($(window).width()-e.width())/2,o=($(window).height()-e.height())/2+t,o=r<a?(a-r)/2+t:t+40;e.css({left:n,top:o});var i=$("body"),s=$(document).height(),l=$(".wcs-fadeout-full");$(l).removeClass("wcs-hide"),$(i).is("ipad")||$(i).is("android")?$(l).css({"min-height":"100%","z-index":"101"}):$(l).css({height:s+"px","z-index":"101"})});function a(){var e=$(".cc-saved-item").not(".selected,.expired,.wcs-hide").first();r(e)}var r=function(e){var t=$(".creditcard-panel--new");if(e.is(".selected,.expired,.wcs-hide"))return!0;$(".cc-add-new-card-button").removeClass("wcs-hide"),t.addClass("wcs-hide"),$(".cc-saved-item").removeClass("selected"),e.addClass("selected"),$('input[name="payWithSubscription"]').val(e.attr("data-cc-payment-token-id")),n(e.find(".cc-saved-cvv-placeholder"));var a=e.attr("data-cc-brand");if(void 0!==a){var r="";switch(a.toLowerCase()){case"amex":r="378282246310005";break;case"diners club":r="30569309025904";break;case"discover":r="6011111111111117";break;case"jcb":r="3530111333300000";break;case"master card":r="5555555555554444";break;case"visa":r="4111111111111111";break;case"elo":r="5066991111111118";break;case"hipercard":r="6062828888666688"}}t.find('[name="expire_month"]').val(e.attr("data-cc-exp-month")),t.find('[name="expire_year"]').val(e.attr("data-cc-exp-year")),t.find('[name="cc_brand"]').val(a),t.find('[name="account"]').val(r)},n=function(e){var t=$(".cc-cvv"),a=t.closest(".wcs-row");t.find(".user-input-field").val("").removeClass("ui-state-error"),a.css("color","").find(".wcs-error-message").removeClass("wcs-show").removeClass("wcs-inline-block"),e.append(t)};$(".cc-add-new-card-button").on("click",function(){var e;e=$(".creditcard-panel--new"),$(".cc-saved-item").removeClass("selected"),$(".cc-add-new-card-button").addClass("wcs-hide"),e.removeClass("wcs-hide"),$('input[name="payWithSubscription"]').val(""),n($(".cc-new-cvv-placeholder")),e.find('[name="expire_month"]').val(""),e.find('[name="expire_year"]').val(""),e.find('[name="cc_brand"]').val(""),e.find('[name="account"]').val("").trigger("input")}),$(".cc-saved-item").on("click",function(e){return 0<$(e.target).closest(".cc-saved-cvv-placeholder,.cc-saved-delete").size()||void r($(this))}),$(".cc-saved-delete").on("click",function(){var r=$(this).closest(".cc-saved-item"),e=r.attr("data-cc-payment-token-id");r.addClass("wcs-hide");var t={paymentTokenId:e};$.ajax({type:"POST",url:"/webapp/wcs/stores/servlet/AjaxDeletePaymentTokenCmd",data:t,success:function(e){var t;void 0!==e?1===(t=JSON.parse(e)).deletedRowsCount?(Rayban.utilities.debug("AjaxDeletePaymentTokenCmd SUCCESS",t),a()):(r.removeClass("wcs-hide"),Rayban.utilities.debug("AjaxDeletePaymentTokenCmd ERROR: deletedRowCount !== 1",t)):(r.removeClass("wcs-hide"),Rayban.utilities.debug("AjaxDeletePaymentTokenCmd ERROR: empty response",e))},error:function(e,t,a){r.removeClass("wcs-hide"),Rayban.utilities.debug("AjaxDeletePaymentTokenCmd AJAX ERROR",a)}})}),0<$(".creditcard-panel--saved").size()&&a()}window.klarna_link=function(){$("a.klarna_link").click(function(e){e.stopPropagation(),e.preventDefault()})};var subscriptions=function(){$.subscribe("sixteenDigitEnableData",function(){var e,t=$.trim($.payment.cardType($("#WC_PaymentInfoForm_creditCardNumber_1").val())),a=$("#noOfInstallmentsBR"),r=$("#WC_PaymentInfoForm_creditCardNumber_1"),n="visa"==t||"discover"==t||"mastercard"==t||"hipercard"==t||"elo"==t,o="amex"==t,i="dinersclub"==t;0<r.length&&(a.attr("disabled","disabled"),e=r.val().replace(/\s/g,""),n&&15<e.length||o&&14<e.length||i&&13<e.length?a.removeAttr("disabled"):(a.attr("disabled","disabled"),$("#noOfInstallmentsBR").is(":disabled")&&hide_error($("#noOfInstallmentsBR"))))}),$.publish("sixteenDigitEnableData"),$("#WC_PaymentInfoForm_creditCardNumber_1").on("input paste change",function(){$.publish("sixteenDigitEnableData")})};function bindArrowClickFunction(){$("body").off("click","#needHelpContent"),$("body").on("click","#needHelpContent",function(){$("#needhelpContactUsForm").slideToggle("slow",function(){var e;$("#needhelpContactUsForm").is(":visible")?($(".need-help-arrow-toggle").css("background-position","-57px -902px"),e=Rayban.storage.fetch("DeliveryAddress",{stringify:!0})||$(".guestuser-address").data()||{},$("#wcs-customerEmailId").val(e.email),$("#wcs-customerTelephoneNumber").val(e.telephone),validateForms($("#contact_us_form"))):$(".need-help-arrow-toggle").css("background-position","-42px -902px")})})}function get24Hr(e){return parseInt(moment(e,["h:mm A"]).format("HH:mm").split(":").join(""))}function getCurrentTime(){var e=$("#timeZone").val();if(void 0!==e&&"undefined"!==e&&""!==e)return moment().tz(e).format("hh:mm A")}function callAfterpay(e,t,a){var r={};r.orderId=e,r.redirectConfirmUrl=t,r.redirectCancelUrl=a,r.isSameShippingAndBillingAddress="true",r.billingAddressId=$("input[name=billtoAddressId]").val(),r.langId="-47",$.ajax({type:"POST",url:"InitiateAfterpayPayment",data:r,success:function(e){console.info("InitiateAfterpayPayment SUCCESS");var t=JSON.parse(e);void 0!==e&&void 0!==t.token&&void 0!==t.countryCode?(AfterPay.initialize({countryCode:t.countryCode}),AfterPay.redirect({token:t.token})):console.error("Afterpay token could not be found on InitiateAfterpayPayment serviceResponse, aborting payment...")},error:function(e,t,a){console.error("InitiateAfterpayPayment ERROR")}})}function redirectCartUrl(){var e=$("#OrderId").val(),t=$("#shipModeId2").val(),a=$("#expRedirectUrl").val(),r={};r.orderId=e,r.shipModeId=t,$.ajax({type:"POST",url:"AjaxShipChargeUpdate",data:r,async:!1,success:function(e){$(location).attr("href",a)}})}window.NewPaymentMethods=function(){var t,a,r,n,e,o="",s=!1,l=!1;function d(e){"14"==e?($("#klarna_child_14days,#klarna_14_days_consent").show(),$("#klarna_14").prop("checked",!0),$("#klarna_account_1").hide()):($("#klarna_child_14days,#klarna_14_days_consent").hide(),$("#klarna_14").prop("checked",!1),$("#klarna_account_1").show(),$("#klarna_part").prop("checked",!0))}function c(){if(null!==$("#klarna_payment_options").html()){var e=$("#klarnaLocale").val(),t=$("#klarnaEid").val(),a=$("#klarna_payment_options").children();for(i=0;i<a.length;i++)if(0<a[i].id.indexOf("invoice"))m=t,v=e,new Klarna.Terms.Invoice({el:"klarna_terms_invoice_1",eid:m,locale:v,type:"desktop",linkClassName:"klarna_terms"});else{var r=a[i].children;for(j=0;j<r.length;j++){var n=r[j].id.lastIndexOf("_"),o=r[j].id.substr(n+1);0<r[j].id.indexOf("account")?(c=t,p=e,u=o,new Klarna.Terms.Account({el:"klarna_terms_account_1_"+u,eid:c,locale:p,type:"desktop",linkClassName:"klarna_terms"})):0<r[j].id.indexOf("special")&&(s=t,l=e,d=o,new Klarna.Terms.Special({el:"klarna_terms_special_1_"+d,eid:s,locale:l,type:"desktop",linkClassName:"klarna_terms"}))}}"de_DE"!=e&&"de_AT"!=e||h(t,e)}var s,l,d,c,p,u,m,v}function h(e,t){new Klarna.Terms.Consent({el:"klarna_consent_1",eid:e,locale:t,type:"desktop",linkClassName:"klarna_link"})}$("#klarna_select_1").click(function(){d("14")}),$("#klarna_select_2").click(function(){var e;l||(l=!0,$("#klarna_consent_1").attr("id","klarna_generated_consent_1"),e=document.getElementById("klarnaLocale").value,h(document.getElementById("klarnaEid").value,e)),d("part"),klarna_link()}),$($cached.payment_mode_radio).off("change").on("change",function(e){$(".box").hide(),$(this).attr("Checked")&&(t=$(this).attr("value").toLowerCase(),a=$("."+t+"-options"),r=$("."+t+"-btn"),n=$(".klarna-info"),$(".box").not(a).hide(),$(".box").not(r).hide(),$(".box").not(n).hide(),$(a).show(),$(r).show(),$(n).show(),d("14"),s||(s=!0,c(),klarna_link())),o=$(this),setupLabel(o)}).change(),(e=$("input[type=radio][name=payment_mode_radio]:checked")).length&&(t=e.val().toLowerCase(),a=$("."+t+"-options"),r=$("."+t+"-btn"),$(".box").not(a).hide(),$(".box").not(r).hide(),$(a).show(),$(r).show())},globalFunctions(),window.loadNeedHelpSection=function(){$("#needHelpContact .contact-number").text($("#customerCareNumber").val());var e="",t="",a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()],t="Saturday"==a||"Sunday"==a?"Saturday"==a&&"Yes"==$("#saturdayWorking").val()?(e=$("#startingHourSaturday").val(),$("#endingHourSaturday").val()):"Sunday"==a&&"Yes"==$("#sundayWorking").val()?(e=$("#startingHourSunday").val(),$("#endingHourSunday").val()):e="":(e=$("#startingHourWeekday").val(),$("#endingHourWeekday").val()),r=getCurrentTime();""!==e&&void 0!==e&&""!==t&&void 0!==t&&get24Hr(r)>get24Hr(e)&&get24Hr(r)<get24Hr(t)?($(".wcs-right-section").removeClass("wcs-hide"),$("#needHelpContact").removeClass("wcs-hide"),$("#needHelpContent .need-help-arrow-toggle").addClass("wcs-hide")):(bindArrowClickFunction(),$(".wcs-right-section").addClass("wcs-hide"),$("#needHelpContact").addClass("wcs-hide"),$("#needHelpContent .need-help-arrow-toggle").removeClass("wcs-hide"))},0<$(".wcs-shipping-mode").length&&($(".wcs-shipping-mode").hide(),$(window).load(function(){$(".wcs-shipping-mode").show()})),$(window).load(function(){$("#rb-exp-date").on("keyup focusout blur",function(e){var t,a,r,n;8!=e.keyCode&&(2==$(this).val().length&&$(this).val($(this).val()+"/"),2===(n=(r=$(this).val()).split("/"))[0].length&&$("#exp-month").val(n[0]),t=(new Date).getFullYear().toString().substring(0,2),2===n.length&&2===n[1].length&&$("#exp-year").val(t+n[1]),$(this).val().length<5&&0<$(this).val().length?($("#exp-year").val("1900"),$("#rb-exp-date").addClass("ui-state-error").parent().parent().parent().parent().addClass("error-container").addClass("rb-red-fg").removeClass("valid-container"),$("#rb-exp-date").parent().parent().find(".wcs-error-message.new-error-style").addClass("wcs-inline-block")):($("#rb-exp-date").removeClass("ui-state-error").parent().parent().parent().parent().removeClass("error-container").removeClass("rb-red-fg"),$("#rb-exp-date").parent().parent().find(".wcs-error-message.new-error-style").removeClass("wcs-inline-block"))),3==$(this).val().length&&""!=(n=(r=$(this).val()).split("/"))[1]&&(t=r.substring(0,2),a=r.substring(3,2),$(this).val(t+"/"+a)),3<$(this).val().length&&void 0===(n=(r=$(this).val()).split("/"))[1]&&($("#rb-exp-date").addClass("ui-state-error").parent().parent().parent().parent().addClass("error-container").addClass("rb-red-fg").removeClass("valid-container"),$("#rb-exp-date").parent().parent().find(".wcs-error-message.new-error-style").addClass("wcs-inline-block"))}),$(".wcs-custom-bag").removeClass("wcs-custom-bag-loading")}),$(document).ready(function(){function e(){var e=$("#storeId").val();return void 0===e&&(e=$("#shp_storeId").val()),"lastCheckoutPageName_"+e}$("body").on("focusout","#city,#WC_PaymentInfoForm_city_1",function(){var e,t,a=$(this),r=$("#country_value").val(),n=$("#country").val(),o=void 0===r?n:r;"CN"!==o&&""!==(t=(e=a).val())&&/[\u4E00-\u9FA5\uF900-\uFA2D]+/.test(t)&&("city"==e.attr("id")?$(".delivery-info-error").show():$(".billing-info-error").show(),e.parents(".wcs-row").find(".wcs-error-message").addClass("wcs-show"),e.parents(".wcs-row").css("color","#EC1E24"),0===e.parents(".wcs-row").find(".exclamatory").length&&e.parents(".wcs-row").append('<span class="exclamatory">!</span>'),e.parents(".wcs-row").find(".exclamatory").show(),e.removeClass("ui-state-valid").addClass("ui-state-error"),e.focus().val(""))}),$(".delivery-information-note-red").is(":visible")&&($("#ForterDecline").length||Rayban.analytics.proceedToPaymentError("Incorrect data")),$("body").on("click",".wcs-label-check:not(.wcs-inactive)",function(e){$(this).hasClass("wcs-c-on")&&$(this).next().removeClass("wcs-inline-block")}),$("#WC_PaymentInfoForm_expireMonth_1, #WC_PaymentInfoForm_expireYear_1").change(function(e){$("#WC_PaymentInfoForm_expireMonth_1").hasClass("ui-state-valid")&&$("#WC_PaymentInfoForm_expireYear_1").hasClass("ui-state-valid")&&$(this).parent().parent().find(".wcs-error-message.new-error-style").removeClass("wcs-inline-block")}),$("#zip_code,#zip_code-bill").on("focus",function(){"zip_code"==$(this).attr("id")?$(".delivery-info-error").hide():$(".billing-info-error").hide()}),"SE"===$("#country_value").val()&&(0<$("#zip_code").length||0<$("#zip_code-bill").length)&&$("#zip_code,#zip_code-bill").on("keypress change",function(){$(this).val(function(e,t){return t.replace(/\W/gi,"").replace(/(.{3})/g,"$1 ")})}),$("#city,#WC_PaymentInfoForm_city_1").live("input",function(){var e=$(this);0<e.val().length&&("city"==e.attr("id")?$(".delivery-info-error").hide():$(".billing-info-error").hide(),e.parents(".wcs-row").find(".wcs-error-message").removeClass("wcs-inline-block"),e.parents(".wcs-row").removeAttr("style"),e.removeClass("ui-state-error").addClass("ui-state-valid"))});var t=$("#country_value").val();"CN"!=t&&"KR"!=t&&($("#storeId").val(),"DeliveryPage"!==$("#pgTemplate").val()&&"PaymentPage"!==$("#pgTemplate").val()||loadNeedHelpSection(),$.cookie("isCSRSession")?$.removeCookie(e(),{path:"/"}):("DeliveryPage"===$("#pgTemplate").val()&&(document.cookie=e()+"=DeliveryDetailsView;path=/;"),"Y"===$("#isVirtualGiftCardPage").val()&&(document.cookie=e()+"=DeliveryDetailsView;path=/;"),"PaymentPage"===$("#pgTemplate").val()&&(document.cookie=e()+"=PaymentDetailsView;path=/;"))),subscriptions(),$("#payment_confirm_afterpay").off("click").on("click",function(){callAfterpay($("#payment_confirm_afterpay").data("order-id"),$("#payment_confirm_afterpay").data("confirm-url"),$("#payment_confirm_afterpay").data("cancel-url"))})}),$("#WC_State_DropDown-bill").on("change",function(e){$("#state-bill").val(e.target.value)}),function(e,p){e.myAccount=new function(){function d(e,t){var a,r="";return t&&(-1!=(a=t).indexOf(e)&&(r=(a=a.substring(a.indexOf(e))).split("&")[0].split("=")[1]),-1!=r.indexOf("#")&&(r=r.split("#")[0])),r}function e(){var e=p(".wcs-status-shipped-rightContent").attr("data-attr");p(".wcs-status-shipped-leftContent").attr("data-text")==e&&p(".wcs-status-shipped-leftContent").addClass("wcs-trackOrder-shipped"),p(".wcs-account-switchDetails").off("click").on("click",function(){reset_editDetail_form(),p("#emailSignUp-inactive").parent().addClass("wcs-hide"),p("#emailSignUp").parent().removeClass("wcs-hide"),p("#wcs-account-changeDetails, #wcs-account-edit-form, #wcs-account-editDetails, #wcs-account-preferences").toggleClass("wcs-hide"),p(".wcs-myPreferences .wcs-label-check").toggleClass("wcs-label-check-edit"),this.init=function(){return this}}),p(".wcs-accont-cancelEdit").off("click").on("click",function(){var e,t=p("#wcs-account-firstName").html(),a=p("#wcs-account-lastName").html(),r=p("#wcs-account-phoneNumber").html(),n=p("#wcs-account-dob").html();""!==n&&(e=p.trim(n).split("/"),dob_values=p.trim(n).split("-"),3===dob_values.length&&(p("#wrapper4val").val(parseInt(dob_values[0])),p("#wrapper5val").val(parseInt(dob_values[1])),p("#wrapper6val").val(parseInt(dob_values[2])))),p("#emailSignUp").is(":checked")?p("#emailSignUp").attr("checked","checked").parent().addClass("wcs-c-on"):p("#emailSignUp").removeAttr("checked").parent().removeClass("wcs-c-on"),p("#emailSignUp-inactive").parent().removeClass("wcs-hide"),p("#emailSignUp").parent().addClass("wcs-hide"),p("#wcs-account-edit-form input[name='firstName']").val(t),p("#wcs-account-edit-form input[name='lastName']").val(a),p("#wcs-account-edit-form input[name='phone1']").val(r),""!==e?(p("#wcs-month-load").val(e[0]),p("#wcs-day-load").val(e[1]),p("#wcs-year-load").val(e[2])):(p("#wcs-month-load").val(p("#wcs-dob_month").val()),p("#wcs-day-load").val(p("#wcs-dob_day").val()),p("#wcs-year-load").val(p("#wcs-dob_year").val())),p("#wcs-account-changeDetails, #wcs-account-edit-form, #wcs-account-editDetails, #wcs-account-preferences").toggleClass("wcs-hide"),p(".wcs-myPreferences .wcs-label-check").toggleClass("wcs-label-check-edit"),p("#wcs-account-edit-form input[type='radio']").removeClass("ui-state-valid"),p("#wcs-account-edit-form input[type='radio']").parent().removeClass("wcs-r-on"),p("#wcs-account-edit-form input[type='radio'][checked='checked']").addClass("ui-state-valid"),p("#wcs-account-edit-form input[type='radio'][checked='checked']").parent().addClass("wcs-r-on")}),window.cancel_link=function(){p(".wcs-quick-buy-lightbox a.wcs-myOrder-status-link,.wcs-quick-buy-lightbox .wcs_close_lightBox").off("click").on("click",function(){p(this).closest(".wcs-quick-buy-lightbox").children("span.wcs-close-btn").trigger("click"),p(this).closest(".wcs-quick-buy-lightbox").find(".wcs-row").find("input").removeClass("ui-state-error")})},cancel_link(),p(".wcs-myOrder-status-details").off("click").on("click",function(){var t,a,e,r,n,o=p(this).attr("data-text"),i=p(this).attr("id"),s=p(this).parent().parent().attr("orderId"),l=p("#"+o).attr("ajaxLoaded");"wcs-myOrder-viewDetails"==i&&"false"==l?(t=s,a=o,e=d("storeId",location.href),r=d("catalogId",location.href),(n={}).orderId=t,n.storeId=e,n.catalogId=r,p.ajax({type:"POST",url:"OrderItemDetailsView",data:n,success:function(e){p("#wcs_orderHistory_viewDetails_"+t).html(e),p("#wcs_orderHistory_viewDetails_"+t).attr("ajaxLoaded","true"),p(".wcs-myOrder-status-details[data-text="+a+"]").toggleClass("wcs-hide"),p(".wcs-orderHistory-viewDetails[id="+a+"]").toggleClass("wcs-hide"),p(".wcs-myOrder-details-content.wcs-myOrder-history-content[data-attr="+a+"]").toggleClass("wcs-hide"),show_light_box(),p(".wcs-icon.wcs-info.wcs-tip").hover(function(e){p(this).children("p").toggleClass("wcs-hidden");var t=p(this).children("p:not('.wcs-hide')").height()/2,a=12-t;p(this).children("p").css("top",a),p(this).children("p").children("span.wcs-notification-arrow").css("top",t-10)}),p(".wcs-myorders-cancel-order-link").off("click").on("click",c),p(".wcs-myorders-re-order-link").off("click").on("click",function(){var e=p(this).attr("data-order");p("#wcs-re-order-form input[name=fromOrderId]").val(e),p("#wcs-re-order-form input[name=reOrderId]").val(e),p("#wcs-re-order-form").submit()}),openLinksInNewTab(),0<p(".D_Payment_ViewPickupBtnOverlay").length&&deliveryObj.viewOrderDetailsAjax()},error:function(e,t,a){}})):(p(".wcs-myOrder-status-details[data-text="+o+"]").toggleClass("wcs-hide"),p(".wcs-orderHistory-viewDetails[id="+o+"]").toggleClass("wcs-hide"),p(".wcs-myOrder-details-content.wcs-myOrder-history-content[data-attr="+o+"]").toggleClass("wcs-hide"),0<p(".D_Payment_ViewPickupBtnOverlay").length&&deliveryObj.viewOrderDetailsAjax()),prevOrderId=p("#printPrevOrderId").val(),""===prevOrderId?(p("#printPrevOrderId").val(s),p("#wcs_print_preview").attr("id","wcs_print_preview_"+s)):(p("#wcs_print_preview_"+prevOrderId).attr("id","wcs_print_preview_"+s),p("#printPrevOrderId").val(s))}),p(".wcs-myOrder-status-details").parent(".wcs-myOrder-status-title").unbind("click").click(function(e){e.target==this&&p(this).find(".wcs-myOrder-status-details:visible").click()}),p(".wcs-order-history-circle").off("click").on("click",function(){var e=p(this).parent().attr("data-attr");p(".wcs-myOrder-status-viewDetails[data-text="+e+"]").trigger("click")}),p(".wcs-account-edit-save").off("click").on("click",function(){var e,t,a,r,n,o,i,s,l;p(this).hasClass("wcs-btn-disable")||(e=p("#wrapper4val").val(),t=p("#wrapper5val").val(),a=p("#wrapper6val").val(),r=calculateAgeUsingDate(t,e,a),n=parseInt(p("#wcs-dob").attr("data-age-limit"))||18,p("#wcs-dob-subscribe-error").removeClass("wcs-show").hide(),r<n?p("#wcs-dob-error").addClass("wcs-show").show():p("#wcs-dob-error").removeClass("wcs-show").hide(),""===e||""===t||""===a?p("#wcs-dob").remove():(o=a+"-"+t+"-"+e,p("#wcs-dob").val(o)),i=p("#wcs-EmailPrefVal").val(),s=p("#curentTime").val(),p("#userType").val(),"null"!=i?p("#emailSignUp").is(":checked")?(p("#emailSignUp-inactive").attr("checked","checked").parent().addClass("wcs-c-on"),p("#emailTimeStamp").val(s),p("#emailSubs").val(1)):(p("#emailSignUp-inactive").removeAttr("checked").parent().removeClass("wcs-c-on"),p("#emailTimeStamp").val(s),p("#emailSubs").val(0)):p("#emailSignUp").is(":checked")?(p("#emailSignUp-inactive").attr("checked","checked").parent().addClass("wcs-c-on"),p("#emailTimeStamp").val(s),p("#emailSubs").val(1)):(p("#emailSignUp-inactive").removeAttr("checked").parent().removeClass("wcs-c-on"),p("#emailTimeStamp").remove(),p("#emailSubs").remove()),p("#profilingConsent_check").is(":checked")?p("#profilingConsent").val(1):p("#profilingConsent").val(0),p("#wcs-dob-error").is(":visible")||((l=p("#wcs-account-edit-form")).find("input:text.required:visible").trigger("blur"),show_error(l.find("input.ui-state-error")),l.find(".wcs-dropdown-validation").length&&show_dropDown_error_message(l.find(".wcs-dropdown-validation")),l.find(".ui-state-error").length?p("#wcs-save").addClass("wcs-btn-disable"):p("#wcs-account-edit-form").submit()))}),p(".wcs-myorders-cancel-order-link").off("click").on("click",c),p(".wcs-myorders-re-order-link").off("click").on("click",function(){var e=p(this).attr("data-order");p("#wcs-re-order-form input[name=fromOrderId]").val(e),p("#wcs-re-order-form input[name=reOrderId]").val(e),p("#wcs-re-order-form").submit()})}function c(){function e(){var e=""!==r.val();return r.toggleClass("ui-state-error",!e),e}var t,a=p("#wcs_myOrder_cancelOrder").attr("data-order-lighbox"),r=(p("#wcs_myOrder_cancelOrder").attr("data-amout-lighBox"),p("#county").val(),p(".wcs-myOrders-cancellation-reason"));r.data("change-event-attached")||(r.data("change-event-attached",!0),r.on("change",function(){e()})),e()&&(t=p("#wcs-cancel-order-form"),0<p("a[data-forcerefund='true']").length&&(t.find("input[name=forcedCancel]").val("true"),t.find("input[name=forcedCancelWithRefund]").val("true")),t.find("input[name=orderId]").val(a),t.find("input[name=cancelReason]").val(r.val()),t.submit())}function a(){p("div.wcs-myOrder-details-content").each(function(){var t=p(this).find("div.wcs-myOrder-rows");p(this).find("div.wcs-myOrder-status-section").each(function(e){t[e]&&p(this).height(t.eq(e).height()-20)})})}return window.reset_editDetail_form=function(){p("#wcs-save").removeClass("wcs-btn-disable"),p("#wcs-dob-error").hide(),p("#wcs-dob-subscribe-error").hide(),p("div.wcs-months-dd").find(".wcs-red-border").removeClass("wcs-red-border"),p("#wcs-account-edit-form .wcs-row").removeAttr("style"),p("#wcs-account-edit-form .wcs-error-message").removeClass("wcs-show"),p("#wcs-account-edit-form input").removeClass("ui-state-error h5-active"),p("#wcs-account-edit-form .wcs-custom-dropdown-container").removeClass("ui-state-error")},window.zipCodeCAValidation=function(){if(0<p("#zip_code").length){if("billingZipCode"==p("#zip_code").attr("name")&&"CA"!=p("#billing-country").val().toUpperCase())return!0;trimmedZip=p("#zip_code").val().replace(/ /g,""),p("#zip_code").val(trimmedZip.substring(0,3)+" "+trimmedZip.substring(3,6))}return!0},p(".wcs-en_CA #delivery_information_form,.wcs-fr_CA #delivery_information_form").submit(function(){return zipCodeCAValidation()}),this.init=function(){var t;return e(),0<p("div.wcs-myOrder-details-content").length&&(a(),p(window).on("load",function(){a()})),p(".wcs-user-register-wrapper .wcs-close-btn").off("click").on("click",function(){Assign_value(p("#userEmail"),p("#guestUserEmail")),p(".wcs-guest-checkout-container").removeClass("wcs-hide"),p(".wcs-user-register-wrapper").addClass("wcs-hide"),p(".wcs-create-account-link").css("visibility","visible"),hide_form_errors("user_register_form"),p(".wcs-note-red").hide()}),p(".wcs-create-account-link").off("click").on("click",function(){p("form").find("input[type=submit]").removeClass("wcs-btn-disable").attr("disabled",!1),Assign_value(p("#guestUserEmail"),p("#userEmail")),Assign_value(p("#guestUserEmail"),p("#email1")),p(".wcs-user-register-wrapper").removeClass("wcs-hide"),p(".wcs-note-red").hide(),$cached.forgot_password_form.removeClass("wcs-hide wcs-show").hide()}),p("#wcs-createAcct-flag").val()&&p(".wcs-user-register-wrapper").removeClass("wcs-hide"),Rayban&&Rayban.OverlayManager&&0<(t=p(".order-cancel-result-trigger")).size()&&((new Rayban.OverlayManager).setupOverlay(t[0]),t[0].RBOverlay.open(),p(".rb-overlay-close-btn").click(function(e){t[0].RBOverlay.close()})),this},this.init()},p(function(){window.show_forgot_password_form=function(){p('form[name="forgot_password_form"]').removeClass("wcs-hide wcs-show").show(),p("div.wcs-forget-password-success").addClass("wcs-hide"),p("div.wcs-forget-password-elements").removeClass("wcs-hide")},p("#forgot_password").off("click").on("click",function(){show_forgot_password_form(),p(this).css("color","#666"),p(".wcs-user-register-wrapper").addClass("wcs-hide"),""!==p("#loginEmail").val()&&(p("#forgotPassword_email").val(p("#loginEmail").val()),p("#forgotPassword_email").blur())}),p("#user_login_form").find("#wcs_logon_password").off("keyup"),p("#user_login_form").find("#wcs_logon_password").on("input",function(){var e=/^.*(?=.{7})(?=.*\d)(?=.*[a-zA-Z]).*$/.test(p(this).val());e&&p("#user_login_form").find("#loginEmail").hasClass("ui-state-valid")?p("#login_submit").addClass("ui-state-valid"):e||p("#login_submit").removeClass("ui-state-valid")})}),window.openChatWindowDirect=function(){show_full_fadeout_1();var e=p("#wcs-support-chat-direct-popup"),t=.5*p(window).width(),a=.75*p(window).height(),r=e.css({height:a,width:t}).find("iframe").css({height:a,width:t});r.attr("src",r.data("src")),display_center_1(e),e.show()};var t=p("div.wcs-fadeout-full");p("#delivery_information_form_add #wcs-addAddr, .wcs-details-addNewAddress.wcs-modal-box").off("click").on("click",function(){0<p("#delivery_information_form_add .wcs-error-message.wcs-inline-block").length&&window.setTimeout(function(){t.height(p(document).height())},10)}),p("#delivery_information_form_add input.required").off("change").on("change",function(){0<p("#delivery_information_form_add .wcs-error-message.wcs-inline-block").length&&window.setTimeout(function(){t.height(p("#wcs_myDetails_addHomeAddress").height()+p(".wcs-myDetails-lightbox-form-button").height())},10)})}(window.rayban=window.rayban||{},jQuery),$("#expShpCart").die("click").live("click",function(){redirectCartUrl()}),$(function(){"USA"===$("#storeIdentifier").val()&&(selectValue=function(){"CA"===$("#WC_State_DropDown option:selected").val()?$(".prop65-container").addClass("prop65-active"):$(".prop65-container").removeClass("prop65-active")},selectValue(),$("#zip_code").on("keyup",function(){$(".prop65-container").removeClass("prop65-active")}),$("#WC_State_DropDown").on("change",function(){selectValue()}),0<$(".prop65-trigger").size()&&new Rayban.OverlayManager({triggerCssClass:"prop65-trigger"}).initAll())});
//# sourceMappingURL=checkout-main.js.map
