//tealium universal tag - utag.loader ut4.0.202005190941, Copyright 2020 Tealium.com Inc. All Rights Reserved.
if(typeof utag_err=='undefined')var utag_err=[];window._tealium_old_error=window._tealium_old_error||window.onerror||function(){};window.onerror=function(m,u,l){if(typeof u!=='undefined'&&u.indexOf('/utag.')>0&&utag_err.length<5)utag_err.push({e:m,s:u,l:l,t:'js'});window._tealium_old_error(m,u,l)};var utag_condload=false;try{(function(){function ul(src,a,b){a=document;b=a.createElement('script');b.language='javascript';b.type='text/javascript';b.src=src;a.getElementsByTagName('head')[0].appendChild(b)};if((""+document.cookie).match("utag_env_luxottica_ray-ban=(\/\/tags\.tiqcdn\.com\/utag\/luxottica\/[^\S;]*)")){if(RegExp.$1.indexOf("/prod/")===-1){var s=RegExp.$1;while(s.indexOf("%")!=-1){s=decodeURIComponent(s);}s=s.replace(/\.\./g,"");ul(s);utag_condload=true;__tealium_default_path='//tags.tiqcdn.com/utag/luxottica/ray-ban/prod/';}}})();}catch(e){};try{try{}catch(e){utag.DB(e)}}catch(e){};if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000")&&!window.tealium_ext000_WeAreInBeta){window.tealium_ext000_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000"));}
else{var tealium_logContext='preloader';var tealium_logNote='';try{tealium_logContext='preloader tealium_tools';tealium_logNote='';if(!window.jQuery){var jq=document.createElement('script');jq.setAttribute("type","text/javascript");if(window.location.host.match(/ray-ban\.com\.cn/i)){jq.setAttribute("src",'//www.ray-ban.com.cn/wcsstore/RayBanStorefrontAssetStore/desktop/assets/scripts/jquery-1.9.1.min.js');}else if(window.location.host.match(/opsm\.com/i)){jq.setAttribute("src",'//www.opsm.com.au/wcsstore/OPSMStorefrontAssetStore/javascript/vendor/jquery-1.8.0.min.js');}else{jq.setAttribute("src",'//code.jquery.com/jquery-1.9.1.min.js');}
document.getElementsByTagName("head")[0].appendChild(jq);}
var tealium_cookieR=function(name,defau){var parts=("; "+document.cookie).split("; "+name+"=");var res=((parts.length==2)?(parts.pop().split(";").shift()):defau);return res;};var tealium_cookieW=function(name,value,exdays){value=(value||'')+'; ';exdays=exdays||'';if(exdays!==''){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));exdays="expires="+d.toUTCString()+"; ";}
var hostname=window.location.hostname.replace(/^[^.]*/g,'');var code=name+"="+value+exdays+"path=/; domain="+hostname;document.cookie=code;};var tealium_cookieD=function(name){tealium_cookieW(name,'',-1);};var tealium_storageR=function(name,defau){if(window.localStorage||window.sessionStorage){return window.localStorage.getItem(name)||window.sessionStorage.getItem(name)||defau;}
else{return tealium_cookieR(name,defau);}};var tealium_storageW=function(name,value,exp){exp=(exp+'').match(/^(session|forever)$/i)?exp:'session';if(window.localStorage||window.sessionStorage){if(exp=='session'){window.localStorage.removeItem(name);window.sessionStorage.setItem(name,value);}
else{window.sessionStorage.removeItem(name);window.localStorage.setItem(name,value);}}
else{tealium_cookieW(name,value,(exp==='session'?'':365));}};var tealium_storageD=function(name){if(window.localStorage||window.sessionStorage){window.localStorage.removeItem(name);window.sessionStorage.removeItem(name);}
else{return tealium_cookieD(name);}};var tealium_storageIndex=function(){var keys=[];var types=["session","local"];var storage;for(var index in types){storage=window[types[index]+"Storage"];if(storage&&storage.length){for(var key in storage){if(storage.hasOwnProperty(key)){keys.push(key);}}}}
document.cookie.split(/; */).forEach(function(cookie){keys.push(cookie.split('=')[0]);});return keys;};var tealium_clearStorage=function(){var list,index,key;list=tealium_storageIndex();for(index=0;index<list.length;index++){key=list[index];if(typeof key==='string'&&key.match(/^tealium_/)&&(!key.match(/^tealium_log/))&&(!key.match(/^tealium_team/))){tealium_storageD(key);tealium_cookieD(key);}}};var tealium_num2JsStringFormat=function(value,opts){opts=''+opts;if(0||(typeof value==='number'&&isFinite(value))||(typeof value==='string'||value instanceof String)){if(isNaN(parseFloat(value))){return null;}
var num=value.toString();if(0){}
else if(opts.match(/\[price\]/i)){if(num.match(/\.\d{2}$/)){num=num.replace(/[,]/g,'');}
else if(num.match(/,\d{2}$/)){num=num.replace(/[\.]/g,'').replace(',','.');}
else if(num.match(/[,\.]\d{3}$/)){num=num.replace(/[,\.]/g,'');}
return(parseFloat(num).toFixed(2));}
else if(opts.match(/\[rate\]/i)){return num.replace(',','.');}
else{return num;}}
return null;};var tealium_html2json=function(h){try{if(typeof jQuery==='undefined')return false;if(jQuery(h).length>0)return JSON.parse(jQuery(h).html());return false;}catch(e){return false;}};var tealium_textClean=function(t,opts){opts=opts||'';t=t||'';t=t.trim();if(opts.indexOf('[nobreaks]')>-1){t=t.replace(/\r\n|\n|\r/gm,' ');}
if(opts.indexOf('[nomultiplespaces]')>-1){t=t.replace(/\s{2,}|\t+/g,' ');}
if(opts.indexOf('[nospaces]')>-1){t=t.replace(/\s|\t/g,'');}
if(opts.indexOf('[spaces2minus]')>-1){t=t.replace(/ /g,'-');}
return t;};var tealium_text2float=function(text,def){def=(def===undefined)?'':def;text=(text===undefined)?'':text.toString().replace(',','');return(!isNaN(text)&&text!=='')?parseFloat(text):def;};var tealium_text2int=function(text,def){def=(def===undefined)?'':def;text=(text===undefined)?'':text.toString().replace(',','');return(!isNaN(text)&&text!=='')?parseInt(text,10):def;};var tealium_text2camelcase=function(text){if(text===null||typeof text!='string')return'';return(''+text).replace(/^\w|\W\w/g,function($1){return $1.toUpperCase();}).replace(/\s/g,'');};var tealium_array2camelcase=function(arr,sep){if(!Array.isArray(arr))return'';arr=arr.join(sep||' ');return tealium_text2camelcase(arr);};var tealium_stripHtml=function(html){var div=document.createElement("div");div.innerHTML=html;return div.textContent||div.innerText||"";};var tealium_selectText=function(container){if(container.tagName=="INPUT"||container.nodeName=="INPUT"||container.tagName=="TEXTAREA"||container.nodeName=="TEXTAREA"){container.select();}
else{var sel,range;if(window.getSelection&&document.createRange){sel=window.getSelection();range=document.createRange();range.selectNodeContents(container);sel.removeAllRanges();sel.addRange(range);}
else if(document.selection){range=document.body.createTextRange();range.moveToElementText(container);range.select();}
else return false;}
return true;};var tealium_stringRemoveHtmlEntities=function(str){return typeof str==="string"?str.replace(/&#?\w+;/gi,""):str;};var tealium_stringRemoveCsvSeparator=function(str){return typeof str==="string"?str.replace(/[;,]/g,""):str;};var tealium_stringTrim=function(str){return typeof str==="string"?str.trim():str;};var tealium_objMerge=function(destination,source){for(var key in source){if(source.hasOwnProperty(key)){destination[key]=source[key];}}
return destination;};var tealium_objQnt=function(list){if(typeof list!="object"){return-1;}
if(list===null){return-2;}
return(Array.isArray(list))?list.length:Object.getOwnPropertyNames(list).length;};var tealium_objGetEl=function(list,index){var objreturn={error:0,result:{}};if(typeof index!='number'&&typeof index!='string'){objreturn.error=-3;return objreturn;}
var length=tealium_objQnt(list);if(length<0){objreturn.error=length;return objreturn;}
if(typeof index=='number'&&(index<0||(index>=length))){objreturn.error=-4;return objreturn;}
var i=0;for(var key in list){if(list.hasOwnProperty(key)){if(i==index||key==index){objreturn.result=list[key];return objreturn;}else{i++;}}}
objreturn.error=-100;return objreturn;};var tealium_comparisonFiltering={startWith:function(prop,sw){return(typeof prop==="string"&&typeof sw==="string"&&(prop.indexOf(sw)===0));},startWithUpperCase:function(prop){return(typeof prop==="string"&&prop.charAt(0)===prop.charAt(0).toUpperCase());},startWithLowerCase:function(prop){return(typeof prop==="string"&&prop.charAt(0)===prop.charAt(0).toLowerCase());},equalTo:function(prop,sw){return(typeof prop==="string"&&typeof sw==="string"&&(prop===sw));},};var tealium_objFilters=function(obj,filters,comparison){comparison=(comparison!==undefined)?comparison:'startWith';var objreturn={error:0,result:{}};var length_obj=tealium_objQnt(obj);if(length_obj<1){objreturn.error=length_obj;return objreturn;}
var length_filters=tealium_objQnt(filters);if(length_filters<1){objreturn.error=(length_filters==0)?(length_filters):(length_filters-2);return objreturn;}else if(!Array.isArray(filters)){objreturn.error=-5;return objreturn;}
if(typeof comparison!=="string"){objreturn.error=-6;return objreturn;}
objreturn.error=-7;for(var func in tealium_comparisonFiltering){if(tealium_comparisonFiltering.hasOwnProperty(func)){if(func===comparison){objreturn.error=0;break;}}}
if(objreturn.error<0){return objreturn;}
objreturn.result={filters:{},nofilters:obj};for(var key in obj){if(obj.hasOwnProperty(key)){for(var index in filters){if(filters.hasOwnProperty(index)){if(tealium_comparisonFiltering[comparison](key,filters[index])){objreturn.result.filters[key]=obj[key];delete objreturn.result.nofilters[key];}}}}}
return objreturn;};var tealium_comparisonSorting={ascending:function(item1,item2){if((typeof item1)==="string"&&(typeof item2)==="string"){return(item1.toString().localeCompare(item2.toString()));}else if((typeof item1)==="number"&&(typeof item2)==="number"){return(item1-item2);}
return null;},descending:function(item1,item2){if((typeof item1)==="string"&&(typeof item2)==="string"){return(item2.toString().localeCompare(item1.toString()));}else if((typeof item1)==="number"&&(typeof item2)==="number"){return(item2-item1);}
return null;}};var tealium_objSort=function(obj,orderBy,orderKey){orderBy=(orderBy!==undefined)?orderBy:'ascending';orderKey=(orderKey!==undefined)?orderKey:'key';var objreturn={error:0,result:{}};var length_obj=tealium_objQnt(obj);if(length_obj<1){objreturn.error=length_obj;return objreturn;}
if(length_obj===1){objreturn.result=obj;return objreturn;}
if(typeof orderBy!=="string"){objreturn.error=-3;return objreturn;}
objreturn.error=-4;for(var func in tealium_comparisonSorting){if(tealium_comparisonSorting.hasOwnProperty(func)){if(func===orderBy){objreturn.error=0;break;}}}
if(objreturn.error<0){return objreturn;}
if(typeof orderKey!=="string"||(!Array.isArray(obj)&&(!(orderKey==='key'||orderKey==='value')))){objreturn.error=-5;return objreturn;}
if(Array.isArray(obj)){objreturn.result=obj.sort(tealium_comparisonSorting[orderBy]);}else{var arr=[];for(var prop in obj){if(obj.hasOwnProperty(prop)){arr.push({'key':prop,'value':obj[prop]});}}
var arr_sorted=arr.sort(function(item1,item2){return tealium_comparisonSorting[orderBy](item1[orderKey],item2[orderKey]);});for(var index in arr_sorted){if(arr_sorted.hasOwnProperty(index)){objreturn.result[arr_sorted[index].key]=arr_sorted[index].value;}}}
return objreturn;};var tealium_objReplace=function(elem,method){var result={isReplaced:false,elem:elem};if(typeof elem==="object"){for(var k in elem){if(elem.hasOwnProperty(k)){try{JSON.stringify(elem[k]);//@NOTE: compare with __findRef used to find circular ref!
var child_result=tealium_objReplace(elem[k],method);result.isReplaced=result.isReplaced||child_result.isReplaced||(child_result.elem!=elem[k]);elem[k]=child_result.elem;}catch(e){}}}
return result;}
else if(typeof elem==="string"){if(typeof method==="string"&&method.match(/trim|htmlEntities|csvSeparator/i)){var check;switch(method.toLowerCase()){case"htmlentities":{check=tealium_stringRemoveHtmlEntities;break;}
case"csvseparator":{check=tealium_stringRemoveCsvSeparator;break;}
case"trim":{check=tealium_stringTrim;break;}}
result.elem=check(elem);return result;}}
return result;};var tealium_tools={};tealium_tools.errors={throw:function(msg,fname){throw new Error("tealium_tools"+(fname?(" > "+fname):"")+" => "+msg);},};tealium_tools.commons={throw:function(msg,fname){tealium_tools.errors.throw(msg,"commons"+(fname?" > "+fname:""));},__primitiveClasses:[String,Number,Boolean],__immutableClasses:[Function,Date,RegExp],__errorClasses:[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError],__nativeClasses:[Object,Array,String,Number,Boolean,Function,Date,RegExp,Error],isNativeObject:function(elem){for(var i=0;i<this.__nativeClasses.length;i++){if(elem instanceof this.__nativeClasses[i]){return true;}}
return false;},isPrimitiveObject:function(elem){for(var i=0;i<this.__primitiveClasses.length;i++){if(elem instanceof this.__primitiveClasses[i]){return true;}}
return false;},isImmutableObject:function(elem){for(var i=0;i<this.__immutableClasses.length;i++){if(elem instanceof this.__immutableClasses[i]){return true;}}
return false;},isString:function(value){return(typeof value==='string'||value instanceof String);},isNumber:function(value){return(typeof value==='number'&&isFinite(value));},isArray:function(value){return(0||Array.isArray(value)||(value!==undefined&&value!==null&&value.constructor===Array));},isFunction:function(value){return(typeof value==='function');},isObject:function(value){return(0||value!==undefined&&(0||value===null||typeof value==='object'&&value.constructor===Object));},isNull:function(value){return(value===null);},isUndefined:function(value){return(typeof value==='undefined');},isBoolean:function(value){return(typeof value==='boolean');},isRegExp:function(value){return(value!==undefined&&value!==null&&typeof value==='object'&&value.constructor===RegExp);},isError:function(value){return(value instanceof Error&&typeof value.message!=='undefined');},isDate:function(value){return(value instanceof Date);},getErrorObject:function(elem){for(var i=0;i<this.__errorClasses.length;i++){if(elem instanceof this.__errorClasses[i]){return this.__errorClasses[i];}}
if(elem instanceof Error){return Error;}
return Object;},getClassName:function(elem){return((elem&&elem.constructor)?(elem.constructor.name?elem.constructor.name:"ANONYMOUS"):(""));},toString:function(elem){var str;if(this.isUndefined(elem)){str="";}
else if(0||this.isPrimitiveObject(elem)||this.isImmutableObject(elem)||this.isError(elem)){str=elem.toString();}
else if(this.isString(elem)){str=elem;}
else{str=JSON.stringify(elem);}
return str;},copyPrimitiveObject:function(source){if(!this.isPrimitiveObject(source)){this.throw("source is not a primitive object!","copyPrimitiveObject");}
return source.valueOf();},copyImmutableObject:function(source){if(!this.isImmutableObject(source)){this.throw("source is not an immutable object!","copyImmutableObject");}
var destination;if(source instanceof Function){//@TODO: replace all of this cleaning with a function
var head_func=source.toString().match(/^function[ ]*\w*[ ]*\([^\{\}]*\)[ ]*\{/)[0];var head_func_arr=head_func.split('(');//@UNUSED: Function object doesn't able to assign a name
var params_func=head_func_arr[1].split(')')[0];var body_func=source.toString().replace(/^function[ ]*\w*[ ]*\([^\{\}]*\)[ ]*\{/,"").replace(/\}$/,"");destination=new Function(params_func,body_func);}
else if(source instanceof RegExp){var flags=source.flags;//@TODO: replace this cleaning with existing function on automatic QA customizing it
var regexp=source.toString().replace(/^[/]?/,"").replace(/[/][gimuy]*$/,"");destination=new RegExp(regexp,flags);}
else if(source instanceof Date){var timestamp=source.valueOf();destination=new Date(timestamp);}
else{this.throw("instance is not covered as immutable object!","copyImmutableObject");}
return destination;},copyErrorObject:function(source){if(!this.isError(source)){this.throw("source is not an error object!","copyErrorObject");}
var __Error=this.getErrorObject();var message=source.valueOf();var destination=new __Error(message);return destination;},};tealium_tools.list={throw:function(msg,fname){tealium_tools.errors.throw(msg,"list"+(fname?" > "+fname:""));},__checkInput:function(source,prop,value,sep,fname){var __this=tealium_tools.list;var __=tealium_tools.commons;var list;var isSource;fname=__.isString(fname)?fname:"";if(!(0||__.isUndefined(source)||__.isNull(source)||(typeof source=="object")
)){__this.throw("source is not valid!",fname);}
if(!__.isString(prop)&&(!__.isNumber(prop))){__this.throw("prop is not valid!",fname);}
if(!__.isString(value)&&!__.isNumber(value)){__this.throw("value is not valid!",fname);}
if(0||(__.isUndefined(sep))||(!__.isString(sep))||(sep=="")
//@TODO: use isValueOf existing function in tool QA
){sep=",";}
if(0||__.isUndefined(source)||__.isNull(source)){isSource=false;if(!__.isString(prop)){__this.throw("source is not specified and prop is not a list as expected!",fname);}else{list=prop;}}
else{isSource=true;if(1&&(!__.isUndefined(source[prop]))&&(!__.isString(source[prop]))){__this.throw("prop in source is not a list as expected!",fname);}else{list=source[prop]||"";}}
return{isSource:isSource,list:list,sep:sep};},__cleanMultipleSep:function(list,sep){var __=tealium_tools.commons;if((!__.isString(list))||(!__.isString(sep))){return list;}
return list.replace(new RegExp("[\\"+sep+"]+","g"),sep).replace(new RegExp("^[\\"+sep+"]|[\\"+sep+"]$","g"),"");},add:function(source,prop,value,unique,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result;var result;var __addItem=function(list,value,unique,sep){list=__this.__cleanMultipleSep(list,sep);value=__this.__cleanMultipleSep(value,sep);if(unique){value=list.indexOf(value)>-1?"":value;}
return list+(value?((list?sep:"")+value):"");};pre_result=__this.__checkInput(source,prop,value,sep,"add");prop=__.toString(prop);value=__.toString(value);pre_result.list=__.toString(pre_result.list);unique=__.isBoolean(unique)?unique:false;result=__addItem(pre_result.list,value,unique,pre_result.sep);if(pre_result.isSource){source[prop]=result;}
return result;},count:function(source,prop,value,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result=__this.__checkInput(source,prop,value,sep,"count");value=__.toString(value);var list=__.toString(pre_result.list);var count=0;var elements=list.split(pre_result.sep);for(var i=0;i<elements.length;i++){if(elements[i]===value){count+=1;}}
return count;},delete:function(source,prop,value,_global,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result;var result;var __removeItem=function(list,value,_global,sep){var elements=list.split(sep);var new_list=[];var count=_global?elements.length:1;for(var i=0;i<elements.length;i++){if(elements[i]===value&&count>0){count-=1;}
else{new_list.push(elements[i]);}}
list=new_list.join(sep);return __this.__cleanMultipleSep(list,sep);};pre_result=__this.__checkInput(source,prop,value,sep,"delete");prop=__.toString(prop);value=__.toString(value);pre_result.list=__.toString(pre_result.list);_global=__.isBoolean(_global)?_global:true;result=__removeItem(pre_result.list,value,_global,pre_result.sep);if(pre_result.isSource){source[prop]=result;}
return result;},deduplicate:function(source,prop,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result;var result;var __removeDuplicatedItems=function(list,sep){var elements=list.split(sep);var new_list=elements.filter(function(item,pos){return elements.indexOf(item)==pos;});list=new_list.join(sep);return __this.__cleanMultipleSep(list,sep);};pre_result=__this.__checkInput(source,prop,"",sep,"deduplicate");prop=__.toString(prop);pre_result.list=__.toString(pre_result.list);result=__removeDuplicatedItems(pre_result.list,pre_result.sep);if(pre_result.isSource){source[prop]=result;}
return result;},subtract:function(source,prop,elist,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result;var result;var __subtractItems=function(list,elist,sep){var elements=list.split(sep);var filters=elist.split(sep);var new_list=elements.filter(function(item){return filters.indexOf(item)<0;});list=new_list.join(sep);return __this.__cleanMultipleSep(list,sep);};pre_result=__this.__checkInput(source,prop,elist,sep,"subtract");prop=__.toString(prop);elist=__.toString(elist);pre_result.list=__.toString(pre_result.list);result=__subtractItems(pre_result.list,elist,pre_result.sep);if(pre_result.isSource){source[prop]=result;}
return result;},concat:function(source,prop,alist,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result;var result;pre_result=__this.__checkInput(source,prop,alist,sep,"concat");prop=__.toString(prop);alist=__.toString(alist);pre_result.list=__.toString(pre_result.list);result=__this.__cleanMultipleSep((pre_result.list+pre_result.sep+alist),pre_result.sep);if(pre_result.isSource){source[prop]=result;}
return result;},addPrefix:function(source,prop,prefix,sep){var __this=tealium_tools.list;var __=tealium_tools.commons;var pre_result;var result;var __addPrefixes=function(list,prefix,sep){var elements=list.split(sep);var new_list=elements.map(function(item){if(item&&prefix)return prefix+item;});list=new_list.join(sep);return __this.__cleanMultipleSep(list,sep);};pre_result=__this.__checkInput(source,prop,prefix,sep,"concat");prop=__.toString(prop);prefix=__.toString(prefix);pre_result.list=__.toString(pre_result.list);result=__addPrefixes(pre_result.list,prefix,pre_result.sep);if(pre_result.isSource){source[prop]=result;}
return result;},};tealium_tools.merge=function merge(destination,source,levels){var __=tealium_tools.commons;var __crs=[];var __findRef=function(ref){for(var i=0;i<__crs.length;i++){if(__crs[i]===ref){return true;}}
return false;};var recursive_merge=function(destination,source,levels){levels=(__.isNumber(levels)&&levels>=-1)?levels:-1;if(levels==-1||levels>0){if(__.isUndefined(source)){}
else if(typeof source=="object"&&source!==null){if(__findRef(source)){destination="CIRCULAR REF";}else{__crs.push(source);if(__.isPrimitiveObject(source)){destination=__.copyPrimitiveObject(source);}
else if(__.isImmutableObject(source)){destination=__.copyImmutableObject(source);}
else if(__.isError(source)){destination=__.copyErrorObject(source);}
else if(__.isArray(source)){if(!__.isArray(destination)){destination=[];}
for(var index=0;index<source.length;index++){if(typeof source[index]!="object"){var found=false;for(var index2=0;index2<destination.length;index2++){if(destination[index2]===source[index]){found=true;break;}}
if(!found){destination.push(source[index]);}}
else{destination.push(recursive_merge([],source[index],(levels-1)));}}}
else{try{if(typeof destination!="object"||destination==null||(__.isNativeObject(destination)&&(!__.isObject(destination)))){destination={};}
for(var key in source){if(!source.hasOwnProperty){}else if(source.hasOwnProperty(key)){destination[key]=recursive_merge(destination[key],source[key],(levels-1));}}}catch(e){if(e.message=='Unexpected identifier'){destination="CIRCULAR REF";}else{throw new Error(e.message);}}}}}
else if(__.isFunction(source)){destination=__.copyImmutableObject(source);}
else{destination=source;}}
else{destination="LEVEL TRUNCATED";}
return destination;};try{return recursive_merge(destination,source,levels);}catch(e){tealium_tools.errors.throw(e.message,"merge");}};var tealium_viewComponents=(function(){var SEP_FIELD="&nbsp;&nbsp;&nbsp;";var CStyle=function(id,css){{var __ref=null;var __id=typeof id==="string"?id:"";var __css=typeof css==="string"?css:"";var __screens={TABLET:1023,MOBILE:767,MOBILE_MINI:479,};var __rules={"all":{"media":"","css":"",},"desktop":{"media":"screen and (min-width: "+(__screens.TABLET+1)+"px)","css":"",},"tablet_mobile":{"media":"screen and (max-width: "+__screens.TABLET+"px)","css":"",},"tablet":{"media":"screen and (min-width: "+(__screens.MOBILE+1)+"px) and (max-width: "+__screens.TABLET+"px)","css":"",},"mobile":{"media":"screen and (max-width: "+__screens.MOBILE+"px)","css":"",},"mini_mobile":{"media":"screen and (max-width: "+__screens.MOBILE_MINI+"px)","css":"",},};var __render=function(){if(!__css)return;if(!__ref){var __head=document&&(document.head||document.getElementsByTagName('head')[0]);if(!__head)return;__ref=document.createElement('style');__ref.id=__id||"";__ref.type='text/css';__head.appendChild(__ref);}
if(__ref.innerHTML){__ref.innerHTML=__css;}else{__ref.childNodes.forEach(function(node){__ref.removeChild(node);});__ref.appendChild(document.createTextNode(__css));}};var __addRules=function(mode,css){mode=(""+mode).toLowerCase();if(mode.match(new RegExp("^("+Object.keys(__rules).join("|")+")$","i"))){if(typeof css==="string"&&css!=""){__rules[mode].css+="\n"+css;__updateCss();}}};var __updateCss=function(){__css="";for(var mode in __rules){if(__rules.hasOwnProperty(mode)){if(__rules[mode].css){__css+=(__rules[mode].media?("@media "+__rules[mode].media+" {\n"+(""+__rules[mode].css)+" }"):__rules[mode].css)+"\n";}}}};}
return{ref:function(){return __ref;},render:function(){return __render();},addRules:function(mode,css){return __addRules(mode,css);},};};var CTag=function CTag(tag,id,cls,styles,html,eventHandlers){{var __ref=null;var __tag=tag||"div";//@NOTE: migliorare il check controllando i comuni tag altrimenti utilizzare div as default
var __id=typeof id==="string"?id:"";var __class=typeof cls==="string"?cls:"";var __style=typeof styles==="string"?styles:"";var __html=typeof html==="string"?html:"";var __eventHandlers=typeof eventHandlers==="object"?eventHandlers:{};var __attachEventHandlers=function(){if(__ref){var events=Object.keys(__eventHandlers);events.forEach(function(e){if(typeof e==="string"&&typeof __eventHandlers[e]==="function"){__ref[e]=__eventHandlers[e];}});}};var __render=function(html,cls,styles){if(!__ref){__ref=document.createElement(__tag);__ref.id=__id;__attachEventHandlers();}
__ref.setAttribute("class",cls||__class);__ref.style=styles||__style;__ref.innerHTML=html||__html;return __ref;};}
return{ref:function(){return __ref;},render:function(cls,styles,html){return __render(cls,styles,html);},};};var CTable=function CTable(id,cls,styles,eventHandlers){var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCss=new CStyle("CTableCSS"+(id?":"+id:""));var containerFilters;var containerResults;var __render=function(){__renderCss();container.render("");__renderFilters();container.ref().appendChild(containerFilters.ref());__renderResults();container.ref().appendChild(containerResults.ref());containerResults.linkCTableFilters(containerFilters);containerFilters.linkCTableResults(containerResults);return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" { color:#000; background-color:aliceblue; font-family:monospace; font-size:12px; margin: 10px; height: auto; line-height: 1.625; box-sizing: border-box; text-align: left; } \n";containerCss.addRules("ALL",textCss);}
containerCss.render();};var __renderFilters=function(){if(!containerFilters)containerFilters=new CTableFilters(id+"__filters","","");containerFilters.render();};var __renderResults=function(){if(!containerResults){containerResults=new CTableResults(id+"__results","","",{oncopy:function(e){var regexp=new RegExp(tealium_stripHtml(SEP_FIELD),"g");var text=window.getSelection().toString().replace(regexp,'|');var __clipboardData=e.clipboardData||window.clipboardData||e.originalEvent.clipboardData;__clipboardData.setData('text/plain',text);e.preventDefault();}});}
containerResults.render();};var __update=function(data){if(typeof data=="object"){if(containerFilters){if(data.hasOwnProperty("filters")||data.hasOwnProperty("sorting")){containerFilters.update(data.filters,data.sorting);}
if(data.hasOwnProperty("counters")){containerFilters.updateCounters(data.counters);}
if(data.hasOwnProperty("currentSet")){containerFilters.updateCurrentSet(data.currentSet);}}
if(containerResults){if(data.hasOwnProperty("results")){containerResults.update(data.results);}
if(data.hasOwnProperty("progressBar")){containerResults.updateProgressBar(data.progressBar);}}}
else tealium_log.old("###Component:CTable.update => error: data format is not correct","warn");};return{ref:function(){return container.ref();},render:function(){return __render();},update:function(data){__update(data);},};};var CTableFilters=function CTableFilters(id,cls,styles,eventHandlers){var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCss=new CStyle("CTableFiltersCSS"+(id?":"+id:""));var containerTableResults;var containerCounters;var containerCurrentSet;var containerSaveButton;var containerEmptyRow=new CTag("div","","__row");var data={counters:"",filters:"",sorting:"",currentSet:""};var dataSaveButton={SYMBOL:"&#x1f4be",LABEL:"SAVE TO CLIPBOARD",LABEL_MOBILE:"SAVE"};var __render=function(){__renderCss();if(data.filters||data.sorting){if(containerEmptyRow.ref())container.ref().removeChild(containerEmptyRow.ref());__renderFilters();__renderSortOptions();__renderOperations();container.ref().appendChild(containerEmptyRow.render());}
else container.render("");return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" { margin: 0; background: #899; border: 5px solid aliceblue; } \n"
+"#"+id+" input[type=checkbox], "
+"#"+id+" input[type=checkbox i] { position: relative; width: 12px; height: 12px; margin: 0; padding: 0; clip: unset; left: 0; z-index: auto; vertical-align: unset; display: inline-block; background: white; border: 1px solid gray; border-radius: 3px; box-sizing: border-box; box-shadow: white 1px 1px 3px; cursor: pointer; -webkit-appearance: none; -moz-appearance: none; appearance: none; } \n"
+"#"+id+" input[type=checkbox]:checked, "
+"#"+id+" input[type=checkbox i]:checked {background: green!important; border: 1px solid #00000099!important; -webkit-appearance: none; -moz-appearance: none; appearance: none; } \n"
+"#"+id+" input[type='text'] { min-width: calc(50% - 20px); width: calc(50% - 20px); height: 20px; outline: none; font: inherit!important; margin: 0; padding: 2px 5px; box-sizing: border-box; border: 0px!important; border-radius: 5px!important; color: darkgreen; background-color: white; display: inline; -webkit-box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); } \n"
+"#"+id+" select { min-width: calc(50% - 75px); width: calc(50% - 75px); height: auto; padding: 2px 5px; margin: 0; text-transform: uppercase; font-family: inherit!important; color: darkgreen; border: 0px!important; border-radius: 5px!important; background: white; line-height: inherit; font: inherit!important; -webkit-box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); box-shadow: inset 0 0.25em 0.375em 0 rgba(0,0,0,.3); -webkit-appearance: menulist; -moz-appearance: menulist; appearance: menulist; } \n"
+"#"+id+" .__success { color: darkgreen; } \n"
+"#"+id+" .__warning { color: darkgoldenrod; } \n"
+"#"+id+" .__error { color: darkred; } \n"
+"#"+id+" .__info { color: darkcyan; } \n"
+"#"+id+" .__row { font-size:14px; font-weight:bold; width: 100%; text-transform: uppercase; text-shadow: white 1px 1px 3px; border-bottom: 1px solid aliceblue; clear: both } \n"
+"#"+id+" .__row div { padding: 4px 10px; height: auto; width: 25%; float:left; box-sizing: border-box; white-space: nowrap;} \n"
+"#"+id+" .__row .__wp100 { width: 100%; } \n"
+"#"+id+" .__row .__btn { cursor: pointer; font-weight: bold; font-size: 12px; border-radius: 7px; text-align: center; text-shadow: white 1px 1px 1px; background-color: lightgreen; float: right; margin-right: 10px; margin-top: 3px; width: 180px; } \n"
+"#"+id+" .__row .__btn:hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+id+" .__row .__btn span { font-size: 11px; float: left; } \n"
+"#"+id+" .__row .__btn span::after { content: \""+dataSaveButton.LABEL+"\"; padding-left: 15px; } \n";containerCss.addRules("ALL",textCss);textCss=""
+"#"+id+" input[type='text'] { min-width: calc(100% - 20px); min-width: calc(100% - 20px); } \n"
+"#"+id+" select { min-width: calc(100% - 65px); width: calc(100% - 65px); } \n"
+"#"+id+" .__row { font-size:12px; white-space: nowrap; } \n"
+"#"+id+" .__row .__btn { width: 60px; } \n"
+"#"+id+" .__row .__btn span { font-size: 9px; } \n"
+"#"+id+" .__row .__btn span::after { content: \""+dataSaveButton.LABEL_MOBILE+"\"; padding-left: 5px; } \n";containerCss.addRules("MOBILE",textCss);textCss=""
+"#"+id+" .__row div { width: auto; } \n";containerCss.addRules("MINI_MOBILE",textCss);}
containerCss.render();};var __renderFilter=function(id,filter){return''
+'<div id="__#'+id+'__"'+(filter.status?(' class="__'+filter.status+'"'):'')+(filter.input_text?' class="__wp100"':'')+'>'
+'<input type="checkbox" '+(typeof filter.onclick==="string"&&filter.onclick!=""?('onclick="'+filter.onclick+'(\''+id+'\')" '+(filter.active?"checked":"")):'')+' />'
+(filter.label?' '+filter.label:'')
+(typeof filter.count!=="undefined"?'('+filter.count+')':'')
+(filter.input_text?' <input type="text" placeholder="'+filter.input_text.label+'" onkeyup="this.onchange();" '+(typeof filter.input_text.onchange==="string"&&filter.input_text.onchange!=""?('onchange="'+filter.input_text.onchange+'(\''+id+'\', this.value)" />'):''):'')
+'</div>';};var __renderFilters=function(){if(data.filters){var row,html;for(var prop in data.filters){if(data.filters.hasOwnProperty(prop)){if(data.filters[prop].start){html="";row=new CTag("div","","__row","","");}
html+=__renderFilter(prop,data.filters[prop]);if(data.filters[prop].end){container.ref().appendChild(row.render(html));}}}}};var __renderSortOptions=function(){if(data.sorting){var options="";if(data.sorting.labels)data.sorting.labels.forEach(function(label,index1){if(data.sorting.ordering)data.sorting.ordering.forEach(function(method,index2){var selected=(data.sorting.field_selected==index1&&data.sorting.ordering_selected==index2)?'selected="selected"':'';options+='<option value="'+index1+'_'+index2+'" '+selected+'>'+label+' -> '+method+'</option>';});});if(options){var html='<div class="__wp100">'+(data.sorting.label?(data.sorting.label+" "):"")+'<select '+(typeof data.sorting.onchange==="string"&&data.sorting.onchange!=""?('onchange="'+data.sorting.onchange+'(this.value)"'):"")+'>'+options+'</select></div>';var row=new CTag("div","","__row","",html);container.ref().appendChild(row.render());}}};var __renderOperations=function(){var row=new CTag("div","","__row","","");container.ref().appendChild(row.render());__renderCurrentSet();row.ref().appendChild(containerCurrentSet.ref());__renderSaveButton();row.ref().appendChild(containerSaveButton.ref());};var __renderCurrentSet=function(){if(!containerCurrentSet)containerCurrentSet=new CTag("div","","__currentSet");var html=data.currentSet&&data.currentSet.value?((data.currentSet.label?data.currentSet.label+': ':'')+'<span class="__success">'+data.currentSet.value+'</span>'):"";containerCurrentSet.render(html);};var __renderSaveButton=function(){if(!containerSaveButton){containerSaveButton=new CTag("div","","__btn","",'<span>'+dataSaveButton.SYMBOL+'</span>',{onclick:function(){if(containerTableResults.ref()){var isSelected=tealium_selectText(containerTableResults.ref());if(isSelected){if(document.queryCommandSupported('copy'))document.execCommand("copy");else tealium_log.old("Copy command is not supported!","warn");}else tealium_log.old("No text selected!","warn");}}});}
containerSaveButton.render();};var __renderCounters=function(){if(!containerCounters){containerCounters=new CTag("div","","__row");container.ref().appendChild(containerCounters.render());container.ref().appendChild(containerEmptyRow.render());}
var html="";if(data.counters)data.counters.forEach(function(obj){html+=(obj&&obj.value)?("<div>"+(obj.label?(obj.label+':'):'')+'<span class="__success"> '+obj.value+"</span></div>"):"";});containerCounters.render(html);};var __updateCounters=function(counters){try{if(typeof counters==="object"&&JSON.stringify(data.counters)!=JSON.stringify(counters)){data.counters=tealium_tools.merge([],counters);__renderCounters();}}catch(e){tealium_log.old("###Component:CTableFilters.updateCounters => error: "+e,"warn");}};var __update=function(filters,sorting){try{if(0||(typeof filters==="object"&&JSON.stringify(data.filters)!=JSON.stringify(filters))||(typeof sorting==="object"&&JSON.stringify(data.sorting)!=JSON.stringify(sorting))){if(typeof filters==="object")data.filters=tealium_tools.merge(data.filters||{},filters);if(typeof sorting==="object")data.sorting=tealium_tools.merge(data.sorting||{},sorting);__render();}}catch(e){tealium_log.old("###Component:CTableFilters.update => error: "+e,"warn");}};var __updateCurrentSet=function(currentSet){try{if(typeof currentSet==="object"&&JSON.stringify(data.currentSet)!=JSON.stringify(currentSet)){data.currentSet=tealium_tools.merge(data.currentSet||{},currentSet);__renderCurrentSet();}}catch(e){tealium_log.old("###Component:CTableFilters.updateCurrentSet => error: "+e,"warn");}};return{ref:function(){return container.ref();},render:function(){return __render();},renderCounters:function(){return __renderCounters();},renderCurrentSet:function(){return __renderCurrentSet();},update:function(f,s){__update(f,s);},updateCounters:function(c){__updateCounters(c);},updateCurrentSet:function(c){__updateCurrentSet(c);},linkCTableResults:function(ref){containerTableResults=ref;}};};var CTableResults=function CTableResults(id,cls,styles,eventHandlers){var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCss=new CStyle("CTableResultsCSS"+(id?":"+id:""));var containerTableFilters;var containerProgressBar;var containerEmptyRow=new CTag("div","","__row __content");var data={results:"",progressBar:""};var __render=function(){__renderCss();container.render("");if(data.results){__renderHeadRow();__renderContentRows();container.ref().appendChild(containerEmptyRow.render());if(containerTableFilters)containerTableFilters.updateCurrentSet({value:(data.results.rows&&data.results.rows.length?data.results.rows.length:0)});}
return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" .__row { border-bottom:1px solid #888; clear: both} \n"
+"#"+id+" .__row.__head { font-size:14px; font-weight:bold; height: 36px; width: 100%; border-top: 2px solid gray; } \n"
+"#"+id+" .__row.__head .__processing { width: 100%; padding: 3px 5px; } \n"
+"#"+id+" .__row.__head .__processing .__progress { width: 0%; background-color: darkseagreen; padding: 2px 0px; text-transform: uppercase; text-shadow: white 1px 1px 3px; } \n"
+"#"+id+" .__row.__head .__processing .__progress .__label { padding: 0px 10px; } \n"
+"#"+id+" .__row.__head .__processing .__progress .__value { color: darkgreen; } \n"
+"#"+id+" .__row.__content .__notfound { width: 100%; text-align: center; font-size: 14px; font-weight: 900; color: darkred; } \n"
+"#"+id+" .__row div { padding: 4px 10px; height: auto; width: auto; float:left; box-sizing: border-box; } \n"
+"#"+id+" .__row .__badge { width: 110px; height: auto; padding: 1px; color: white; font-weight: bold; border: 1px solid #888; border-radius: 8px; text-align: center; text-shadow: black 1px 1px 3px; display: inline-block; } \n"
+"#"+id+" .__row .__badge.__success { background-color: #456f45; } \n"
+"#"+id+" .__row .__badge.__warning { background-color: #e69604; } \n"
+"#"+id+" .__row .__badge.__info { background-color: #76d7ed; } \n"
+"#"+id+" .__row .__badge.__error { background-color: #dc1111; } \n";containerCss.addRules("ALL",textCss);textCss=""
+"#"+id+" .__row { font-size:10px; } \n"
+"#"+id+" .__row.__head { font-size:12px; border-bottom: 0px; height: 32px; } \n"
+"#"+id+" .__row.__content .__notfound { font-size: 12px; } \n"
+"#"+id+" .__row .__badge { width: 90px; margin-left: 5px; } \n";containerCss.addRules("MOBILE",textCss);textCss=""
+"#"+id+" .__row .__badge { width: 65px; } \n";containerCss.addRules("MINI_MOBILE",textCss);}
containerCss.render();};var __renderHeadRow=function(){if(data.results.selected&&data.results.selected.length>0&&data.results.cols){var row=new CTag("div","","__row __head");var html='';data.results.selected.map(function(key,i){if(data.results.cols.hasOwnProperty(key)){var obj=data.results.cols[key];var __width=obj.width?obj.width:((100/data.results.selected.length).toFixed(2)+"%");var __styles="width: "+__width+"; ";var __content=obj.value+(data.results.selected.length==(i+1)?'':SEP_FIELD);html+='<div id="__#'+key+'__" style="'+__styles+'">'+__content+'</div>';}});container.ref().appendChild(row.render(html));}};var __renderContentRows=function(){if(1&&data.results.selected&&data.results.selected.length>0&&data.results.rows&&data.results.rows.length>0){var cols=data.results.cols?data.results.cols:{};data.results.rows.map(function(line){var row=new CTag("div","","__row __content");var html='';data.results.selected.map(function(key,i){if(line.hasOwnProperty(key)){var obj=line[key];var __width=cols[key].width?cols[key].width:((100/data.results.selected.length).toFixed(2)+"%");var __extraStyle=cols[key].extraStyle?cols[key].extraStyle:'';var __styles="width: "+__width+"; "+__extraStyle;var __classes=obj.badge?("__badge"+(obj.status?" __"+obj.status:"")):"";var __content=obj.value+(data.results.selected.length==(i+1)?'':SEP_FIELD);html+='<div id="__#'+key+'__" style="'+__styles+'"><span class="'+__classes+'">'+__content+'</span></div>';}});container.ref().appendChild(row.render(html));});}
else{var row=new CTag("div","","__row __content");var html='<div class="__notfound">'+(data.results.empty&&data.results.empty.label?(''+data.results.empty.label):'NOT FOUND')+'</div>';container.ref().appendChild(row.render(html));}};var __renderProgressBar=function(){if(!containerProgressBar){containerProgressBar=new CTag("div","","__row __head");container.ref().appendChild(containerProgressBar.render());}
var html=data.progressBar?('<div class="__processing"><div class="__progress" style="width:'+data.progressBar.value+'%;"><span class="__label">'+data.progressBar.label+':</span><span class="__value">'+data.progressBar.value+'%</span></div></div>'):'';containerProgressBar.render(html);};var __update=function(results){try{if(typeof results==="object"&&JSON.stringify(data.results)!=JSON.stringify(results)){data.results=tealium_tools.merge({},results);__render();}}catch(e){tealium_log.old("###Component:CTableResults.update => error: "+e,"warn");}};var __updateProgressBar=function(progressBar){try{if(typeof progressBar==="object"&&JSON.stringify(data.progressBar)!=JSON.stringify(progressBar)){progressBar.value=(progressBar.value>-1&&progressBar.value<=100)?progressBar.value:0;data.progressBar=tealium_tools.merge(data.progressBar||{},progressBar);__renderProgressBar();}}catch(e){tealium_log.old("###Component:CTableResults.updateProgressBar => error: "+e,"warn");}};return{ref:function(){return container.ref();},render:function(){return __render();},renderProgressBar:function(){__renderProgressBar();},update:function(r){__update(r);},updateProgressBar:function(p){__updateProgressBar(p);},linkCTableFilters:function(ref){containerTableFilters=ref;}};};var CPopup=function CPopup(id,cls,styles,eventHandlers,title,__refcontainerContent){var CLS_BTNS=id+"_buttons";var Z_INDEX=100000001;var X_SYMBOL="&#10005;";var HEADER_TITLE=title||"Popup Title";var container=new CTag("div",id,cls,styles,"",eventHandlers);var containerCloseBtn;var containerTitle;var containerContent=__refcontainerContent||undefined;var containerCss=new CStyle("CPopupCSS"+(id?":"+id:""));var __render=function(){__renderCss();container.render("");__renderCloseBtn();container.ref().appendChild(containerCloseBtn.ref());__renderTitle();container.ref().appendChild(containerTitle.ref());__renderContent();container.ref().appendChild(containerContent.ref());return container.ref();};var __renderCss=function(){if(containerCss.ref())return;var textCss;{textCss=""
+"#"+id+" { position:fixed; z-index:"+Z_INDEX+"; left:0; top:0; background-color: #000; width:100%; height:100%; overflow-y: auto; font-family: monospace; font-size:18px; } \n"
+"#"+id+" input[type=text]:focus, "
+"#"+id+" select:focus { outline: auto!important; } \n"
+"#"+id+" input[type=checkbox]:focus, "
+"#"+id+" input[type=radio]:focus { outline: dashed 2px #006400a6!important; outline-offset: 1px!important; } \n"
+"#"+id+" input[type=text]::-webkit-input-placeholder { /* Edge */ color: gray; } \n"
+"#"+id+" input[type=text]:-ms-input-placeholder { /* Internet Explorer 10-11 */ color: gray; } \n"
+"#"+id+" input[type=text]::placeholder { color: gray; } \n"
+"."+CLS_BTNS+" { cursor:pointer; font-weight: bold; border-radius: 10px; margin-left: 5px; padding: 10px 12px; text-align:center; text-shadow: white 1px 1px 1px; background-color:lightgreen; line-height: 1; float:right; } \n"
+"."+CLS_BTNS+":hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+id+" h1 { width: calc(100% - 20px); margin:10px; padding: 0; color:lightgreen; line-height:normal; font-family:monospace; font-size:30px; font-weight: normal; font-style: normal; text-transform: capitalize; text-shadow: white 1px 1px 3px; text-align: center; } \n";containerCss.addRules("ALL",textCss);textCss=""
+"#"+id+" h1 { font-size:24px; margin: 10px 10px 0px 10px; } \n"
+"."+CLS_BTNS+" { float:none; margin: 10px 10px 0px; } \n";containerCss.addRules("MOBILE",textCss);}
containerCss.render();};var __renderCloseBtn=function(){if(!containerCloseBtn){containerCloseBtn=new CTag("div","",CLS_BTNS,"",X_SYMBOL,{onclick:function(){__display(false);}});}
containerCloseBtn.render();};var __renderTitle=function(){if(!containerTitle)containerTitle=new CTag("h1","","","",HEADER_TITLE);containerTitle.render();};var __renderContent=function(){if(!containerContent)containerContent=new CTag("div","","","","");containerContent.render();};var __display=function(state){container.ref().style.display=state?"block":"none";};return{ref:function(){return container.ref();},render:function(){return __render();},open:function(){__display(true);},close:function(){__display(false);},};};var self={CTag:CTag,CTable:CTable,CTableFilters:CTableFilters,CTableResults:CTableResults,CPopup:CPopup,};return self;})();tealium_logContext='preloader tealium_log';tealium_logNote='';var tealium_logViaPixel=function(type,ogg,err){ogg=ogg||{};if(tealium_log)tealium_log[type].set('error',ogg,err);var datalayer={'pageName':document.location.href,'events':'event69','c30':err.replace(/\s{2,}|\n/g,' '),'Tracking_EventId_Serial':ogg.Tracking_EventId_Serial,'Tracking_EventId':ogg.Tracking_EventId||'DirectTrackingCall-by-tealium_logViaPixel',};var PanicAlert=document.createElement("IMG");PanicAlert.src="https://smetrics.ray-ban.com/b/ss/"
+"luxray-ban-prod-junk"
+"/1/G.4--NS/"+(new Date().getTime())+"?"
+"pageName="+encodeURIComponent(datalayer.pageName)+"&"
+"events="+encodeURIComponent(datalayer.events)+"&"
+"c30="+encodeURIComponent(datalayer.c30)+"&"
+"g="+encodeURIComponent(datalayer.pageName);if(tealium_log)tealium_log.adobe.set('done',datalayer);};var tealium_log=(function(){{var TEALIUM_LOG_PREFIX="tealiumLog_";var LOGGER_CONTAINER=TEALIUM_LOG_PREFIX+"loggerContainer";var LOGGER_TAB=TEALIUM_LOG_PREFIX+"loggerTab";var LOGGER_SECTION=TEALIUM_LOG_PREFIX+"loggerSection";var LOGGER_HEADER=TEALIUM_LOG_PREFIX+"loggerHeader";var LOGGER_CONTENT=TEALIUM_LOG_PREFIX+"loggerContent";var POPUP_DL=TEALIUM_LOG_PREFIX+"popupDatalayer";var POPUP_DL_CLOSE=POPUP_DL+"_close";var POPUP_DL_CONTENT=POPUP_DL+"_content";var POPUP_BETA=TEALIUM_LOG_PREFIX+"popupBeta";var POPUP_BETA_BTNS=POPUP_BETA+"_buttons";var POPUP_CLICKTEST=TEALIUM_LOG_PREFIX+"popupClickTest";var POPUP_CLICKTEST_TABLE=POPUP_CLICKTEST+"_table";var Z_INDEX=100000000;var containerDiv=null;var tabDiv=null;var headerDiv=null;var logDiv=null;var logContent=null;var popupDiv=null;var popupClickTest=null;var opened=false;var logHeight=315;var tabHeight=20;var adobeMap={purchase:"Orders",event1:"Logins",event2:"Users - new accounts",event3:"Users - email subscriptions",event4:"Errors - Blocking",event5:"Internal Search - queries",event6:"Internal Search - visits",event7:"Exam Funnel: Step 2",event8:"Exam Funnel: Completed",event9:"Add product to Favourites list",event10:"Filters - visits",event12:"Contact us submission",event13:"Products - views ecom",event14:"Social Shares",event15:"Checkout - step #4 payment gateway",event16:"Orders - gift orders qnt",event19:"Orders - discount orders qnt",event20:"Orders - Giftcard",event21:"Checkout - step #2 delivery",event22:"Checkout - step #3 payment form",event23:"Orders - cancelled units",event24:"Orders - tax",event25:"Orders - Shipping revenue local currency",event26:"Orders - Shipping revenue",event27:"Products - views out of stock",event28:"Performance - Tealium load latency",event29:"Removed from wishlist",event30:"Orders - cancelled revenue local cur",event31:"Product Downloads",event32:"Products - views",event33:"Remix - configurator - unique visits",event34:"Products - add to cart remix",event35:"Store Search - queries",event36:"Store Search - results",event37:"Orders - discount revenue",event38:"Users - email unsubscriptions",event39:"Returns",event40:"Returns Units",event41:"Returns Refund",event42:"Returns Refund for Budget",event43:"Orders - wrapping",event44:"Orders - discount units",event45:"Action - serial",event46:"Products - oos email me submit",event47:"Products - views - unique visits",event48:"Orders - wrapping revenue",event49:"Performance - Tealium load times",event50:"Errors - Product",event51:"Errors - 404",event52:"Errors - IT",event53:"Errors - UX",event54:"Orders - wrapping revenue local curr",event55:"Errors - Content",event56:"Pages - load time",event57:"Contents - Qubit Impressions",event58:"Errors - Not Blocking",event59:"Store Search - no results",event60:"Orders - revenue - local currency",event61:"Orders - giftcards used",event62:"Orders - discount revenue local curr",event63:"Orders - Shipping tax local currency",event64:"Orders - Shipping tax",event65:"Orders - tax local currency",event66:"Products - oos email me view",event67:"Exam - quantity",event68:"Pages - load times",event69:"Errors - debugger",event70:"Orders - cancelled",event72:"Action - contact us",event73:"Exam Funnel: Started",event74:"Checkout - step #5 order review",event75:"Exam Funnel: Deleted",event76:"Exam Funnel: Add Another Exam",event78:"Units - Engraving",event79:"Orders - Engraving",event80:"Units - Giftwrap",event81:"Orders - Giftwrap",event82:"Errors - Marketing",event83:"Revenue - GiftCard",event84:"Revenue Local Currency - GiftCard",event85:"Units - GiftCard",event87:"Exam Funnel - store search",event89:"Conductor - Content Health Score",event90:"Conductor - Denominator",event91:"Internal Search - Img visits",event92:"Internal Search - Text visits",event93:"Internal Search - Suggested visits",event94:"Orders - Subscription",event103:"VM - Browser is supported",event104:"VM - Prod is supported",event105:"VM - VM - Ready",event106:"VM - Request WebCam",event107:"VM - WebCam Allowed",event108:"VM - Render",event109:"VM - Close",event110:"VM - Try On",event111:"VM - Fit Glasses",event112:"VM - Adjust Glasses",event118:"Exam Funnel - booking questions",event120:"CP - Prod is supported",event121:"CP - Loaded",event122:"CP - Randomized",event123:"CP - StartOver",event124:"CP - ConfirmConf",event125:"CP - Closed",event126:"CP - Engagement Index By Visit",event127:"CP - First Interaction By Visit",event128:"CP - First Interaction By Model",event129:"CP - Engagement Index By Model",eVar1:"Traffic Sources - tracking code first touch",eVar3:"Internal Campaign ID",eVar4:"Session (Visits) - weather",eVar5:"Orders - cart ID",eVar6:"Pages - country",eVar7:"Sessions - time local",eVar8:"Pages - url",eVar9:"Users - ID",eVar10:"Product - Discount %",eVar11:"Product Views - Source",eVar12:"Internal Search - keyword",eVar13:"Internal Search - results count",eVar14:"StoreLocator Lookup keyword",eVar15:"Store Locator Search Results Count",eVar16:"Cross-sell/Up-sell",eVar17:"Link Page Name",eVar18:"Cart Additions - Source",eVar19:"Marketing Channels - Multi Touch",eVar20:"Orders - tax rate",eVar21:"Errors - datalayer",eVar22:"Device - agent / browser",eVar23:"Orders - shipping mode",eVar24:"Store Search - keyword",eVar25:"Errors - code",eVar26:"Pages - section",eVar27:"Orders - discount amount",eVar28:"Source of Cart Open",eVar29:"Orders - discount code",eVar30:"Orders - giftcard code",eVar31:"Orders - payment type",eVar32:"Pages - region",eVar33:"Ratings & Reviews",eVar34:"Orders - cancellation id",eVar35:"Orders - Id",eVar36:"Errors - details",eVar37:"Internal Search - Type",eVar38:"Session - ID for ClickTale",eVar39:"Users - login status & source",eVar40:"Orders - currency code + yymm",eVar41:"Orders - installments",eVar42:"Pages - assist to cart",eVar43:"Orders - discount method",eVar44:"Actions",eVar45:"Users - segments",eVar46:"Exam Funnel - source",eVar47:"Products - price",eVar48:"Tags - tealium release code",eVar49:"Pages - platform",eVar50:"Orders - wrapping type",eVar51:"Users - international",eVar52:"Users - country",eVar53:"Users - language",eVar54:"Device - screen",eVar55:"Traffic Sources - code stacking",eVar56:"Orders - gift",eVar57:"Contents - Qubit version",eVar58:"Pages - name OLD",eVar59:"Pages - device type OLD",eVar60:"Actions",eVar61:"Actions - previous",eVar62:"Users - ID timestamp",eVar63:"Checkout - payment gateway",eVar64:"Checkout - type & login status",eVar65:"Orders - Insured",eVar66:"Exam - Id",eVar67:"Exam - Q:patients",eVar68:"Pages - Referrer",eVar69:"Exam - Q:visited the store",eVar70:"Orders - Prescription Method",eVar71:"Pages - country",eVar72:"Conductor - Export Variable",eVar73:"Tags - Adobe Events",eVar74:"Conductor - Organic Landing Page Name",eVar75:"Conductor - Organic Landing Page URL",eVar78:"Exam - Q:visits purpose",eVar80:"Actions - previous",eVar83:"Errors - code",eVar84:"Users - Consent",eVar85:"Smartly",eVar90:"Products - Custom Preset",prop1:"Traffic Sources - tracking code first touch",prop2:"Pages - Country",prop3:"Tracking - event id",prop4:"Session (Visits) - weather",prop5:"Orders - Cart ID",prop6:"Orders - Order ID",prop7:"Sessions - Time local",prop8:"Pages - Url",prop9:"Users - ID",prop10:"Orders - payment type",prop11:"Pages - code",prop13:"Internal Search - keyword",prop14:"Internal Search - results count",prop15:"Pages - pagination",prop16:"StoreLocator Lookup keyword",prop17:"Store Locator Search Results Count",prop18:"Link PageName",prop19:"Marketing Channels - Multi Touch",prop20:"Pages - section",prop21:"Errors - datalayer",prop22:"Device - agent / browser",prop23:"Filters - facet value",prop24:"Contents - test version",prop25:"Errors - code",prop26:"Product - remix Temple Engraving",prop27:"Product - remix case engraving",prop28:"Remix Configurator Usage",prop29:"Pages - platform",prop30:"Errors - tealium",prop31:"Checkout path",prop32:"Errors - message",prop33:"Action - last url requested",prop34:"Session - ID for ClickTale",prop35:"Pages - region",prop36:"Errors - details",prop37:"Orders - shipping amount",prop38:"Action - combo",prop39:"Users - login status & source",prop40:"Users - Email MD5",prop45:"Users - segments",prop46:"Returns - reason code",prop48:"Tags - tealium release code",prop51:"Users - international",prop54:"Device - screen",prop55:"Traffic Sources - code stacking",prop57:"Contents - Qubit version",prop58:"Pages - name OLD",prop59:"Pages - device type OLD",prop60:"Actions",prop61:"Actions - previous",prop62:"Users - ID timestamp",prop63:"Checkout - payment gateway",prop64:"Checkout - type & login status",prop65:"Orders - Insured",prop66:"Pages - language OLD",prop67:"Pages - querystring",prop68:"Pages - referrer",prop69:"Content - campaign",prop70:"Orders - Prescription Method",prop71:"Users - Consent",prop72:"Tracking - event serial id",prop73:"Tags - Adobe Events",prop75:"Pages - load time",list1:"Traffic Sources - code",list2:"Filters - facet values",list3:"Actions"};var clickLabelMap={b:"b - Content box (from JS)",d:"d - Content description (from JS), '#' => detection in d0",options:"options - Click limitations data-analytics_available_call, data-analytics-abort",b2:"b2 - Content box (from HTML), e.g.:data-element-id, ...",cn:"cn - Customized Condition",d0:"d0 - Content description (item position)",d2:"d2 - Content description (from HTML) e.g.:data-description",et:"et - Event type",id:"id - Event Id",je:"je - Customized JS Condition",ji:"ji - Customized JS Condition",js:"js - Customized JS Condition",on:"on - Event to fire on",pc:"pc - Customized Condition - Page Coutry",pd:"pd - Customized Condition - Device Type",pn:"pn - Customized Condition - Page Name Full",pp:"pp - Customized Condition - Page Platform",pu:"pu - Customized Condition - Page Url",s:"s - jQuery Selector",tt:"tt - Tracking type: view, link, hiddenaction, simulated, configurator, nextpage, test",sm:"sm - Settings Merge: override global settings",ud:"ud - Object included in the tracking",};var currentUserProfile="";var userPermissionMatrix={utag:{it:1,user:1,lwa:1},utag_data:{it:1,user:1,lwa:1},preloader:{it:0,user:0,lwa:1},domready:{it:0,user:0,lwa:1},listener:{it:0,user:1,lwa:1},data2track:{it:1,user:1,lwa:1},utag_data2track:{it:1,user:1,lwa:1},builder:{it:0,user:1,lwa:1},adobe:{it:1,user:1,lwa:1},console_log:{it:1,user:1,lwa:1},click_test:{it:1,user:1,lwa:1},clear_storage:{it:0,user:1,lwa:1},beta_extension:{it:0,user:0,lwa:1},preserve_log:{it:1,user:1,lwa:1},resize_log:{it:1,user:1,lwa:1},remove_log:{it:1,user:1,lwa:1},};var updateLogEnabled=true;}
var grant=function(){return tealium_storageR('tealium_log','')=='show'?true:false;};var getUserPermission=function(component){return component&&currentUserProfile?userPermissionMatrix[component][currentUserProfile]:0;};var detectUserRole=function(){if(tealium_storageR('tealium_log','')=="show"){switch(tealium_storageR('tealium_team','')){case"lwa":{currentUserProfile="lwa";break;}
case"user":{currentUserProfile="user";break;}
default:{currentUserProfile="it";}}}else{currentUserProfile="";}};var updateElement=function(path,state,datalayer,notes){var index;var pathArray=path.split('.');var o=tealium_log[pathArray[0]];if(pathArray[1])o=o[pathArray[1]];if(pathArray[2])o=o[pathArray[2]];notes=(notes||'').replace(/\s{2,}|\n/g,' ');o.notes=notes?(o.notes?o.notes+', ':'')+notes:o.notes;o.state=o.state=='error'?o.state:(state||o.state);if(typeof datalayer=='object'){//@TODO: fare una copia sopprimendo i riferimenti circolari => utilizzare la funzione tealium_tools.merge
o.datalayer={};for(index in datalayer){if(datalayer.hasOwnProperty(index)&&!index.match(/^Click_FocusElement$/))
o.datalayer[index]=datalayer[index];}}else{o.datalayer={};}
if(state=='error'&&!datalayer.Error_Tealium){datalayer.Error_Tealium=notes;o.datalayer.Error_Tealium=notes;}
if(pathArray[2]&&(o.datalayer.Tags__Abort=='1'||o.datalayer.Tracking_Type=='hiddenaction'))
tealium_log.events[pathArray[1]].adobe.state='aborted';if(!o.timeStart&&o.state)o.timeStart=Date.now();if(!o.timeEnd&&!o.state.match(/^processing/))o.timeEnd=Date.now();tealium_log.update();return true;};var animateLogger=function(){containerDiv.style.bottom=(opened?-logHeight:0)+"px";opened=!opened;};var buildDelayString=function(timestamp){if(!timestamp||!window.performance||!window.performance.timing||!window.performance.timing.domLoading)return'-';var length=((timestamp-window.performance.timing.domLoading)/1000).toFixed(0)+' sec.';return length;};var buildEventDelayString=function(i){if(self.events[i]){var title;{title=(self.events[i].id&&(''+self.events[i].id).match(/click/i)&&self.events[i].builder&&self.events[i].builder.datalayer)?((self.events[i].builder.datalayer.Content_Box?" data-element-id: \""+self.events[i].builder.datalayer.Content_Box+"\"":"")
+
(self.events[i].builder.datalayer.Content_Description?" data-description: \""+self.events[i].builder.datalayer.Content_Description+"\"":"")):"";}
self.print(buildDelayString(self.events[i].timeStart),buildMessageHtml('events.'+i,self.events[i].id+(title?":"+title:"")));{var list=[];if(getUserPermission("listener")&&self.events[i].id&&(''+self.events[i].id).match(/click/i))list.push("listener");if(getUserPermission("data2track")&&self.events[i].id&&(!(''+self.events[i].id).match(/pageview:default/i)))list.push("data2track");if(getUserPermission("utag_data2track")&&self.events[i].id&&(''+self.events[i].id).match(/loading-ready/i))list.push("utag_data2track");if(getUserPermission("builder"))list.push("builder");if(getUserPermission("adobe"))list.push("adobe");for(var d=0;d<list.length;d++){self.print(buildDelayString(self.events[i][list[d]].timeStart),buildMessageHtml('events.'+i+'.'+list[d],self.events[i].id+(title?":"+title:"")),1);}}}};var buildMessageHtml=function(path,eid){var pathArray=path.split('.');var o=tealium_log[pathArray[0]];if(pathArray[1])o=o[pathArray[1]];if(pathArray[2])o=o[pathArray[2]];path=path.replace(/\.(\d+)[^.]*/,"[$1]");var state=o.state?o.state:pathArray.length==2?'':'missing';var color=pathArray.length==2?"white":state=="processing"?"yellow":state=="done"?"lawngreen":state=="error"?"rgb(255, 100, 100)":"gray";var padding=path.match(/listener|data2track|builder|adobe/i)?1:0;var eventLabel=path.match(/events/i)?(tealium_storageR('tealium_preserveLog','')=='on'&&window.localStorage&&window.localStorage.getItem('tealium_logLastEvent')&&pathArray[1]==0?"Event Previous Page":"Event"):"";var prefix=path.match(/utagjs/i)?'Library utag.js: ':path.match(/^utag_data$/i)?'Data Layer utag_data: ':path.match(/preloader/i)?'Preloader: ':path.match(/domready/i)?'DomReady: ':path.match(/listener/i)?'> Listener: ':path.match(/utag_data2track/i)?'> utag_data2track: ':path.match(/data2track/i)?'> data2track: ':path.match(/datalayer/i)?'> Datalayer: ':path.match(/builder/i)?'> Builder: ':path.match(/adobe/i)?'> Adobe: ':'';var prefix_events='';if(path.match(/events/i)){var __eid=(''+eid)||'no-id';var eventId=__eid.split(":");var eventId0=eventId[0]?eventId[0]:'';var eventId1=eventId[1]?eventId[1]:__eid.match(/bounce|monetate|qubit/i)?__eid:'';if(typeof eid==="string"){eventId0=eid.match(/pageview:[^:]*(default|loading-(ready|tracklater)|virtualpage-view)/i)?'On Page Load':eid.match(/linktracking:[^:]*click/i)?'On Mousedown':eid.match(/linktracking:[^:]*abort/i)?'Aborted call':'On Push';eventId1=eid.match(/pageview:[^:]*default/i)?eventId1:eid.match(/pageview:[^:]*(loading-(ready|tracklater)|virtualpage-view)/i)?"\""+eventId1+"\"":eid.match(/linktracking:[^:]*click/i)?eid.replace(/linktracking:[^:]*click:/i,""):eid.match(/linktracking:[^:]*abort/i)?eventId1:"id: \""+eventId1+"\"";}
prefix_events=eventLabel+' #'+pathArray[1]+" - "+eventId0+" - "+eventId1;}
if(!prefix&&prefix_events)prefix=prefix_events;var utagVersion='';if(o.version){utagVersion=(o.version.indexOf(new Date().toISOString().split('T')[0].replace(/-/g,''))>-1)?('- Today version '+(o.version.substr(-4,2)*1+1-(o.version.substr(-4,2)>22?23:0))+':'+o.version.substr(-2)+' CET '):'- Not Today version ';if(o.versionPrev&&o.version!=o.versionPrev)
utagVersion+=(" "+"<span style='background-color:yellow;color:black;letter-spacing:0.2em;padding:0 0.5em;'>NEW</span>");}
var suffix=(pathArray[0]=="utagjs")?utagVersion:(state=="done")?(" in "+((o.timeEnd-o.timeStart)/1000).toFixed(2)+" sec."):(state=="processing")?(" in progress for "+((Date.now()-o.timeStart)/1000).toFixed(0)+" sec."):'';var obj_title=prefix.match(/^> /)?prefix_events:'Utag.js';var obj_subtitle=prefix.replace(/(\: |> )/g,'');var title=(obj_title+' - '+obj_subtitle).replace(/"/g,'\\\'');var stats="";if(path.match(/utag_data|data2track/i)&&o.datalayer){if(tealium_tools.commons.isObject(o.datalayer.Error_DatalayerObject)){var err_obj=o.datalayer.Error_DatalayerObject;var err_count;stats+=" (";for(var __pry in err_obj){if(err_obj.hasOwnProperty(__pry)){err_count=tealium_objQnt(err_obj[__pry]);color=err_count>0&&(__pry=="0"||__pry=="1")?"rgb(255, 100, 100)":color;stats+=" "+err_count+"xP"+__pry;}}
stats+=" )";}}
var linkdatalayer=(Object.keys(o.datalayer).length>0)?'<span style="cursor:pointer;padding:0 2px;" onclick="tealium_log.popupDatalayer(tealium_log.'+path+'.datalayer, \''+title+'\')"><span style="text-decoration: underline;">See variables</span>'+stats+'</span>':'';var errorDetected=(!o.error)?(''):('<span style="cursor:pointer;color:yellow;padding:0 2px;" onclick="tealium_log.popupDatalayer(tealium_log.'+path+'.error)" title="'+(''+o.error).replace(/&/g,'&').replace(/</g,'<').replace(/>/g,'>').replace(/"/g,'"')+'">error detected</span>');if(o.error){document.getElementById(LOGGER_TAB).style.backgroundColor="yellow";document.getElementById(LOGGER_TAB).style.color="black";}
if(color.match(/rgb\(255/)){document.getElementById(LOGGER_TAB).style.backgroundColor="rgba(255,0,0,0.9)";}
return"<div style=\"color:"+color+";padding-left:"+padding+"em;\">"+prefix+' '+state+' '+suffix+' '+(o.notes||'')+' '+linkdatalayer+' '+errorDetected+"</div>";};var addMissingPropsOnDatalayer=function(dl,res_qa){for(var prop in res_qa){if(res_qa.hasOwnProperty(prop)){if(tealium_tools.commons.isUndefined(dl[prop])){dl[prop]="UNDEFINED";}
if(typeof res_qa[prop]==="object"&&res_qa[prop].children){addMissingPropsOnDatalayer(dl[prop],res_qa[prop].children);}}}};var getResultQARows=function(obj,e,val){var build_recursive_rows=function(res_qa,e,val,depth){depth=tealium_tools.commons.isNumber(depth)&&depth>0?depth:0;var lines="";var priority=res_qa&&res_qa.priority>"-1"?"P"+res_qa.priority:"NP";var message=res_qa&&res_qa.error?res_qa.error.type+" > "+res_qa.error.cause:"IGNORE > Variable is not analyzed!";var style=res_qa&&res_qa.error?res_qa.error.style:"skip_row";var fe=(typeof val==="object")?'{...}':JSON.stringify(val,undefined,2);var indent=function(d){var s="";for(var i=0;i<d;i++){s+="> ";}
return s;}(depth);lines+="<tr><td style=\"font-weight: bold;\">"+priority+"</td><td>"+indent+e+"</td><td>"+fe+"</td><td class=\""+style+"\">"+message+"</td></tr>";if(typeof val==="object"){for(var i in val){if(val.hasOwnProperty(i)){var __res_qa=res_qa?(res_qa.children&&res_qa.children[i]?res_qa.children[i]:res_qa):"";lines+=build_recursive_rows(__res_qa,i,val[i],(depth+1));}}}
return lines;};var res_qa=obj.Result_QA&&obj.Result_QA.result&&obj.Result_QA.result[e]?obj.Result_QA.result[e]:undefined;return build_recursive_rows(res_qa,e,val);};var getStatusResultQA=function(obj){var line="";if(obj&&obj.Result_QA&&tealium_tools.commons.isNumber(obj.Result_QA.status)&&tealium_tools.commons.isString(obj.Result_QA.message)){var style=obj.Result_QA.status==1?"warning_row":obj.Result_QA.status==2?"error_row":"success_row";var message=obj.Result_QA.message||"";line="<tr><td colspan=\"4\" class=\""+style+"\" style=\"font-weight: bold; text-align: center; font-size: 14px; padding: 10px; \">"+message+"</td></tr>";}
return line;};var clearResources=function(t_vis,t_log,t_team,t_pre,t_beta){if(t_vis)tealium_storageD('tealium_visibility');if(t_log)tealium_storageD('tealium_log');if(t_team)tealium_storageD('tealium_team');if(t_pre){tealium_storageD('tealium_preserveLog');if(window.localStorage)window.localStorage.removeItem('tealium_logLastEvent');}
if(t_beta&&window.sessionStorage){window.sessionStorage.removeItem("tealium_ext000_automatic_qa");window.sessionStorage.removeItem("tealium_ext000_click_analysis");window.sessionStorage.removeItem("tealium_ext000");window.sessionStorage.removeItem("tealium_ext100");window.sessionStorage.removeItem("tealium_ext200");window.sessionStorage.removeItem("tealium_ext300");window.sessionStorage.removeItem("tealium_ext400");}
};var getUpdateLog=function(){return updateLogEnabled;};var setUpdateLog=function(b){updateLogEnabled=b?true:false;};var self={switchUserRoleByUrlParam:function(){if(window.location.search.indexOf("analytics_steps=off")>-1){clearResources(1,1,1,0,0);}
if(window.location.search.indexOf("analytics_steps=on")>-1){clearResources(0,0,1,0,0);tealium_storageW('tealium_log','show','forever');}
if(window.location.search.indexOf("tealium_team=user")>-1){tealium_storageW('tealium_team','user','forever');tealium_storageW('tealium_log','show','forever');}
if(window.location.search.indexOf("tealium_team=lwa")>-1){tealium_storageW('tealium_team','lwa','forever');tealium_storageW('tealium_log','show','forever');}
detectUserRole();clearResources(0,0,0,!getUserPermission('preserve_log'),!getUserPermission('beta_extension'));},init:function(){if(!grant()){return false;}
if(containerDiv){return true;}
if(!document||!document.createElement||!document.body||!document.body.appendChild){return false;}
containerDiv=document.getElementById(LOGGER_CONTAINER);if(!containerDiv){var head=document.head||document.getElementsByTagName('head')[0],style=document.createElement('style'),css="#"+LOGGER_CONTAINER+"{ width:100%; margin:0; padding:0; box-sizing:border-box; position:fixed; text-align:left; text-transform:none; font-family:monospace; left:0; z-index:"+Z_INDEX+"; bottom:"+(-logHeight)+"px; } \n"
+"#"+LOGGER_TAB+"{ width:85px; box-sizing:border-box; overflow:hidden; font:bold 10px verdana,helvetica,sans-serif; line-height:"+(tabHeight-1)+"px; color:#fff; position:absolute; left:5px; top:"+-tabHeight+"px; margin:0; padding:0; "
+"text-align:center; background:rgba(0,0,0,0.8); border:1px solid #aaa; border-bottom:none; border-top-right-radius:8px; border-top-left-radius:8px; "
+"-webkit-border-top-right-radius:8px; -webkit-border-top-left-radius:8px; -khtml-border-radius-topright:8px; -khtml-border-radius-topleft:8px; -moz-border-radius-topright:8px; -moz-border-radius-topleft:8px; } \n"
+"#"+LOGGER_TAB+":hover { cursor: pointer; text-shadow: 0 0 1px #fff, 0 0 2px #0f0, 0 0 6px #0f0 } \n"
+"#"+LOGGER_HEADER+" { background:rgb(0, 0, 0); width: 100%; color:rgb(170,170,170); text-align:right; font: 12px monospace; } \n"
+"#"+LOGGER_HEADER+" .nav-button { cursor: pointer; padding: 0px; margin-left: 5px; background-color: lightgreen; text-align: center; color: black; text-shadow: white 1px 1px 1px; border-radius: 2px; width: 20px; height: 20px; display: inline-block; vertical-align: middle; } \n"
+"#"+LOGGER_HEADER+" .nav-button:hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+LOGGER_HEADER+" .nav-button-text { padding: 3px; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk { cursor: pointer; padding-right: 25px; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk:hover { color: white; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk.active { color:yellow; } \n"
+"#"+LOGGER_SECTION+" { font:12px monospace; height: "+logHeight+"px; box-sizing:border-box; color:#fff; padding:5px; border-top:1px solid #aaa; background:rgba(0, 0, 0, 0.9); } \n"
+"#"+LOGGER_CONTENT+" { height: calc(100% - 30px); overflow-x:hidden; overflow-y:auto; } \n"
+"#"+LOGGER_CONTENT+" div span:hover { color: white; font-weight: bold; } \n"
+"#"+POPUP_DL+" { position:fixed; z-index:"+(Z_INDEX+1)+"; left:0; top:0; background-color: #000; width:100%; height:100%; font-family:monospace; font-size:11px; overflow-y:auto; } \n"
+"#"+POPUP_DL_CLOSE+" { cursor:pointer; font-family:monospace; font-weight: bold; font-size:18px; border-radius: 10px; padding: 10px 12px; text-align:center; text-shadow: white 1px 1px 1px; position:fixed; top:10px; right:15px; background-color:lightgreen; line-height: initial; } \n"
+"#"+POPUP_DL_CLOSE+":hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+POPUP_DL_CONTENT+" { padding: 10px; } \n"
+"#"+POPUP_DL_CONTENT+" h1.title { color:lightgreen; line-height:normal; font-size:30px; text-align: center; text-shadow: white 1px 1px 3px; font-family: monospace; font-weight: bold; text-transform: inherit;} \n"
+"#"+POPUP_DL+" table { color:#000; background-color:aliceblue; text-align:left; table-layout:unset; font-family:monospace; font-size:11px; margin-bottom: 10px;} \n"
+"#"+POPUP_DL+" table tbody { text-transform:none; } \n"
+"#"+POPUP_DL+" table th { border:1px solid #888; padding:0 6px; background-color:#899; font-size:12px; font-weight:bold; } \n"
+"#"+POPUP_DL+" table td { border:1px solid #888; padding:0 6px; /* word-break: break-word; */ } \n"
+"#"+POPUP_DL+" .success_row { color: #456f45; font-weight: bold; } \n"
+"#"+POPUP_DL+" .alert_row { color: #ca4200; font-weight: bold; } \n"
+"#"+POPUP_DL+" .error_row { color: #ca4200; font-weight: bold; } \n"
+"#"+POPUP_DL+" .warning_row { color: #e69604; font-weight: bold; } \n"
+"#"+POPUP_DL+" .info_row { color: #5c9ebc; font-weight: bold; } \n"
+"#"+POPUP_DL+" .blase { color: #a8cdec; font-weight: bold; } \n"
+"#"+POPUP_DL+" .skip_row { color: #bfbfbf; font-weight: bold; } \n"
+"#"+POPUP_DL+" .ghost { background-color:#000; } \n"
+"#"+POPUP_DL+" pre { padding:0; margin:0; background-color:unset; font-size:11px; font-family:monospace; border-radius:unset; } \n"
+"#"+POPUP_BETA+" { position:fixed; z-index:"+(Z_INDEX+1)+"; left:0; top:0; background-color: #000; width:100%; height:100%; overflow-y: auto; padding: 5px; font-family: monospace; font-size:18px; } \n"
+"."+POPUP_BETA_BTNS+" { cursor:pointer; font-weight: bold; border-radius: 10px; margin-left: 5px; padding: 10px 12px; text-align:center; text-shadow: white 1px 1px 1px; background-color:lightgreen; line-height: 1; float:right; } \n"
+"."+POPUP_BETA_BTNS+":hover { color: white; text-shadow: black 1px 2px 2px; background-color: palegreen; } \n"
+"#"+POPUP_BETA+" h1 { margin:10px 0 0; color:lightgreen; line-height:normal; font-family:monospace; font-size:30px; font-weight: normal; text-transform: capitalize; text-shadow: white 1px 1px 3px; } \n"
+"#"+POPUP_BETA+" textarea { width:100%; overflow:hidden; font-size:11px; font-family:monospace; height:95px; padding:0; } \n"
+"@media screen and (max-width: 1023px) {\n"
+".hidden-tablet-mobile { display: none !important; } \n"
+"}\n"
+"@media screen and (min-width: 768px) and (max-width: 1023px) {\n"
+".hidden-tablet { display: none !important; } \n"
+"}\n"
+"@media screen and (max-width: 767px) {\n"
+".hidden-mobile { display: none !important; } \n"
+"#"+LOGGER_HEADER+" .nav-button { position: absolute; top: 5px; left: calc(100% - 55px); } \n"
+"#"+LOGGER_HEADER+" .nav-button.__resize { left: calc(100% - 55px); } \n"
+"#"+LOGGER_HEADER+" .nav-button.__remove { left: calc(100% - 30px); } \n"
+"#"+LOGGER_HEADER+" .nav-lnk { padding-right: 0px; display: inline-block; width: 50%; text-align: left; } \n"
+"#"+LOGGER_HEADER+" .nav-lnk::before { content: \" "+tealium_stripHtml("&#x2192;")+" \"; } \n"
+"}\n"
+"@media screen and (max-width: 479px) {\n"
+"}\n";style.type='text/css';if(style.styleSheet){style.styleSheet.cssText=css;}else{style.appendChild(document.createTextNode(css));}
head.appendChild(style);containerDiv=document.createElement("div");containerDiv.id=LOGGER_CONTAINER;tabDiv=document.createElement("div");tabDiv.id=LOGGER_TAB;tabDiv.innerText="tealium_log";tabDiv.onclick=function(){tealium_log.toggle();};headerDiv=document.createElement("div");headerDiv.id=LOGGER_HEADER;if(getUserPermission('click_test')){var clickTest=document.createElement('span');clickTest.setAttribute("class","nav-lnk");clickTest.innerText='click analysis';clickTest.onclick=function(){clickTest.setAttribute("class","nav-lnk active");tealium_log.popupClickAnalysis();};headerDiv.appendChild(clickTest);}
if(getUserPermission('clear_storage')){var clearStorage=document.createElement('span');clearStorage.setAttribute("class","nav-lnk");clearStorage.innerText='clear storage';clearStorage.onclick=function(){clearStorage.onclick=function(){};clearStorage.setAttribute("class","nav-lnk active");tealium_clearStorage();window.location.reload();};headerDiv.appendChild(clearStorage);}
if(getUserPermission('beta_extension')){var betaMode=document.createElement('span');betaMode.innerText='beta extensions';betaMode.id="betaModeId";betaMode.onclick=function(){tealium_log.popupBeta();};betaMode.setAttribute("class","nav-lnk "+
(window.sessionStorage&&(window.sessionStorage.getItem("tealium_ext000_automatic_qa")||window.sessionStorage.getItem("tealium_ext000_click_analysis")||window.sessionStorage.getItem("tealium_ext000")||window.sessionStorage.getItem("tealium_ext100")||window.sessionStorage.getItem("tealium_ext200")||window.sessionStorage.getItem("tealium_ext300")||window.sessionStorage.getItem("tealium_ext400"))?"active":""));headerDiv.appendChild(betaMode);}
if(getUserPermission('preserve_log')){var preserveLog=document.createElement('span');preserveLog.setAttribute("class","nav-lnk "+(tealium_storageR('tealium_preserveLog','')=='on'?"active":""));preserveLog.innerText='preserve log';preserveLog.onclick=function(){var a=tealium_storageR('tealium_preserveLog','')=='on';if(a&&window.localStorage)window.localStorage.removeItem('tealium_logLastEvent');tealium_storageW('tealium_preserveLog',(a?'off':'on'));preserveLog.setAttribute("class","nav-lnk "+(a?"":"active"));};headerDiv.appendChild(preserveLog);}
if(getUserPermission('resize_log')){var resizeLog=document.createElement('div');resizeLog.setAttribute("class","nav-button __resize");resizeLog.onclick=function(){tealium_log.toggle();};var resizeLogText=document.createElement('div');resizeLogText.setAttribute("class","nav-button-text");resizeLogText.innerHTML='&mdash;';resizeLog.appendChild(resizeLogText);headerDiv.appendChild(resizeLog);}
if(getUserPermission('remove_log')){var removeLog=document.createElement('div');removeLog.setAttribute("class","nav-button __remove");removeLog.onclick=function(){tealium_log.destroy();};var removeLogText=document.createElement('div');removeLogText.setAttribute("class","nav-button-text");removeLogText.innerHTML='&#10005;';removeLog.appendChild(removeLogText);headerDiv.appendChild(removeLog);}
{var newLineDivBefore=document.createElement("div");newLineDivBefore.setAttribute("style","clear:both;height:0.5em;border-bottom:1px solid #333;");headerDiv.appendChild(newLineDivBefore);}
logDiv=document.createElement("div");logDiv.id=LOGGER_SECTION;logContent=document.createElement("div");logContent.id=LOGGER_CONTENT;containerDiv.appendChild(tabDiv);logDiv.appendChild(headerDiv);logDiv.appendChild(logContent);containerDiv.appendChild(logDiv);document.body.appendChild(containerDiv);}
if(tealium_storageR('tealium_preserveLog','')=='on'&&window.localStorage&&window.localStorage.getItem('tealium_logLastEvent')){this.events[0]=JSON.parse(window.localStorage.getItem('tealium_logLastEvent'));}
return true;},destroy:function(){clearResources(1,1,1,1,1);if(containerDiv){containerDiv.innerHTML="";}},toggle:function(){if(opened){this.close();}else{this.open();}},open:function(){if(!this.init())return;if(opened)return;tealium_storageW('tealium_visibility','on');animateLogger();},close:function(){if(!this.init())return;if(!opened)return;tealium_storageD('tealium_visibility');animateLogger();},clear:function(){if(!this.init())return;logContent.innerHTML="";},print:function(textTime,html,enabled){if(tealium_tools.commons.isNumber(enabled)&&(!enabled))return;if(!containerDiv){var ready=this.init();if(!ready)return;}
var newLineDivBefore=document.createElement("div");newLineDivBefore.setAttribute("style","clear:both;height:0.5em;border-bottom:1px solid #333;");if(textTime==="NEW_LINE"){logContent.appendChild(newLineDivBefore);}else{var timeDiv=document.createElement("div");timeDiv.setAttribute("style","color:#999;"+
"float:left;"+
"width:6em;"+
"text-align:right;");var timeNode=document.createTextNode(textTime+"\u00a0");timeDiv.appendChild(timeNode);var msgDiv=document.createElement("div");msgDiv.setAttribute("style","word-wrap:break-word;"+
"margin-left:7.0em;");msgDiv.innerHTML=html;var newLineDiv=document.createElement("div");newLineDiv.setAttribute("style","clear:both;");if(html.match(/>Event/)){logContent.appendChild(newLineDivBefore);}
logContent.appendChild(timeDiv);logContent.appendChild(msgDiv);logContent.appendChild(newLineDiv);}
logContent.scrollTop=logContent.scrollHeight;},update:function(){if(!grant())return false;if(!this.init())return false;if(!getUpdateLog())return false;this.clear();this.print(buildDelayString(this.utagjs.timeStart),buildMessageHtml('utagjs'),getUserPermission('utag'));if(getUserPermission('preserve_log')&&tealium_storageR('tealium_preserveLog','')=='on'&&window.localStorage&&window.localStorage.getItem('tealium_logLastEvent')){buildEventDelayString(0);this.print("NEW_LINE");}
this.print(buildDelayString(this.utag_data.timeStart),buildMessageHtml('utag_data'),getUserPermission('utag_data'));this.print(buildDelayString(this.preloader.timeStart),buildMessageHtml('preloader'),getUserPermission('preloader'));this.print(buildDelayString(this.domready.timeStart),buildMessageHtml('domready'),getUserPermission('domready'));for(var i=0;i<=this.events.qnt;i++){if(this.events.hasOwnProperty(i)){if(tealium_storageR('tealium_preserveLog','')=='on'&&window.localStorage&&window.localStorage.getItem('tealium_logLastEvent')&&i==0){}
else buildEventDelayString(i);}}
if(tealium_storageR('tealium_preserveLog','')=='on'&&this.events.qnt>0){window.localStorage.setItem('tealium_logLastEvent',JSON.stringify(this.events[this.events.qnt]));}},old:function(e,lev){if(!grant()||(!getUserPermission('console_log')))return false;if(typeof lev=="string"&&lev.match(/log|info|warn|error/)){}else{lev="info";}
console[lev](e);},oldcall:function(oggetto,stringa,tipo){if(!grant()||(!getUserPermission('console_log')))return false;console.error(stringa);},utagjs:{state:'',version:'',versionPrev:(window.localStorage&&window.localStorage.getItem("tealium_version")||''),timeStart:'',timeEnd:'',notes:'',datalayer:{},set:function(state,datalayer,notes){updateElement('utagjs',state,datalayer,notes);}},utag_data:{state:'',timeStart:'',timeEnd:'',notes:'',datalayer:{},bugs:'',set:function(state,datalayer,notes){updateElement('utag_data',state,datalayer,notes);},},preloader:{state:'',timeStart:'',timeEnd:'',notes:'',datalayer:{},set:function(state,datalayer,notes){updateElement('preloader',state,datalayer,notes);}},domready:{state:'',timeStart:'',timeEnd:'',notes:'',datalayer:{},set:function(state,datalayer,notes){updateElement('domready',state,datalayer,notes);}},events:{qnt:0,set:function(component,state,datalayer,notes){if(!datalayer){datalayer={};}
else if(typeof datalayer==="string"||typeof datalayer==="number"){datalayer=tealium_log.events[datalayer][component].datalayer;}
var index;if(datalayer.Tracking_EventId_Serial){index=datalayer.Tracking_EventId_Serial;this[index].id=this[index].builder.datalayer.Tracking_EventId||datalayer.Tracking_EventId||this[index].id||'';}else{index=++this.qnt;datalayer.Tracking_EventId_Serial=index;this[index]={id:datalayer.Tracking_EventId||'',state:'',timeStart:Date.now(),timeEnd:'',datalayer:{},listener:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},data2track:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},utag_data2track:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},builder:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}},adobe:{state:'',notes:'',timeStart:'',timeEnd:'',datalayer:{}}};}
updateElement('events.'+index+'.'+component,state,datalayer,notes);return index;},removeFrom:function(start){start=typeof start=="number"&&start>0&&start<this.qnt?start:1;for(var i=start;i<=this.qnt;i++)delete this[i];this.qnt=start-1;}},listener:{set:function(state,datalayer,notes){tealium_log.events.set('listener',state,datalayer,notes);}},data2track:{set:function(state,datalayer,notes){tealium_log.events.set('data2track',state,datalayer,notes);}},utag_data2track:{set:function(state,datalayer,notes){tealium_log.events.set('utag_data2track',state,datalayer,notes);}},builder:{set:function(state,datalayer,notes){tealium_log.events.set('builder',state,datalayer,notes);}},adobe:{set:function(state,datalayer,notes){tealium_log.events.set('adobe',state,datalayer,notes);}},datalayer:{bug:function(datalayer,bugCode){if(typeof datalayer!=='object'||typeof bugCode!=='string')return;var sep=",";var suf_crt=["correct","CR"];var suf_ncrt=["wrong new case","WRN","wrong","WR","MSs","RM","FMT","RN"];var suffixes=suf_crt.concat(suf_ncrt);var regexp=new RegExp(" ("+(suffixes+"").replace(new RegExp(sep,"g"),"|")+")","g");var errorCodes=(datalayer.Error_Datalayer||'').replace(regexp,"");var pureBugCode=bugCode.replace(regexp,"");var count=tealium_tools.list.count(null,errorCodes,pureBugCode,sep);if(count<1){tealium_tools.list.add(datalayer,"Error_Datalayer",bugCode,true,sep);}
else{count=tealium_tools.list.count(datalayer,"Error_Datalayer",bugCode,sep);if(count==1)return;regexp=new RegExp(" ("+(suf_crt+"").replace(new RegExp(sep,"g"),"|")+")","g");if(bugCode.match(regexp))return;if(pureBugCode==bugCode)return;regexp=new RegExp(pureBugCode+" ("+(suf_crt+"").replace(new RegExp(sep,"g"),"|")+")");datalayer.Error_Datalayer=datalayer.Error_Datalayer.replace(regexp,bugCode);}
}},popupClickAnalysis:function(){if(!grant())return false;if(popupClickTest){popupClickTest.open();return false;}
var table=new tealium_viewComponents.CTable(POPUP_CLICKTEST_TABLE,"","");popupClickTest=new tealium_viewComponents.CPopup(POPUP_CLICKTEST,"","","","Click Analysis",table);document.body.appendChild(popupClickTest.render());setTimeout(function(){try{tealium_log.old("##### CLICK ANALYSIS - START #####","info");{setUpdateLog(false);tealium_clickAnalysis.containerTable=table;tealium_clickAnalysis.detect();}
setTimeout(function(){try{tealium_clickAnalysis.postSimulation=function(){setUpdateLog(true);tealium_log.update();tealium_log.old("##### CLICK ANALYSIS - END #####","info");};tealium_clickAnalysis.simulate();}catch(err){tealium_log.old("### an error has been occurred during the configuration of click analysis => "+err,"error");}},100);}catch(err){tealium_log.old("### an error has been occurred during the running of click analysis => "+err,"error");}},100);},popupBeta:function(){if(!grant())return false;popupDiv=document.createElement("div");document.body.appendChild(popupDiv);popupDiv.id=POPUP_BETA;var x=document.createElement("div");popupDiv.appendChild(x);x.setAttribute("class",POPUP_BETA_BTNS);x.innerHTML="&#10005;";x.onclick=function(){var _el=document.getElementById(POPUP_BETA);_el.parentNode.removeChild(_el);};var reload=document.createElement("div");popupDiv.appendChild(reload);reload.setAttribute("class",POPUP_BETA_BTNS);reload.innerHTML="&#10226;";reload.onclick=function(){window.location.reload(true);};var popupBeta_BuildTextarea=function(e,t){var ext=document.createElement("div");popupDiv.appendChild(ext);ext.innerHTML="<h1>"+(t||e)+"</h1>";var input=document.createElement("textarea");ext.appendChild(input);input.onfocus=function(){this.select();};setTimeout(function(input,t){input.innerText=window.sessionStorage?window.sessionStorage.getItem("tealium_"+e):'';input.addEventListener('input',function(){if(this.value.match(/[^\s]/)){if(window.sessionStorage)window.sessionStorage.setItem("tealium_"+e,this.value);document.getElementById('betaModeId').setAttribute("class","nav-lnk active");}
else{if(window.sessionStorage)window.sessionStorage.removeItem("tealium_"+e);document.getElementById('betaModeId').setAttribute("class","nav-lnk");}},false);},100,input,t);};//@TODO: se AutomaticQA e/o ClickAnalysis non sono caricati allora non ha senso mettere in beta le loro estensioni modificate!
popupBeta_BuildTextarea('ext000_automatic_qa','000 AutomaticQA');popupBeta_BuildTextarea('ext000_click_analysis','000 ClickAnalysis');popupBeta_BuildTextarea('ext000','000 Preloader');popupBeta_BuildTextarea('ext100','100 DomReady');popupBeta_BuildTextarea('ext200','200 AllTagsBefore');popupBeta_BuildTextarea('ext300','300 Adobe');popupBeta_BuildTextarea('ext400','400 AllTagsAfter');},popupDatalayer:function(obj,title){if(!grant())return false;popupDiv=document.createElement("div");popupDiv.id=POPUP_DL;var x=document.createElement("div");x.id=POPUP_DL_CLOSE;x.innerHTML='&#10005;';x.onclick=function(){var _el=document.getElementById(POPUP_DL);_el.parentNode.removeChild(_el);};popupDiv.appendChild(x);var content=document.createElement("div");content.id=POPUP_DL_CONTENT;popupDiv.appendChild(content);var temp,index,entry;var code="<h1 class='title'> "+title+"</h1>";if(obj.account||obj.visitorNamespace){code+="<table><tbody><tr><th>Account</th><th>Report Suite</th></tr>";code+="<tr><td>"+obj.visitorNamespace+"</td><td>"+obj.account+"</td></tr>";code+="</tbody></table>";if(obj.events){code+="<table><tbody><tr><th colspan=3>Events</th></tr>";temp=obj.events.split(',');for(index in temp){if(temp.hasOwnProperty(index)){entry=temp[index].split('=');code+="<tr><th>"+entry[0]+"</th><td>"+(adobeMap[entry[0]]?adobeMap[entry[0]]:'-')+"</td><td>"+(entry[1]?entry[1]:'-')+"</td></tr>";}}
code+="</tbody></table>";}
temp=Object.keys(obj).toString().match(/list[0-9]{1,3}/g);if(temp){code+="<table><tbody><tr><th colspan=3>List</th></tr>";for(index in temp){if(temp.hasOwnProperty(index)){entry=temp[index];code+="<tr><th>"+entry+"</th><td>"+(adobeMap[entry]?adobeMap[entry]:'-')+"</td><td>"+(obj[entry]?obj[entry]:'-')+"</td></tr>";}}
code+="</tbody></table>";}
if(obj.products){code+="<table><tbody><tr><th>Category</th><th>Product ID</th><th>Units</th><th>Revenue</th><th>Events</th><th>eVars</th></tr>";temp=obj.products.split(',');for(index in temp){if(temp.hasOwnProperty(index)){code+="<tr>";var temp2=temp[index].split(';');for(var index2 in temp2){if(temp2.hasOwnProperty(index2))code+="<td>"+temp2[index2]+"</td>";}
code+="</tr>";}}
code+="</tbody></table>";}}
else if(obj.Page_Brand||obj.Page_Country||obj.Page_Platform||obj.Page_DeviceType||obj.Page_Type||obj.Products){code+="<table><tbody><tr><th>Page_Brand</th><th>Page_Platform</th>><th>Page_DeviceType</th><th>Page_Country</th><th>Page_Language</th></tr>";code+="<tr><td>"+obj.Page_Brand+"</td><td>"+obj.Page_Platform+"</td><td>"+obj.Page_DeviceType+"</td>><td>"+obj.Page_Country+"</td><td>"+obj.Page_Language+"</td></tr>";code+="</tbody></table>";code+="<table><tbody><tr><th>Page_Section1</th><th>Page_Section2</th><th>Page_Type</th>";code+="<tr><td>"+obj.Page_Section1+"</td><td>"+obj.Page_Section2+"</td><td>"+obj.Page_Type+"</td></tr>";code+="</tbody></table>";if(obj.Products){code+="<table><tbody><tr><th colspan='7'>PRODUCTS</th></tr><tr><th>ID</th><th>Category</th><th>Units</th><th>Price</th><th>PriceFull</th><th>Status</th><th>Engraving</th></tr>";for(index in obj.Products){if(obj.Products.hasOwnProperty(index)){temp=obj.Products[index];code+="<tr><td>"+index+"</td><td>"+temp.Category+"</td><td>"+temp.Units+"</td><td>"+temp.Price+"</td><td>"+temp.PriceFull+"</td><td>"+temp.Status+"</td><td>"+temp.Engraving+"</td></tr>";}}
code+="</tbody></table>";}}
var table_filters=[];var filters_map_sw={'cp':'Cookie','_c':'E-comm','js_':'JSPAGE','meta.':'META','dom.':'iQ','tealium_':'iQ','ut.':'iQ','va.':'Other','ip':'Other','adobe_':'Not Used',};var filters_map_eq={'page_type':'T_builtIn','page_typeLast':'T_builtIn','link_':'T_builtIn','Events_Array':'T_builtIn','Error_DatalayerObject':'T_builtIn','Result_QA':'T_builtIn','Tags_Tealium_LoadStartTimestamp':'T_builtIn','Tracking_EventId':'T_builtIn','Tracking_EventId_Clean':'T_builtIn','Tracking_EventId_Normalized':'T_builtIn','Tracking_EventIdLog':'T_builtIn','Tracking_EventSerial_Ids':'T_builtIn','Tracking_EventId_Serial':'T_builtIn','Tracking_EventType':'T_builtIn','Tracking_Pusher':'T_builtIn','Tracking_PusherSourceDataElementId':'T_builtIn','Tracking_DataLayerType':'T_builtIn','Tool_Name_Abbreviation_Build':'T_builtIn',};var filters_map_eq_click={'b':'TEALIUM','b2':'TEALIUM','d':'TEALIUM','d0':'TEALIUM','d2':'TEALIUM','tt':'TEALIUM',};var obj_sorted=tealium_objSort(obj,'ascending','key');if(obj_sorted.error<0){this.old('###TEALIUM LOG### : Try to sorting object on popupDatalayer and it receives an exception with error '+obj_sorted.error);obj_sorted.result=obj;}
var filters=Object.keys(filters_map_sw);var comparison;var obj_filtered=tealium_objFilters(obj_sorted.result,filters);if(obj_filtered.error==0){if(tealium_objQnt(obj_filtered.result.filters)>0){table_filters.push(obj_filtered.result.filters);}
filters=Object.keys(filters_map_eq);comparison='equalTo';var obj_tmp=obj_filtered.result.nofilters;obj_filtered=tealium_objFilters(obj_filtered.result.nofilters,filters,comparison);if(obj_filtered.error==0){if(tealium_objQnt(obj_filtered.result.filters)>0){table_filters.unshift(obj_filtered.result.filters);}
filters=Object.keys(filters_map_eq_click);comparison='equalTo';obj_tmp=obj_filtered.result.nofilters;obj_filtered=tealium_objFilters(obj_filtered.result.nofilters,filters,comparison);if(obj_filtered.error==0){if(tealium_objQnt(obj_filtered.result.filters)>0){table_filters.unshift(obj_filtered.result.filters);}
filters=[''];comparison='startWithUpperCase';obj_tmp=obj_filtered.result.nofilters;obj_filtered=tealium_objFilters(obj_filtered.result.nofilters,filters,comparison);if(obj_filtered.error==0){var __except_vars=["id","data_element_id","data_description"];for(var __i=0;__i<__except_vars.length;__i++){if(obj.hasOwnProperty(__except_vars[__i])){delete obj_filtered.result.nofilters[__except_vars[__i]];obj_filtered.result.filters[__except_vars[__i]]=obj[__except_vars[__i]];}}
if(tealium_objQnt(obj_filtered.result.filters)>0){table_filters.unshift(obj_filtered.result.filters);}
if(tealium_objQnt(obj_filtered.result.nofilters)>0){table_filters.push(obj_filtered.result.nofilters);}}else{this.old('###TEALIUM LOG### : Try to filter object by startWithUppercase on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj_tmp);}}else{this.old('###TEALIUM LOG### : Try to filter object by equalTo (click fields) on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj_tmp);}}else{this.old('###TEALIUM LOG### : Try to filter object by equalTo (tealium built-in fields) on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj_tmp);}}else{this.old('###TEALIUM LOG### : Try to filter object by startWith (tealium internal fields) on popupDatalayer and it receives an exception with error '+obj_filtered.error);table_filters.push(obj);}
if(obj.account||obj.visitorNamespace)table_filters=table_filters.reverse();var e,i,fm,fname,fname_col,fe,fd;for(i=0;i<table_filters.length;i++){if(obj.Result_QA&&i==0){code+="<table><thead><tr><th colspan=\"4\" style=\"text-align: center; font-size: 20px;\">TEALIUM DATA LAYER PROPERTIES QA</th></tr></thead>"
+"<colgroup><col style=\"width: 10%;\"><col style=\"width: 30%;\"><col style=\"width: 30%;\"><col style=\"width: 30%;\"></colgroup>"
+"<tbody>"+getStatusResultQA(obj)+"<tr><th>Priority</th><th>Name</th><th>Value</th><th>QA</th></tr>";addMissingPropsOnDatalayer(table_filters[i],obj.Result_QA.result);}
else{code+="<table><colgroup><col><col style=\"width: 50%;\"><col style=\"width: 50%;\"></colgroup><tbody>";}
for(e in table_filters[i]){if(table_filters[i].hasOwnProperty(e)){if(obj.account||obj.visitorNamespace){fe=JSON.stringify(table_filters[i][e],undefined,2);fname=e.replace(/^adobe_/,"");code+="<tr><th>"+fname+"</th><td>"+(adobeMap[e]?adobeMap[e]:'-')+"</td><td><pre>"+fe+"</pre></td></tr>";}else{if(obj.Result_QA&&i==0){code+=getResultQARows(obj,e,table_filters[i][e]);}
else{fname='';fname_col='';for(fm in filters_map_sw){if(filters_map_sw.hasOwnProperty(fm)&&tealium_comparisonFiltering.startWith(e,fm)){fname=filters_map_sw[fm];break;}}
if(fname==''){fname=filters_map_eq[e]||filters_map_eq_click[e]||'';}
if(fname==''){if(tealium_comparisonFiltering.startWithUpperCase(e)||e=='id'){fname='DATALAYER';}else{fname='TEALIUM_OLD';}}
fname_col="<th>"+fname+"</th>";fd=clickLabelMap[e]?clickLabelMap[e]:e;fe=(e.match(/Result_QA/i))?'{...}':JSON.stringify(table_filters[i][e],undefined,2);code+="<tr>"+fname_col+"<th style=\"background: none\">"+fd+"</th><td><pre>"+fe+"</pre></td></tr>";}}}}
code+="</tbody></table>";}
content.innerHTML=code;document.body.appendChild(popupDiv);},};return self;})();tealium_log.switchUserRoleByUrlParam();if(tealium_storageR('tealium_visibility','')=='on'){tealium_log.toggle();}
tealium_log.utagjs.set('done');tealium_log.preloader.set('processing');tealium_logContext='preloader tealium_builder';tealium_logNote='';var tealium_dataNot2track=tealium_storageR('tealium_dataNot2track','');var utag_builder=function(i,o,p){var temp,temp2,index,index2,el,el1,el2,key,list,regexp;var PREFIX="_";var SEP=" ";var formatlistMap={User_Segments:",",OosOptions:",",Engraving:",",Order_GiftCardCode:",",Order_DiscountCode:",",Exam_Fitting:",",Exam_PreviousExam:",",Exam_WornBefore:",",Exam_Id:",",Search_FacetValues_String:"|",Content_TestVersion:"|",Content_TestVersionQ:"|"};var sendBug=function(prop,ticket,status,branch){if((!prop)&&(!ticket)&&(!status))return;var label;if(prop){label=PREFIX+prop;}
if(ticket){branch=branch?"X":"";label=ticket+branch;}
tealium_log.datalayer.bug(o,label+SEP+status);};if(!i||!o){tealium_log.old('utag_builder skipped for i=\''+i+'\'');return true;}
p=p||{};for(temp in p){if(p.hasOwnProperty(temp)&&typeof temp==='string'&&!temp.match(/^local_/)){o[temp]=p[temp];}}
window.utag_data=window.utag_data||{};window.utag_data.ProductsOnCart=window.utag_data.ProductsOnCart||{};window.utag_data.ProductsOnPage=window.utag_data.ProductsOnPage||{};window.utag_data.ProductsOnQuickview=window.utag_data.ProductsOnQuickview||{};switch(i){case'_resume':{for(index in utag.data){if(0||!utag.data.hasOwnProperty(index)||o[index]||index.match(/Tags__Abort/)||index.match(/^(Page_Code|Page_Name)$/)){continue;}
if(0||(index.match(/Device_|Page_|Session_|User_/))||(index.match(/Error_|Device_|Tags_/)&&utag.data.Tracking_EventIdLog.match(/:abort\]\[[^\]\[]*\]$/))){o[index]=utag.data[index];}}
break;}
case'_checkGet':{window.tealium_querystring_object={};window.location.search.replace(/^\?/,'').split(/&/).forEach(function(duet){duet=duet.split('=');duet[0]=duet[0].replace(/pid/i,'pid').replace(/cid/i,'cid');tealium_querystring_object[duet[0]]=duet[1];});if(window.location.search.indexOf("analytics_filter=off")>-1){tealium_storageD('tealium_filter');}
if(window.location.search.indexOf("analytics_filter=on")>-1){tealium_storageW('tealium_filter','on','forever');}
if(window.location.search.indexOf("analytics_beta=off")>-1){tealium_storageD('tealium_beta');}
if(window.location.search.indexOf("analytics_beta=on")>-1){tealium_storageW('tealium_beta','on','forever');}
if(window.location.search.indexOf("analytics_junk=on")>-1){o.Page_Country='JUNK';}
break;}
case'_checkStorage':{list=tealium_storageIndex();regexp=new RegExp("^tealium_data2track[^_]*_");for(index=0;index<list.length;index++){key=list[index];index2=key.replace(regexp,'');if(typeof key==='string'&&key.match(regexp)){if(!o[index2]){o[index2]=tealium_storageR(key);tealium_log.old('data2track: '+index2+' = '+o[index2]);}
//@TODO: use isValueOf existing function in tool QA for matching one of available values
else if(index2.match(new RegExp("^("+Object.keys(formatlistMap).join("|")+")$"))){tealium_tools.list.concat(o,index2,tealium_storageR(key),formatlistMap[index2]);tealium_tools.list.deduplicate(o,index2,formatlistMap[index2]);tealium_log.old('datalayer+data2track: '+index2+' = '+o[index2]);}}}
break;}
case'Page_':{{o.Page_Country=(typeof o.Page_Country==='string'?o.Page_Country:'')
.replace(/UK/i,'GB');o.Page_Country=o.Page_Country.replace(/\s/g,'').toUpperCase();o.Page_Country=o.Page_Country||'Unknown';}
{o.Page_Region=o.Page_Country.match(/ROE|EU|AT|BE|CZ|DK|EE|FI|FR|DE|GR|HU|IE|IT|LV|LT|LU|MT|NL|NO|PL|PT|RU|SK|ES|SE|CH|TR|GB|UA/)?'EU':o.Page_Country.match(/US|CA/)?'NA':o.Page_Country.match(/AU|DB|CN|HK|IN|MY|MV|MM|NP|PK|SG|LK|TH/)?'ASIAPAC':o.Page_Country.match(/JP|KR|TW/)?'FAREAST':o.Page_Country.match(/LA|AR|BR|MX/)?'CLA':o.Page_Country.match(/AE|BH|QA|EG|IL|LB|SA|KW/)?'MENA':o.Page_Country.match(/ZA/)?'AFRICA':'Unknown';}
{o.Page_Language=(typeof o.Page_Language==='string'?o.Page_Language:'');o.Page_Language=o.Page_Language.toUpperCase();o.Page_Language=o.Page_Language||'Unknown';}
{o.Page_DeviceType=(typeof o.Page_DeviceType==='string'?o.Page_DeviceType:'')
.replace(/^m.*/i,'mobile')
.replace(/^d.*/i,'desktop')
.replace(/^r.*/i,'responsive')
.replace(/^x.*|^a.*./i,'all');o.Page_DeviceType=o.Page_DeviceType.toLowerCase();o.Page_DeviceType=o.Page_DeviceType||'Unknown';}
{o.Page_Type=(typeof o.Page_Type==='string'?o.Page_Type:'');o.Page_Type=o.Page_Type.charAt(0).toUpperCase()+o.Page_Type.slice(1);o.Page_Type=o.Page_Type||'Unknown';}
{o.Page_Section1=(typeof o.Page_Section1==='string'?o.Page_Section1:'');o.Page_Section1=o.Page_Section1.charAt(0).toUpperCase()+o.Page_Section1.slice(1);}
{o.Page_Section2=(typeof o.Page_Section2==='string'?o.Page_Section2:'');o.Page_Section2=o.Page_Section2.charAt(0).toUpperCase()+o.Page_Section2.slice(1);}
{o.Page_Name=[o.Page_Section1,o.Page_Section2,o.Page_Type==o.Page_Section1&&o.Page_Section2===''?'':(o.Page_Type===o.Page_Section2)?'':o.Page_Type].join(':').replace(/:+$/,'').replace(/:+/,':');o.Page_NameLast=o.Page_Name;o.Page_Code=[o.Page_Country,o.Page_Language,o.Page_DeviceType.replace(/responsive/i,'R').replace(/all/i,'X').replace(/desktop/i,'D').replace(/mobile/i,'M').replace(/unknown/i,''),].join(':')+':'+o.Page_Name;o.Page_CodeLast=o.Page_Code;o.Page_BrandCountry=[o.Page_Brand,o.Page_Country,].join(':');}
{o.Page_Platform=(typeof o.Page_Platform==='string'?o.Page_Platform:'');o.Page_Platform=o.Page_Platform||'Unknown';}
{o.Page_Url=(o.Page_Url||document.location.href)
.replace(/=[a-z0-9\.\-_]+@[a-z0-9\.\-_]+(&|$|#)/ig,'=***@***$1');o.Page_Path=(o.Page_Path||document.location.pathname)
.replace(/(.)\/$/,"$1");o.Page_QueryString=(o.Page_QueryString||document.location.search)
.replace(/=[a-z0-9\.\-_]+@[a-z0-9\.\-_]+(&|$|#)/ig,'=***@***$1');if(o.Page_Url.match(/\*\*\*\@\*\*\*/)||o.Page_QueryString.match(/\*\*\*\@\*\*\*/)){sendBug("","1789","WR");}
o.Page_PathQueryString=o.Page_Path+o.Page_QueryString;switch(o.Page_Platform){case'WCS':{o.Page_Url=o.Page_Url.replace(/(^krypto|&krypto)=[^&]+/,'');o.Page_Path=o.Page_Path.replace(/^\/webapp\/wcs\/stores\/servlet\//,'/');o.Page_QueryString=o.Page_QueryString.replace(/(^krypto|&krypto)=[^&]+/,'');break;}}
switch(o.Page_Brand){case'RB':{if('JP,CN'.indexOf(o.Page_Country)>-1){o.Page_Path=document.location.href.replace(document.location.hash,'').replace(document.location.search,'');if(o.Page_Country=='JP'&&o.Page_Path.indexOf('detail.php')>-1){o.Page_Path+='/'+document.location.search.substr(1);sendBug("Page_Path","","WR");}}
if(document.location.search.match(/aspxerrorpath/)){o.Page_Path=document.location.search.split('aspxerrorpath=')[1].split('&')[0];o.Page_Url=window.location.origin+o.Page_Path;sendBug("Page_Path_Url","",(o.Error_Code!='404 - page not found'?"WR":"CR"));o.Error_Code='404 - page not found';}
if(o.Error_Code&&o.Error_Code.match(/404/)&&o.Page_Platform.match(/DMP( no-ecommerce)? \(mobile\)/)&&tealium_storageR('tealium_data2track_Action_LastUrlRequested','')!==''){o.Page_Path=tealium_storageR('tealium_data2track_Action_LastUrlRequested','');o.Page_Url=window.location.origin+o.Page_Path;sendBug("","1789","WR");}
break;}
default:break;}}
{o.Page_CountryThirdPlatforms=utag_settings('Page_CountryThirdPlatforms',o);o.Page_CountryThirdPlatforms_YN=o.Page_Country.match(new RegExp(o.Page_CountryThirdPlatforms))?'Y':'N';o.Page_CountryEcommerce_YN=utag_settings('Page_CountryEcommerce_YN',o);}
{if(o.Page_LoadTime_Float){if(o.Page_LoadTime_Float>60){o.Page_LoadTime_Float=60;tealium_log.oldcall(o,'Page loading time > 60sec','Anomaly');sendBug("Page_LoadTime_Float","","WR");}
if(o.Page_LoadTime_Float<0){delete o.Page_LoadTime_Float;tealium_log.oldcall(o,'Page loading time < 0sec','Bug');sendBug("Page_LoadTime_Float","","RM");}}
if(o.Page_LoadTime_Float){o.Page_LoadTime_Int=+(o.Page_LoadTime_Float.toFixed(0));}}
{if(0||(o.Page_Path&&o.Page_Path.match(/Search|\/plp$|\/clp$|\/clv$/i))||(o.Page_Name&&o.Page_Name.match(/^Home|Landing/)&&!o.Page_Name.match(/Checkout|MyAccount|Cart/i))){o.Page_AssistToCart=o.Page_Path;}
else if(tealium_storageR('tealium_data_action_lastEvent','').match(/\[[DM] Search/i)){o.Page_AssistToCart="/SearchSideBar";}
else if(tealium_storageR('tealium_data_action_lastEvent','').match(/\[HeaderNav/i)){o.Page_AssistToCart="/MainMenu";}}
{o.page_type=o.Page_Type.match(/home/i)?'home':o.Page_Type.match(/Plp|Clp|Clv/i)?'category':o.Page_Type.match(/product|Configurator|Pdp|Pcp/i)?'product':o.Page_Type.match(/InternalSearch|Search/i)?'search':o.Page_Type.match(/CartPage|Cart/i)?'cart':o.Page_Type.match(/Payment|Delivery/i)?'checkout':o.Page_Type.match(/confirmation|ThankYou/i)?'confirmation':'';o.page_typeLast=o.page_type;}
break;}
case'Tags_':{{if(o["ut.version"]){o.Tags_Tealium_ReleaseCode=o["ut.version"].slice(0,-4)+'.'+o["ut.version"].slice(-4);if(!tealium_log.utagjs.version){tealium_log.utagjs.version=o.Tags_Tealium_ReleaseCode;tealium_log.update();tealium_storageW('tealium_version',o.Tags_Tealium_ReleaseCode,'forever');}}
if(o.Tags_Tealium_LoadStartTimestamp){if(window.performance&&window.performance.timing&&window.performance.timing.domLoading){if(typeof window.performance.timing!=="object"){tealium_log.oldcall(o,'performance.timing = '+typeof window.performance.timing,'Bug');sendBug("perf_time","","WR");}
o.Tags_Tealium_LoadLatency=+(((o.Tags_Tealium_LoadStartTimestamp)-window.performance.timing.domLoading)/1000).toFixed(2);if(o.Tags_Tealium_LoadLatency<60){tealium_storageW('tealium_data2track_Tags_Tealium_LoadLatency',o.Tags_Tealium_LoadLatency);tealium_log.old('Utag load latency: '+o.Tags_Tealium_LoadLatency+' sec');}else{tealium_log.oldcall(o,'Utag load latency more than '+(o.Tags_Tealium_LoadLatency>120?'2 minutes':'1 minute'),'Bug');sendBug("Tags_Tealium_LoadLatency","","RM");delete o.Tags_Tealium_LoadLatency;}}else{tealium_log.oldcall(o,'performance.timing.domLoading not supported','Bug');sendBug("perf_time_dom","","WR");}
delete o.Tags_Tealium_LoadStartTimestamp;}else{tealium_log.old('skipped, probably not the 1st call');}}
{{o.Tags_AdobeAnalytics_Server=utag_settings('Tags_AdobeAnalytics_Server',o);o.Tags_AdobeAnalytics_ServerSecure=utag_settings('Tags_AdobeAnalytics_ServerSecure',o);}
{o.Tags_AdobeAnalytics_RSID=utag_settings('Tags_AdobeAnalytics_RSID',o);o.Tags_AdobeAnalytics_RSID_Alternative=utag_settings('Tags_AdobeAnalytics_RSID_Alternative',o);o.Tags_AdobeAnalytics_RSID_Alternative=(!o.tealium_data_user_segments)?o.Tags_AdobeAnalytics_RSID_Alternative:(o.Page_Brand=='RB'&&o.tealium_data_user_segments.match(/\[CSR\]/i))?'luxray-ban-csr':o.Tags_AdobeAnalytics_RSID_Alternative;if(o.Page_Environment=='PROD'){o.Tags_AdobeAnalytics_RSID=o.Tags_AdobeAnalytics_RSID_Alternative;}}
o.Tags_AdobeAnalytics_PageName=o.Page_Path;if(o.Page_Brand=='RB'){if(o.Page_Code&&o.Page_Code.match(/cart|checkout|myaccount/i)){o.Tags_AdobeAnalytics_PageName=o.Page_Code;tealium_log.old('dynamic URL detected. pageName=Page_Name');}
if(o.Page_Code&&o.Page_Code.match(/MiniCart/i)){o.Tags_AdobeAnalytics_PageName=o.Page_Code;tealium_log.old('virtual page detected. pageName=Page_Name');}}
{o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit=(!window.tealium_querystring_object)?(''):(tealium_querystring_object.pid||tealium_querystring_object.cid||'');if(o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit){if(!tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceCid_thisSession','')){tealium_cookieW('tealium_data_tags_adobeAnalytics_trafficSourceCid_lastFirst',o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit,30);}
tealium_storageW('tealium_data_tags_adobeAnalytics_trafficSourceCid_thisSession',o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit);tealium_storageW('tealium_data_tags_adobeAnalytics_trafficSourceCid_last',o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit,'forever');}
o.Tags_AdobeAnalytics_TrafficSourceCid_ThisSession=tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceCid_thisSession','');o.Tags_AdobeAnalytics_TrafficSourceCid_Last=tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceCid_last','');o.Tags_AdobeAnalytics_TrafficSourceCid_LastFirst=tealium_cookieR('tealium_data_tags_adobeAnalytics_trafficSourceCid_lastFirst','');}
if(window.tealium_log.preloader.state!="done"){var JID={};JID.dayCode=new Date();JID.dayCode=''
+(''+JID.dayCode.getUTCFullYear()).substr(3,1)
+(''+(101+JID.dayCode.getUTCMonth())).substr(1)
+(''+(100+JID.dayCode.getUTCDate())).substr(1);o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit='';o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking=tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceJid_stacking','');o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array=o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking?o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking.split('-'):[];o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession=tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceJid_stackingInSession','');o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array=o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession?o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession.split('-'):[];if(o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit
.replace(/^RB08/,'XX-SGA')
.replace(/^RB01/,'XX-TOC')
.replace(/^SA03/,'XX-FGS')
.replace(/^RB30/,'XX-TNP')
.replace(/^RB31/,'XX-TGC')
.replace(/^RB39/,'XX-TOD')
.replace(/^IP01/,'XX-SGA')
.replace(/^SA01/,'XX-SGA')
.replace(/^GL01/,'XX-MVT')
.replace(/^SA06/,'XX-AWN')
.replace(/^\w\w\d\d/,'XX----')
.substr(3,3)
.toUpperCase()
.replace('EEF','TEF')
.replace('OPG','PPG')
.replace('SBA','PBA')
.replace('SBI','PBI')
.replace('SGA','PGA')
.replace('SGD','PGD')
.replace('SHA','PHA')
.replace('SLU','PLU')
.replace('SSO','PSO')
.replace('SYA','PYA')
.substr(0,1)
.replace(/^A$/,'AFF')
.replace(/^C$/,'CAL')
.replace(/^D$/,'DIS')
.replace(/^E$/,'EDM')
.replace(/^M$/,'APP')
.replace(/^O$/,'OFF')
.replace(/^R$/,'REF')
.replace(/^P$/,'SEM')
.replace(/^F$/,'FEE')
.replace(/^S$/,'SOC')
.replace(/^X$/,'STO')
.replace(/^T$/,'TRA')
.replace(/^Y$/,'YEX');}
else{JID.referrer=(document.referrer||'').replace(/^https?:\/\//i,'').replace(/^www\./i,'');JID.internal=(window.location.hostname||'');JID.engines="about.com|alice.com|alltheweb.com|altavista.com|aol.com|ask.com|baidu.com|bing.com|cnn.com/search|daum.net|duckduckgo.com|ekolay.net|eniro.se|google|kvasir.no|lycos.com|mamma.com|msn.com|mynet.com|najdi.org.mk|naver.com|online.onetcenter.org|ozu.es|pchome.com|rambler.ru|search.com|search.netscape.com|search.virgilio.it|sesam.no|seznam.cz|szukacz.pl|terra.com|voila.fr|wp.pl|search.yahoo.com|yam.com|yandex.com";JID.social=""
+"12seconds.tv|4travel.jp|advogato.org|ameba.jp|anobii.com|asmallworld.net|backtype.com|badoo.com|bebo.com|bigadda.com|bigtent.com|biip.no|blackplanet.com|blog.seesaa.jp|blogspot.com|blogster.com|blomotion.jp|bolt.com|brightkite.com|buzznet.com|cafemom.com|care2.com|classmates.com|cloob.com|collegeblender.com|cyworld.co.kr|cyworld.com.cn|dailymotion.com|delicious.com|deviantart.com|digg.com|diigo.com|disqus.com|draugiem.lv"
+"|facebook.com|faceparty.com|fc2.com|flickr.com|flixster.com|fotolog.com|foursquare.com|friendfeed.com|friendsreunited.com|friendster.com|fubar.com|gaiaonline.com|geni.com|goodreads.com|grono.net|habbo.com|hatena.ne.jp|hi5.com|hotnews.infoseek.co.jp|hyves.nlibibo.comidenti.ca|instagram.com|imeem.com|intensedebate.com|irc-galleria.net|iwiw.hu|jaiku.com|jp.myspace.com|kaixin001.com|kaixin002.com|kakaku.com|kanshin.com"
+"|kozocom.com|last.fm|linkedin.com|livejournal.com|matome.naver.jp|me2day.net|meetup.com|mister-wong.com|mixi.jp|mixx.com|mouthshut.com|multiply.com|myheritage.com|mylife.com|myspace.com|myyearbook.com|nasza-klasa.pl|netlog.com|nettby.no|netvibes.com|nicovideo.jp|ning.com|odnoklassniki.ru|orkut.com|pakila.jp|photobucket.com|pinterest.com|plaxo.com|plurk.com|plus.google.com|reddit.com|renren.com|skyrock.com|slideshare.net"
+"|smcb.jp|smugmug.com|sonico.com|studivz.net|stumbleupon.com|t.163.com|t.co|t.hexun.com|t.ifeng.com|t.people.com.cn|t.qq.com|t.sina.com.cn|t.sohu.com|tabelog.com|tagged.com|taringa.net|thefancy.com|tripit.com|trombi.com|trytrend.jp|tuenti.com|tumblr.com|twine.com|twitter.com|uhuru.jp|viadeo.comvimeo.com|vk.com|vox.com|wayn.com|weibo.com|weourfamily.com|wer-kennt-wen.de|wordpress.com|xanga.com|xing.com|yammer.com|yaplog.jp"
+"|yelp.com|youku.com|youtube.com|yozm.daum.net|yuku.com|zooomr.com";JID.internal=new RegExp('^(\\w*\\.)?('+JID.internal.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');JID.engines=new RegExp('^(\\w*\\.)?('+JID.engines.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');JID.social=new RegExp('^(\\w*\\.)?('+JID.social.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');JID.isInternal=JID.referrer.match(JID.internal)?1:0;JID.isFirst=o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking==='';JID.isEntry=o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession==='';o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=(JID.referrer.match(JID.engines))?'ORG':(JID.referrer.match(JID.social))?'SOC':(JID.isInternal&&JID.isFirst)?'INT':(JID.isInternal&&JID.isEntry)?'RES':(JID.isInternal)?'':(JID.referrer===''&&JID.isFirst)?'DIR':(JID.referrer===''&&JID.isEntry)?'RES':(JID.referrer==='')?'':'REF';}
if(o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit=''
+JID.dayCode
+(o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession===''?1:o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.length>8?'+':(o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.length+1))
+o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit;o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.push(o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit);while(o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.length>15){o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.shift();}
o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking=o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array.join('-');o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.push(o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit);while(o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.length>15){o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.shift();}
o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession=o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array.join('-');tealium_storageW('tealium_data2track_Tags_AdobeAnalytics_TrafficSourceJid_ThisHit',o.Tags_AdobeAnalytics_TrafficSourceJid_ThisHit);tealium_storageW('tealium_data_tags_adobeAnalytics_trafficSourceJid_stacking',o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking,'forever');tealium_storageW('tealium_data_tags_adobeAnalytics_trafficSourceJid_stackingInSession',o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession);}
delete window.JID;delete o.Tags_AdobeAnalytics_TrafficSourceJid_Stacking_Array;delete o.Tags_AdobeAnalytics_TrafficSourceJid_StackingInSession_Array;}
if(window.tealium_log.preloader.state!="done"){var MID={};o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit='';o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession=tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceMid_thisSession','');o.Tags_AdobeAnalytics_TrafficSourceMid_Last=tealium_storageR('tealium_data_tags_adobeAnalytics_trafficSourceMid_last','');MID.isFirst=!o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession;if(o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceCid_ThisHit;}else if(MID.isFirst){o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=(document.referrer||'').replace(/^https?:\/\//i,'').replace(/^www\./i,'');if(!o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit){o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit='direct';}
else{var __host=(window.location.hostname||'').split(".");if(__host.length>2){__host.shift();}
MID.internal=__host.join(".");MID.internal=new RegExp('^(\\w*\\.)?('+MID.internal.replace(/\./g,'\\.').replace(/\//g,'\\/')+')([\\./].*)?$','i');MID.isInternal=o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit.match(MID.internal)?1:0;if(MID.isInternal)o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit=o.Tags_AdobeAnalytics_TrafficSourceMid_Last||'internal';}}
if(o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit){tealium_storageW('tealium_data2track_Tags_AdobeAnalytics_TrafficSourceMid_ThisHit',o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit);o.Tags_AdobeAnalytics_TrafficSourceMid_Last=o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession=o.Tags_AdobeAnalytics_TrafficSourceMid_ThisHit;tealium_storageW('tealium_data_tags_adobeAnalytics_trafficSourceMid_last',o.Tags_AdobeAnalytics_TrafficSourceMid_Last,'forever');tealium_storageW('tealium_data_tags_adobeAnalytics_trafficSourceMid_thisSession',o.Tags_AdobeAnalytics_TrafficSourceMid_ThisSession);}
delete window.MID;}}
{if(tealium_querystring_object.zanpid){tealium_storageW('tealium_data_tags_zanox_publisherId',tealium_querystring_object.zanpid);}
o.Tags_Zanox_PublisherId=tealium_storageR('tealium_data_tags_zanox_publisherId','');}
{if(tealium_querystring_object.hwdid){tealium_storageW('tealium_data_tags_headway_hwdId',tealium_querystring_object.hwdid);}
o.Tags_Headway_Hwdid=tealium_storageR('tealium_data_tags_headway_hwdId','');}
{o.Tags_Google_clickId=tealium_querystring_object.gclid||'';}
break;}
case'Device_':{if(window.navigator.userAgent){o.Device_UserAgent=window.navigator.userAgent;}
if(!o.Device_UserAgent){o.Page_Country='JUNK';o.Device_UserAgent='empty';tealium_log.old('fiter: switched from '+o.Page_Country+' to JUNK due to blank useragent');}
else if(o.Device_UserAgent=='test'||window.location.search.indexOf("analytics_junk=on")>-1){o.Page_Country='JUNK';o.Device_UserAgent='test';tealium_log.old('fiter: switched from '+o.Page_Country+' to JUNK due to test flag');}
else if(o.Device_UserAgent.match(/gomez|bot/i)){o.Page_Country='JUNK';tealium_log.old('fiter: switched from '+o.Page_Country+' to JUNK due to gomez/bot detection');}
else if(o.Device_UserAgent.match(/micromessenger|windowswechat/i)){o.Device_UserAgent='WeChat browser';}
else if(o.Device_UserAgent.match(/\[FB/i)){o.Device_UserAgent='Facebook browser';}
else if(o.Device_UserAgent.match(/\(POG\)/i)){o.Device_UserAgent='Purchases on Google Shopping (POG)';}
o.Device_ScreenSize=window.screen.width+'x'+window.screen.height;var isHighDensity=function(){return((window.devicePixelRatio&&window.devicePixelRatio>1.3)||(window.matchMedia&&(window.matchMedia('only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)').matches||window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)').matches)));};var isRetina=function(){return(/(Macintosh|iPad|iPhone|iPod)/g.test(window.navigator.userAgent)&&((window.devicePixelRatio&&window.devicePixelRatio>=2)||(window.matchMedia&&(window.matchMedia('only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)').matches||window.matchMedia('only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)').matches))));};o.Device_ScreenDensity=(isRetina())?('Retina'):(isHighDensity())?('HD'):('SD');o.Device_ScreenZoom=(o.Page_DeviceType=='mobile')?('mobile'):(!window.devicePixelRatio)?('n.a.'):(o.Device_ScreenDensity=='SD')?(Math.round(window.devicePixelRatio*100)):(o.Device_ScreenDensity=='HD')?(Math.round(window.devicePixelRatio*100/3)):(o.Device_ScreenDensity=='Retina')?(Math.round(window.devicePixelRatio*100/2)):'n.a.';o.Device_Screen=o.Device_ScreenSize+' z'+o.Device_ScreenZoom+' d'+o.Device_ScreenDensity;break;}
case'User_':{{if(o.User_Id&&!o.User_Id.match(/\_/)){o.User_Id=o.Page_Platform.replace(/ /g,'-')+'_'+o.User_Id;}}
{o.User_IdTimeStamp=tealium_storageR('tealium_data_user_timeStamp',Date.now());tealium_storageW("tealium_data_user_timeStamp",o.User_IdTimeStamp,'forever');}
{o.User_City=(0||o.User_City||tealium_cookieR('aka-ct','')||tealium_storageR('tealium_data_user_city','')).toUpperCase();tealium_storageW('tealium_data_user_city',o.User_City);o.User_Country=(0||o.User_Country||tealium_cookieR('aka-cc','')||tealium_storageR('tealium_data_user_country','N.A.')).toUpperCase();tealium_storageW('tealium_data_user_country',o.User_Country);if(!o.User_International){if(!o.User_Country||(!o.Page_Country)){o.User_International='NA';}else if(o.User_Country==o.Page_Country){o.User_International='LOCAL';}else{o.User_International='INTERNATIONAL';}
o.User_International+=" "+o.User_Country;}
o.User_Language=(0||o.User_Language||window.navigator.language||tealium_storageR('tealium_data_user_language','')||'NA').toUpperCase();tealium_storageW('tealium_data_user_language',o.User_Language);o.User_ZipCode=(0||o.User_ZipCode||tealium_cookieR('aka-zp','').split(/[-+]/)[0]||tealium_storageR('tealium_data_user_zipcode',''));tealium_storageW('tealium_data_user_zipcode',o.User_ZipCode);}
{o.User_LoginStatus=o.User_LoginStatus||'Unknown';o.User_LoginStatus=o.User_LoginStatus.replace('Registered','Logged');o.User_LoginStatusAndSource=(o.User_LoginStatusAndSource||o.User_LoginStatus).replace('Registered','Logged');if(1&&!o.User_LoginStatus.match(/ \(storage\)$/)&&o.User_LoginStatusAndSource.match(/ \(storage\)$/)&&o.User_LoginStatusAndSource.replace(/ - .+/,'')!=o.User_LoginStatus.replace(/ - .+/,''))o.User_LoginStatusAndSource=o.User_LoginStatus;o.User_LoginStatus=o.User_LoginStatus.replace(/ \(storage\)/,'');o.User_LoginStatusAndSource=o.User_LoginStatusAndSource.replace(/ \(storage\)/,'');if(o.Page_Brand=='RB'){if(jQuery(".wcs-myacc-logout").length)o.User_LoginStatus='Logged';if(o.User_LoginStatus.match(/Logged/i)){temp=tealium_storageR('tealium_data_action_lastAction','');if(temp.match(/ùù/i))o.User_LoginStatusAndSource='Logged - MyAccountReturn';else if(temp.match(/ùù/i))o.User_LoginStatusAndSource='Logged - MyAccountSignUp';else if(temp.match(/CheckoutDelivery_Login_Login/i))o.User_LoginStatusAndSource='Logged - CheckoutReturn';else if(temp.match(/CheckoutThankYou_NewAccount_Create/i))o.User_LoginStatusAndSource='Logged - CheckoutSignUp';else if(temp.match(/ùù/i))o.User_LoginStatusAndSource='Logged - ThankYouPageSignUp';else if(temp.match(/ùù/i))o.User_LoginStatusAndSource='Logged - FromPreviousSession';}
temp=tealium_storageR("tealium_data_action_lastAction",'');if(!temp.match(o.Page_Code)){if(temp.match(/click \[user login form\]/)){o.User_LoginStatus='Logged';o.User_LoginStatusAndSource='Logged - MyAccountReturn';o.Events_UserLogin="1";o.Events_UserAccountNew="0";}
else if(temp.match(/click \[user register form\]/)){o.User_LoginStatus='Logged';o.User_LoginStatusAndSource='Logged - MyAccountSignUp';o.Events_UserAccountNew="1";}
else if(temp.match(/click \[UserLoginForm\]/)){o.User_LoginStatus='Logged';o.User_LoginStatusAndSource='Logged - MyAccountReturn';o.Events_UserLogin="1";}
else if(temp.match(/Login\/Register click \[undefined\]\[\*/)){o.User_LoginStatus='Logged';o.User_LoginStatusAndSource='Logged - MyAccountSignUp';o.Events_UserAccountNew="1";}}}
o.User_LoginStatus=o.User_LoginStatusAndSource.replace(/ - .+/,'');tealium_storageW('tealium_data2track4session_User_LoginStatus',o.User_LoginStatus+' (storage)');tealium_storageW('tealium_data2track4session_User_LoginStatusAndSource',o.User_LoginStatusAndSource+' (storage)');}
if(o.User_Email_MD5){tealium_storageW('tealium_data_user_emailMd5',o.User_Email_MD5);}else{o.User_Email_MD5=tealium_storageR('tealium_data_user_emailMd5','');}
{o.User_Segments=(typeof o.User_Segments==="string")?o.User_Segments:'';window.tealium_data_user_segments=tealium_storageR('tealium_data_user_segments','');{jQuery('input[type="text"],input[type="email"]').each(function(){temp=jQuery(this).val();if(temp.match(/@[^@]*luxottica\.com/)){tealium_tools.list.add(o,'User_Segments','Luxotticans',true,',');}
else if(temp.match(/@jetconcierge\.net/)||temp.match(/@jetspecialorder\.com/)){tealium_tools.list.add(o,'User_Segments','Jet.com',true,',');}});if(tealium_cookieR('sr_token','')!==''){tealium_tools.list.add(o,'User_Segments','Shoprunner',true,',');}
if(tealium_cookieR('isCSRSession','')!==''){tealium_tools.list.add(o,'User_Segments','CSR',true,',');}}
tealium_tools.list.deduplicate(o,'User_Segments',',');tealium_tools.list.concat(window,'tealium_data_user_segments',o.User_Segments,',');tealium_tools.list.deduplicate(window,'tealium_data_user_segments',',');}
{o.User_Frequency=tealium_storageR("tealium_data_user_frequency",'1');o.User_Recency=tealium_storageR("tealium_data_user_recency",'New');temp=tealium_storageR("tealium_data_action_lastTimeStamp",Date.now());temp2=((Date.now()-temp)/(1000*60*60))|0;if(temp2>12){o.User_Frequency++;o.User_Recency=(temp2/24)|0;}
tealium_storageW("tealium_data_user_frequency",o.User_Frequency);tealium_storageW("tealium_data_user_recency",o.User_Recency);}
break;}
case'Session_':{{o.Session_IdTimeStamp=tealium_storageR('tealium_data_session_timeStamp',0);o.Session_Serial=tealium_storageR('tealium_data_session_serial',0);if(o.Session_IdTimeStamp===0){o.Session_IdTimeStamp=Date.now();o.Session_Serial=parseInt(o.Session_Serial,10)+1;}
else if(o.Session_Serial===0){o.Session_Serial=1;}
tealium_storageW("tealium_data_session_timeStamp",o.Session_IdTimeStamp);tealium_storageW("tealium_data_session_serial",o.Session_Serial,'forever');}
{var currentDate=new Date();o.Session_Time_Hour=('0'+currentDate.getHours()).slice(-2);o.Session_Time_DayOfWeek='Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',')[currentDate.getDay()];o.Session_Time=(currentDate.getYear()>115&&currentDate.getYear()<130)?'y'+currentDate.getYear().toString().substring(1)
+' m'+(101+currentDate.getMonth()).toString().substring(1)
+' d'+(100+currentDate.getDate()).toString().substring(1)
+' h'+o.Session_Time_Hour
+' w'+o.Session_Time_DayOfWeek:'';}
{o.Session_WeatherCode=(0||o.Session_WeatherCode||tealium_storageR('tealium_data_session_weatherCode',''));var t_weather={'APPID':"83ad32729a095d5d5deb099664f44484",'version':"191114.17.40",'weatherCode':'','error':'',};t_weather.weatherCode="v-"+t_weather.version;if(!o.Session_WeatherCode){if(0||o.Page_Environment!='PROD'||(o.User_International&&o.User_International.match(/INTERNATIONAL/i))||(typeof o.Page_Brand==="string"&&(!o.Page_Brand.toString().match(/RB|OO|OSI|SGH/)))){t_weather.weatherCode+=" s-EXCLUDED";o.Session_WeatherCode=t_weather.weatherCode;tealium_storageW('tealium_data_session_weatherCode',t_weather.weatherCode);}}
if(!o.Session_WeatherCode){t_weather.error='';if(typeof jQuery==='undefined'){t_weather.error+='Jquery';}
if(!o.User_Country){t_weather.error+='Country';}
if(!o.User_City){t_weather.error+='City';}
if(t_weather.error){t_weather.weatherCode+=" s-ERROR";o.Session_WeatherCode=t_weather.weatherCode;tealium_storageW('tealium_data_session_weatherCode',t_weather.weatherCode);tealium_log.datalayer.bug(o,'Session_Weather.Requirements.Error: No'+t_weather.error);}}
if(!o.Session_WeatherCode){jQuery.ajax({url:"//api.openweathermap.org/data/2.5/weather?q="+(o.User_ZipCode||o.User_City)+","+o.User_Country+"&APPID="+t_weather.APPID+"&units=metric",dataType:'json',async:true,success:function(data){try{var __getNumber=function(__num,__pos,__sign){if(typeof __num!=='number')return NaN;__sign=__sign?(__num>-1?"+":"-"):"";__num=parseInt(__num.toString().replace(/[+-]/g,""));__pos=typeof __pos==='undefined'||(__num.toString().length+(__sign?1:0))>__pos?__num.toString().length:(__pos-(__sign?1:0));return __sign+(((__num+Math.pow(10,__pos))+"").substr(1));};t_weather.weatherCode+=" s-OK";t_weather.weatherCode+=" w-"+(data.weather[0].main||'NA').toUpperCase();t_weather.weatherCode+=" d-"+tealium_text2camelcase(data.weather[0].description||'NA');t_weather.weatherCode+=" t-"+(typeof data.main.temp!=='undefined'?__getNumber(Math.round(data.main.temp),3,true):'NA');t_weather.weatherCode+=" c-"+__getNumber((data.clouds.all||0),3);t_weather.weatherCode+=" r-"+(typeof data.rain!=='undefined'&&typeof data.rain['1h']!=='undefined'?__getNumber((data.rain['1h']>1000?1000:Math.floor(data.rain['1h'])),4):__getNumber(0,4));//@NOTE: potremmo avere errori nel caso in cui manchino parametri. Al momento solo rain non è sempre presente, ma non ne sono sicuro
delete data.coord;tealium_storageW('tealium_data_session_weatherJson',JSON.stringify(data));}catch(err){t_weather.weatherCode+=" s-ERROR";t_weather.error='Session_Weather.DataRead.Error: '+tealium_textClean(err.stack,'[nobreaks][nomultiplespaces]');}finally{{utag.data.Session_WeatherCode=t_weather.weatherCode;tealium_storageW('tealium_data_session_weatherCode',t_weather.weatherCode);if(t_weather.error)
tealium_storageW('tealium_data2track_Error_Tealium',t_weather.error);}}},error:function(ob,err_string){t_weather.weatherCode+=" s-ERROR";t_weather.error='Session_Weather.AjaxCall.Error: '
+((err_string&&err_string!='error')?err_string+' ':'')
+(ob.responseText?(JSON.parse(ob.responseText).cod+' '+JSON.parse(ob.responseText).message):'');{utag.data.Session_WeatherCode=t_weather.weatherCode;tealium_storageW('tealium_data_session_weatherCode',t_weather.weatherCode);tealium_storageW('tealium_data2track_Error_Tealium',t_weather.error);}}});}
delete window.t_weather;}
break;}
case'Products-Recommendations-Order_':{temp=tealium_objReplace(o.Products,"htmlEntities");temp2=tealium_objReplace(o.Products,"csvSeparator");sendBug("","2356",(temp.isReplaced||temp2.isReplaced?"WR":"CR"));temp=tealium_objReplace(o.Recommendations,"htmlEntities");temp2=tealium_objReplace(o.Recommendations,"csvSeparator");sendBug("","2356X",(temp.isReplaced||temp2.isReplaced?"WR":"CR"));var Cart='';var Order='';var View='';{if(o.Order_Id&&!o.Order_CancellationId&&!o.Order_ReturnId&&(o.Page_Type.match(/ThankYou/i)||(o.Page_Brand=='RB'&&o.Page_Name&&o.Page_Name.match(/Checkout(.)*ThankYou$/i))||(o.Page_Brand.match(/OO|OSI/i)&&window.location.pathname.match(/checkout\/orderConfirmation/i)))){Order=1;}
else if(0||o.Page_Type.match(/Cart|Gateway/i)||(o.Page_Section1&&o.Page_Section1.match(/checkout/i))||(o.Page_Name&&o.Page_Name.match(/Cart/i))){Cart=1;}
else if(0||(o.Products&&Object.getOwnPropertyNames(o.Products).length>0)||(o.Recommendations&&Object.getOwnPropertyNames(o.Recommendations).length>0)||o.Page_Type.match(/Pdp|Pcp|QuickView/i)||(o.Page_Brand=='RB'&&o.Page_Name&&o.Page_Name.match(/:PDP$|Product|Remix:Configurator|RemixConfigurator| : 0R/i))||(o.Page_Brand=='RB'&&o.Page_Name&&o.Page_Name.match(/404_Inactive or Unpublished Product/i))||(o.Page_Brand=='RB'&&o.Page_Name&&o.Page_Name.match(/QuickViewOverlay/i))||(o.Page_Brand=='RB'&&o.Page_Url&&o.Page_Url.match(/detail\.php\?product_id=/i))){View=1;}}
{if(o.Order_CartId&&!tealium_storageR('tealium_data_cart_id','')){tealium_storageW('tealium_data_cart_id',o.Order_CartId);}
if(o.Order_CartUrl&&!tealium_storageR('tealium_data_cart_url','')){tealium_storageW('tealium_data_cart_url',o.Order_CartUrl);}
if(Order&&!o.Order_Currency){o.Order_Currency=utag_settings('Order_Currency',o);}
if(Order&&o.Order_Currency){var today=new Date();if(today.getYear()>115&&today.getYear()<130){o.Order_CurrencyAndTimestamp=o.Order_Currency+'-'+today.getYear().toString().substring(1)+(101+today.getMonth()).toString().substring(1);}}
if(!Order&&o.Order_DiscountCode){if(tealium_storageR("tealium_data_orderDiscountCode",'')!==''){o.Order_DiscountCode=tealium_storageR("tealium_data_orderDiscountCode",'')+' - applied';}
else{if(!o.Order_DiscountCode.match(/ - applied| - tentative/)){o.Order_DiscountCode+=' - tentative';}}}
if(o.Order_DiscountAmount&&parseFloat(o.Order_DiscountAmount)!==0&&Order){o.Order_DiscountMethod=(o.Order_DiscountCode)?'Discount (promo code)':'Discount';}
if(o.Order_Id){if(!Order){tealium_log.oldcall(o,'Order Id deleted','Bug');sendBug("Order_Id","","RM");delete o.Order_Id;delete o.order_id;}else{if(!(''+o.Order_Id).match(/\_/)){o.Order_Id_Prefixed=o.Page_Platform.replace(/ /g,'-')+'_'+o.Order_Id;}else{o.Order_Id=o.Order_Id.split("_")[1];}}}
if(!Order&&o.Order_GiftCardCode){if(!o.Order_GiftCardCode.match(/ - applied| - tentative/)){o.Order_GiftCardCode+=' - tentative';}
if(o.Order_GiftCardCode.match(/ - applied$/)){tealium_storageW("tealium_data_orderGiftCardCode",o.Order_GiftCardCode.replace(/ - applied$/,''));}}
if(Order){if(o.Order_PaymentType&&o.Order_PaymentType.match(/,GiftCard|GiftCard,/)){o.Order_PaymentType=o.Order_PaymentType.replace(/,GiftCard|GiftCard,/i,'');if(!o.Order_GiftCardCode){o.Order_GiftCardCode="Unknown";}}
if((!o.Order_GiftCardCode||o.Order_GiftCardCode==="Unknown")&&tealium_storageR("tealium_data_orderGiftCardCode",'')!==''){o.Order_GiftCardCode=tealium_storageR("tealium_data_orderGiftCardCode",'');tealium_storageD("tealium_data_orderGiftCardCode");}
if(o.Order_GiftCardCode){o.Order_GiftCardCode=o.Order_GiftCardCode.replace(/ - applied/,'');}}
if(!o.Order_TaxIncluded){o.Order_TaxIncluded=utag_settings('Order_TaxIncluded',o);}}
if(Order){o.Order_ProductsUnits=(!isNaN(parseFloat(o.Order_ProductsUnits)))?parseInt(o.Order_ProductsUnits,10):0;o.Order_ProductsAmount=(!isNaN(parseFloat(o.Order_ProductsAmount)))?parseFloat(o.Order_ProductsAmount):0;o.Order_DiscountAmount=(!isNaN(parseFloat(o.Order_DiscountAmount)))?parseFloat(Math.abs(parseFloat(o.Order_DiscountAmount))*-1):0;o.Order_ShippingAmount=(!isNaN(parseFloat(o.Order_ShippingAmount)))?parseFloat(o.Order_ShippingAmount):0;o.Order_TaxAmount=(!isNaN(parseFloat(o.Order_TaxAmount)))?parseFloat(o.Order_TaxAmount):0;o.Order_TotalAmount=(!isNaN(parseFloat(o.Order_TotalAmount)))?parseFloat(o.Order_TotalAmount):0;o.Order_ProductsTaxRate=(!isNaN(parseFloat(o.Order_ProductsTaxRate)))?parseFloat(o.Order_ProductsTaxRate):utag_settings('Order_ProductsTaxRate',o)||((!o.Order_ProductsAmount||!o.Order_TaxAmount)?0:(Math.round(o.Order_TaxAmount/(o.Order_ProductsAmount+o.Order_DiscountAmount+(o.Page_Platform.match(/wcs/i)?0:o.Order_ShippingAmount)-((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_TaxAmount:0))*100000)/100000));o.Order_ProductsTaxRate=(!isNaN(parseFloat(o.Order_ProductsTaxRate)))?parseFloat(o.Order_ProductsTaxRate):utag_settings('Order_ProductsTaxRate',o)||((!o.Order_ProductsAmount||!o.Order_TaxAmount)?0:(Math.round(o.Order_TaxAmount/(o.Order_ProductsAmount+o.Order_DiscountAmount+(o.Page_Platform.match(/wcs/i)?0:o.Order_ShippingAmount)-((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_TaxAmount:0))*100000)/100000));o.Order_ShippingTaxRate=(!isNaN(parseFloat(o.Order_ShippingTaxRate)))?parseFloat(o.Order_ShippingTaxRate):o.Order_ProductsTaxRate;o.Order_ProductsRevenue=(!isNaN(parseFloat(o.Order_ProductsRevenue)))?parseFloat(o.Order_ProductsRevenue):+(o.Order_ProductsAmount/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ProductsTaxRate:0))).toFixed(2);o.Order_DiscountRevenue=(!isNaN(parseFloat(o.Order_DiscountRevenue)))?parseFloat(o.Order_DiscountRevenue):+(o.Order_DiscountAmount/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ProductsTaxRate:0))).toFixed(2);o.Order_ShippingRevenue=(!isNaN(parseFloat(o.Order_ShippingRevenue)))?parseFloat(o.Order_ShippingRevenue):+(o.Order_ShippingAmount/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ShippingTaxRate:0))).toFixed(2);o.Order_ProductsTax=(!isNaN(parseFloat(o.Order_ProductsTax)))?parseFloat(o.Order_ProductsTax):(Math.round((o.Order_ProductsRevenue+o.Order_DiscountRevenue)*o.Order_ProductsTaxRate*100)/100);o.Order_ProductsRevenueTaxInc=(!isNaN(parseFloat(o.Order_ProductsRevenueTaxInc)))?parseFloat(o.Order_ProductsRevenueTaxInc):(Math.round((o.Order_ProductsRevenue+o.Order_ProductsTax)*100)/100);o.Order_DiscountTax=(!isNaN(parseFloat(o.Order_DiscountTax)))?parseFloat(o.Order_DiscountTax):(Math.round(o.Order_DiscountRevenue*o.Order_ProductsTaxRate*100)/100);o.Order_DiscountRevenueTaxInc=(!isNaN(parseFloat(o.Order_DiscountRevenueTaxInc)))?parseFloat(o.Order_DiscountRevenueTaxInc):(o.Order_DiscountRevenue+o.Order_DiscountTax);o.Order_DiscountRate=(!isNaN(parseFloat(o.Order_DiscountRate)))?parseFloat(o.Order_DiscountRate):(o.Order_ProductsRevenue)?(Math.round(o.Order_DiscountRevenue/o.Order_ProductsRevenue*10000)/10000):0;o.Order_ShippingTax=(!isNaN(parseFloat(o.Order_ShippingTax)))?parseFloat(o.Order_ShippingTax):(Math.round(o.Order_ShippingRevenue*o.Order_ShippingTaxRate*100)/100);o.Order_ShippingRevenueTaxInc=(!isNaN(parseFloat(o.Order_ShippingRevenueTaxInc)))?parseFloat(o.Order_ShippingRevenueTaxInc):(o.Order_ShippingRevenue+o.Order_ShippingTax);o.Order_Engraving=typeof o.Order_Engraving==='string'?o.Order_Engraving:'N';o.Order_Wrapping=typeof o.Order_Wrapping==='string'?o.Order_Wrapping:'N';}
var prog={rev:0,revT:0,dis:0,disT:0,uni:0,giftrev:0,giftuni:0};if(Order||Cart||View){var context=(Cart||Order)?'ProductsOnCart':(o.Page_Name&&o.Page_Name.match(/QuickViewOverlay/i))?'ProductsOnQuickview':'ProductsOnPage';var prod=utag.data[context]||{};if(o.Products){temp=JSON.parse(JSON.stringify(o.Products));for(index in prod){if(prod.hasOwnProperty(index))delete prod[index];}
for(index in temp){if(temp.hasOwnProperty(index))prod[index]=temp[index];}
delete o.Products;}
o.Products_Id_Array=[];o.Products_Id_Normalized_Array=[];o.Products_Category_Array=[];o.Products_Units_Array=[];o.Products_Price_Array=[];o.Products_EngravingText_Array=[];o.Products_Engraving_Array=[];o.Products_FrameColor_Array=[];o.Products_FrameTechnology_Array=[];o.Products_LensColor_Array=[];o.Products_LensTechnology_Array=[];o.Products_ModelName_Array=[];o.Products_Shape_Array=[];o.Products_Brand_Array=[];o.Products_Sku_Array=[];o.Products_Type_Array=[];o.Products_ModelCode_Array=[];o.Products_Lens_Array=[];o.Products_Frame_Array=[];o.Products_Case_Array=[];o.Products_Cloth_Array=[];o.Products_Size_Array=[];if(View){o.Products_Tags_Array=[];o.Products_Status_Array=[];o.Products_OosOptions_Array=[];o.Products_Vm_IsUpcSupported_Array=[];o.Products_Conf_IsUpcSupported_Array=[];o.Products_Conf_IsUpcSupported_Array=[];o.Products_Conf_Conf_Array=[];}
if(Cart){o.Products_MoCo_Array=[];o.Products_Image_Array=[];o.Products_Url_Array=[];o.Recommended_ModelName_Array=[];o.Recommended_Price_Array=[];o.Recommended_Image_Array=[];o.Recommended_Url_Array=[];o.Recommended_Brand_Array=[];}
if(Order){o.Products_Revenue_Array=[];o.Products_RevenuePerUnit_Array=[];o.Products_RevenueTaxInc_Array=[];o.Products_Tax_Array=[];o.Products_TaxRate_Array=[];o.Products_Discount_Array=[];o.Products_DiscountPerUnit_Array=[];o.Products_DiscountTax_Array=[];o.Products_DiscountTaxInc_Array=[];o.Products_DiscountUnits_Array=[];o.GiftCard_Revenue_Array=[];o.GiftCard_Units_Array=[];}
o.Order_EngravingUnits='';for(index in prod){if(!prod.hasOwnProperty(index)){continue;}
prod[index].IdNormalized=typeof prod[index].IdNormalized==='string'?prod[index].IdNormalized:index.replace(/^Rmx_.+/,'remix').replace(/#.*/,'');prod[index].Category=typeof prod[index].Category==='string'?prod[index].Category.replace(/(\s)+&\s+/g,'$1'):'N.A.';prod[index].Units=tealium_text2int(prod[index].Units,1);sendBug("","1127",(prod[index].Units<=0?"WR":"CR"));prod[index].Units=prod[index].Units>0?prod[index].Units:1;prod[index].Price=tealium_text2float(prod[index].Price,0);prod[index].EngravingText=typeof prod[index].EngravingText==='string'?prod[index].EngravingText:'';prod[index].FrameColor=typeof prod[index].FrameColor==='string'?prod[index].FrameColor:'';prod[index].FrameTechnology=typeof prod[index].FrameTechnology==='string'?prod[index].FrameTechnology:'';prod[index].LensColor=typeof prod[index].LensColor==='string'?prod[index].LensColor:'';prod[index].LensTechnology=typeof prod[index].LensTechnology==='string'?prod[index].LensTechnology:'';prod[index].ModelName=typeof prod[index].ModelName==='string'?prod[index].ModelName:'';prod[index].Shape=typeof prod[index].Shape==='string'?prod[index].Shape:'';prod[index].Brand=typeof prod[index].Brand==='string'?prod[index].Brand:'';prod[index].Sku=typeof prod[index].Sku==='string'?prod[index].Sku:'';prod[index].Size=typeof prod[index].Size==='string'?prod[index].Size.replace(/ +/g,""):"";prod[index].Type=typeof prod[index].Type==='string'?prod[index].Type:'';prod[index].ModelCode=typeof prod[index].ModelCode==='string'?prod[index].ModelCode:'';prod[index].Lens=typeof prod[index].Lens==='string'?prod[index].Lens:'';prod[index].Frame=typeof prod[index].Frame==='string'?prod[index].Frame:'';prod[index].Case=typeof prod[index].Case==='string'?prod[index].Case:'';prod[index].Engraving=typeof prod[index].Engraving==='string'?prod[index].Engraving.replace(/, /g,"|").replace(/ ,/g,"|").replace(/,/g,"|").replace(/ +/g,"|"):"";prod[index].Cloth=typeof prod[index].Cloth==='string'?prod[index].Cloth:"";if(Order){prod[index].TaxRate=(!isNaN(parseFloat(prod[index].TaxRate)))?parseFloat(prod[index].TaxRate):(o.Order_ProductsTaxRate!=='')?o.Order_ProductsTaxRate:0;prod[index].RevenueAmount=(!isNaN(parseFloat(prod[index].RevenueAmount)))?parseFloat(prod[index].RevenueAmount):0;prod[index].Revenue=0;if(prod[index].Revenue===0&&prod[index].Price!==0){prod[index].Revenue=Math.round(prod[index].Price*prod[index].Units/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?(prod[index].TaxRate):0))*100)/100;}
if(prod[index].Revenue===0&&prod[index].RevenueAmount!==0){prod[index].Revenue=Math.round(parseFloat(prod[index].RevenueAmount)/(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?(prod[index].TaxRate):0))*100)/100;}
if(prod[index].Price===0&&prod[index].Revenue!==0){prod[index].Price=Math.round(prod[index].Revenue/prod[index].Units*(1+((o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?(prod[index].TaxRate):0))*100)/100;}
if(prod[index].Revenue<0){prod[index].Revenue=0;sendBug("Revenue","","WR");}
sendBug("Revenue","","WR");prod[index].Revenue=(!isNaN(parseFloat(prod[index].Revenue)))?Math.round(prod[index].Revenue*100)/100:0;prod[index].GiftCardUnits=(prod[index].Category.match(/gift/i))?prod[index].Units:0;prod[index].GiftCardRevenue=(prod[index].Category.match(/gift/i))?prod[index].Revenue:0;prod[index].Discount=(!isNaN(parseFloat(prod[index].Discount)))?parseFloat(prod[index].Discount):Math.round(prod[index].Revenue*o.Order_DiscountRate*100)/100;prod[index].DiscountUnits=(!isNaN(parseFloat(prod[index].DiscountUnits)))?parseInt(prod[index].DiscountUnits,10):(o.Order_DiscountRate&&o.Order_DiscountRate!=="0")?(prod[index].Units):0;if(prod[index].Discount){prod[index].Revenue=prod[index].Revenue+prod[index].Discount;}
prod[index].InsuranceAmount=(!isNaN(parseFloat(prod[index].InsuranceAmount)))?-Math.abs(parseFloat(prod[index].InsuranceAmount)):0;if(prod[index].InsuranceAmount){prod[index].Revenue=prod[index].Revenue-prod[index].InsuranceAmount;}
prod[index].RevenuePerUnit=(!isNaN(parseFloat(prod[index].Units)))?Math.round(prod[index].Revenue/prod[index].Units*100)/100:0;prod[index].DiscountPerUnit=(!isNaN(parseFloat(prod[index].Units)))?Math.round(prod[index].Discount/prod[index].Units*100)/100:0;prod[index].Tax=(!isNaN(parseFloat(prod[index].Tax)))?parseFloat(prod[index].Tax):Math.round(prod[index].Revenue*prod[index].TaxRate*100)/100;prod[index].RevenueTaxInc=(!isNaN(parseFloat(prod[index].RevenueTaxInc)))?parseFloat(prod[index].RevenueTaxInc):(prod[index].Revenue+prod[index].Tax);prod[index].DiscountTax=(!isNaN(parseFloat(prod[index].DiscountTax)))?parseFloat(prod[index].DiscountTax):Math.round(prod[index].Discount*prod[index].TaxRate*100)/100;prod[index].DiscountTaxInc=(!isNaN(parseFloat(prod[index].DiscountTaxInc)))?parseFloat(prod[index].DiscountTaxInc):(prod[index].Discount+prod[index].DiscountTax);if(prod[index].Engraving&&prod[index].Engraving!="N"){o.Order_Engraving='Y';o.Order_EngravingUnits=typeof o.Order_EngravingUnits==="string"&&parseInt(o.Order_EngravingUnits)>0?(''+(parseInt(o.Order_EngravingUnits)+parseInt(prod[index].Units))):(''+prod[index].Units);}
if(prod[index].Wrapping=="Y")o.Order_Wrapping='Y';if(prod[index].Type.match(/CP/i)&&!((''+index).match(/Rmx/i))){var LLens=prod[index].Lens?"_L"+prod[index].Lens:"";var FFrame=prod[index].Frame?"_F"+prod[index].Frame:"";var CACase=prod[index].Case?"_CA"+prod[index].Case:"";var SSize=prod[index].Size?"_S"+prod[index].Size:"";var CLCloth=prod[index].Cloth?"_CL"+prod[index].Cloth:"";var EEngraving=prod[index].Engraving?"_E"+prod[index].Engraving:"";prod[index].Id='CP_P'+index+LLens+FFrame+CACase+SSize+CLCloth+EEngraving;}else{prod[index].Id=index;}}
if(Cart){prod[index].MoCo=typeof prod[index].MoCo==='string'?prod[index].MoCo:'';prod[index].Image=typeof prod[index].Image==='string'?prod[index].Image:'';prod[index].Url=typeof prod[index].Url==='string'?prod[index].Url:'';}
if(View){prod[index].Status=typeof prod[index].Status==='string'?prod[index].Status:'';prod[index].Tags=typeof prod[index].Tags==='string'?prod[index].Tags:'';prod[index].OosOptions=typeof prod[index].OosOptions==='string'?prod[index].OosOptions:'';prod[index].Vm_IsUpcSupported=typeof prod[index].Vm_IsUpcSupported==='string'?prod[index].Vm_IsUpcSupported:'';prod[index].Conf_IsUpcSupported=typeof prod[index].Conf_IsUpcSupported==='string'?prod[index].Conf_IsUpcSupported:'';prod[index].Conf_Conf=(o.Oneconf_Action==="Loaded")?(prod[index].Frame.match(/blank/i)||prod[index].Lens.match(/blank/i)?"Y":"N"):"";//@REVIEW: questa parte la possiamo loggare? DataSource secondo la review del repairer potrebbe essere richiesta la rimozione!
if(o.Page_Brand=='RB'&&o.Page_Platform.match(/WCS/i)&&prod[index].DataSource){prod[index].Status='Not-for-sale';temp=prod[index].DataSource.availabilityData||prod[index].DataSource;if(temp.itemNotSellableLabel||temp.notSellableOnlineMsg){}else if(temp.currentlyUnavailableLabel||temp.currentlyUnavailableMsg){prod[index].Status='Out-of-stock';if(temp.emailLinkFlag&&temp.emailLinkFlag=="Y")prod[index].Status+="-emailme";}
else if(temp.addToBagFlag&&temp.addToBagFlag=="Y"){prod[index].Status='Available';}
temp=prod[index].DataSource;prod[index].Tags+=''
+(temp.polarized=='polarized'?'[PDP_PolarBadge]':'')
+(temp.isRemixable=='REMIXABLE'?'[PDP_CustomizeCta]':'')
+(jQuery('#D_PDP_Prod_ColorsViewAll').is(':visible')?'[PDP_ViewAllLink]':'');}}
if(View||Cart){if(prod[index].Type.match(/CP/i)&&!((''+index).match(/Rmx/i))){prod[index].Id='CP_P'+index;}else{prod[index].Id=index;}}
{var errore='';var prop='';var tocheckNeg=['Price','Revenue','RevenueAmount','RevenuePerUnit','RevenueTaxInc','Tax','TaxRate'];var tocheckPos=['Discount','DiscountTax','DiscountTaxInc'];var	tocheckHig={'USD':1600,'EUR':1500,'GBP':1400};for(prop in tocheckNeg)if(prod[index][tocheckNeg[prop]]<0){errore=tocheckNeg[prop]+' = '+prod[index][tocheckNeg[prop]]+' Order_Id:'+o.Order_Id+'for prod '+index;prod[index][tocheckNeg[prop]]=0;sendBug("","1713","WR");}
for(prop in tocheckPos)if(tocheckPos.hasOwnProperty(prop)&&prod[index][tocheckPos[prop]]>0){errore=tocheckPos[prop]+' = '+prod[index][tocheckPos[prop]]+' Order_Id:'+o.Order_Id+'for prod '+index;prod[index][tocheckPos[prop]]=0;}
if(o.Order_Currency){var pmedio=1*(prod[index].Revenue/prod[index].Units).toFixed(2);if(tocheckHig[o.Order_Currency]&&pmedio>tocheckHig[o.Order_Currency]){errore='revenue per unit = '+pmedio+' for '+index;prod[index].Revenue=prod[index].Units*tocheckHig[o.Order_Currency];}}
if(errore)tealium_log.builder.set('error',o,'builder Products-Recommendations-Order: '+errore);}
o.Products_Id_Array.push(prod[index].Id.toString().replace(/#.*/,''));o.Products_Id_Normalized_Array.push(prod[index].IdNormalized);o.Products_Category_Array.push(prod[index].Category);o.Products_Units_Array.push(prod[index].Units);o.Products_Price_Array.push(prod[index].Price);o.Products_EngravingText_Array.push(prod[index].EngravingText);o.Products_Engraving_Array.push(prod[index].Engraving);o.Products_FrameColor_Array.push(prod[index].FrameColor);o.Products_FrameTechnology_Array.push(prod[index].FrameTechnology);o.Products_LensColor_Array.push(prod[index].LensColor);o.Products_LensTechnology_Array.push(prod[index].LensTechnology);o.Products_ModelName_Array.push(prod[index].ModelName);o.Products_Shape_Array.push(prod[index].Shape);o.Products_Brand_Array.push(prod[index].Brand);o.Products_Sku_Array.push(prod[index].Sku);o.Products_Type_Array.push(prod[index].Type);o.Products_ModelCode_Array.push(prod[index].ModelCode);o.Products_Lens_Array.push(prod[index].Lens);o.Products_Frame_Array.push(prod[index].Frame);o.Products_Case_Array.push(prod[index].Case);o.Products_Cloth_Array.push(prod[index].Cloth);o.Products_Size_Array.push(prod[index].Size);if(View){o.Products_Status_Array.push(prod[index].Status);o.Products_Tags_Array.push(prod[index].Tags);o.Products_OosOptions_Array.push(prod[index].OosOptions);o.Products_Vm_IsUpcSupported_Array.push(prod[index].Vm_IsUpcSupported);o.Products_Conf_IsUpcSupported_Array.push(prod[index].Conf_IsUpcSupported);o.Products_Conf_Conf_Array.push(prod[index].Conf_Conf);}
if(Cart){o.Products_MoCo_Array.push(prod[index].MoCo);o.Products_Image_Array.push(prod[index].Image);o.Products_Url_Array.push(prod[index].Url);}
if(Order){o.Products_Revenue_Array.push(prod[index].Revenue);o.Products_RevenuePerUnit_Array.push(prod[index].RevenuePerUnit);o.Products_RevenueTaxInc_Array.push(prod[index].RevenueTaxInc);o.Products_TaxRate_Array.push(prod[index].TaxRate);o.Products_Tax_Array.push(prod[index].Tax);o.Products_Discount_Array.push(prod[index].Discount);o.Products_DiscountPerUnit_Array.push(prod[index].DiscountPerUnit);o.Products_DiscountTax_Array.push(prod[index].DiscountTax);o.Products_DiscountTaxInc_Array.push(prod[index].DiscountTaxInc);o.Products_DiscountUnits_Array.push(prod[index].DiscountUnits);o.GiftCard_Units_Array.push(prod[index].GiftCardUnits);o.GiftCard_Revenue_Array.push(prod[index].GiftCardRevenue);}
if(Order){prog.rev+=parseFloat(prod[index].Revenue);prog.uni+=parseFloat(prod[index].Units);prog.revT+=parseFloat(prod[index].Tax);prog.dis+=parseFloat(prod[index].Discount);prog.disT+=parseFloat(prod[index].DiscountTax);}}
if(Cart&&o.Recommendations){for(index in o.Recommendations){if(!o.Recommendations.hasOwnProperty(index)){continue;}
o.Recommended_ModelName_Array.push(o.Recommendations[index].Recommended_ModelName);o.Recommended_Price_Array.push(o.Recommendations[index].Recommended_Price);o.Recommended_Image_Array.push(o.Recommendations[index].Recommended_Image);o.Recommended_Url_Array.push(o.Recommendations[index].Recommended_Url);o.Recommended_Brand_Array.push(o.Recommendations[index].Recommended_Brand);}}
for(index in o){if(o.hasOwnProperty(index)&&typeof index==='string'&&index.match(/^(Products|Recommended)_.+_Array$/)){o[index.replace(/_Array/,'_Csv')]=o[index].join();}}
o.Products=JSON.parse(JSON.stringify(prod));utag.data.Products=JSON.parse(JSON.stringify(prod));utag.data[context]=JSON.parse(JSON.stringify(prod));}
if(Order){if(!o.Order_ProductsUnits)o.Order_ProductsUnits=prog.uni;if(!o.Order_ProductsRevenue)o.Order_ProductsRevenue=prog.rev;if(!o.Order_ProductsTax)o.Order_ProductsTax=prog.revT;if(!o.Order_ProductsRevenueTaxInc)o.Order_ProductsRevenueTaxInc=prog.revT+prog.rev;if(!o.Order_ProductsAmount)o.Order_ProductsAmount=(o.Order_TaxIncluded&&o.Order_TaxIncluded=='Y')?o.Order_ProductsRevenueTaxInc:o.Order_ProductsRevenue;if(!o.Order_DiscountRevenue)o.Order_DiscountRevenue=prog.dis;if(!o.Order_DiscountTax)o.Order_DiscountTax=prog.disT;if(!o.Order_DiscountRevenueTaxInc)o.Order_DiscountRevenueTaxInc=prog.disT+prog.dis;if(!o.Order_TaxAmount)o.Order_TaxAmount=prog.revT+o.Order_ShippingTax;if(!o.Order_TotalAmount)o.Order_TotalAmount=+(prog.rev+prog.revT+o.Order_ShippingRevenueTaxInc).toFixed(2);o.Order_ProductsUnits=''+o.Order_ProductsUnits;o.Order_ProductsAmount=''+o.Order_ProductsAmount;o.Order_DiscountAmount=''+o.Order_DiscountAmount;o.Order_ShippingAmount=''+o.Order_ShippingAmount;o.Order_TaxAmount=''+o.Order_TaxAmount;o.Order_TotalAmount=''+o.Order_TotalAmount;o.Order_ProductsRevenue=''+o.Order_ProductsRevenue;o.Order_ProductsRevenueTaxInc=''+o.Order_ProductsRevenueTaxInc;o.Order_ProductsTax=''+o.Order_ProductsTax;o.Order_ProductsTaxRate=''+o.Order_ProductsTaxRate;o.Order_DiscountRate=''+o.Order_DiscountRate;o.Order_DiscountRevenue=''+o.Order_DiscountRevenue;o.Order_DiscountRevenueTaxInc=''+o.Order_DiscountRevenueTaxInc;o.Order_DiscountTax=''+o.Order_DiscountTax;o.Order_ShippingRevenue=''+o.Order_ShippingRevenue;o.Order_ShippingRevenueTaxInc=''+o.Order_ShippingRevenueTaxInc;o.Order_ShippingTax=''+o.Order_ShippingTax;o.Order_ShippingTaxRate=''+o.Order_ShippingTaxRate;}
break;}
case'Errors_':{if(o.Error_Detail&&!o.Error_Details){o.Error_Details=o.Error_Detail;}
{o.Error_SourceLabel='UNKNOWN';if(typeof o.Error_Source==="string"){o.Error_SourceLabel=(o.Error_Source.match(/404/i)&&document.referrer.indexOf(location.protocol+"//"+location.host)===0)?"CONTENT":(o.Error_Source.match(/404/i)&&document.referrer.indexOf(location.protocol+"//"+location.host)!==0)?"MARKETING":(o.Error_Source.match(/Server|Client|Anomaly/i))?"IT":(o.Error_Source.match(/User/i))?"UX":(o.Error_Source.match(/Product/i))?"PRODUCT":'UNKNOWN';}
o.Error_Code=typeof o.Error_Code==="string"?tealium_textClean(o.Error_Code,'[nomultiplespaces][nobreaks]'):'';if(o.Error_Code===''){delete o.Error_Code;}else{o.Error_Code=o.Error_SourceLabel+": "+o.Error_Code;if(o.Error_Code.match(/404/)){o.page_type='errorPage';}}
if(!o.Error_Code){delete o.Error_Message;}else{var msg=[];var getError=function(e){jQuery(e).each(function(){if(jQuery(this).is(':visible')&&tealium_textClean(jQuery(this).text(),'[nobreaks][nomultiplespaces')!=='')msg.push(tealium_textClean(jQuery(this).text(),'[nobreaks][nomultiplespaces]'));});};getError('[class*="Error_Message"]');getError('[class*="error-message"]');getError('.server-error.form-group');getError('.wcs-custom-bag .wcs-note-red');getError('[class*="invalid-message"]');getError('.delivery-information-note-red .wcs-note-red');getError('[class*="error_msg"]');if(msg.length>0){o.Error_Message=((o.Error_Message&&o.Error_Message!=='')?(o.Error_Message+'|'):(''))+msg.join('|');tealium_log.old('got displayed message: '+o.Error_Message);o.Error_Code=o.Error_Code||"Form filling error";}
if(o.Page_Name){if(o.Page_Name=='Checkout:Delivery:DeliveryPage'&&tealium_textClean(jQuery("#addressError").text(),'[nobreaks][nomultiplespaces')!==''){temp=tealium_textClean(jQuery("#addressError").text(),'[nobreaks][nomultiplespaces');tealium_log.oldcall(o,'Delivery - '+temp,'Server');o.Error_Message=((o.Error_Message&&o.Error_Message!=='')?(o.Error_Message+'|'):(''))+temp;}}}
if(!o.Error_Code){delete o.Error_Details;}else{o.Error_Details=tealium_textClean(o.Error_Details||'','[nobreaks][nomultiplespaces');}
if(!o.Tracking_EventId.match(/X-X-X-X-Error/)){tealium_log.old('catching anomaly start');o.Error_Code=o.Error_Code||'';if(o.Page_Name.match(/:Clv$/)&&jQuery(".wcs-404-title").length>0){tealium_log.oldcall(o,'Anomaly: CLV with 404 section','Anomaly');tealium_log.datalayer.bug(o,'Anomaly1');}
if(o.Page_Name&&o.Page_Name=="MyAccount:Home:LandingPage"&&o.Action_LastUrlRequested&&!o.Action_LastUrlRequested.match(/Unknown|MyDetails|OrdersView|my\-account|Logon|login|javascript|Logoff|Password|private\-sale|#/i)){tealium_log.oldcall(o,'Anomaly: redirect to login page','Anomaly');tealium_log.datalayer.bug(o,'Anomaly2');}
if(1&&o.Page_Brand=='RB'&&jQuery&&jQuery("header.wcs-header").length>1){tealium_log.oldcall(o,'Anomaly: multiple nasted headers','Anomaly');tealium_log.datalayer.bug(o,'Anomaly3');}
{if(1&&o.Page_Brand=='RB'&&o.Page_CountryThirdPlatforms&&!o.Page_CountryThirdPlatforms.match(o.Page_Country)&&o.Page_Code&&o.Page_Code.match(/M\:Checkout\:Home/)){tealium_log.old('Anomaly detection for mobile checkout enabled');jQuery("#guestcheckout, #login  input[type=submit]").on('click',function(){setTimeout(function(){if(jQuery(".error").text()===''){utag.track('link',{Error_Source:'Anomaly',Error_Code:'[Anomaly] Mob Checkout Login: nothing happens on click (3sec)',Events_ErrorAnomaly:1});}},3000);});}
if(1&&o.Page_Brand=='RB'&&o.Page_CountryThirdPlatforms&&!o.Page_CountryThirdPlatforms.match(o.Page_Country)&&o.Page_Code&&o.Page_Code.match(/M\:Checkout\:Delivery\:Delivery/)){tealium_log.old('Anomaly detection for mobile checkout enabled');jQuery("#payment").on('click',function(){setTimeout(function(){if(jQuery(".error").text()===''){utag.track('link',{Error_Source:'Anomaly',Error_Code:'[Anomaly] Mob Checkout Delivery: nothing happens on click (3sec)',Events_ErrorAnomaly:1});}},3000);});}
if(1&&o.Page_Brand=='RB'&&o.Page_CountryThirdPlatforms&&!o.Page_CountryThirdPlatforms.match(o.Page_Country)&&o.Page_Code&&o.Page_Code.match(/Checkout\:Payment\:Billing/)){tealium_log.old('Anomaly detection for mobile checkout enabled');jQuery("#submitCreditCard").on('click',function(){setTimeout(function(){if(jQuery(".error").text()===''){utag.track('link',{Error_Source:'Anomaly',Error_Code:'[Anomaly] Mob Checkout Payment: nothing happens on click (3sec)',Events_ErrorAnomaly:1});}},3000);});}}
if(o.Order_Id&&o.Products_Units_Array&&(!(o.Products_Category_Csv+"").match(/contact[ ]?lenses/i))){temp=0;for(index in o.Products_Units_Array){if(o.Products_Units_Array.hasOwnProperty(index))temp+=parseInt(o.Products_Units_Array[index],10);}
if(temp>=5){tealium_log.oldcall(o,'Anomaly: Order #'+o.Order_Id+' with '+temp+' units','Anomaly');tealium_log.datalayer.bug(o,'Anomaly4');}}
if(0&&o.Page_Country=="Unknown"){var temp_obj={};for(var temp_index in o){if(o.hasOwnProperty(temp_index)&&typeof temp_index==='string'&&!temp_index.match(/^(cp|\_|Action|meta|Click_Map|Events_Array)/))
temp_obj[temp_index]=o[temp_index];}
tealium_log.oldcall(o,'Country=none: '+JSON.stringify(temp_obj).replace(/\"|\s/g,''),'Bug');sendBug("Page_Country","","MSs");}
if(o.Page_Brand=='RB'&&o.Page_Code&&o.Page_Code.match(/RemixConfigurator/i)){setTimeout(function(){if(o.Page_DeviceType=='desktop'){if(jQuery('#menuModel').children().length<=0){tealium_log.oldcall(o,'Anomaly: PCP (desktop) - configurator is empty','Anomaly');tealium_log.datalayer.bug(o,'Anomaly5');}
}else if(o.Page_DeviceType=='mobile'){if(jQuery('#menuLenses').children().length<=0){tealium_log.oldcall(o,'Anomaly: PCP (mobile) - configurator is empty','Anomaly');tealium_log.datalayer.bug(o,'Anomaly6');}}},9000);}}
for(key in o.Error_DatalayerObject){if(o.Error_DatalayerObject.hasOwnProperty(key)){for(index in o.Error_DatalayerObject[key]){if(o.Error_DatalayerObject[key].hasOwnProperty(index)){tealium_log.datalayer.bug(o,o.Error_DatalayerObject[key][index]);}}}}}
break;}
case'Action_':{o.Content_Box=(o.Content_Box||o.link_text||'').replace(/[\[\]\|]/g,'');o.Content_Description=(o.Content_Description||'').replace(/[\[\]\|]/g,'');o.Action_Type=(o.Action_Type&&o.Action_Type.match(/view|click/))?o.Action_Type:(o.Content_Box||o.Content_Description)?'click':(o.Tracking_EventId.match(/PageView/))?'view':'event';if(o.Action_Type==="event"){break;}
var dat=new Date();o.Action_PreviousAction=tealium_storageR('tealium_data_action_lastAction','');o.Action_PreviousEvent=tealium_storageR('tealium_data_action_lastEvent','');o.Action_TimeStamp=Date.now();o.Action_Serial=parseInt(tealium_storageR('tealium_data_action_lastSerial',0),10)+1;o.Action_TimeElapsed=parseInt(tealium_storageR('tealium_data_action_lastTimeStamp',0),10);o.Action_TimeElapsed=(((o.Action_TimeStamp-((o.Action_TimeElapsed===0)?(o.Action_TimeStamp):(o.Action_TimeElapsed)))/1000).toFixed(0));o.Action_Time=(dat.getYear()>115&&dat.getYear()<130)?'y'+dat.getYear().toString().substring(1)
+' m'+(101+dat.getMonth()).toString().substring(1)
+' d'+(100+dat.getDate()).toString().substring(1)
+' h'+('0'+dat.getHours()).slice(-2)
+' w'+'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',')[dat.getDay()]:'';if(o.Action_Serial==1){o.Action_PreviousEvent=(tealium_querystring_object.cid)?('cid ['+tealium_querystring_object.cid+']'):tealium_querystring_object.pid?('pid ['+tealium_querystring_object.pid+']'):'';o.Action_PreviousAction=(!document.referrer&&window.performance&&window.performance.navigation.type==1)?'(resumed-session)':(!document.referrer)?'(external-https)':document.referrer;o.Action_PreviousAction+=' '+o.Action_PreviousEvent;}
o.Action_Page=(o.Page_Country!="Unknown"?o.Page_Country:'XX')+':'
+(o.Page_Language!="Unknown"?o.Page_Language:'XX').toUpperCase()+':'
+(o.Page_DeviceType.replace('mobile','M').replace('desktop','D').replace('tablet','T').replace('responsive','X'))+':'
+(o.Page_Name||'');o.Action_Page=(o.Page_Code||o.Action_Page);if(o.Action_Page.match(/:/)&&o.Page_Name.match(/([^\/]+)\/(clv|plp|clp)/))
o.Action_Page=o.Action_Page.replace(/:/,':'+/([^\/]+)\/(clv|plp|clp)/.exec(o.Page_Name)[1]+':');if(o.Action_Page=='XX:XX:D:')o.Action_Page=o.Page_Path;o.Action_Page=o.Action_Page.replace(/[\[\]\|]/g,'');o.Action_Event='';if(o.Action_Type=='click'){o.Action_Event+='click ['+o.Content_Box+']';if(o.Content_Description)o.Action_Event+='['+o.Content_Description.substring(0,25)+']';}
if(o.Action_Type=='view'){if(o.Error_Code)o.Action_Event+=' error ['+o.Error_Code+']';}
o.Action=o.Action_Page+' '+o.Action_Event;o.Action_Combo=o.Action.trim()+"|"+o.Action_PreviousAction.trim();o.Action_Combo=o.Action_Combo.replace(/^\||\|$/,'');o.Action_Timeline='u'+o.User_IdTimeStamp+' '
+'v'+(('000'+o.Session_Serial).slice(-2))+' '
+'a'+(('000'+o.Action_Serial).slice(-3))+' '
+(('000'+o.Action_TimeElapsed).slice(-3))+'s '
+o.Action;o.Events_Action=o.Session_Serial+(('000'+o.Action_Serial).slice(-3));if(!o.Tracking_EventId.match(/PageView/)){o.link_url=o.Content_Box;o.link_type=o.Content_Box;o.link_text=o.Content_Description;}
break;}
case'Event-Source_':{o.Event_Source='External';if(document.referrer.indexOf(location.protocol+"//"+location.host)===0){if(tealium_storageR('tealium_data_action_lastEvent','')&&!tealium_storageR('tealium_data_action_lastEvent','').match('[:#]')){o.Prev_Type=tealium_storageR('tealium_data_action_lastAction').split(' ')[0].split(':').pop();o.Prev_Ele=tealium_storageR('tealium_data_action_lastEvent').replace(/]/g,'').split('[')[1].split(' ').slice(2,3).join(' ');o.Prev_Act=tealium_storageR('tealium_data_action_lastEvent').replace(/]/g,'').split('[')[1].split(' ').slice(3,4).join(' ');if(o.Prev_Type.match(/^X/i)&&o.Prev_Ele.match(/MainNav/i)){o.Prev_Type="";}
o.Event_Source=o.Prev_Type+' '+o.Prev_Ele;if(o.Page_Type.match(/pdp|pcp/i)){o.Event_Source=(!o.Prev_Type.match(/pdp|pcp/i)||o.Prev_Act.match(/AddToCart|Add-To-Cart/i))?o.Prev_Type+' '+o.Prev_Ele:o.Prev_Ele+' '+o.Prev_Act;}}
else{o.Event_Source='Page Refresh';if(o.Page_Type.match(/pdp|pcp/i)){o.Event_Source='Pdp Refresh';}}}
break;}
case'Events_':{if(!o.Events_Array||Object.keys(o.Events_Array).length===0){o.Events_Array={'Action':{'enabled':1,'sitecat':'event45','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ActionContactUs':{'enabled':1,'sitecat':'event72','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'ContactSubmitted'},'CartAdd':{'enabled':1,'sitecat':'scAdd','relatedevents':'CartCreate','triggeringelementid':/AddTo(Cart|Bag)$|BuyNow$/i,'triggeringaction':'','tealiumEventName':'cart_add','tofire':0,'fired':0,'ga':'','value':'','oldnames':'CartViewJapan,CartAddAndView'},'CartCreate':{'enabled':1,'sitecat':'scOpen','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'CartViewJapan,CartAddAndView'},'CartRemove':{'enabled':1,'sitecat':'scRemove','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'cart_remove','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CartView':{'enabled':1,'sitecat':'scView','relatedevents':'','triggeringelementid':'','triggeringaction':/Cart:(CartPage$|MiniBag$)/i,'tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'CartViewJapan,CartAddAndView'},'Checkout':{'enabled':1,'sitecat':'scCheckout','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'Checkout'},'CheckoutLogin':{'enabled':1,'sitecat':'','relatedevents':'Checkout','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'Checkout,OrderPreConfirmation,PaypalExpressCheckout,PaypalExpress,PaypalExpressCheckoutStart'},'CheckoutDelivery':{'enabled':1,'sitecat':'event21','relatedevents':'Checkout','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'CheckoutDeliveryLoginSuccess,CheckoutDeliveryRegisterSuccess,CheckoutDeliveryGuestCheckout,CheckoutDeliveryAlreadyLoggedin'},'CheckoutPayment':{'enabled':1,'sitecat':'event22','relatedevents':'Checkout','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CheckoutPaymentGateway':{'enabled':1,'sitecat':'event15','relatedevents':'Checkout','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CheckoutSummary':{'enabled':1,'sitecat':'event74','relatedevents':'Checkout','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ErrorBlocking':{'enabled':1,'sitecat':'event4','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ErrorNotBlocking':{'enabled':1,'sitecat':'event58','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'Error404':{'enabled':1,'sitecat':'event51','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ErrorContent':{'enabled':1,'sitecat':'event55','relatedevents':'ErrorBlocking','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ErrorIT':{'enabled':1,'sitecat':'event52','relatedevents':'ErrorBlocking','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'BackendError'},'ErrorMarketing':{'enabled':1,'sitecat':'event82','relatedevents':'ErrorBlocking','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'FormError'},'ErrorUX':{'enabled':1,'sitecat':'event53','relatedevents':'ErrorNotBlocking','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ErrorProduct':{'enabled':1,'sitecat':'event50','relatedevents':'ErrorNotBlocking','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ErrorTealium':{'enabled':1,'sitecat':'event69','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'GiftcardOrd':{'enabled':1,'sitecat':'event20','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderCancel':{'enabled':1,'sitecat':'event70','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderCreate':{'enabled':1,'sitecat':'purchase','relatedevents':'CheckoutLogin','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'OrderConfirmed'},'OrderPaymentGiftcard':{'enabled':1,'sitecat':'event61','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderShippingRev':{'enabled':1,'sitecat':'event25,event26','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderShippingTax':{'enabled':1,'sitecat':'event63,event64','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderWithDiscount':{'enabled':1,'sitecat':'event19','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderWithEngraving':{'enabled':1,'sitecat':'event79','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderWithGift':{'enabled':1,'sitecat':'event16','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderWithSubscription':{'enabled':1,'sitecat':'event94','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'OrderWithWrapping':{'enabled':1,'sitecat':'event81','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'UnitsWithEngraving':{'enabled':1,'sitecat':'event78','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'UserAccountNew':{'enabled':1,'sitecat':'event2','relatedevents':'UserEmailSub','triggeringelementid':'','triggeringaction':'','tealiumEventName':'user_register','tofire':0,'fired':0,'ga':'','value':'','oldnames':'RegisterSuccess,CheckoutDeliveryRegisterSuccess'},'UserEmailSub':{'enabled':1,'sitecat':'event3','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'email_signup','tofire':0,'fired':0,'ga':'','value':'','oldnames':'CheckoutDeliveryRegisterSuccess,CLPNewsLetterSignup'},'UserEmailUnsub':{'enabled':1,'sitecat':'event38','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'UserLogin':{'enabled':1,'sitecat':'event1','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'user_login','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'PageLoadTime':{'enabled':1,'sitecat':'event56','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'PageLoadTimes':{'enabled':1,'sitecat':'event68','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'PageView':{'enabled':0,'sitecat':'','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'PerfTealiumLoadLatency':{'enabled':1,'sitecat':'event28','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'PerfTealiumLoadTimes':{'enabled':1,'sitecat':'event49','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'PrescriptionOk':{'enabled':1,'sitecat':'event77','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ProdFavAdd':{'enabled':1,'sitecat':'event9,prodView','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'fav_add','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ProdView':{'enabled':1,'sitecat':'prodView,event32,event47','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ProdViewEcom':{'enabled':1,'sitecat':'event13','relatedevents':'ProdView','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'ProductView,RecommendedInStock'},'ProdViewEcomOos':{'enabled':1,'sitecat':'event27','relatedevents':'ProdViewEcom','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'ProductViewOutOfStock,RecommendedOutofStock'},'ProdViewEcomOosEmailView':{'enabled':1,'sitecat':'event66','relatedevents':'ProdViewEcomOos','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'ProdViewEcomOosEmailClick':{'enabled':1,'sitecat':'event46','relatedevents':'','triggeringelementid':/BackInStockNotificationSubmit$/i,'triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'QubitImpression':{'enabled':1,'sitecat':'event57','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'RemixCartAdd':{'enabled':1,'sitecat':'event34','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'RemixJourneyEnd'},'RemixOpen':{'enabled':1,'sitecat':'event33','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'RemixJourneyStart'},'ReturnCreate':{'enabled':1,'sitecat':'event39','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':'ReturnConfirmation'},'SearchRun':{'enabled':1,'sitecat':'event5,event6','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'search_view','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'SearchImg':{'enabled':1,'sitecat':'event91','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'SearchSugg':{'enabled':1,'sitecat':'event93','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'SearchText':{'enabled':1,'sitecat':'event92','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'SearchFiltering':{'enabled':1,'sitecat':'event10','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'facet_applied','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'SocialShare':{'enabled':1,'sitecat':'event14','relatedevents':'','triggeringelementid':/Share$/i,'triggeringaction':'','tealiumEventName':'share','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'Store_SearchQueries':{'enabled':1,'sitecat':'event35','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'Store_SearchNoResults':{'enabled':1,'sitecat':'event36','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelFindStore':{'enabled':1,'sitecat':'event73','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'exam_step1','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelStoreSearch':{'enabled':1,'sitecat':'event87','relatedevents':'FunnelFindStore,Store_SearchQueries','triggeringelementid':'','triggeringaction':'','tealiumEventName':'exam_step1','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelQuestion1':{'enabled':1,'sitecat':'event7,event113','relatedevents':'FunnelStoreSearch','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelQuestion2':{'enabled':1,'sitecat':'event7,event114','relatedevents':'Exam_BookingQuestions','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelQuestion3':{'enabled':1,'sitecat':'event7,event115','relatedevents':'Exam_BookingQuestions','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelQuestion4':{'enabled':1,'sitecat':'event7,event116','relatedevents':'Exam_BookingQuestions','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelQuestion5':{'enabled':1,'sitecat':'event7,event117','relatedevents':'Exam_BookingQuestions','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelScheduler':{'enabled':1,'sitecat':'event7,event118','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelPersonalInfo':{'enabled':1,'sitecat':'event7,event86','relatedevents':'FunnelFindStore','triggeringelementid':'','triggeringaction':'','tealiumEventName':'exam_step2','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelReview':{'enabled':1,'sitecat':'event7,event119','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelConfirmation':{'enabled':1,'sitecat':'event7,event8','relatedevents':'FunnelFindStore,Exam_BookingQuestions,FunnelExamQty','triggeringelementid':'','triggeringaction':'','tealiumEventName':'exam_confirmation','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelCancellation':{'enabled':1,'sitecat':'event75','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelAddExam':{'enabled':1,'sitecat':'event76','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'FunnelExamQty':{'enabled':1,'sitecat':'event67','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':o.Exam_PatientNum,'oldnames':''},'VMIsBrowserSupported':{'enabled':1,'sitecat':'event103','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMIsUpcSupported':{'enabled':1,'sitecat':'event104','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMReady':{'enabled':1,'sitecat':'event105','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'vm_ready','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMTryOn':{'enabled':1,'sitecat':'event110','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'vm_tryon','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMRequestWebcam':{'enabled':1,'sitecat':'event106','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMWebcamAllowed':{'enabled':1,'sitecat':'event107','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMRender':{'enabled':1,'sitecat':'event108','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'vm_render','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMFit':{'enabled':1,'sitecat':'event111','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'vm_fit','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMAdjust':{'enabled':1,'sitecat':'event112','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'VMCloseMirror':{'enabled':1,'sitecat':'event109','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPIsUpcSupported':{'enabled':1,'sitecat':'event120','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPLoaded':{'enabled':1,'sitecat':'event121','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPRandomized':{'enabled':1,'sitecat':'event122','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPRecipeChanged':{'enabled':0,'sitecat':'','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPRecipeSaved':{'enabled':0,'sitecat':'','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPStartOver':{'enabled':1,'sitecat':'event123','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPConfirmConf':{'enabled':1,'sitecat':'event124','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPClosed':{'enabled':1,'sitecat':'event125','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPComponentsEngagementIndexByVisit':{'enabled':1,'sitecat':'event126','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPComponentsEngagementIndexByModel':{'enabled':1,'sitecat':'event129','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPComponentsFirstInteractionsByVisit':{'enabled':1,'sitecat':'event127','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'CPComponentsFirstInteractionsByModel':{'enabled':1,'sitecat':'event128','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''},'LASTLINE':{'enabled':0,'sitecat':'','relatedevents':'','triggeringelementid':'','triggeringaction':'','tealiumEventName':'','tofire':0,'fired':0,'ga':'','value':'','oldnames':''}};if(o.Order_Id&&!o.Order_CancellationId){o.Events_Array.OrderCreate.detection=function(){return true;};o.Events_Array.GiftcardOrd.detection=function(){return(o.Products_Category_Csv&&o.Products_Category_Csv.match(/GiftCard/i));};o.Events_Array.OrderPaymentGiftcard.detection=function(){return(o.Order_GiftCardCode&&o.Order_GiftCardCode!=="");};o.Events_Array.OrderWithDiscount.detection=function(){return(o.Order_DiscountAmount&&parseInt(o.Order_DiscountAmount,10)!==0&&o.Page_Name&&o.Page_Name.match(/Checkout(.)*ThankYou$/i));};o.Events_Array.OrderWithWrapping.detection=function(){return(o.Order_Wrapping=='Y');};o.Events_Array.OrderWithEngraving.detection=function(){return(o.Order_Engraving=='Y');};o.Events_Array.UnitsWithEngraving.detection=function(){if(typeof o.Order_EngravingUnits==="string"&&parseInt(o.Order_EngravingUnits)>0){o.Events_Array.UnitsWithEngraving.value=o.Order_EngravingUnits;return true;}return false;};o.Events_Array.OrderShippingRev.detection=function(){if(o.Order_ShippingRevenue){o.Events_Array.OrderShippingRev.value=o.Order_ShippingRevenue;return true;}return false;};o.Events_Array.OrderShippingTax.detection=function(){if(o.Order_ShippingTax){o.Events_Array.OrderShippingTax.value=o.Order_ShippingTax;return true;}return false;};}
o.Events_Array.PageLoadTime.detection=function(){if(o.Page_LoadTime_Float){o.Events_Array.PageLoadTime.value=o.Page_LoadTime_Float;return true;}return false;};o.Events_Array.PageLoadTimes.detection=function(){if(o.Page_LoadTime_Float)return true;return false;};o.Events_Array.PerfTealiumLoadLatency.detection=function(){if(o.Tags_Tealium_LoadLatency){o.Events_Array.PerfTealiumLoadLatency.value=o.Tags_Tealium_LoadLatency;return true;}return false;};o.Events_Array.PerfTealiumLoadTimes.detection=function(){if(o.Tags_Tealium_LoadLatency)return true;return false;};o.Events_Array.RemixCartAdd.detection=function(){return(o.Products_Id_Csv&&o.Products_Id_Csv.match(/^Rmx_/)&&o.Events_Array.CartAdd.tofire==1);};o.Events_Array.UserEmailSub.detection=function(){return(o.link_text&&o.link_text=='PreOrderEmailNotify:Preorder:Email:NotifyMe');};o.Events_Array.UserEmailUnsub.detection=function(){return(o.Content_Box&&o.Content_Box=='X Newsl Unsub');};o.Events_Array.ErrorTealium.detection=function(){return(o.Error_Tealium?true:false);};o.Events_Array.FunnelFindStore.detection=function(){return(o.Page_Type=="FindStore"&&o.Page_Section1=="Exam");};o.Events_Array.FunnelStoreSearch.detection=function(){return(o.Store_Search_Keyword||o.Store_Search_Type);};o.Events_Array.FunnelPersonalInfo.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&(!o.Page_Section2||o.Page_Section2==""||o.Page_Section2=="PersonalInfo"));};o.Events_Array.FunnelQuestion1.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&o.Page_Section2=="Question1");};o.Events_Array.FunnelQuestion2.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&o.Page_Section2=="Question2");};o.Events_Array.FunnelQuestion3.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&o.Page_Section2=="Question3");};o.Events_Array.FunnelQuestion4.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&o.Page_Section2=="Question4");};o.Events_Array.FunnelQuestion5.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&o.Page_Section2=="Question5");};o.Events_Array.FunnelScheduler.detection=function(){return(o.Page_Type=="Info"&&o.Page_Section1=="Exam"&&o.Page_Section2=="Scheduler");};o.Events_Array.FunnelReview.detection=function(){return(o.Page_Type=="Review"&&o.Page_Section1=="Exam");};o.Events_Array.FunnelConfirmation.detection=function(){return(o.Page_Type=="Confirmation"&&o.Page_Section1=="Exam");};o.Events_Array.FunnelCancellation.detection=function(){return(o.Page_Type=="Cancellation"&&o.Page_Section1=="Exam");};o.Events_Array.QubitImpression.detection=function(){return(o.Content_TestVersion&&o.Content_TestVersion.match(/\[QB\]/i));};o.Events_Array.VMIsBrowserSupported.detection=function(){return(o.Vm_IsBrowserSupported&&o.Vm_IsBrowserSupported==="1");};o.Events_Array.OrderWithSubscription.detection=function(){return(o.Order_SubscriptionFrequency&&o.Order_SubscriptionFrequency!=="0");};tealium_log.old('events object created');}else{tealium_log.old('events object already existing');}
{tealium_log.old('detection');if(o.pageEvents||o.linkTrackEvents){if(o.pageEvents)tealium_log.old('detection '+o.pageEvents+' by pageEvents');if(o.linkTrackEvents)tealium_log.old('detection '+o.linkTrackEvents+'by linkTrackEvents');temp=(','+(o.pageEvents||'')+','+(o.linkTrackEvents||'')+',').split(',');for(el1 in temp)if(temp.hasOwnProperty(el1)&&temp[el1]){for(el2 in o.Events_Array){if(o.Events_Array.hasOwnProperty(el2)&&typeof temp[el1]==='string'&&(0||temp[el1].match('^'+o.Events_Array[el2].sitecat.replace(/,/,'$|^')+'$')||temp[el1].match('^'+o.Events_Array[el2].oldnames.replace(/,/,'$|^')+'$'))){o.Events_Array[el2].tofire=1;tealium_log.old('detection '+temp[el1]+' > '+el2);}}}
delete[o.pageEvents];delete[o.linkTrackEvents];}
for(el in o)if(o.hasOwnProperty(el)&&typeof el==='string'&&el.match(/^Events_/)&&el!="Events_Array"){if(!o[el]||o[el]==0){delete o[el];continue;}
tealium_log.old('detection '+el.replace('Events_','')+' by Events_');temp='';if(el.match(/Events_SitecatalystAbort/)){tealium_log.old('detection '+el.replace('Events_','')+' skipped');continue;}
if(o.Events_Array[el.replace('Events_','')]!==undefined){temp=el.replace('Events_','');}else{for(el2 in o.Events_Array){if(o.Events_Array.hasOwnProperty(el2)&&o.Events_Array[el2].oldnames==el.replace('Events_','')){tealium_log.old('detection '+el2+' by oldname '+el.replace('Events_',''));temp=el2;}}}
if(temp){o.Events_Array[temp].tofire=1;if(o[el]!==1&&o[el]!=='1'){o.Events_Array[temp].value=o[el];}}
else{tealium_log.oldcall(o,'detection '+el.replace('Events_','')+' not in Events_Array','Bug');}
delete o[el];}
for(temp in o.Events_Array)
if(o.Events_Array.hasOwnProperty(temp)&&o.Events_Array[temp].detection&&o.Events_Array[temp].detection()){tealium_log.old('detection '+temp+' by method');o.Events_Array[temp].tofire=1;}
if(o.Action){for(temp in o.Events_Array){if(o.Events_Array.hasOwnProperty(temp)&&(0||(o.Events_Array[temp].triggeringaction&&typeof o.Action==='string'&&o.Action.match(o.Events_Array[temp].triggeringaction))||(o.Events_Array[temp].triggeringelementid&&typeof o.Content_Box==='string'&&o.Content_Box.match(o.Events_Array[temp].triggeringelementid)))){tealium_log.old('detection '+temp+' by action');if(!o.Tracking_Type||o.Tracking_Type!=='hiddenaction'){o.Events_Array[temp].tofire=1;}else{tealium_storageW('tealium_data2track_Events_'+temp,1);}}}}
if(1&&o.Page_Type!="Unknown"&&(!o.Tracking_EventId||o.Tracking_EventId.match(/PageView/i))){switch(o.Page_Type.toLowerCase()){case'pcp':o.Events_Array.RemixOpen.tofire=1;break;case'cart':case'cartpage':{o.Events_Array.CartView.tofire=1;if('JP'.indexOf(o.Page_Country)!=-1){o.Events_Array.CartCreate.tofire=1;o.Events_Array.CartAdd.tofire=1;tealium_log.old('detection CartCreate by Page_Type');tealium_log.old('detection CartAdd by Page_Type');}
break;}
case'checkout':o.Events_Array.Checkout.tofire=1;break;case'delivery':o.Events_Array.CheckoutDelivery.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'payment':o.Events_Array.CheckoutPayment.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'gateway':o.Events_Array.CheckoutPaymentGateway.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'ordersummary':o.Events_Array.CheckoutSummary.tofire=1;o.Events_Array.Checkout.tofire=1;break;case'thankyou':{o.Events_Array.Checkout.tofire=1;if(o.Order_Id&&!o.Order_CancellationId){o.Events_Array.OrderCreate.tofire=1;}
break;}}}
if(1&&o.Page_Name&&(!o.Tracking_EventId||o.Tracking_EventId.match(/QuickViewOverlay-Loading-Ready|ProdFavAdd/i)||(o.Tracking_EventId.match(/PageView/i)&&o.Page_Type.match(/product|configurator|pdp|pcp/i)&&!o.Products_Type_Csv.match(/CP/i))||(o.Tracking_EventId.match(/OneConfigurator/i)&&o.Oneconf_Action==="Loaded"))){tealium_log.old('detection ProdView');if(o.Page_Platform.match(/WCS|EC-CUBE/i)){o.Events_Array.ProdView.tofire=1;o.Events_Array.ProdViewEcom.tofire=0;o.Events_Array.ProdViewEcomOos.tofire=0;o.Events_Array.ProdViewEcomOosEmailView.tofire=0;}
if(o.Products){temp=Object.keys(o.Products).length;if(temp!=1){tealium_log.oldcall(o,'product page with '+temp+' products in object','Bug');sendBug("Products_length","","WR");}
if(temp!==0){index=Object.keys(o.Products)[0];switch((typeof o.Products[index].Status==='string'?o.Products[index].Status.toLowerCase():'')){case'not-for-sale':case'error':break;case'out-of-stock-emailme':o.Events_Array.ProdViewEcomOosEmailView.tofire=1;tealium_log.old('detection ProdViewEcomOosEmailView');break;case'out-of-stock':case'soldout':o.Events_Array.ProdViewEcomOos.tofire=1;tealium_log.old('detection ProdViewEcomOos');break;case'available':case'available-oneleft':case'available-twoleft':case'available-fewleft':o.Events_Array.ProdViewEcom.tofire=1;tealium_log.old('detection ProdViewEcom');break;default:if(!o.Tracking_EventId||!o.Tracking_EventId.match(/PageView:default/)){o.Products[index].Status="Unknown";}break;}
if(typeof o.Products[index].OosOptions==='string'){if(o.Products[index].OosOptions.match(/EmailMeWhenAvailable/i)){o.Events_Array.ProdViewEcomOosEmailView.tofire=1;tealium_log.old('detection ProdViewEcomOosEmailView');}}
if(typeof o.Products[index].Vm_IsUpcSupported==='string'&&o.Products[index].Vm_IsUpcSupported==='1'){o.Events_Array.VMIsUpcSupported.tofire=1;}
if(typeof o.Products[index].Conf_IsUpcSupported==='string'&&o.Products[index].Conf_IsUpcSupported==='1'){o.Events_Array.CPIsUpcSupported.tofire=1;}}}}
if(1&&o.Events_Array&&o.Events_Array.SearchRun&&o.Events_Array.SearchRun.tofire==1){switch(o.Page_Brand){case'RB':{if(o.Page_Name&&!o.Page_Name.match(/Search/i)){tealium_log.old('detection for Search out of SERP');sendBug("Search_ResultItemsQnt","","WR");o.Search_ResultItemsQnt="No-SERP";}
break;}
case'OO':{if(o.Page_Platform=='AMP'&&window.location.search.match(/text=/i)){o.Search_Keyword=o['qp.text']?o['qp.text']:'empty';o.Search_ResultItemsQnt='page';sendBug("Search_Keyword","","WR");sendBug("Search_ResultItemsQnt","","WR");}
break;}
default:break;}}
{if(o.Error_SourceLabel){switch(o.Error_SourceLabel){case"IT":o.Events_Array.ErrorIT.tofire=1;break;case"CONTENT":o.Events_Array.ErrorContent.tofire=1;o.Events_Array.Error404.tofire=(''+o.Error_Source).match(/404/i)?1:0;break;case"MARKETING":o.Events_Array.ErrorMarketing.tofire=1;o.Events_Array.Error404.tofire=(''+o.Error_Source).match(/404/i)?1:0;break;case"UX":o.Events_Array.ErrorUX.tofire=1;break;case"PRODUCT":o.Events_Array.ErrorProduct.tofire=1;break;default:o.Events_Array.ErrorNotBlocking.tofire=1;}
tealium_log.old('detection Error by Error_Source');}
if(o.Events_Array.Error404.tofire===1&&o.Page_Name&&o.Page_Name.match(/checkout|:cart:/i)){o.Events_Array.Error404.tofire=0;o.Events_Array.ErrorIT.tofire=1;tealium_log.old('switch Error from 404 to Server');}}
if(o.Order_Id&&!o.Order_CancellationId){if(o.Products_Category_Csv&&o.Products_Category_Csv.match(/GiftCard/i)){o.Events_Array.GiftcardOrd.tofire=1;}
if(o.Order_GiftCardCode&&o.Order_GiftCardCode!==""){o.Events_Array.OrderPaymentGiftcard.tofire=1;}}
if(typeof o.Search_Type==='string'&&o.Events_Array.SearchRun.tofire==1){o.Search_Type=o.Search_Type.toLowerCase();switch(o.Search_Type){case'img':o.Events_Array.SearchImg.tofire=1;break;case'suggested':o.Events_Array.SearchSugg.tofire=1;break;case'text':o.Events_Array.SearchText.tofire=1;break;case'free':o.Events_Array.SearchText.tofire=1;break;}}
if(o.Events_Array){if(o.Events_Array.FunnelStoreSearch&&o.Events_Array.FunnelStoreSearch.tofire==1){if(o.Store_Search_ResultItemsQnt=="0"){o.Events_Array.Store_SearchNoResults.tofire=1;}}}}
{for(key in o.Events_Array){if(o.Events_Array.hasOwnProperty(key)&&typeof key==="string"&&o.Events_Array[key].tofire===1&&o.Events_Array[key].relatedevents!==''){var temp_relateds=o.Events_Array[key].relatedevents.split(',');for(temp in temp_relateds){if(temp_relateds.hasOwnProperty(temp)&&temp_relateds[temp]!==''&&o.Events_Array[temp_relateds[temp]]&&o.Events_Array[temp_relateds[temp]].enabled===1){o.Events_Array[temp_relateds[temp]].tofire=1;tealium_log.old('spread '+temp_relateds[temp]+' by '+key);}}}}}
{for(key in o.Events_Array){if(1&&o.Events_Array.hasOwnProperty(key)&&typeof key==="string"&&o.Events_Array[key].enabled===1&&o.Events_Array[key].tofire===1){switch(key){case'CartAdd':o.Event_SourceCartAdd=o.Event_Source;break;case'ProdView':o.Event_SourceProdView=o.Event_Source;break;case'FunnelFindStore':o.Event_SourceOEE=o.Event_Source;break;}}}}
{for(key in o.Events_Array){if(1&&o.Events_Array.hasOwnProperty(key)&&typeof key==="string"&&o.Events_Array[key].enabled===1&&o.Events_Array[key].tofire===1&&o.Events_Array[key].tealiumEventName!==''){o.event_name=o.Events_Array[key].tealiumEventName;}}
{if(o.Action_PreviousAction){if(o.Action_PreviousAction.match(/MyAccount:Home:LandingPage click \[user register form\]/i)||o.Action_PreviousAction.match(/MyAccount:Home click \[user register form\]/i)||o.Action_PreviousAction.match(/Home:LandingPage click \[user register form\]/i)){o.event_name="user_register";}
if(o.Action_PreviousAction.match(/MyAccount:Home click \[user login form\]/i)||o.Action_PreviousAction.match(/Home:LandingPage click \[user login form\]/i)||o.Action_PreviousAction.match(/Home:LandingPage click \[UserLoginForm\]/i)||o.Action_PreviousAction.match(/MyAccount:Home click \[UserLoginForm\]/i)){o.event_name="user_login";}
if((o.Page_Name||'').match(/Vto:Preview:onPageLoad/i)){o.event_name="vto_completed";}}}}
break;}
case'_updateStorage':{var hidden=(!o.Tracking_Type||o.Tracking_Type!=="hiddenaction")?0:1;var aborto=(o.Tags__Abort)?1:0;if(!hidden&&!aborto){list=tealium_storageIndex();for(index=0;index<list.length;index++){key=list[index];if(typeof key==='string'&&key.match(/^tealium_data2track_/)){tealium_storageD(key);tealium_log.old('storage deleted: '+key);}}
tealium_storageW('tealium_dataNot2track',tealium_dataNot2track);}
tealium_storageW('tealium_data_user_segments',tealium_data_user_segments);if(!aborto){if(o.Action_Serial)tealium_storageW("tealium_data_action_lastSerial",o.Action_Serial);if(o.Action_TimeStamp)tealium_storageW("tealium_data_action_lastTimeStamp",o.Action_TimeStamp,'forever');if(o.Action)tealium_storageW("tealium_data_action_lastAction",o.Action);if(o.Action_Event)tealium_storageW("tealium_data_action_lastEvent",o.Action_Event);}
break;}}};tealium_logContext='preloader utag_qa';tealium_logNote='';var utag_qa=function(__dl){try{if(utag_settings("Page_Environment",__dl)=="PROD"){tealium_log.old("### tealium_automatic_QA is not running on PROD environment","warn");}
else if(1&&tealium_automatic_QA&&tealium_automatic_QA.run&&(!tealium_tools.commons.isObject(__dl.Error_DatalayerObject))){try{var __opt={};var __isReady=false;var __context="";var results;switch(__dl.Tracking_DataLayerType){case"FULL":{__isReady=true;__context="Page_Type";__dl[__context]=__dl[__context]||(utag_data&&utag_data[__context]);}break;case"PARTIAL":{__isReady=true;__context="Tracking_EventId_Normalized";}break;}
if(__isReady){{var __deps=tealium_automatic_QA.table.mainIndependentKeys;for(var i=1;i<__deps.length;i++){__opt[__deps[i]]=(__dl[__deps[i]]||(utag_data&&utag_data[__deps[i]]));}}
tealium_automatic_QA.injectMerge(tealium_tools.merge);results=tealium_automatic_QA.run(__dl,__context,__opt);__dl.Result_QA=results.qa;__dl.Error_DatalayerObject=results.errors;if(__dl.Result_QA&&__dl.Result_QA.result&&__dl.Result_QA.result.Tracking_EventId_Normalized){__dl.Result_QA.result.id=__dl.Result_QA.result.Tracking_EventId_Normalized;delete __dl.Result_QA.result.Tracking_EventId_Normalized;}}}catch(err){if(tealium_storageR('tealium_team','lwa')){tealium_log.old("### an error has been occurred on management of the use of tealium_automatic_QA","error");}}}}catch(err){if(tealium_storageR('tealium_team','lwa')){tealium_log.old("### tealium_automatic_QA is not defined => tealium_automatic_QA extension has not been uploaded!","warn");}}};tealium_logContext='preloader utag_repairer';tealium_logNote='';var utag_repairer=function(o,caller_name){tealium_log.old("### Repair: caller -> ",(caller_name||"UNDEFINED"),'info');var i,index,index2,p2l,input,output,temp,temp2;var PREFIX,SEP,sendBugOldProp,sendBug;{PREFIX="_";SEP=" ";sendBugOldProp=function(old_p,new_p,ticket){if(!old_p)return;var status;var label=ticket?ticket:(PREFIX+old_p);if(o[old_p]){if(!new_p){status=ticket?"WR":"RM";}
else if(!o[new_p]){status=ticket?"WR":"RN";o[new_p]=o[old_p];}
else{status=ticket?"CR":"RM";}
tealium_log.datalayer.bug(o,label+SEP+status);delete o[old_p];}
};sendBug=function(prop,ticket,status,branch){if((!prop)&&(!ticket)&&(!status))return;var label;if(prop){label=PREFIX+prop;}
if(ticket){branch=branch?"X":"";label=ticket+branch;}
tealium_log.datalayer.bug(o,label+SEP+status);};}
{{if(1&&utag&&utag.data&&o===utag.data&&tealium_log.events.qnt>1){sendBug("","3010","WR");}}
{if(o.Page_Name&&(!o.Page_NameLast)&&o.Page_Section1&&o.Page_Section2&&o.Page_Type){sendBug("Page_Name","","RM");}
if(o.Page_Code&&(!o.Page_CodeLast)&&o.Page_Country&&o.Page_Language&&o.Page_DeviceType&&o.Page_Section1&&o.Page_Section2&&o.Page_Type){sendBug("Page_Code","","RM");}
if(o.page_type&&(!o.page_typeLast)){sendBug("page_type","","RM");}}
{if(!o.Page_Brand){var mapProfiles={"ray-ban":{"brand":"RB"},"oakley":{"brand":"OO"},"oakleysi":{"brand":"OSI"},"sunglasshutnew":{"brand":"SGH"},"glasses":{"brand":"GL"},"lenscrafters":{"brand":"LC"},"searsoptical":{"brand":"SO"},"opsm":{"brand":"OPSM"},"pearle":{"brand":"PV"},};if(window.jQuery){var findUtagJs=jQuery('script[src*="/utag.js"]');var src=findUtagJs.attr("src");if(findUtagJs){for(i in mapProfiles){if(mapProfiles.hasOwnProperty(i)){temp=new RegExp("\/"+i+"\/");if(src.match(temp)){o.Page_Brand=mapProfiles[i].brand||'';break;}}}}}
sendBug("Page_Brand","","MSs");}}
{if(!o.Page_Environment){o.Page_Environment=utag_settings('Page_Environment',o);}}
{if(o.Products){for(index in o.Products){if(o.Products.hasOwnProperty(index)&&typeof o.Products[index].Category=='string'){if(o.Products[index].Category!==o.Products[index].Category.toUpperCase()||o.Products[index].Category.match(/,;/)){sendBug("Category","","WR");}}}}}}
{switch(o.Page_Brand){case'RB':{break;}
case'OO':case'OSI':{{sendBugOldProp("Cart_Id","Order_CartId","");}
{if(o.customer_type){if(o.customer_type.toString().match(/Athlete|VIP|Oakley Employee|Lux Employee/i)){if(o.User_Segments&&o.User_Segments.toString().match(/Athlete|VIP|Oakley Employee|Lux Employee/i)){temp="CR";}else{o.User_Segments=(o.User_Segments?o.User_Segments+',':'')+"Pro-site,"+o.customer_type;temp="WR";}
sendBug("User_Segments","",temp);}
delete o.customer_type;}}
break;}
case'VO':{if(o.Page_Type=="Thankyou"&&o.Order_Id&&o.Products){for(index in o.Products){if(o.Products.hasOwnProperty(index)){for(i=1;i<=2;i++){if(parseFloat(o.Products[index].Price,10)>parseFloat(o.Order_ProductsAmount,10)){sendBug("","LWA-6965","WR");o.Products[index].Price=(parseFloat(o.Products[index].Price,10)/10).toFixed(2);}
if(parseFloat(o.Products[index].PriceFull,10)>parseFloat(o.Order_ProductsAmount,10)){sendBug("","LWA-6965","WR");o.Products[index].PriceFull=(parseFloat(o.Products[index].PriceFull,10)/10).toFixed(2);}}}}}
break;}}}
{}
switch(o.Page_Brand){case'RB':{if(o.Products){for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if(o.Page_Environment=='PROD'&&(index+"").match(/CP$/))o.Products[index].Type="CP";temp=o.Products[index].Category;o.Products[index].Category=(o.Products[index].Category)?o.Products[index].Category
.replace(/^OPTICAL$/,'OPTICS')
.replace(/^prescription\-sunglasses$/,'SUN')
.replace(/^CLIPON$/,'ACCESSORIES')
.replace(/^KIT$/,'ACCESSORIES')
.replace(/^CASE$/,'ACCESSORIES')
.replace(/java/,'ACCESSORIES'):'';if(o.Products[index].Category!==temp)sendBug("","25552","WR",1);else{o.Products[index].Category=(o.Products[index].Category)?o.Products[index].Category
.replace(/^[^]*ROX_LENS[^]*$/,'OPTICS')
.replace(/^[^]*ROX_FRAME[^]*$/,'OPTICS')
.replace(/^[^]*OPTICAL[^]*$/,'OPTICS')
.replace(/^[^]*remix[^]*$/,'SUN')
.replace(/^[^]*\[LACCESSORIES\.lang[^]*$/,'ACCESSORIES'):'';if(o.Products[index].Category==""&&o.Page_Country=="IN"){o.Products[index].Category="SUN";}
if(o.Products[index].Category!==temp)sendBug("","1747","WR");}
if(1&&o.Products[index].Category===temp&&!o.Products[index].Category.match(/SUN|OPTICS|ACCESSORIES|GIFTCARD|GWP/)){sendBug("","1747","WRN");}
if(o.Products[index].DataSource){input=["modelName","lensTreatment","frameColor","lensColor","frameShape","resolvedSkuGridLensBridgeVal","frameMaterial"];output=["ModelName","LensTechnology","FrameColor","LensColor","Shape","Sku","FrameTechnology"];for(index2=0;index2<input.length;index2++){if(o.Products[index].DataSource[input[index2]]){if(o.Products[index][output[index2]]){sendBug(input[index2],"","RN");}else{o.Products[index][output[index2]]=o.Products[index].DataSource[input[index2]]||'';}}}}}}
if(o.Events_SitecatalystAbort)sendBugOldProp("Events_SitecatalystAbort");{sendBugOldProp("serverPlatform","Page_Platform");sendBugOldProp("country","Page_Country");sendBugOldProp("channel","Page_Section1");if(o.subSection&&o.subSection=="PreorderEmail:Notifyme")sendBug("subSection","","WR");if(!o.Page_Section1||(o.Page_Section1&&!o.Page_Section1.match(/Checkout/i)))sendBugOldProp("subSection","Page_Section2");sendBugOldProp("pageType","Page_Type");sendBugOldProp("userAgent");sendBugOldProp("pagename","Page_NameFull");sendBugOldProp("pageName","Page_NameFull");if(!((o.Page_NameFull||'')+(o.Page_Code||'')).match(/MyAccount|Checkout/i)){sendBugOldProp("authenticated");}
sendBugOldProp("authenticated","User_LoginStatus");sendBugOldProp("State");sendBugOldProp("userId","User_Id");sendBugOldProp("User_IdWcs","User_Id");sendBugOldProp("userZipCode");//@NOTE: Products (le lasciamo perchè verranno catturate ed elaborate dal builder 'Products_')
if(o.Products_Sku_Csv){o.Products_Id_Csv=o.Products_Sku_Csv;delete o.Products_Sku_Csv;}
if(o.ProductShipping){delete o.ProductShipping;}
if(o.ProductTax){delete o.ProductTax;}
sendBugOldProp("currency","o.Order_Currency");sendBugOldProp("giftCardNum","Order_GiftCardCode");sendBugOldProp("shippingCost","Order_ShippingAmount");sendBugOldProp("shippingMode","Order_ShippingMode");sendBugOldProp("orderID","Order_Id");sendBugOldProp("paymentType","Order_PaymentType");sendBugOldProp("promoType","Order_DiscountCode");sendBugOldProp("Order_Tax","Order_TaxAmount");sendBugOldProp("Discount");sendBugOldProp("Order_Revenue");sendBugOldProp("totalDiscount","Order_DiscountAmount");sendBugOldProp("tax","Order_TaxAmount");sendBugOldProp("OrderRevenue","Order_ProductsAmount");sendBugOldProp("GrossRevenue","Order_ProductsAmount");sendBugOldProp("orderUnits","Order_ProductsUnits");sendBugOldProp("revenue","Order_ProductsAmount");if(o.cartID){o.Order_CartId=o.cartID;sendBugOldProp("cartID");}
//@NOTE: lasciare questo statement per utilizzare Order_CartId
if(o.Cart_Id){o.Order_CartId=o.Cart_Id;delete o.Cart_Id;}
sendBugOldProp("Order_Discount","Order_DiscountAmount");sendBugOldProp("Order_ShippingCost","Order_ShippingAmount");sendBugOldProp("errorCode","Error_Code");sendBugOldProp("errorMessage","Error_Message");sendBugOldProp("linkTrackVars");sendBugOldProp("returnRefund","Return_Refund");sendBugOldProp("returnReason","Return_Reason");sendBugOldProp("returnUnits","Return_Units");if(o.tagDisabled&&o.tagDisabled=='ALL'){o.Tags__Abort=1;sendBugOldProp("tagDisabled");}
if(o.tagDisabled&&o.tagDisabled=='SC'){o.Tags_AdobeAnalytics_Abort=1;sendBugOldProp("tagDisabled");}
if(o.tagDisabled&&o.tagDisabled=='GA'){o.Tags_GoogleAnalytics_Abort=1;sendBugOldProp("tagDisabled");}
sendBugOldProp("siteSearchKeyword");sendBugOldProp("siteSearchResultsNum");sendBugOldProp("Filters_AttributesApplied_String","Search_FacetValues_String","3219");}
if(!o.Page_Country){sendBug("Page_Country","","MSs");var qs=window.location.search.toLowerCase();var ur=window.location.href.toLowerCase();var hn=window.location.hostname.toLowerCase();var vl='';var cD=function(prod,uat,url){return(qs.match(new RegExp('storeid='+prod),'i')||ur.match(new RegExp(url,'i')));};if(cD('XXXXX','XXXXX','.com/international'))vl='INT';else if(cD('10152','10152','.com/canada'))vl='CA';else if(cD('10151','10151','.com/usa'))vl='US';else if(cD('XXXXX','XXXXX','.com/latam'))vl='LA';else if(cD('XXXXX','XXXXX','.com/argentina'))vl='AR';else if(cD('34153','34153','.com/mexico'))vl='MX';else if(cD('36152','36152','.com/brazil'))vl='BR';else if(cD('26652','15154','.com/austria'))vl='AT';else if(cD('29152','15153','.com/belgium'))vl='BE';else if(cD('16652','11652','.com/switzerland'))vl='CH';else if(cD('XXXXX','XXXXX','.com/croatia'))vl='HR';else if(cD('XXXXX','XXXXX','.com/czechrepublic'))vl='CZ';else if(cD('31652','12652','.com/denmark'))vl='DK';else if(cD('27652','13652','.com/germany'))vl='DE';else if(cD('XXXXX','XXXXX','.com/estonia'))vl='EE';else if(cD('28652','14153','.com/spain'))vl='ES';else if(cD('32652','34152','.com/finland'))vl='FI';else if(cD('28152','14652','.com/france'))vl='FR';else if(cD('XXXXX','XXXXX','.com/greece'))vl='GR';else if(cD('25653','15152','.com/uk'))vl='GB';else if(cD('25653','15152','.com/gb'))vl='GB';else if(cD('XXXXX','XXXXX','.com/hungary'))vl='HU';else if(cD('30152','16652','.com/ireland'))vl='IE';else if(cD('XXXXX','XXXXX','.com/israel'))vl='IL';else if(cD('26152','15652','.com/italy'))vl='IT';else if(cD('XXXXX','XXXXX','.com/lithuania'))vl='LT';else if(cD('XXXXX','XXXXX','.com/luxemburg'))vl='LU';else if(cD('XXXXX','XXXXX','.com/latvia'))vl='LV';else if(cD('XXXXX','XXXXX','.com/malta'))vl='MT';else if(cD('29653','17152','.com/netherland'))vl='NL';else if(cD('31153','13153','.com/norway'))vl='NO';else if(cD('17152','12152','.com/poland'))vl='PL';else if(cD('30652','16152','.com/portugal'))vl='PT';else if(cD('XXXXX','XXXXX','.com/russia'))vl='RU';else if(cD('32152','13152','.com/sweden'))vl='SE';else if(cD('XXXXX','XXXXX','.com/slovakia'))vl='SK';else if(cD('XXXXX','XXXXX','.com/southeasteurope'))vl='SEE';else if(cD('17652','12153','.com/turkey'))vl='TR';else if(cD('XXXXX','XXXXX','.com/ukraine'))vl='UA';else if(cD('XXXXX','XXXXX','.com/southafrica'))vl='ZA';else if(cD('XXXXX','XXXXX','.com/mea'))vl='MEA';else if(cD('XXXXX','XXXXX','.com/arabemirates'))vl='AE';else if(cD('XXXXX','XXXXX','.com/bahrain'))vl='BH';else if(cD('XXXXX','XXXXX','.com/qatar'))vl='QA';else if(cD('XXXXX','XXXXX','.com/egypt'))vl='EG';else if(cD('XXXXX','XXXXX','.com/lebanon'))vl='LB';else if(cD('XXXXX','XXXXX','.com/saudiarabia'))vl='SA';else if(cD('XXXXX','XXXXX','.com/kuwait'))vl='KW';else if(cD('16152','11152','china.ray'))vl='CN';else if(cD('16152','11152','.com.cn/'))vl='CN';else if(cD('XXXXX','XXXXX','.com/bangladesh'))vl='DB';else if(cD('33652','33652','.com/hongkong'))vl='HK';else if(cD('XXXXX','XXXXX','.com/india')||hn.indexOf('india.ray')>-1)vl='IN';else if(cD('XXXXX','XXXXX','.com/indonesia'))vl='ID';else if(cD('XXXXX','XXXXX','.com/sri-lanka'))vl='LK';else if(cD('XXXXX','XXXXX','.com/myanmar'))vl='MM';else if(cD('XXXXX','XXXXX','.com/maldives'))vl='MV';else if(cD('XXXXX','XXXXX','.com/malaysia'))vl='MY';else if(cD('XXXXX','XXXXX','.com/nepal'))vl='NP';else if(cD('XXXXX','XXXXX','.com/pakistan'))vl='PK';else if(cD('XXXXX','XXXXX','.com/singapore'))vl='SG';else if(cD('XXXXX','XXXXX','.com/thailand'))vl='TH';else if(cD('XXXXX','XXXXX','.com/vietnam'))vl='VN';else if(cD('33152','34153','.com/australia'))vl='AU';else if(cD('XXXXX','XXXXX','.com/japan')||hn.indexOf('japan.ray')>-1||hn.indexOf('rb.rubygroupe.jp')>-1)vl='JP';else if(cD('35652','35652','.com/korea'))vl='KR';else if(cD('XXXXX','XXXXX','.com/taiwan'))vl='TW';else if(hn.indexOf('unsubscribe.ray-ban.com')>-1)vl='US';else if(hn.indexOf('rbremix-001')>-1)vl='US';if(vl){tealium_log.old('Added Page_Country = '+vl);o.Page_Country=vl;}
else{tealium_log.oldcall(o,'Page_Country not detectionable','Bug');o.Page_Country='JUNK';}}
if(o.Page_Code){o.Page_Code_Prev=o.Page_Code;o.Page_Code=o.Page_Code
.replace(/Cart:(CartPage|CartSummary):ProdDetails$/i,'Cart:CartPage')
.replace(/Cart:CartSummary:LandingPage$/,'Cart:CartPage')
.replace(/Cart:(CartPage|CartSummary):EmptyBag$/i,'Cart:EmptyBag');temp=o.Page_Code_Prev!=o.Page_Code?"WR":"CR";sendBug("Page_Code","",temp);delete o.Page_Code_Prev;}
{if(!o.Page_Name){if(o.Page_NameFull)o.Page_Name=o.Page_NameFull;else if(window.utag_data&&utag_data.pageName)o.Page_Name=utag_data.pageName;temp=!o.Page_Name?"WR":"CR";sendBug("Page_Name1","",temp);}
if(o.Page_Name){var prod,prod_pcp,prod_pdp;if(o.Products&&o.Page_Type){if(!o.Page_Type.match(/cart/i)&&!o.Page_Section1.match(/Checkout/i)){prod=Object.keys(o.Products).toString();prod_pcp=prod.substring(5,11)+':';prod_pdp=(o.Products[prod]&&o.Products[prod].hasOwnProperty('DataSource'))?o.Products[prod].DataSource.modelName:'';}}
o.Page_Name_Prev=o.Page_Name;o.Page_Name=o.Page_Name
.replace(/:Mobi:/i,':')
.replace(/^RB_IN\s?\|\s?/,'')
.replace(/^RB_\w+:/,'')
.replace(/Home:Home:HomePage$/i,'Home')
.replace(/Sunglasses:CLV-CategoryPage:ProductListing/,'Sun:Clv')
.replace(/Sunglasses:CLP-CategoryPage:ProductListing/,'Sun:Clp')
.replace(/Sunglasses:ProductDetail:ProductDetailPage/,'Sun:'+((prod_pdp)?prod_pdp:'')+'Pdp')
.replace(/eyeglasses:CLV-CategoryPage:ProductListing/,'Opt:Clv')
.replace(/eyeglasses:CLP-CategoryPage:ProductListing/,'Opt:Clp')
.replace(/eyeglasses:CategoryListing:CategoryListingViewPage/,'Opt:Clp')
.replace(/eyeglasses:PLP-CategoryPage:ProductListing/,'Opt:Plp')
.replace(/Sunglasses:Remix:RemixHome$/,'Remix:Landing')
.replace(/Sunglasses:Remix:RemixConfigurator$/,'Remix:'+((prod_pcp)?prod_pcp:'')+'Pcp')
.replace(/Remix:Pcp$/,'Remix:'+((prod_pcp)?prod_pcp:'')+'Pcp')
.replace(/make-yours:Remix:RemixConfigurator/,'Remix:LifeCode')
.replace(/Campaign:CLPCampaign:Signup:AlreadySubscribed/,'Newsletter:Subscription:Form')
.replace(/Campaign:CLPCampaign:Signup:Success/,'Newsletter:Subscription:Confirm')
.replace(/Cart:MiniBagSummary:MiniBasketOverlay$/,'MiniCart')
.replace(/Checkout:HomePage$/,'Checkout:Login')
.replace(/Checkout:DeliveryPage$/,'Checkout:Delivery')
.replace(/Checkout:Delivery:CheckOutDelivery$/,'Checkout:Delivery')
.replace(/Checkout:Delivery:CheckOutDeliveryGuest$/,'Checkout:Delivery')
.replace(/Checkout:Delivery:DeliveryPage$/,'Checkout:Delivery')
.replace(/Checkout:Payment:BillingPage$/,'Checkout:Payment')
.replace(/Checkout:Payment:PaymentPage$/,'Checkout:Payment')
.replace(/Checkout:Orders:OrderConfirmationPage$/,'Checkout:ThankYou');temp=o.Page_Name_Prev!=o.Page_Name?"WR":"CR";sendBug("Page_Name2","",temp);if(window.jQuery){temp=jQuery("link[rel='alternate'][hreflang='en-US']").attr('href')||'';if(!temp){}
else if(temp.match(/online\-exclusive/i)){o.Page_Name='Special:@Collection:Landing';}
temp=o.Page_Name_Prev!=o.Page_Name?"WR":"CR";sendBug("Page_Name3","",temp);}
temp=o.Page_Url||document.location.pathname;if(!temp){}
else if(temp.match(/japan\.ray-ban\.com\/sunglasses\/detail\.php/i))o.Page_Name='Sun:Pdp';else if(temp.match(/private-sale/i))o.Page_Name='PrivateSale:ProductListing';else if(temp.match(/street-neat/i))o.Page_Name='SunStreetNeatClp';else if(temp.match(/\/life\-code\/rb/i)&&o.Page_Name=="Remix:Configurator")o.Page_Name='Remix:ConfiguratorLifeCode';else if(temp.match(/servlet\/OrderProcess$/))o.Page_Name='Checkout:Payment:Error';temp=o.Page_Name_Prev!=o.Page_Name?"WR":"CR";sendBug("Page_Name4","",temp);o.Page_Name_Prev=o.Page_Name;if(o.Page_Name){o.Page_Name=o.Page_Name
.replace(/:$/,'')
.replace(/::/g,':')
.replace(/^RB\w+:(Mobi:)?/i,'');}
temp=o.Page_Name_Prev!=o.Page_Name?"WR":"CR";sendBug("Page_Name5","",temp);delete o.Page_Name_Prev;}}
{o.Page_NameFull=o.Page_Brand+'_'+o.Page_Country+':'+(o.Page_DeviceType=='mobile'?'Mobi:':'')+o.Page_Name;}
{if(o.Page_Type=='ProductDetailPage'){o.Page_Type='Pdp';sendBug("Page_Type1","","WR");}
if(!o.Page_Type){if(o.Page_Country.match(/JP/i)){o.Page_Type=document.location.pathname.match(/detail\.php/i)?'Pdp':((o.Page_Name&&(o.Page_Name+'').match(/Remix:Configurator:Step1/i)||(window.utag_data.Page_Name&&(window.utag_data.Page_Name+'').match(/Remix:Configurator:Pcp/i)))?'Pcp':'');sendBug("","1210","WR");}
else{o.Page_Type=(document.location.pathname.match(/clv$/i))?'Clv':(document.location.pathname.match(/clp$/i))?'Clp':(document.location.pathname.match(/plp$/i))?'Plp':'';sendBug("Page_Type2","","WR");}}}
{if(o.Page_Section1){o.Page_Section1_Prev=o.Page_Section1;o.Page_Section1=o.Page_Section1
.replace(/^::$/i,'')
.replace(/^sunglasses.*/i,'Sun')
.replace(/^eyeglasses.*/i,'Opt')
.replace(/^prescription-.*/i,'Rox');temp=o.Page_Section1_Prev!=o.Page_Section1?"WR":"CR";sendBug("Page_Section1A","",temp);delete o.Page_Section1_Prev;}
if(!o.Page_Section1){temp=jQuery('#pageType').val()||jQuery("#pageIdentifier").val();if(temp)temp=temp.match(/(.+)_/)?temp.match(/(.+)_/)[1]:'';if(temp){switch(temp.toLowerCase()){case'sunglasses':o.Page_Section1="Sun";break;case'eyeglasses':o.Page_Section1="Opt";break;}}
temp=o.Page_Section1?"WR":"CR";sendBug("Page_Section1B","",temp);}
if(o.Page_Name&&o.Page_Name.match(/CategoryListing|CategoryLanding|ProductListing/i)&&jQuery("link[rel='alternate'][hreflang='en-us']").attr('href')){temp=jQuery("link[rel='alternate'][hreflang='en-us']").attr('href').split('/');o.Page_Section1=temp[4]||'';temp=o.Page_Section1?"WR":"CR";sendBug("Page_Section1C","",temp);}
if(o.Page_Section1){o.Page_Section1_Prev=o.Page_Section1;o.Page_Section1=o.Page_Section1
.replace(/sunglasses/i,'Sun')
.replace(/eyeglasses/i,'Opt');temp=o.Page_Section1_Prev!=o.Page_Section1?"WR":"CR";sendBug("Page_Section1D","",temp);delete o.Page_Section1_Prev;}}
{if(!o.Page_Section2&&o.Page_Name&&(o.Page_Section1&&!o.Page_Section1.match(/Checkout/i))){o.Page_Section2=o.Page_Name
.replace(/(:?[^:]+)$/,'')
.replace(/^([^:]+:?)/,'');sendBug("Page_Section2","","WR");}
if(!o.Page_Section2&&!o.Page_Name){temp=jQuery('#pageType').val()||jQuery("#pageIdentifier").val();if(temp)temp=temp.match(/_(.+)/)?temp.match(/_(.+)/)[1]:'';if(temp)o.Page_Section2=temp;sendBug("Page_Section2A","","WR");}
if(o.Page_Section2&&o.Page_Section2.match(/CategoryListing|CategoryLanding|ProductListing|ProductDetail/i)){if(jQuery("link[rel='alternate'][hreflang='en-us']").attr('href')){temp=jQuery("link[rel='alternate'][hreflang='en-us']").attr('href').split('/');o.Page_Section2=temp.length>6?decodeURI(temp[5]).match(/[^\s]+/).toString():'';sendBug("Page_Section2B","","WR");}else{temp=jQuery('#pageType').val()||jQuery("#pageIdentifier").val();if(temp)temp=temp.match(/_(.+)/)?temp.match(/_(.+)/)[1]:'';if(temp){o.Page_Section1=temp.replace(/_clv$|_clp$|_plp$/i,'');sendBug("Page_Section1E","","WR");}}}
if(document.location.pathname.match(/ferrari\/clp$/)){temp="CR";if(o.Page_Section2!='Ferrari'){o.Page_Section2='Ferrari';temp="WR";}
sendBug("Page_Section2C","",temp);}
if(o.Page_Country.match(/JP/i)&&o.Page_Section1=='Checkout'){if(o.Page_Section2){o.Page_Section2_Prev=o.Page_Section2;o.Page_Section2=o.Page_Section2.replace('Orders','ThankYou');temp=o.Page_Section2_Prev!=o.Page_Section2?"WR":"CR";delete o.Page_Section2_Prev;}else{temp="MSs";}
sendBug("Page_Section2D","",temp);}}
{if(1&&o.Page_Platform=='WCS'&&o.Order_Id)
{if(1&&o.Order_DiscountCode!=="Eyemed"&&jQuery&&jQuery('#Revenue').attr('value')){if(!o.Order_ProductsAmount){sendBug("Order_ProductsAmount","","WR");}
o.Order_ProductsAmount=o.Order_ProductsAmount||jQuery('#Revenue').attr('value');}
if(o.Products){temp="CR";for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if(o.Products[index].hasOwnProperty('Revenue')&&o.Products[index].hasOwnProperty('Price')){sendBug("Revenue","","RM");delete o.Products[index].Revenue;}
if(o.Products[index].hasOwnProperty('Price1')){temp="CR";input=o.Products[index].Price1.toString();if(input.match(/\.\d{2}$/)){input=input.replace(',','');}
else if(input.match(/,\d{2}$/)){input=input.replace('.','').replace(',','.');}
input=parseFloat(input).toFixed(2);if(input>0){o.Products[index].Price=(input/(o.Products[index].Units||1)).toFixed(2);delete o.Products[index].Price1;temp="WR";}
sendBug("","24056",temp,1);}}}}}
if(o.productList){var props_list=[["productCatList","Category"],["productStatusList","Status"],["quantList","Units"],["priceListWithDiscount","Price"],["priceList","Price"],["remixTempleEngraving","EngravingTemple"],["remixCaseEngraving","EngravingCase"],];o.Products={};input=o.productList.split(',');for(index=0;index<input.length;index++){index2=(input[index].split(';').length>1)?input[index].split(';')[1]:input[index].split(';')[0];o.Products[index2]={};o.Products[index2].Category=(input[index].split(';').length>1)?input[index].split(';')[0]:'';for(p2l in props_list){if(props_list.hasOwnProperty(p2l)&&o[props_list[p2l][0]]){temp=o.Products[index2][props_list[p2l][1]];o.Products[index2][props_list[p2l][1]]=o[props_list[p2l][0]].split(',')[index]?o[props_list[p2l][0]].split(',')[index]:'';if(temp==o.Products[index2][props_list[p2l][1]]){temp="CR";}else{temp="WR";}
sendBug(props_list[p2l][1]+"X","",temp);}}}
delete o.productList;for(p2l in props_list)if(props_list.hasOwnProperty(p2l))delete o[props_list[p2l][0]];}
if(o.Products_Id_Csv){o.Products={};input=o.Products_Id_Csv.split(',');for(index=0;index<input.length;index++){index2=input[index];o.Products[index2]={};if(o.Products_Category_Csv)o.Products[index2].Category=o.Products_Category_Csv.split(',')[index]?o.Products_Category_Csv.split(',')[index]:'';if(o.Products_Units_Csv)o.Products[index2].Units=o.Products_Units_Csv.split(',')[index]?o.Products_Units_Csv.split(',')[index]:'';if(o.Products_Revenue_Csv)o.Products[index2].Revenue=o.Products_Revenue_Csv.split(',')[index]?o.Products_Revenue_Csv.split(',')[index]:'';}}
{if(1&&(o.Page_Platform+'').match(/WCS/i)&&(o.Page_Name+'').match(/404_Inactive or Unpublished Product/)&&tealium_querystring_object.productId){o.Products={};o.Products[tealium_querystring_object.productId]={};o.Error_Details=(o.Error_Details&&o.Error_Details!=="")?o.Error_Details:tealium_querystring_object.productId;sendBug("UPC","","RN");}}
if(o.Products){temp="CR";for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if(o.Products[index].Price===0&&index.match(/^Rmx_/)&&jQuery("#priceField").length&&jQuery("#priceField").text().match(/[\d\.,]+/)){temp="WR";o.Products[index].Price=parseFloat(jQuery("#priceField").text().match(/[\d\.,]+/)[0].replace(/,/,'.'));}}
sendBug("PriceP","",temp);}
if(o.Products){temp="CR";for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if(o.Products[index].Revenue&&!o.Products[index].Price){o.Products[index].Price=o.Products[index].Revenue;temp="WR";}}
sendBug("PriceP","",temp);}
if(!o.Order_CartId&&tealium_querystring_object.orderId){o.Order_CartId=tealium_querystring_object.orderId;sendBug("Order_CartId","","WR");}
if(o.Order_Currency&&o.Order_Currency!=utag_settings('Order_Currency',o)){sendBug("Order_Currency","","WR");delete o.Order_Currency;}
if(o.Page_Path!==undefined){if(o.Page_Path.match(/PreOrderRemindMeEmailView/)&&jQuery(".rb-pdp-header-nav a").length>0){o.Products_Id_Array=new Array(jQuery(".rb-pdp-header-nav a").attr('href').split('/').pop());sendBug("Products_Id_Array","","WR");}}
if(o.subSection!==undefined&&o.subSection=="PreorderEmail:Notifyme"){o.Action_Type='click';o.Content_Description='Email me when available';o.Content_Box='D PDP RightSide';if(document.location.pathname.match(/plp|clv|clp$/)){o.Content_Box='D PL QuickView';}
if(document.location.pathname.match(/SearchDisplay$/)){o.Content_Box='D SERP QuickView';}
o.Page_Path='/Back-in-stock-notification-popup';}
if(o.link_text!==undefined&&o.link_text=='PreOrderEmailNotify:Preorder:Email:NotifyMe'){delete o.link_type;delete o.linkTrackEvents;delete o.linkTrackVars;o.Content_Box='D PDP RightSide';if(o.Page_Path.match(/plp|clv|clp$/)){o.Content_Box='D PL QuickView';}
if(o.Page_Path.match(/SearchDisplay$/)){o.Content_Box='D SERP QuickView';}
o.Content_Description='Email me when available Confirm';if(o.Page_Path.match(/SearchDisplay|plp|clv|clp$/)&&jQuery("#wcs-product-quick-details #wcs-imageDisplay").length>0){o.Products_Id_Array=new Array(jQuery("#wcs-product-quick-details #wcs-imageDisplay").attr('src').split('/').pop().split('_').shift());o.Products_Id_Csv='';o.Products_Category_Array=new Array(jQuery("#wcs-product-quick-details .wcs-fav-container a").attr('onclick').indexOf('OPTICS')>-1?'OPTICS':'SUN');o.Products_Category_Csv='';}
if(jQuery("#remindviaemail").is(':checked')===true){o.Events_UserEmailSub="1";}
o.Events_ProdViewEcomOosEmailClick="1";o.Page_Path='/Back-in-stock-notification-popup';sendBug("Preorder1","","WR");}
if(o.link_text!==undefined&&o.link_text=='PDP:Preorder:Email:Notification'){delete o.link_type;delete o.linkTrackEvents;delete o.linkTrackVars;o.Page_Path='/Back-in-stock-notification-popup';o.Content_Box='D PDP BackInStockNotification';o.Content_Description='Email me when available';sendBug("Preorder2","","WR");}
{if(1&&o.Page_Brand=='RB'&&(o.Page_Country+'').match(/JP/i)&&(o.Page_Url+'').match(/Search/i)&&o.Events_Array&&o.Events_Array.SearchRun&&o.Events_Array.SearchRun.tofire==1){o.Search_ResultItemsQnt=jQuery('#headerDescription').text().match(/\d+/)?jQuery('#headerDescription').text().match(/\d+/)[0]:'0';sendBug("Search_ResultItemsQnt","","WR");}}
{if(o.Order_Id){if(!o.Order_DiscountCode&&tealium_storageR("tealium_data_orderDiscountCode",'')!==''){o.Order_DiscountCode=tealium_storageR("tealium_data_orderDiscountCode",'');tealium_storageD("tealium_data_orderDiscountCode");}
if(o.Order_DiscountCode){o.Order_DiscountCode=o.Order_DiscountCode
.replace(/,$/,'')
.replace(/[ ]?-[ ]?applied/,'');}}}
{if(1&&o.Page_Environment=='PROD'&&typeof o.Error_Code==="string"&&(!o.Error_Source||o.Error_Source=='UNKNOWN'||typeof o.Error_Source!="string")){temp="CR";if(o.Error_Code.match(/404/i)){o.Error_Source="404";temp="WR";}else if(typeof o.Error_Source!="string"){temp="WR";}
sendBug("Error_Source","",temp);}}
break;}
case'SGH':{{temp="CR";if(!o.Page_Platform||o.Page_Platform=="Unknown"){o.Page_Platform='WCS';temp="WR";}
sendBug("Page_Platform","",temp);if(o.event_names){temp=','+(o.event_names.toString())+',';temp2={'account_modification':'','add_custom_hto_to_bag':'CartAdd','add_hto_collection_to_bag':'CartAdd','add_to_bag':'CartAdd','add_to_hto':'','authentication_complete':'UserLogin','add_to_favorites':'','cart_add_pdp':'CartAdd','cart_add_quickview':'CartAdd','checkout_shipping_info':'CheckoutDelivery','checkout_billing_info':'CheckoutPayment','checkout_order_submission':'OrderCreate','click_to_call_store':'','email_opt_in':'UserEmailSub','email_storedetails':'','find_a_store':'','get_directions':'','print_storedetails':'','product_recommendation':'','purchase_complete':'OrderCreate','product_review_complete':'','property_referral':'','product_quick_view':'ProdViewEcom','quick_checkout':'Checkout','registration_complete':'UserAccountNew','remove_from_hto':'CartRemove','remove_from_bag':'CartRemove','seasonal_gift_card':'','see_their_shades':'','social_media_share':'SocialShare','successful_search':'SearchRun','unsuccessful_search':'SearchRun','view_shopping_bag':'CartView','view_shipping_info':'CheckoutDelivery','view_pdp':'ProdViewEcom'};for(index in temp2){if(!temp2.hasOwnProperty(index))continue;if(temp.indexOf(','+temp2[index][0]+',')>-1&&temp2[index][1]){if(o["Events_"+temp2[index][1]]==1){index2="CR";}else{o["Events_"+temp2[index][1]]='1';index2="WR";}}
sendBug("Events_"+temp2[index][1],"",index2);}}
{if(o.Page_Country=="Unknown")o.Page_Country='';sendBugOldProp("billing_method","Order_PaymentType");//@NOTE: billing_method is used also on previous and it has been already removed!
sendBugOldProp("country","Page_Country");sendBugOldProp("customer_city","User_City");sendBugOldProp("customer_id","User_Id");sendBugOldProp("customer_state","User_State");sendBugOldProp("customer_type","User_LoginStatus");sendBugOldProp("customer_zip","User_ZipCode");sendBugOldProp("order_id","Order_Id");sendBugOldProp("order_shipping","Order_ShippingAmount");sendBugOldProp("order_subtotal","Order_ProductsAmount");sendBugOldProp("order_tax","Order_TaxAmount");sendBugOldProp("order_total","Order_TotalAmount");sendBugOldProp("page_layout","Page_DeviceType");//@NOTE: o.page_name is used also on previous => remember to check after!
if(o.page_name){temp=o.page_name.toString();o.Page_Type_Prev=o.Page_Type;o.Page_Type=o.Page_Type?o.Page_Type:temp.match(/checkout,confirmation/)?'ThankYou':temp.match(/checkout,billing/)?'Payment':temp.match(/checkout,shipping/)?'Delivery':temp.match(/checkout,signi_in/)?'':temp.match(/checkout,shopping_bag/)?'Cart':temp.match(/product_detail/)?'Pdp':temp.match(/trends,/)?'Clv':temp.match(/catalog,/)?'Clp':temp.match(/home,/)?'Home':'';sendBug("Page_Type","",(o.Page_Type_Prev!=o.Page_Type?"WR":"CR"));delete o.Page_Type_Prev;sendBug("Page_Section1","",(o.Page_Section1?'CR':'WR'));o.Page_Section1=o.Page_Section1||o.section_2||'';}
if(o.product_brand){}
if(o.product_id){}
if(o.product_name){}
if(o.product_quantity){}
if(o.product_unit_price){}
if(o.stock_status){}
if(o['cp.facets']&&(o.Page_Type+'').match(/Clv|Clp|Plp|EPlp|CPlp/i)){if(!o.Search_FacetValues_String){temp="MSs";o.Search_FacetValues_String=o['cp.facets'].toString().replace(/^\|/i,'');}else{temp="CR";}
sendBug("","3219",temp);delete o['cp.facets'];}
sendBugOldProp("promo_code","Order_DiscountCode");if(o.Order_DiscountCode){o.Order_DiscountCode=o.Order_DiscountCode.toString();}
sendBugOldProp("shipping_method","Order_ShippingMode");sendBugOldProp("site_currency","Order_Currency");}
if(o.product_id&&(!o.Products||!Object.getOwnPropertyNames(o.Products).length)){sendBug("Products","","MSs");if(typeof o.product_id=='string'){o.product_id=(o.product_id||'').split(',');o.product_quantity=(o.product_quantity||'').split(',');o.product_unit_price=(o.product_unit_price||'').split(',');}
o.Products={};for(index=0;index<o.product_id.length;index++){index2=o.product_id[index];if(o.Products[index2]){o.Products[index2].Units=1*(o.Products[index2].Units||1)+1*(o.product_unit_price&&o.product_unit_price[index2]||1);continue;}
if(!o.Products[index2])o.Products[index2]={};if(o.product_quantity)o.Products[index2].Units=o.product_quantity[index]?o.product_quantity[index]:'';if(o.product_unit_price)o.Products[index2].Price=o.product_unit_price[index]?o.product_unit_price[index]:'';if(index===0&&o.Page_Type=='Pdp'){if(o.stock_status){o.Products[index2].Status=o.stock_status.replace('in stock','Available')
.replace('out of stock','Out-of-stock')
.replace('value not set','Unknown')
.replace('__','Not-for-sale')
.replace('__','Out-of-stock-emailme');}
if(jQuery("#price").length)o.Products[index2].Price=jQuery("#price").text().replace(/[^0-9\.]/g,'');else if(window.unitPrice)o.Products[index2].Price=window.unitPrice;}}
index2='';for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if(!index2)continue;if((''+index).match(/^20500/)){o.Products[index2].Engraving='Y';o.Products[index2].Price=parseFloat(o.Products[index2].Price)+parseFloat(o.Products[index].Price);delete o.Products[index];}
index2=index;}}
temp="CR";if(!o.Page_Type){o.Page_Type=(window.location.pathname.match(/\/[^\/]+\/[0-9]+/))?'Pdp':(window.location.pathname.match(/\/AjaxOrderItemDisplayView$|m20OrderItemDisplay/i))?'CartPage':(window.location.pathname.match(/CheckoutSingleShipmentShippingView/i))||(window.location.pathname.match(/m20OrderBillingDetails/i)&&window.location.search.match(/shipAddSelect/i))?'Delivery':(window.location.pathname.match(/CheckoutBillingView/i)||(window.location.pathname.match(/m20OrderBillingDetails/i)&&!window.location.search.match(/shipAddSelect/i)))?'Payment':(window.location.pathname.match(/CheckoutSingleShipmentSummaryView|m20OrderShippingBillingSummaryView/i))?'OrderSummary':(window.location.pathname.match(/CheckoutConfirmationView|m20OrderShippingBillingConfirmationView/i))?'ThankYou':'';temp="WR";}
sendBug("Page_Type1","",temp);{if(o.page_type&&(!o.page_typeLast)){temp="CR";if(o.Page_Type)temp="RM";else{o.page_type=o.page_type.toLowerCase();if(o.page_name){o.page_type=o.page_name.toString().match(/checkout,confirmation/i)?"confirmation":o.page_name.toString().match(/checkout,shopping_bag/i)?"cart":o.page_type;temp="WR";}}
sendBug("page_type","",temp);}}}
if(document.referrer.indexOf(location.protocol+"//"+location.host)===0&&tealium_storageR('tealium_data_action_lastEvent','')&&tealium_storageR('tealium_data_action_lastEvent','').match(/MainNav( )?Search|CatalogSearchForm/i)){temp="CR";if(tealium_querystring_object.searchTerm||(o.Page_Type+'').match(/Search/i)){if(tealium_querystring_object.searchTerm==="*"){o.Events_SearchRun="1";o.Search_Type="suggested";o.Search_Keyword=(!o.Search_Keyword&&!o.Page_Section1)?tealium_storageR('tealium_data_action_lastEvent').replace(/]/g,'').split('[').slice(2).join(' '):o.Search_Keyword;temp="WR";}
if(tealium_querystring_object.searchTerm!=="*"){o.Events_SearchRun="1";o.Search_Type="text";temp="WR";}}
else if(o.Search_ResultItemsQnt==="0"||o.Search_Keyword===""){o.Events_SearchRun="1";o.Search_Type="suggested";o.Search_ResultItemsQnt=(o.Search_ResultItemsQnt!=="0")?o.Search_ResultItemsQnt:"No-SERP";o.Search_Keyword=(!o.Search_Keyword&&o.Page_Section1)?o.Page_Section1:(!o.Search_Keyword&&!o.Page_Section1)?tealium_storageR('tealium_data_action_lastEvent').replace(/]/g,'').split('[').slice(2).join(' '):o.Search_Keyword;temp="WR";}
sendBug("","2962",temp);}
if(0||(o.billing_method+'').match(/Gift/i)||(o.Order_PaymentType+'').match(/Gift/i)){temp="CR";if(!o.Order_GiftCardCode){temp="WR";o.Order_GiftCardCode=o.billing_method||o.Order_PaymentType;}
if(!o.Order_PaymentType||o.Order_PaymentType!="GiftCard"){temp="WR";o.Order_PaymentType="GiftCard";}
sendBug("","2804",temp);}
{if(o.Products&&Object.getOwnPropertyNames(o.Products).length){temp="CR";for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if(typeof o.Products[index].Category=='string'){if(o.Products[index].Category.match(/,/)){temp="WR";if(o.Page_Environment=='PROD')o.Products[index].Category=o.Products[index].Category.replace(',','');}
if(o.Products[index].Category.match(/men|women|unisex/)){temp="WR";if(o.Products[index].Brand&&o.Page_Environment=='PROD')o.Products[index].Category=o.Products[index].Brand.toUpperCase();}}}
sendBug("","1680",temp);}}
{if(o.Products&&Object.getOwnPropertyNames(o.Products).length){temp="CR";for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;if((''+index).match(/20500000689938/)){temp="WR";if(o.Page_Environment=='PROD')delete o.Products[index];}}
sendBug("","1749",temp);}}
{var op;var ownPropertyList;var objectList;if(o.Products){temp="CR";for(index in o.Products){if(!o.Products.hasOwnProperty(index))continue;objectList=o.Products[index];ownPropertyList=['Price','PriceFull','TaxRate'];for(op in ownPropertyList){if(objectList.hasOwnProperty(ownPropertyList[op])){input=objectList[ownPropertyList[op]];output=tealium_num2JsStringFormat(input,(ownPropertyList[op]=='TaxRate'?'[rate]':'[price]'));if(output!=null&&output>0){if(0||(typeof input==="string"&&input.match(','))||(parseFloat(input)!=parseFloat(output))){temp="WR";if(o.Page_Environment=='PROD')objectList[ownPropertyList[op]]=output;}}}}}
sendBug("","1679",temp);}
{objectList=o;ownPropertyList=['Order_DiscountAmount','Order_ShippingAmount','Order_ShippingTaxRate'];temp="CR";for(op in ownPropertyList){if(objectList.hasOwnProperty(ownPropertyList[op])){input=objectList[ownPropertyList[op]];output=tealium_num2JsStringFormat(input,(ownPropertyList[op]=='Order_ShippingTaxRate'?'[rate]':'[price]'));if(output!=null&&output>0){if(0||(typeof input==="string"&&input.match(','))||(parseFloat(input)!=parseFloat(output))){temp="WR";objectList[ownPropertyList[op]]=output;}}}}
sendBug("","1683",temp);}}
{if(0||(o.page_type+'').match(/product/i)||(o.Page_Type+'').match(/product/i)){sendBug("","2638",(o.Page_Type!="Pdp"?"WR":"CR"));o.Page_Type="Pdp";}}
{if(o.Order_Id&&tealium_objQnt(o.shopping_bag)>0){o.Order_Wrapping='N';for(index in o.shopping_bag){if(0||o.shopping_bag[index].upc&&o.shopping_bag[index].upc=="410000273197"||o.shopping_bag[index].upc&&o.shopping_bag[index].upc=="410000016015"){o.Order_Wrapping='Y';break;}}}}
{if((o.Page_Type+'').match(/Thankyou/i)){temp="CR";if(((o.Order_DiscountAmount+'').match(/,/i))||((o.Order_ProductsAmount+'').match(/,/i))||((o.Order_ShippingAmount+'').match(/,/i))||((o.Order_TaxAmount+'').match(/,/i))){temp="WR";if(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa')){o.Order_DiscountAmount=o.Order_DiscountAmount.toString().replace(",",".");o.Order_ProductsAmount=o.Order_ProductsAmount.toString().replace(",",".");o.Order_ShippingAmount=o.Order_ShippingAmount.toString().replace(",",".");o.Order_TaxAmount=o.Order_TaxAmount.toString().replace(",",".");}}
sendBug("","3205",temp);}}
break;}
case'AR':case'OP':case'PO':case'VO':{{switch(o.Page_Type){case'CartPage':{temp="CR";if(o.Page_Section1!="Cart"&&o.Page_Section1!="EmptyBag"){temp="WR";o.Page_Section1=tealium_objQnt(o.Products)>0?"Cart":"EmptyBag";}
sendBug("","3202",temp,1);break;}}
if(o.Products){temp="CR";for(index in o.Products){if(o.Products[index].Quantity){temp="WR";o.Products[index].Units=o.Products[index].Quantity;delete o.Products[index].Quantity;}
if(o.Page_Type&&((o.Page_Type=="CartPage"&&o.Page_Section1&&o.Page_Section2=="Cart")||o.Page_Type=="Thankyou")&&((!o.Products[index].Units)||(o.Products[index].Units<1))){temp="WR";}
if(o.Products[index].Units&&o.Products[index].Units<1){temp="WR";}}
sendBug("","2086",temp,1);}
if(o.Products){temp2="CR";for(index in o.Products){temp=''+o.Products[index].Category;sendBug("","1747",(temp.match(/SUN|OPTICS|ACCESSORIES|GIFTCARD|GWP/)?"CR":"WR"));if(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa')){o.Products[index].Category=temp
.replace(/^[^]*Sun-[^]*$/,"SUN")
.replace(/^[^]*Optical-[^]*$/,"OPTICS");if(temp!=o.Products[index].Category)temp2="WR";}}
sendBug("","2085",temp2,1);}}
{if(tealium_storageR('tealium_data_action_lastEvent','')&&tealium_storageR('tealium_data_action_lastEvent','').match(/CartPage( )?Summary( )?CheckoutAsGuest/i)){o.Events_Checkout="1";}}
break;}
case'SO':{if(!o.Page_Country){o.Page_Country=o.site_country.toUpperCase()||"US";}
if(typeof o.product_id!='undefined'&&o.product_id!=null&&o.product_id.length&&o.product_id.length>0&&!o.Products){o.Products={};var indexo=o.product_id[0].toString();o.Products[indexo]={};}
if(!o.Page_Section1){o.Page_Section1=(o.site_section)?o.site_section.toLowerCase().charAt(0).toUpperCase()+o.site_section.slice(1):"";o.Page_Section2=(o.site_subsection)?o.site_subsection.toLowerCase().charAt(0).toUpperCase()+o.site_subsection.slice(1):"";}
if(!o.User_LoginStatus){o.User_LoginStatus=o.login_status||"Guest";o.User_LoginStatus=(o.User_LoginStatus.match(/logged out|guest/i))?"Guest":"Logged";}
if(!o.Search_Keyword){o.Search_Keyword=o.onsite_search_keyword||"";}
if(!o.Search_ResultItemsQnt){o.Search_ResultItemsQnt=o.onsite_search_results||"";}
if(typeof o.site_event_name!=="undefined"){if(o.site_event_name.includes("email_signup")){o.Events_UserEmailSub="1";}
if(o.site_event_name.includes("exam_scheduler_find_store")){o.Events_FunnelFindStore="1";}
if(o.site_event_name.includes("exam_scheduler_schedule")){o.Events_FunnelPersonalInfo="1";}
if(o.site_event_name.includes("exam_scheduler_complete")){o.Events_FunnelConfirmation="1";}
if(o.site_event_name.includes("remove_exam")){o.Events_FunnelCancellation="1";}
if(o.site_event_name.includes("new_account")){o.Events_UserAccountNew="1";}
if(o.site_event_name.includes("successful_search")){o.Events_SearchRun="1";}
if(o.site_event_name.includes("exam_scheduler_review")){o.Events_FunnelReview="1";}}
break;}
case'OPSM':{o.Tracking_Pusher="data2track.push";o.Page_SiteVersion=(!o.country)?"new":"";{if(o.authenticated)o.User_LoginStatus=(o.authenticated=="LoggedIn")?"Logged":"Guest";if(o.siteSearchKeyword)o.Search_Keyword=o.siteSearchKeyword;if(typeof o.siteSearchResultsNum!=="undefined")o.Search_ResultItemsQnt=o.siteSearchResultsNum.toString();if(o.pageName){temp=o.pageName.split(":");o.Page_Type=temp.length>0?temp[(temp.length-1)]:"";var pageTypeMap={"Homepage":"Home","LandingPage":"Landing","ProductGrid":"Plp","ProductDetail":"Pdp","OrderConfirmation":"Thankyou",};for(index in pageTypeMap){if(pageTypeMap.hasOwnProperty(index)&&o.pageName.match(new RegExp(index+"$","i"))){o.Page_Type=pageTypeMap[index];}}}
if(o.channel)o.Page_Section1=o.channel;if(o.subSection)o.Page_Section2=o.subSection;if(o.URL)o.Page_Url=o.URL;if(o.country)o.Page_Country=o.country;o.Page_Platform="WCS";if(o.errorType)o.Error_Code=o.errorType;o.Order_Currency="AUD";if(o.paymentType)o.Order_PaymentType=o.paymentType;if(typeof o.cartId!=="undefined")o.Order_CartId=o.cartId.toString();if(typeof o.promoCode!=="undefined")o.Order_DiscountCode=o.promoCode.toString();if(typeof o.CartShippingCost!=="undefined")o.Order_ShippingAmount=o.CartShippingCost.toString();if(typeof o.CartTax!=="undefined")o.Order_TaxAmount=o.CartTax.toString();if(typeof o.CartDiscount!=="undefined")o.Order_DiscountAmount=o.CartDiscount.toString();switch(o.pageEvents){case'LoginSuccess':{o.Events_UserLogin="1";break;}
case'RegisterSuccess':{o.Events_UserAccountNew="1";break;}
case'EmailSubscribe':{o.Events_UserEmailSub="1";break;}
case'AddToFav':{o.Events_ProdFavAdd="1";break;}
case'Search':{o.Events_SearchRun="1";break;}
case'CartView':{o.Events_CartView="1";break;}
case'CheckoutStep2':case'CheckoutStep2LoginSuccess':{o.Events_CheckoutDelivery="1";break;}
case'CheckoutStep3':case'CheckoutStep3Subscribe':{o.Events_CheckoutPayment="1";break;}
case'CartCheckout':case'ContactLensCheckoutStep3':{o.Events_CheckoutLogin="1";break;}
case'BookET':case'NewBETStart':{o.Events_FunnelFindStore="1";break;}
case'DirectBETChooseLocation':case'NewBETChooseLocation':case'NewBETSkipStep1':{o.Events_FunnelStoreSearch="1";break;}
case'NewBETSelectAppointment':{o.Events_FunnelPersonalInfo="1";break;}
case'ConfirmBookET':case'NewBETConfirm':{o.Events_FunnelConfirmation="1";break;}}
if(o.pageEvents)o.Tags_AdobeAnalytics_Events=o.pageEvents;if(o.linkTrackEvents){if(o.linkTrackEvents.match(/scAdd/))o.Events_CartAdd="1";if(o.linkTrackEvents.match(/scOpen/))o.Events_CartCreate="1";o.Tags_AdobeAnalytics_Events=(o.Tags_AdobeAnalytics_Events?o.Tags_AdobeAnalytics_Events:"")+o.linkTrackEvents;}}
if(o.productsList&&o.Page_Type!="Thankyou"){o.Products={};var prods=o.productsList.split(',');for(i=0;i<prods.length;i++){temp=prods[i].split(';');o.Products[temp[1]]={'Category':temp[0]};}}
if(o.Page_Type=="Thankyou"){if(typeof o.orderId!=="undefined")o.Order_Id=o.orderId.toString();if(typeof o.CartTotal!=="undefined")o.Order_TotalAmount=o.CartTotal.toString();if(typeof o.CartTotal!=="undefined")o.Order_ProductsRevenue=o.CartTotal.toString();if(typeof o.CartShippingCost!=="undefined")o.Order_ShippingRevenue=o.CartShippingCost.toString();if(typeof o.CartTax!=="undefined")o.Order_TaxAmount=o.CartTax.toString();{if(!o.Order_Id&&jQuery(".order-number i"))o.Order_Id=jQuery(".order-number i").text();if(!o.Order_Id&&o.Tracking_EventId.match(/Loading-Ready$/)){o.Order_Id=o.userId+new Date().getTime().toString();}}
if(!o.Products&&o.CartSKUIdList){var __sku=o.CartSKUIdList?o.CartSKUIdList.split(","):[];if(__sku.length>0){o.Products={};for(i=0;i<__sku.length;i++){o.Products[__sku[i]]={};var __cat=o.productCatList?o.productCatList.split(","):[];var __units=o.CartQuanList?o.CartQuanList.split(","):[];var __prices=o.CartPriceList?o.CartPriceList.split(","):[];o.Products[__sku[i]].Sku=__sku[i];if(__cat)o.Products[__sku[i]].Category=__cat[i];if(__units)o.Products[__sku[i]].Units=__units[i];if(__units&&__prices){o.Products[__sku[i]].Units=__units[i];o.Products[__sku[i]].Price=(parseFloat(__prices[i])/parseInt(__units[i])).toFixed(2);}}}}}
break;}}
{{o.Page_Code=o.Page_Code||'';if(!o.Page_Code){if(window.utag&&utag.data&&utag.data.Page_Code){o.Page_Code=utag.data.Page_Code;}
else if(window.utag_data&&utag_data.Page_Code){o.Page_Code=utag_data.Page_Code;}}
if(o.Page_Code&&(!o.Page_CodeLast)){temp=o.Page_Code.split(':');temp2="CR";if(!o.Page_Country){temp2="WR";o.Page_Country=temp.shift();}else{temp.shift();}
sendBug("Page_Code1","",temp2);temp2="CR";if(!o.Page_Language){temp2="WR";o.Page_Language=temp.shift();}else{temp.shift();}
sendBug("Page_Code2","",temp2);temp2="CR";if(!o.Page_DeviceType){temp2="WR";o.Page_DeviceType=temp.shift();}else{temp.shift();}
if(typeof o.Page_DeviceType==="string"&&o.Page_DeviceType.match(/(mobile|desktop|responsive|tablet)/i))temp2="WR";o.Page_DeviceType=o.Page_DeviceType.replace(/M/,'mobile').replace(/D/,'desktop').replace(/X/,'responsive').replace(/T/,'tablet');sendBug("Page_Code3","",temp2);temp2="CR";if(!o.Page_Name){temp2="WR";o.Page_Name=temp.join(':');}
sendBug("Page_Code4","",temp2);}}
temp="CR";if(o.Order_GiftCard){temp="WR";if(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa')){o.Order_GiftCardCode=o.Order_GiftCard;delete o.Order_GiftCard;}}else if(!o.Order_GiftCardCode){temp="WR";}
sendBug("","1918",temp);if(o.Order_PaymentType&&(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa'))){temp="CR";o.Order_PaymentTypeBefore=o.Order_PaymentType;o.Order_PaymentType=o.Order_PaymentType.trim()
.replace(/YKB_|Garnt_/i,'')
.replace(/master( )?card/i,'MasterCard')
.replace(/amex|american( )?express/i,'Amex')
.replace(/visa/i,'Visa')
.replace(/amex/i,'Amex')
.replace(/COD|Cash On Delivery/i,'Cash-On-Delivery')
.replace(/SOFORT/i,'Sofort')
.replace(/ideal/i,'Ideal')
.replace(/Gift Card/i,'GiftCard')
.replace(/apple( )?pay/i,'ApplePay');o.Order_PaymentType=(o.Order_PaymentType.match(/PaypalExp/i))?"PayPalExpressCheckout":(o.Order_PaymentType.match(/ApplePayExp/i))?"ApplePayExpressCheckout":o.Order_PaymentType;if(o.Order_PaymentTypeBefore!==o.Order_PaymentType){temp="WR";delete o.Order_PaymentTypeBefore;}
sendBug("Order_PaymentType","",temp);}
if(o.Order_Id&&(o.Page_Type+'').match(/Thankyou/i)){temp="CR";if(!o.Order_ShippingMode){temp="MSs";if(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa')){o.Order_ShippingMode="standard";}}
sendBug("Order_ShippingMode","",temp);temp="CR";if((o.Order_PaymentType+'').match(/GiftCard/i)&&!o.Order_GiftCardCode&&(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa'))){temp="WR";if(o.Page_Environment=='PROD'||tealium_storageR('tealium_team','lwa')){o.Order_GiftCardCode="Unknown";}}
sendBug("","1918",temp);}}
{if(typeof o.Page_Country==="string"&&o.Page_Country!="Unknown"){o.Page_Country_Prev=o.Page_Country;o.Page_Country=(o.Page_Country+'')
.replace(/M[1-3]/i,'MEA')
.replace(/S[1-3]/i,'SEE');temp=o.Page_Country_Prev!=o.Page_Country?"WR":"CR";delete o.Page_Country_Prev;tealium_storageW('tealium_data_page_countryLast',o.Page_Country);}else{o.Page_Country=tealium_storageR('tealium_data_page_countryLast','');tealium_storageD('tealium_data_page_countryLast');temp="MSs";}
sendBug("Page_Country","",temp);temp="CR";if(!o.Page_Language){if(document.getElementsByTagName("html")[0].getAttribute("lang")){o.Page_Language=document.getElementsByTagName("html")[0].getAttribute("lang").toLowerCase().split('-').shift();}else{o.Page_Language=o.Page_Country?(o.Page_Country+'').toLowerCase():'';}
temp="MSs";}
sendBug("Page_Language","",temp);temp="CR";if(!o.Page_DeviceType){o.Page_DeviceType='D';if(0||window.location.pathname.match(/mobile/i)||window.location.hostname.match(/^m\./i)||(o.Page_Name+'').match(/:mobi:/i)||(o.Page_NameFull+'').match(/:mobi:/i)||(o.Page_Platform+'').match(/mobile/i)){o.Page_DeviceType='M';}
temp="MSs";}
sendBug("Page_DeviceType","",temp);if(!o.Page_Name){if(window.utag&&utag.data&&utag.data.Page_Name)o.Page_Name=utag.data.Page_Name;else if(window.utag_data&&utag_data.Page_Name)o.Page_Name=utag_data.Page_Name;}
if(!o.Page_Type&&o.Page_Name){temp=/([^:]+)$/.exec(o.Page_Name);o.Page_Type=temp?temp[1]:'';sendBug("Page_TypeX","","MSs");}
if(!o.Page_Section1&&o.Page_Name){temp=/^([^:]+)/.exec(o.Page_Name);o.Page_Section1=temp?temp[1]:'';sendBug("Page_Section1X","","MSs");}
if((o.Page_Section1+'').match(/Checkout/i)){o.Page_Section2_Prev=o.Page_Section2;if(!o.Page_Section2){o.Page_Section2="Standard";}
if((o.Order_PaymentType+'').match(/Express|^EXP/i)||(tealium_storageR('tealium_data_action_lastAction','')&&tealium_storageR('tealium_data_action_lastAction','').match(/checkout:express/i))){o.Page_Section2="Express";}
sendBug("Page_Section2X","",(o.Page_Section2_Prev!=o.Page_Section2?"WR":"CR"));delete o.Page_Section2_Prev;}
if(o.Page_Platform){o.Page_Platform_Prev=o.Page_Platform;o.Page_Platform=(o.Page_Platform+'')
.replace(/wcs|RAY-BAN STORE/,'WCS')
.replace('dmp','DMP')
.replace(/^EC\-CUBE$/i,'EC-CUBE Japan')
.replace(' (desktop)','')
.replace(' (mobile)','');sendBug("Page_PlatformX","",(o.Page_Platform_Prev!=o.Page_Platform?"WR":"CR"));o.Page_Platform_Prev=o.Page_Platform;if(o.Page_Platform==''||o.Page_Platform=="Unknown"){switch(o.Page_Brand+''){case'RB':{switch(o.Page_Country+''){case'IN':o.Page_Platform='AceT';break;default:o.Page_Platform='WCS';break;}
break;}
case'OO':{o.Page_Platform='Hybris';break;}
default:break;}}
sendBug("Page_PlatformX","",(o.Page_Platform_Prev!=o.Page_Platform?"WR":"CR"));delete o.Page_Platform_Prev;}
switch(o.Page_Brand){case'GL':{if(jQuery("img[src*='404-not-found']").length>0||window.hiconversion_data_optimization){sendBug("Err404","",(o.Page_Type!="Error"||o.Error_Code!="404 - page not found"?"WR":"CR"));o.Page_Type="Error";o.Error_Code="404 - page not found";}}
default:break;}
//@NOTE: decide if you want to send a bug in case of trim is applied
tealium_objReplace(o,"trim");}};tealium_logContext='preloader utag_settings';tealium_logNote='';var utag_settings=function(prop,o){switch(prop){case'Page_CountryThirdPlatforms':{return(!o||!o.Page_Brand)?'':(o.Page_Brand=='RB')?'JP|IN':(o.Page_Brand=='OO')?'BR':(o.Page_Brand=='SGH')?'BR|MX':'';}
case'Page_CountryEcommerce_YN':{return(!o||!o.Page_BrandCountry)?'':(o.Page_BrandCountry.match(/RB:(AT|BE|DK|FI|FR|DE|IE|IT|NL|NO|PL|PT|ES|SE|CH|GB)/))?'Y':(o.Page_BrandCountry.match(/RB:(US|CA)/))?'Y':(o.Page_BrandCountry.match(/RB:(CN|HK|AU)|RB:IN$/))?'Y':(o.Page_BrandCountry.match(/RB:(JP|KR)/))?'Y':(o.Page_BrandCountry.match(/RB:(BR|MX)/))?'Y':(o.Page_BrandCountry.match(/RB:(ROE)/))?'Y':(o.Page_BrandCountry.match(/OO:(AT|BE|DK|FR|DE|IE|IT|LU|NL|NO|PL|PT|ES|SE|CH|GB)/))?'Y':(o.Page_BrandCountry.match(/OO:(US|CA)/))?'Y':(o.Page_BrandCountry.match(/OO:(AU)/))?'Y':(o.Page_BrandCountry.match(/OO:(JP)/))?'Y':(o.Page_BrandCountry.match(/OO:(ROE)/))?'Y':(o.Page_BrandCountry.match(/OO:(MX|BR)/))?'Y':(o.Page_BrandCountry.match(/OO:(EU)/))?'Y':(o.Page_BrandCountry.match(/^OSI/))?'Y':(o.Page_BrandCountry.match(/SGH:(ES|GB|DE|FR)/))?'Y':(o.Page_BrandCountry.match(/SGH:(US|CA)/))?'Y':(o.Page_BrandCountry.match(/SGH:(AU|NZ)/))?'Y':(o.Page_BrandCountry.match(/(PO|VO|OP:):(IT|ES|GB|DE|FR)/))?'Y':(o.Page_BrandCountry.match(/(PO|VO|OP:):(CA|US)/))?'Y':(o.Page_BrandCountry.match(/^AR/))?'N':(o.Page_BrandCountry.match(/^GL/))?'Y':(o.Page_BrandCountry.match(/^CD/))?'Y':(o.Page_BrandCountry.match(/^LC/))?'Y':(o.Page_BrandCountry.match(/^TO/))?'Y':(o.Page_BrandCountry.match(/^PV/))?'N':(o.Page_BrandCountry.match(/^OC/))?'Y':(o.Page_BrandCountry.match(/^SV/))?'Y':(o.Page_BrandCountry.match(/^OPSM/))?'Y':(o.Page_BrandCountry.match(/^SO/))?'Y':(o.Page_BrandCountry.match(/^CO/))?'Y':'N';}
case'Page_Environment':{if(window.jQuery){var findUtagJs=jQuery('script[src*="/utag.js"]');if(findUtagJs){return findUtagJs.attr("src").match(/prod\/utag\.js/)?'PROD':'UAT';}}
return'';}
case'Order_Currency':{return(!o||!o.Page_Country)?'':(o.Page_Country.match(/AT|BE|FR|DE|IE|IT|NL|PT|ES|FI|LU|SK/))?'EUR':(o.Page_Country.match(/AU/))?'AUD':(o.Page_Country.match(/BR/))?'BRL':(o.Page_Country.match(/CA/))?'CAD':(o.Page_Country.match(/CH/))?'CHF':(o.Page_Country.match(/CN/))?'CNY':(o.Page_Country.match(/CZ/))?'CZK':(o.Page_Country.match(/DK/))?'DKK':(o.Page_Country.match(/GB/))?'GBP':(o.Page_Country.match(/HK/))?'HKD':(o.Page_Country.match(/IN/))?'INR':(o.Page_Country.match(/JP/))?'JPY':(o.Page_Country.match(/KR/))?'KRW':(o.Page_Country.match(/MX/))?'MXN':(o.Page_Country.match(/NO/))?'NOK':(o.Page_Country.match(/NZ/))?'NZD':(o.Page_Country.match(/PL/))?'PLN':(o.Page_Country.match(/TR/))?'TRY':(o.Page_Country.match(/US/))?'USD':(o.Page_Country.match(/SE/))?'SEK':'';}
case'Order_ProductsTaxRate':{return(!o||!o.Page_Country)?'':(o.Page_Country.match(/BR/))?0.2725:(o.Page_Country.match(/DK|NO|SE/))?0.25:(o.Page_Country.match(/FI/))?0.24:(o.Page_Country.match(/IE|PT|PL/))?0.23:(o.Page_Country.match(/IT/))?0.22:(o.Page_Country.match(/BE|NL|ES|CZ/))?0.21:(o.Page_Country.match(/AT|FR|GB|SK/))?0.2:(o.Page_Country.match(/DE/))?0.19:(o.Page_Country.match(/TR/))?0.18:(o.Page_Country.match(/CN|LU/))?0.17:(o.Page_Country.match(/MX/))?0.16:(o.Page_Country.match(/NZ/))?0.125:(o.Page_Country.match(/AU/))?0.10:(o.Page_Country.match(/CH/))?0.08:(o.Page_Country.match(/CA|HK|IN|JP|US/))?'':'';}
case'Order_TaxIncluded':{return(!o||!o.Page_BrandCountry)?'':(o.Page_BrandCountry.match(/RB:(CA|US)/))?'N':(o.Page_BrandCountry.match(/OO:(CA|US)/))?'N':(o.Page_BrandCountry.match(/OSI:(CA|US)/))?'N':(o.Page_BrandCountry.match(/SGH:(CA|US)/))?'N':(o.Page_BrandCountry.match(/VO:(CA|US)/))?'N':(o.Page_BrandCountry.match(/PO:(CA|US)/))?'N':(o.Page_BrandCountry.match(/AR:(CA|US)/))?'N':(o.Page_BrandCountry.match(/OP:(CA|US)/))?'N':(o.Page_BrandCountry.match(/GL:(CA|US)/))?'N':(o.Page_BrandCountry.match(/CD:(CA|US)/))?'N':(o.Page_BrandCountry.match(/LC:(CA|US)/))?'N':(o.Page_BrandCountry.match(/TO:(CA|US)/))?'N':(o.Page_BrandCountry.match(/OC:(CA|US)/))?'N':(o.Page_BrandCountry.match(/PV:(CA|US)/))?'N':(o.Page_BrandCountry.match(/OPSM:(CA|US)/))?'N':(o.Page_BrandCountry.match(/SO:(CA|US)/))?'N':'Y';}
case'Tags__Abort':{return(0
||((tealium_storageR('tealium_filter','')=='on'&&(!o.Page_Environment||o.Page_Environment=='PROD')))
||((!o.Tags_AdobeAnalytics_TrafficSourceCid_ThisSession||o.Tags_AdobeAnalytics_TrafficSourceCid_ThisSession=="")&&(0||(window.screen.availHeight=="2000"&&window.screen.availWidth=="2000")))
||(!(!o.Tracking_Pusher||o.Tracking_Pusher=="data2track.push"||o.Tracking_Pusher=="utag.track"&&o.Tracking_EventId=="PageView:default"))
||(o.Page_Brand.match(/RB/)&&o.Page_Platform.match(/WCS/)&&o.Tracking_EventId.match(/^PageView:default$/i)&&(0||o.Page_Type.match(/Pdp|CartPage|Thankyou|PClp/i)))
||(o.Page_Brand.match(/OO/)&&o.Tracking_EventId.match(/^PageView:default$/i)&&o.Page_Type.match(/Pdp|CPlp|Plp|Search|Thankyou/i))
||(o.Page_Brand.match(/OSI/)&&o.Tracking_EventId.match(/^PageView:default$/i)&&o.Page_Type.match(/Pdp|CPlp|Plp|Search/i))
||(o.Page_Brand.match(/PO|VO|OP$|OC/i)&&o.Tracking_EventId.match(/^PageView:default$/i))
||(o.Page_Brand.match(/SGH/)&&o.Tracking_EventId.match(/^PageView:default$/i)&&o.Page_Type&&(0||o.Page_Type.match(/Pdp/i)||o.Page_Type.match(/CartPage/i)||o.Page_Type.match(/ThankYou/i)))
||(o.Page_Brand.match(/SGH/)&&o.event_names&&(0||(o.event_names.toString().indexOf('see_their_shades')>-1)))
||(o.Page_Brand.match(/OPSM/)&&o.Page_SiteVersion!=="new"&&o.Tracking_EventId.match(/^PageView:default$/i)))?1:0;}
case'Tags_AdobeAnalytics_RSID':{return(!o||!o.Page_BrandCountry)?'':(o.Page_BrandCountry.match(/^RB:JP/))?'luxray-ban-jp-dev':(o.Page_BrandCountry.match(/^RB/))?'luxray-ban-dev':(o.Page_BrandCountry.match(/^OO/))?'lux-oakley-dev2':(o.Page_BrandCountry.match(/^OSI/))?'lux-osi-dev':(o.Page_BrandCountry.match(/^SGH/))?'lux-sgh-dev':(o.Page_BrandCountry.match(/^VO/))?'lux-vogue-dev':(o.Page_BrandCountry.match(/^PO/))?'lux-persol-dev':(o.Page_BrandCountry.match(/^AR/))?'lux-arnette-dev2':(o.Page_BrandCountry.match(/^OP:/))?'lux-oliver-dev':(o.Page_BrandCountry.match(/^GL/))?'lux-glasses-dev':(o.Page_BrandCountry.match(/^CD/))?'lux-contactsdirect-dev':(o.Page_BrandCountry.match(/^LC/))?'luxlenscraftersdev':(o.Page_BrandCountry.match(/^TO/))?'luxtargetopticaldev':(o.Page_BrandCountry.match(/^OC/))?'lux-oticascarol-dev':(o.Page_BrandCountry.match(/^PV/))?'lux-pearle-dev':(o.Page_BrandCountry.match(/^SV/))?'lux-salmoiraghi-dev':(o.Page_BrandCountry.match(/^OPSM/))?'luxopsmqa':(o.Page_BrandCountry.match(/^SO/))?'luxsearsopticaldev':(o.Page_BrandCountry.match(/^LUX/))?'lux-luxottica-dev':(o.Page_BrandCountry.match(/^1LX/))?'lux-oneluxottica-dev':(o.Page_BrandCountry.match(/^CO/))?'lux-costa-dev':'';}
case'Tags_AdobeAnalytics_RSID_Alternative':{return(!o||!o.Page_BrandCountry||!o.Page_CountryEcommerce_YN)?'':(o.Page_Brand.match(/RB/))?(o.Page_CountryEcommerce_YN=='Y'?'luxray-ban-prod':'luxray-ban-noecom'):(o.Page_Brand.match(/OO/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-oakley':''):(o.Page_Brand.match(/OSI/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-osi-prod':''):(o.Page_Brand.match(/SGH/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-sgh-prod':''):(o.Page_Brand.match(/VO/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-vogue':'lux-vogue'):(o.Page_Brand.match(/PO/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-persol':'lux-persol'):(o.Page_Brand.match(/AR/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-arnette-prod':'lux-arnette-prod'):(o.Page_Brand.match(/OP$/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-oliver-prod':'lux-oliver-prod'):(o.Page_Brand.match(/GL/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-glasses':''):(o.Page_Brand.match(/CD/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-contactsdirect-prod':''):(o.Page_Brand.match(/LC/)&&window.location.hostname.match(/^local\./i))?(o.Page_CountryEcommerce_YN=='Y'?'lux-lenscrafters-yext':''):(o.Page_Brand.match(/LC/))?(o.Page_CountryEcommerce_YN=='Y'?'luxlenscrafters':''):(o.Page_Brand.match(/TO/)&&window.location.hostname.match(/^local\./i))?(o.Page_CountryEcommerce_YN=='Y'?'lux-targetoptical-yext ':''):(o.Page_Brand.match(/TO/))?(o.Page_CountryEcommerce_YN=='Y'?'luxtargetoptical':''):(o.Page_Brand.match(/OC/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-oticascarol-prod':''):(o.Page_Brand.match(/PV/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-pearle-prod':'lux-pearle-prod'):(o.Page_Brand.match(/SV/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-salmoiraghi-prod':''):(o.Page_Brand.match(/OPSM/)&&o.Page_Country.match(/AU/))?(o.Page_CountryEcommerce_YN=='Y'?'luxopsmprodglobal,luxopsmprodau':''):(o.Page_Brand.match(/OPSM/)&&o.Page_Country.match(/NZ/))?(o.Page_CountryEcommerce_YN=='Y'?'luxopsmprodglobal,luxopsmprodnz':''):(o.Page_Brand.match(/SO/))?(o.Page_CountryEcommerce_YN=='Y'?'luxsearsopticalprod':''):(o.Page_Brand.match(/^LUX/))?'lux-luxottica-prod':(o.Page_Brand.match(/^1LX/))?'lux-oneluxottica-prod':(o.Page_Brand.match(/CO/))?(o.Page_CountryEcommerce_YN=='Y'?'lux-costa-prod':''):'';}
case'Tags_AdobeAnalytics_Server':{return(!o||!o.Page_Brand)?'':(o.Page_Brand.match(/RB/))?'metrics.ray-ban.com':(o.Page_Brand.match(/OO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OSI/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/SGH/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/VO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/PO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/AR/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OP$/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/GL/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/CD/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/LC/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/TO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OC/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/PV/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/SV/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OPSM/))?'opsm.122.2o7.net':(o.Page_Brand.match(/SO/))?'luxsearsopticalcom.122.2o7.net':(o.Page_Brand.match(/LUX|1LX/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/CO/))?'smetrics.costadelmar.com':'';}
case'Tags_AdobeAnalytics_ServerSecure':{return(!o||!o.Page_Brand)?'':(o.Page_Brand.match(/RB/))?'smetrics.ray-ban.com':(o.Page_Brand.match(/LC/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OSI/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/SGH/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/VO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/PO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/AR/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OP$/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/GL/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/CD/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/TO/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OC/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/PV/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/SV/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/OPSM/))?'opsm.122.2o7.net':(o.Page_Brand.match(/SO/))?'luxsearsopticalcom.122.2o7.net':(o.Page_Brand.match(/LUX|1LX/))?'luxottica.d2.sc.omtrdc.net':(o.Page_Brand.match(/CO/))?'smetrics.costadelmar.com':'';}
default:{tealium_log.preloader.set('error',o,'preloader utag_settings: prop '+prop+' not found');}}};tealium_logContext='preloader utag_data';tealium_logNote='';var utag_data=window.utag_data||{};tealium_log.utag_data.set('processing',utag_data);utag_data.Tags_Tealium_LoadStartTimestamp=Date.now();utag_data.Tracking_EventId=utag_data.Tracking_EventId||'PageView:default';utag_data.Tracking_DataLayerType="FULL";tealium_logContext='preloader utag_data - automatic QA';utag_qa(utag_data);tealium_log.utag_data.set('done',tealium_tools.merge({},utag_data));delete utag_data.Result_QA;tealium_logContext='preloader utag_data - _checkGet';utag_builder('_checkGet',utag_data);tealium_logContext='preloader utag_data - _checkStorage';utag_builder('_checkStorage',utag_data);tealium_logContext='preloader utag_data - repairer';utag_repairer(utag_data,"020 utag_data");tealium_logContext='preloader utag_data - builder Page_';utag_builder('Page_',utag_data);tealium_logContext='preloader utag_data - builder Tags_';utag_builder('Tags_',utag_data);tealium_logContext='preloader tealium_data2track';tealium_logNote='';var tealium_clickTracking_customized=tealium_clickTracking_customized||[];var tealium_data2track=tealium_data2track||[];var tealium_data2track_backStack=tealium_data2track.slice(0);var tealium_data2track_stack=tealium_data2track.slice(0);var tealium_data2track_log='';tealium_data2track.push=function(e){var cleanTrackingEventId=function(eid){eid=eid.replace(/Cancellation-/g,"Canc");eid=eid.replace(/M-VTO-/g,"MOB-VTO-");eid=eid.replace(/Search-/g,"Search");eid=eid.replace(/Prod-AddToCart/g,"AddToCart");var replaceList;var irl;var regexp;var mode;var pageDevType=["M","D","X"];var pagePlatform=["WCS","DMP","Hybris","AMP","Fluid","IC","EC-CUBE","Sales Center"];replaceList=pageDevType.concat(pagePlatform);for(irl in replaceList){if(replaceList.hasOwnProperty(irl)){regexp=replaceList[irl]+"-";mode='g';eid=eid.replace(new RegExp(regexp,mode),"");}}
var otherReplaceWords=['HYB','PXP','Desktop-','Product','CheckoutThankYou','ListingPage','CheckoutDelivery'];var pageType=["Home","Clv","Clp","Plp","EPlp","CPlp","Pdp","PClp","QuickView","Pcp","Search","CartPage","Login","Delivery","Doctor","Payment","OrderSummary","Thankyou","Prescription","PrescriptionOk","FindStore","Info","Review","Confirmation","Cancellation","UserLogin","UserRegister","OrderCanc","OrderReturn","UserNewsl","StoreLocator","Landing","Static","Error",];replaceList=otherReplaceWords.concat(pageType);for(irl in replaceList){if(replaceList.hasOwnProperty(irl)){regexp=replaceList[irl]+"-";mode='gi';eid=eid.replace(new RegExp(regexp,mode),"");}}
return eid;};var normTrackingEventIdClean=function(eid){var norm_ids={'Checkout-Step-ThankYouPage':"Checkout-Order-Confirm",'User-Newsletter-SignUpConfirm':"SignupForm",'NewsletterUnsubscribe-Confirm':"Unsubscribe",'QuickViewOverlay-Loading-Ready':"QuickViewOverlay-LoadingReady",'QuickViewOverlay-Loading-Error':"QuickViewOverlay-LoadingReady",'QuickViewOverlay':"QuickViewOverlay-LoadingReady",'Cart-AddItem':"AddToCart",'Cart-Preview':"MiniCartOverlay-Open",'MiniCart-Open':"MiniCartOverlay-Open",'QuickviewProds-Delete':"Prods-Delete",'CartProds-Delete':"Prods-Delete"};for(var id in norm_ids){if(norm_ids.hasOwnProperty(id)&&id==eid){return norm_ids[id];}}
return eid;};var getTrackingDatalayerType=function(eid){try{var i;var full_ids=["SGH-Loading-TrackLater","Loading-Ready","Loading-Error"];for(i=0;i<full_ids.length;i++){if(full_ids[i]==eid){return"FULL";}}
var partial_ids=tealium_automatic_QA&&tealium_automatic_QA.table&&tealium_automatic_QA.table.Tracking_EventId_Normalized?tealium_automatic_QA.table.Tracking_EventId_Normalized:[];for(i=0;i<partial_ids.length;i++){if(partial_ids[i]==eid){return"PARTIAL";}}}catch(e){}
return"IGNORE";};var checkAndSetToolNamePrefix=function(prefix,eid,esrc){var __prefix="";var toolNamePrefixMap={"Bounce":"BE","Monetate":"MO","Qubit":"QB"};//@TODO: use isValueOf existing function in tool QA for matching one of available values
if(typeof prefix==="string"&&prefix.match(new RegExp("^("+Object.values(toolNamePrefixMap).join("|")+")$"))){__prefix=prefix;}
else{var keys=Object.keys(toolNamePrefixMap);for(var index in keys){var key=keys[index];if(0||(typeof eid==="string"&&eid.match(new RegExp("^"+key)))||(esrc===key)){__prefix=toolNamePrefixMap[key];break;}}}
return __prefix?"["+__prefix+"]":"";};var settings;try{var index,index2,prod,temp;var Tracking_EventId_Serial;var Result_QA;if(typeof e!=='object'){throw new Error("data2track skipped because no input");}
else if(!e.id&&!e.Tracking_EventId){throw new Error("data2track skipped because no id");}
e.id=e.id||e.Tracking_EventId||'';e.options=e.options||'';e.Tracking_EventId=e.id;e.Tracking_Type=((e.Tracking_Method&&!e.Tracking_Type)?e.Tracking_Method:e.Tracking_Type)||'';e.Tracking_Type=e.Tracking_Type=='hiddenlink'?'hiddenaction':e.Tracking_Type;tealium_log.data2track.set('processing',e);Tracking_EventId_Serial=e.Tracking_EventId_Serial;e.Tracking_EventId_Clean=cleanTrackingEventId(e.Tracking_EventId);e.Tracking_EventId_Normalized=normTrackingEventIdClean(e.Tracking_EventId_Clean);e.Tracking_DataLayerType=getTrackingDatalayerType(e.Tracking_EventId_Clean);e.Tracking_Pusher="data2track.push";{if(0||(window.utag&&utag.data&&utag.data.Tags_Disabled&&utag.data.Tags_Disabled.match(/ALL|SC/i))||(window.utag_data&&utag_data.Tags_Disabled&&utag_data.Tags_Disabled.match(/ALL|SC/i))){tealium_log.data2track.set('done',e,'data2track skipped because disabled tags');return;}
var limit=e.id.match(/OneConfigurator/)?200:e.Tracking_Type=="test"?4000:40;if(tealium_data2track_stack.length>limit){throw new Error("too much data2track on same page");}
if(e.options.indexOf('[trackonce]')>-1&&tealium_data2track_log.indexOf('['+e.id+']')>-1){tealium_log.data2track.set('done',e,'Tracking_EventId multiplo. Abortito a causa del trackonce');return;}}
if(!e.Tracking_EventId_Normalized.match(/Loading-Ready/)){utag_qa(e);if(e.Error_DatalayerObject){tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Error_DatalayerObject=tealium_tools.merge({},e.Error_DatalayerObject);}
if(e.Result_QA){Result_QA=tealium_tools.merge({},e.Result_QA);tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;delete e.Result_QA;}}
{e.Tool_Name_Abbreviation_Build=checkAndSetToolNamePrefix(e.Tool_Name_Abbreviation,e.Tracking_EventId,e.Event_Source);}
if(e.User_Segments&&e.Tool_Name_Abbreviation_Build&&e.User_Segments.indexOf(e.Tool_Name_Abbreviation_Build)<0){tealium_tools.list.addPrefix(e,'User_Segments',e.Tool_Name_Abbreviation_Build,',');}
switch(e.Tracking_EventId_Clean){case'<brand><third platform if any>-<device>-<page/section/project>-<object>-<action/event>':break;case'SGH-Loading-TrackLater':{e=tealium_objMerge(tealium_objMerge({},window.utag_data||{}),e);utag.track('view',e);break;}
case'Click':{index='';var el=e.Click_FocusElement&&e.Click_FocusElement.getAttribute?e.Click_FocusElement:document.createElement('a');e.Tracking_PusherSourceDataElementId="NO ID";{{settings={s:this,on:'mousedown',tt:'',sm:false,cn:'',pc:'',pd:'',pn:'',pp:'',pu:/.?/i,ji:function(){},js:function(){},je:function(){},ud:'',b:'',d:'#'
};}
{settings.tt=e.Tracking_Type||settings.tt;settings.b=e.Content_Box||e.data_element_id||settings.b;settings.d=e.Content_Description||e.data_description||settings.d;}
{for(index in tealium_clickTracking_customized){if(!tealium_clickTracking_customized.hasOwnProperty(index)){index='';continue;}
temp=jQuery.extend({},settings,tealium_clickTracking_customized[index]);if(1&&(!temp.s||(jQuery(temp.s).length&&jQuery.inArray(el,jQuery(temp.s))!=-1))&&(!temp.pc||(utag_data.Page_Country&&utag_data.Page_Country.match(temp.pc)))&&(!temp.pd||(utag_data.Page_DeviceType&&utag_data.Page_DeviceType.match(temp.pd)))&&(!temp.pn||(utag_data.Page_Code&&utag_data.Page_Code.match(temp.pn)))&&(!temp.pp||(utag_data.Page_Platform&&utag_data.Page_Platform.match(temp.pp)))&&(!temp.pu||(utag_data.Page_Url&&utag_data.Page_Url.match(temp.pu)))&&(!temp.cn||eval(temp.cn))){tealium_objMerge(settings,tealium_clickTracking_customized[index]);if(e.Tracking_Type=="test")settings.tt="test";if(temp.b)e.Tracking_PusherSourceDataElementId="PATCH (JS)";if(!temp.sm){break;}
}else{index='';}}
tealium_log.data2track.set('processing',tealium_objMerge(e,settings));if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;}}
{if(jQuery(el).is("a")&&jQuery(el).attr('href')!==undefined&&!jQuery(el).attr('href').match(/^javascript|#/)){temp=jQuery(el).attr('href');}
else if(jQuery(el).closest('form').length>0&&jQuery(el).closest('form').attr('action')!==undefined){temp=jQuery(el).closest('form').attr('action');}
else if(this.event){temp=tealium_textClean(event.target.innerText,'[nobreaks][spaces2minus');}
else{temp='Unknown';}
tealium_storageW('tealium_data2track_Action_LastUrlRequested',temp.substring(0,99));tealium_storageW('tealium_data2track_Action_LastUrlRequestedTime',Date.now());}
if(!index){if(jQuery(el).is('input')){tealium_log.data2track.set('processing',e,'data2track fermato, solo input customizzati vengono processati');if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;break;}
}
{if(jQuery(el).data('analytics_abort')=="1"){tealium_log.data2track.set('processing',e,'click tracking aborted due to the analytics_abort attribute');if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;break;}
if(jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')!=null){if(jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')=="0"&&!index){tealium_log.data2track.set('processing',e,'click tracking aborted due to the analytics_available_call attribute');if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;break;}
if(jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')!="0"&&!index){temp=jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call')||'1';temp=parseInt(temp,10);jQuery(el).closest('[data-analytics_available_call]').data('analytics_available_call',''+(temp-1));}}
temp=(jQuery(el).is("form")?jQuery(el).find('button[type="submit"],input[type="submit"]'):jQuery(el)).data();if(temp){jQuery.each(temp,function(k,v){if(k.match('analytics_available_call'))return;if(!k.match(/analytics(-|_)/i,''))return;e[k.replace(/analytics(-|_)/i,'')]=v;});}}
{if(!settings.tt||!(settings.tt+'').match(/^(link|hiddenaction|simulated|view|nextpage|test|configurator)$/)){settings.tt='link';if(jQuery(el).is("a")){if(1&&jQuery(el).attr('href')&&!jQuery(el).attr('href').match(/^#/)&&!jQuery(el).attr('href').match(/\.pdf$|\.mp4$/i)&&jQuery(el)[0].hostname==window.location.hostname)settings.tt='hiddenaction';}
if(jQuery(el).is("form")){if(event.type=='submit'){settings.tt='hiddenaction';}}}
if(e.Tracking_Type=="test")settings.tt="test";if(settings.ji){try{if(settings.ji()===false)break;}catch(err){tealium_log.data2track.set('error',e,'settings.ji: '+err.stack);if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;}}
if(settings.ud){settings.ud0=settings.ud;for(temp in settings.ud0){if(settings.ud0.hasOwnProperty(temp)&&settings.ud0[temp].toString().match(/^d:/)){settings.ud0[temp]=eval(settings.ud0[temp].replace(/^d:/,''));}}}
settings.b2='';var selector='';selector+='*[id^="D_"],				*[id^="M_"],				*[id^="X_"],';selector+='*[data-element-id^="D_"],	*[data-element-id^="M_"],	*[data-element-id^="X_"],';selector+='*[class*="D_"],			*[class*="M_"],				*[class*="X_"]';var parents=jQuery(el).closest(selector);selector='';selector+='button[type="submit"][id^="D_"],				input[type="submit"][id^="D_"],';selector+='button[type="submit"][id^="M_"],				input[type="submit"][id^="M_"],';selector+='button[type="submit"][id^="X_"],				input[type="submit"][id^="X_"],';selector+='button[type="submit"][data-element-id^="D_"],	input[type="submit"][data-element-id^="D_"],';selector+='button[type="submit"][data-element-id^="M_"],	input[type="submit"][data-element-id^="M_"],';selector+='button[type="submit"][data-element-id^="X_"],	input[type="submit"][data-element-id^="X_"]';var children=jQuery(el).find(selector);if(jQuery(el).is("form")&&children&&children.length){if(children.attr('id')&&children.attr('id').match(/^(D|M|X)/)){settings.b=children.attr('id');e.Tracking_PusherSourceDataElementId="OK";}
else if(children.attr('data-element-id')&&children.attr('data-element-id').match(/^(X|D|M)/)){settings.b=children.attr('data-element-id');e.Tracking_PusherSourceDataElementId="OK";}}
if(!settings.b){if(e.Content_Box){settings.b2=e.Content_Box;e.Tracking_PusherSourceDataElementId="FROM DATA2TRACK";}
else if(el.getAttribute('Content_Box')){settings.b2=el.getAttribute('Content_Box');e.Tracking_PusherSourceDataElementId="OK";}
//@TODO: nei requisiti è stato aggiunto anche la possibilità di ricevere data_element_id
else if(jQuery(el).data('element-id')){settings.b2=jQuery(el).data('element-id');e.Tracking_PusherSourceDataElementId="OK";}
else if(parents&&parents.length){if(parents.data('element-id')&&parents.data('element-id').match(/^(D|M|X)/)){settings.b2=parents.data('element-id');e.Tracking_PusherSourceDataElementId="OK";}
else if(parents.attr('id')&&parents.attr('id').match(/^(D|M|X)/)){settings.b2=parents.attr('id');e.Tracking_PusherSourceDataElementId="OK";}
else if(parents.attr('class')&&parents.attr('class').match(/(X|D|M)_[^\s]+/i)){settings.b2=parents.attr('class').match(/(X|D|M)_[^\s]+/i)[0].toString();e.Tracking_PusherSourceDataElementId="OK";}}
else if(el.getAttribute('id')){settings.b2=el.getAttribute('id');e.Tracking_PusherSourceDataElementId="OK";}
settings.b2=settings.b2.toString();settings.__prevb2=settings.b2;settings.b2=settings.b2?(settings.b2.replace(/ |'/g,'')):'';if(settings.__prevb2!==settings.b2)settings.__fixed=true;delete settings.__prevb2;settings.b2=settings.b2?(settings.b2.replace(/_/g,' ')):'';if(settings.b2.match(/\stemp$/i))e.Tracking_PusherSourceDataElementId="PATCH (DOM)";settings.b2=settings.b2?(settings.b2.replace(/\stemp$/i,'')):'';if(e.Tracking_PusherSourceDataElementId&&settings.__fixed){e.Tracking_PusherSourceDataElementId+=" - FIXED";delete settings.__fixed;}}
else{settings.b=settings.b.toString();settings.b=settings.b?(settings.b.replace(/_/g,' ')):'';if(settings.b.match(/\stemp$/i))e.Tracking_PusherSourceDataElementId="PATCH (DOM)";settings.b=settings.b?(settings.b.replace(/\stemp$/i,'')):'';}
settings.d0='';settings.d2='';if(settings.d&&settings.d=='#'){if(jQuery(el).is("form")){settings.d2=(temp='button[type="submit"],input[type="submit"]',jQuery(el).find(temp).length&&jQuery(el).find(temp)[0].value)?(jQuery(el).find(temp)[0].value):('Submit');}
else if(el.getAttribute('data-linkname')){settings.d2=el.getAttribute('data-linkname').match(/([^:])+$/);}
else if(el.getAttribute('data-description')){settings.d2=tealium_textClean(el.getAttribute('data-description'),'[nobreaks][nospaces]');}
else if(el.getAttribute('Content_Description')){settings.d2=tealium_textClean(el.getAttribute('Content_Description'),'[nobreaks][nospaces]');}
else if(el.getAttribute('value')){settings.d2=tealium_textClean(el.getAttribute('value'),'[nobreaks][nospaces]');}
else if(tealium_textClean(el.innerText,'[nobreaks][nospaces]').length){settings.d2=tealium_textClean(el.innerText,'[nobreaks][nospaces]');}
else if(el.getAttribute('title')){settings.d2=tealium_textClean(el.getAttribute('title'),'[nobreaks][nospaces]');}
else if(el.querySelector('img')&&el.querySelector('img').getAttribute('alt')){settings.d2=tealium_textClean(el.querySelector('img').getAttribute('alt'),'[nobreaks][nospaces]');}
else if(el.querySelector('img')&&el.querySelector('img').getAttribute('title')){settings.d2=tealium_textClean(el.querySelector('img').getAttribute('title'),'[nobreaks][nospaces]');}
else{settings.d2='';}}
else if(settings.d&&settings.d.match(/#/)){settings.d0=jQuery(settings.s).index(el)||'?';}}
{tealium_log.data2track.set('processing',tealium_objMerge(e,settings),'added details:');if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;e.Tracking_Type=settings.tt;if(settings.js){try{if(settings.js()===false)break;}catch(err){tealium_log.data2track.set('error',e,'settings.js: '+err.stack);if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;}}
switch(e.Tracking_Type){case'nextpage':{if(settings.ud0){for(temp in settings.ud0){if(settings.ud0.hasOwnProperty(temp)&&typeof temp=='string'){tealium_storageW('tealium_data2track_'+temp,settings.ud0[temp]);}}}
break;}
case'hiddenaction':{e.Action_Type='click';e.Content_Box=settings.b||settings.b2||'';e.Content_Description=(settings.d||'').replace(/#/,'#'+settings.d0).replace(/^#$/,settings.d2);utag.track('link',e);break;}
case'link':case'simulated':{settings.tt='link';//@NOTE: enforce to 'link' to avoid utag.track('simulated',e);
e.link_text=settings.b+':'+settings.d;}
case'view':{e.Content_Box=settings.b||settings.b2||'';e.Content_Description=(settings.d||'').replace(/#/,'#'+settings.d0).replace(/^#$/,settings.d2);if(settings.ud0){for(temp in settings.ud0){if(settings.ud0.hasOwnProperty(temp)&&typeof temp=='string')e[temp]=settings.ud0[temp];}}
utag.track(settings.tt,e);break;}
case'configurator':{e.link_text=settings.b+':'+settings.d;e.Content_Box=settings.b||settings.b2||'';e.Content_Description=(settings.d||'').replace(/#/,'#'+settings.d0).replace(/^#$/,settings.d2);var tealium_configurator_usage=JSON.parse(tealium_storageR("tealium_configurator_usage",'{"firstInteractionsByVisit":"","firstInteractionsByModel":{},"engagementIndexByVisit":"","engagementIndexByModel":{}}'));prod=(window.utag&&utag.data&&utag.data.ProductsOnPage)?Object.keys(utag.data.ProductsOnPage)[0]:'NA';if(e.Content_Box.match(/Menu.+Open/)){if(tealium_configurator_usage.firstInteractionsByVisit==''){tealium_configurator_usage.firstInteractionsByVisit=e.Content_Box;e.Events_CPComponentsFirstInteractionsByVisit='1';}
if(tealium_configurator_usage.firstInteractionsByModel[prod]==null){tealium_configurator_usage.firstInteractionsByModel[prod]=e.Content_Box;e.Events_CPComponentsFirstInteractionsByModel='1';}
else{tealium_log.data2track.set('processing',e,'data2track stopped, duplicated click on configurator');if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;break;}}
if(e.Content_Box.match(/Menu.+Select/)){if(!tealium_configurator_usage.engagementIndexByVisit.match('\\['+e.Content_Box+'\\]')){tealium_configurator_usage.engagementIndexByVisit+='['+e.Content_Box+']';e.Events_CPComponentsEngagementIndexByVisit='1';}
if(!tealium_configurator_usage.engagementIndexByModel[prod])tealium_configurator_usage.engagementIndexByModel[prod]='';if(!tealium_configurator_usage.engagementIndexByModel[prod].match('\\['+e.Content_Box+'\\]')){tealium_configurator_usage.engagementIndexByModel[prod]+='['+e.Content_Box+']';e.Events_CPComponentsEngagementIndexByModel='1';}
else{tealium_log.data2track.set('processing',e,'data2track stopped, duplicated click on configurator');if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;break;}}
tealium_storageW("tealium_configurator_usage",JSON.stringify(tealium_configurator_usage));utag.track('link',e);break;}
case'test':{e.Content_Box=settings.b||settings.b2||'';e.Content_Description=(settings.d||'').replace(/#/,'#'+settings.d0).replace(/^#$/,settings.d2);if(window.tealium_clickAnalysis){var __box=e.Content_Box?e.Content_Box:"{EMPTY}";var __desc=e.Content_Description?e.Content_Description:"{EMPTY}";tealium_clickAnalysis.addTrack(__box,__desc,e.Tracking_PusherSourceDataElementId);tealium_log.old("> CLICK,"+(e.Content_Box?e.Content_Box:"(empty)")+","+(e.Content_Description?e.Content_Description:"(empty)")+","+e.Tracking_PusherSourceDataElementId,"info");}
break;}}
if(settings.je){try{if(settings.je()===false)break;}catch(err){tealium_log.data2track.set('error',e,'settings.je: '+err.stack);if(Result_QA)tealium_log.events[Tracking_EventId_Serial].data2track.datalayer.Result_QA=Result_QA;}}
if(index)tealium_clickTracking_customized[index].tracked=1;}
break;}
case'VirtualPage-View':{e.Page_Url=document.location.href;e.Page_Path=document.location.pathname;e.Page_QueryString=document.location.search;e.Page_PathQueryString=e.Page_Path+e.Page_QueryString;window.utag_data=tealium_objMerge(window.utag_data,e);utag.track('view',e);break;}
case'LensPanel-View':{e.Page_Section2='';e.Page_Url=document.location.href;e.Page_Path=document.location.pathname;e.Page_QueryString=document.location.search;e.Page_PathQueryString=e.Page_Path+e.Page_QueryString;window.utag_data=tealium_objMerge(window.utag_data,e);utag.track('view',e);break;}
case'Popup-Account-Renewal':{e.Page_Section2=(e.Page_Section2)?''+':RenewalPopup':'RenewalPopup';utag.track('view',e);break;}
case'Checkout-Order-Confirm':case'Checkout-Step-ThankYouPage':{if(!utag_data.Page_Brand.match(/PO|OP|AR|VO/i)){if(e.Order_Id&&!e.Order_CancellationId){e.Events_OrderCreate="1";}
utag.track('view',e);}
break;}
case'Checkout-Order-PrescriptionOk':{e.Events_PrescriptionOk="1";}
case'Loading-Ready':{tealium_log.utag_data2track.set('processing',{Tracking_EventId_Serial:Tracking_EventId_Serial});{tealium_tools.merge(tealium_log.events[Tracking_EventId_Serial].utag_data2track.datalayer,tealium_log.utag_data.datalayer);tealium_tools.merge(tealium_log.events[Tracking_EventId_Serial].utag_data2track.datalayer,e);utag_qa(tealium_log.events[Tracking_EventId_Serial].utag_data2track.datalayer);}
tealium_log.utag_data2track.set('done',Tracking_EventId_Serial);}
case'Loading-Error':{if(1&&!tealium_data2track_log.match(/\[X-X-(PDP|PCP)-Loading-(Ready|Error)\]/)&&!tealium_data2track_log.match(/\[WCS-X-(PDP|PCP)-Loading-(Ready|Error)\]/)&&!tealium_data2track_log.match(/\[X-X-X-Loading-Ready\]/)&&!tealium_data2track_log.match(/\[HYB-X-(PDP|PCP)-Loading-(Ready|Error)\]/)&&window.performance&&performance.timing&&performance.timing.domLoading){e.Page_LoadTime_Float=+(((new Date().getTime())-window.performance.timing.domLoading)/1000).toFixed(2);}
utag.track(((e.Tracking_EventId.match(/PCP/i))?'link':'view'),e);break;}
case'ABTest-Impression':case'Monetate-Impression':case'Qubit-Impression':case'BounceImpression':case'BounceClick':case'Bounce-Impression':case'Bounce-Click':{{e.Content_TestCampaign=e.Content_TestCampaign||'Unknown campaign';e.Content_TestVariation=e.Content_TestVariation||'Unknown variation';e.Content_TestVersion=e.Content_TestVersion||(e.Content_TestCampaign+": "+e.Content_TestVariation);if(e.Tracking_EventId.match(/Bounce/)){e.Content_TestVersion=e.Tool_Name_Abbreviation_Build+(e.Content_TestVersion.replace(/ \| /,'').replace(/ \- /,' '))+" "+(e.Tracking_EventId.match(/-Click$/)?'CLICK':'IMP');}
else if(e.Tracking_EventId.match(/Monetate/)){e.Content_TestVersion=e.Tool_Name_Abbreviation_Build+e.Content_TestVersion;}
else if(e.Tracking_EventId.match(/Qubit/i)){e.Content_TestVersion=e.Tool_Name_Abbreviation_Build+e.Content_TestVersion;temp=tealium_storageR('tealium_data2track_Content_TestVersionQB','');e.Content_TestVersionQ=tealium_tools.list.concat(null,temp,e.Content_TestVersion,"|");tealium_storageW('tealium_data2track_Content_TestVersionQB',e.Content_TestVersionQ);}
temp=tealium_storageR('tealium_data2track_Content_TestVersion','');tealium_tools.list.concat(e,"Content_TestVersion",temp,"|");tealium_storageW('tealium_data2track_Content_TestVersion',e.Content_TestVersion);}
if(e.User_Segments){temp=tealium_storageR('tealium_data2track_User_Segments','');tealium_tools.list.concat(e,"User_Segments",temp,",");tealium_storageW('tealium_data2track_User_Segments',e.User_Segments);}
break;}
case'TealiumBug':case'Error':{utag.track('link',e);break;}
case'Form-FillingError':{break;}
case'Loading-TooLong':{e.pageType=e.pageType||'???';e.timeLimit=e.timeLimit||'??';tealium_listenerOn=tealium_listenerOn.replace(/\[WCS_X_PXP_LoadTimer\]/,'').replace(/\[WCS_X_PXP_LoadTimer\]/,'');if(document.readyState=='complete'){}else{e.Error_Source='Anomaly';e.Error_Code='Loading too long';e.Error_Details=e.pageType+' load time > '+e.timeLimit+'sec';e.Events_ErrorAnomaly="1";}
delete e.pageType;delete e.timeLimit;utag.track('link',e);break;}
case'ComponentSelect-IncompatibilityError':{e.Error_Source='User';e.Error_Code='Remix Component Incompatibility';e.Error_Details='SKU: '+utag_data.Products_Id_Csv+' - CAT: '+utag_data.Products_Category_Csv;utag.track('link',e);break;}
case'PdpAddToCart-LoginOverlay-Open':{e.Page_Section2=(e.Page_Section2)?''+':LoginOverlay':'LoginOverlay';utag.track('view',e);break;}
case'PdpAddToCart-RegisterOverlay-Open':{e.Page_Section2=(e.Page_Section2)?''+':RegisterOverlay':'RegisterOverlay';utag.track('view',e);break;}
case'SignUpOverlay-Open':{e.Page_Section2=(e.Page_Section2)?''+':SignUpOverlay':'SignUpOverlay';utag.track('view',e);break;}
case'User-Newsletter-SignUpConfirm':case'SignupForm':{e.Events_UserEmailSub="1";utag.track('link',e);break;}
case'NewsletterUnsubscribe-Confirm':case'Unsubscribe':{e.Page_Section2=(e.Page_Section2)?''+':EmailUnsubscribeConfirm':'EmailUnsubscribeConfirm';e.Events_UserEmailUnsub="1";utag.track('view',e);break;}
case'EmailMeWhenAvailable':{e.Events_ProdViewEcomOosEmailClick="1";utag.track('link',e);break;}
case'Account-Create':{e.Events_UserAccountNew="1";utag.track('link',e);break;}
case'ProdFavAdd':{e.Events_ProdFavAdd="1";utag.track('link',e);break;}
case'QuickViewOverlay-Loading-Ready':case'QuickViewOverlay-LoadingReady':case'QuickViewOverlay-Loading-Error':case'QuickViewOverlay':{e.Page_Name=(e.Page_Name||window.utag_data.Page_Name||'')+':QuickViewOverlay';e.Content_Box='WCS D QuickView Prod Open';utag.track('link',e);break;}
case'AddToCart':{e.Events_CartAdd="1";utag.track('link',e);break;}
case'Cart-Preview':{e.Page_Name='Utility:MiniCart';e.Events_CartView="1";utag.track('view',e);break;}
case'Cart-UpdateDone':case'Cart-UpdateNextChoice':{break;}
case'Prods-Delete':case'CartProds-Delete':{if(!window.utag&&!utag_data)break;prod=(e.Tracking_EventId.match(/^X-X-X-Prods-/))?'ProductsOnPage':(e.Tracking_EventId.match(/^X-X-X-CartProds-/))?'ProductsOnCart':'';if(!prod||!utag_data[prod])break;for(index in utag_data[prod]){if(utag_data[prod].hasOwnProperty(index)&&e.Products&&Object.keys(e.Products).length&&e.Products[index])continue;delete utag_data[prod][index];}
break;}
case'Prods-Update':{if(utag_data.Page_Brand!=='RB'){utag.track('link',e);}else if(utag_data.Page_Type.match(/PClp/i)){e.Events_ProdViewEcom="1";utag.track('view',e);}
if(e.Tracking_EventId=='WCS-X-PDP-Prods-Update'){e.Tracking_EventId='WCS-X-PDP-Prods-Init';}}
case'CartProds-Update':case'Prods-Init':case'NewConfiguration':case'QuickviewProds-Init':case'QuickViewOverlay-QuickviewProds-Init':case'MiniCart--Open':{if(e.Tracking_EventId=='WCS-D-X-MiniCart--Open'){e.Tracking_EventId='X-X-X-CartProds-Init';}
{try{utag_repairer(e,"030 data2track");}catch(err){tealium_log.builder.set('error',e,'repairer: '+err.stack);}
if(e.Tracking_EventId=='WCS-X-PCP-NewConfiguration'){e.Tracking_EventId+='-Init';if(e.Products_Sku_Csv){e.Products={};e.Products[e.Products_Sku_Csv]={};e.Products[e.Products_Sku_Csv].Category=e.Products_Category_Csv||'';e.Products[e.Products_Sku_Csv].Price=e.Price||'';delete e.Products_Sku_Csv;delete e.Products_Category_Csv;delete e.Price;}}
if(!e.Products||!Object.keys(e.Products).length)break;if(!window.utag&&!utag_data)break;prod=(e.Tracking_EventId.match(/-(Prods|PCP)-/))?'ProductsOnPage':(e.Tracking_EventId.match(/-QuickviewProds-/))?'ProductsOnQuickview':(e.Tracking_EventId.match(/-CartProds-/))?'ProductsOnCart':'';if(prod=='ProductsOnQuickview'&&!window.location.host.match(/acceptance/i))utag_data[prod]={};if(!prod||!utag_data[prod])break;if(e.Tracking_EventId.match(/Init$/)){for(index in utag_data[prod]){if(!utag_data[prod].hasOwnProperty(index))continue;delete utag_data[prod][index];}}
for(index in e.Products){if(!e.Products.hasOwnProperty(index))continue;if(!utag_data[prod][index])utag_data[prod][index]={};if(e.Tracking_EventId.match(/Replace$/))utag_data[prod][index]={};for(index2 in e.Products[index]){if(!e.Products[index].hasOwnProperty(index2)){continue;}
utag_data[prod][index][index2]=e.Products[index][index2];}}
{if(1&&utag_data.Page_Brand=='RB'&&e.id.match(/WCS-X-PCP-NewConfiguration/)&&!tealium_data2track_log.match(/\[WCS-X-PCP-NewConfiguration\]/)){for(prod in e.Products){if(e.Products.hasOwnProperty(prod))break;}
e.Products[prod.split('_').splice(0,2).join('_')]=e.Products[prod];delete e.Products[prod];utag.track('view',e);}}}
break;}
case'Checkout-Step-Delivery':{e.Page_Type='Delivery';e.Page_Section1='Checkout';e.Events_CheckoutDelivery="1";utag.track('view',e);break;}
case'Checkout-Step-Payment':{e.Page_Type='Payment';e.Page_Section1='Checkout';e.Events_CheckoutPayment="1";utag.track('view',e);break;}
case'Checkout-Step-Gateway':{e.Page_Type='Gateway';e.Page_Section1='Checkout';e.Events_CheckoutPaymentGateway="1";if(utag_data.Page_Type.match(/pdp|pcp/i)){e.Events_CartAdd="1";}
e.Events_CartCreate="1";e.Events_CartView="1";e.Events_Checkout="1";utag.track('view',e);break;}
case'Login':{e.Events_UserLogin="1";utag_data.User_LoginStatus='Logged';utag.track('link',e);break;}
case'Checkout-View':{if(e.Tracking_EventId.match(/Login/i)){e.Events_CheckoutLogin="1";e.Page_Name='Checkout:OnePage:Login';}
else if(e.Tracking_EventId.match(/Delivery/i)){e.Events_CheckoutDelivery="1";e.Page_Name='Checkout:OnePage:Delivery';}else if(e.Tracking_EventId.match(/Payment/i)){e.Events_CheckoutPayment="1";e.Page_Name='Checkout:OnePage:Payment';}
utag.track('view',e);break;}
case'OrderDiscountCode-Tentative':{e.Order_DiscountCode=(e.Order_DiscountCode||'none')+' - tentative';utag.track('link',e);break;}
case'OrderDiscountCode-Applied':{tealium_storageW("tealium_data_orderDiscountCode",e.Order_DiscountCode);e.Order_DiscountCode=(e.Order_DiscountCode||'none')+' - applied';utag.track('link',e);break;}
case'OrderGiftCard-Applied':case'OrderGiftCard-Tentative':{e.Order_GiftCardCode=(e.Order_GiftCardCode||'none')+' - '+(e.Tracking_EventId.match(/-Applied$/)?'applied':'tentative');utag.track('link',e);break;}
case'OrderCancSubmitted':{break;}
case'VTO-NewAction':case'VirtualModel-ProdView':case'VTO-ProdAvailable-ToggleNone':case'DEEP-VTO-NewAction':{e.vtoAction=e.vtoAction||'';e.Page_Brand=e.Page_Brand||'';e.Page_Platform=e.Page_Platform||'';e.Page_DeviceType=e.Page_DeviceType||'';e.Page_Brand=e.Page_Brand||(window.location.host.match(/Ray-Ban/i))?'RB':(window.location.host.match(/oakley/i))?'OO':'';switch(e.vtoAction){case'Demo:onPageLoad':break;case'Demo:onCreateModel':e.Content_Box='DEEP D VTO Demo CreateModel';utag.track('link',e);break;case'Capture:onPageLoad':e.Page_Name='Vto:'+e.vtoAction;e.page_name='Vto:'+e.vtoAction;utag.track('view',e);break;case'Capture:onWebcamAllowed':e.Content_Box='DEEP D VTO Capture WebcamAllowed';utag.track('link',e);break;case'Capture:onValidHeadtrack':e.Content_Box='DEEP D VTO Capture ValidHeadtrack';utag.track('link',e);break;case'Preview:onPageLoad':e.Page_Name='Vto:'+e.vtoAction;e.page_name='Vto:'+e.vtoAction;utag.track('view',e);break;case'Preview:onRetake':e.Content_Box='DEEP D VTO Preview Retake';utag.track('link',e);break;case'Preview:onSave':e.Content_Box='DEEP D VTO Preview Save';utag.track('link',e);break;case'Preview:onContinue':e.Content_Box='DEEP D VTO Preview Continue';utag.track('link',e);break;case'Render:onRenderGlasses':e.Content_Box='DEEP D PDP VTO ProdAvailable ToggleOn';utag.track('link',e);break;case'Render:onPageLoad':break;case'Comingsoon:onPageLoad':e.Content_Box='DEEP D PDP VTO Comingsoon';utag.track('link',e);break;case'App:Loading':break;case'App:Loaded':break;case'Model:Loading':break;case'Model:Loaded':break;case'....:Cretate':break;case'....:TryAgain':break;case'....:Close':break;case'Guide:View':break;case'Capture:Start':break;case'Capture:Record:Error':break;case'Capture:Record:Head':break;case'Capture:Record:Turn':break;case'Capture:Record:Done':break;case'Capture:Uploading:Start':break;case'Capture:Uploading:Error':break;case'Capture:Uploading:Done':break;case'Capture:Processing:Start':break;case'Capture:Processing:Error':break;case'Capture:Processing:Done':break;case'Preview:Retake':break;case'Preview:Save':break;case'Preview:Continue':break;case'Preview:Close':break;case'Video:...':break;}
delete e.vtoAction;break;}
case'MOB-VTO-NewAction':{e.vtoAction=e.vtoAction||'';switch(e.vtoAction){case'Intro-Cover-View':break;case'Intro-VideoDemo-View':case'Instructions-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:Intro:VideoDemo';if(window.location.host.match(/oakley/i))e.page_name='Vto:Intro:VideoDemo';utag.track('view',e);break;case'Video-Loading-View':case'Uploading-Video-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:Video:Loading';if(window.location.host.match(/oakley/i))e.page_name='Vto:Video:Loading';utag.track('view',e);break;case'Video-Gender-View':case'Gender-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:Video:Gender';if(window.location.host.match(/oakley/i))e.page_name='Vto:Video:Gender';utag.track('view',e);break;case'Video-Size-View':case'Size-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:Video:Size';if(window.location.host.match(/oakley/i))e.page_name='Vto:Video:Size';utag.track('view',e);break;case'Video-Review-View':case'Review-Without-Glasses-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:Video:Review';if(window.location.host.match(/oakley/i))e.page_name='Vto:Video:Review';utag.track('view',e);break;case'Review-Without-Glasses-Swipe':break;case'VirtualModel-Ready-View':case'Review-With-Glasses-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:VirtualModel:Ready';if(window.location.host.match(/oakley/i))e.page_name='Vto:VirtualModel:Ready';utag.track('view',e);break;case'VirtualModel-Login-View':if(window.location.host.match(/Ray-Ban/i))e.Page_Name='Vto:VirtualModel:Login';if(window.location.host.match(/oakley/i))e.page_name='Vto:VirtualModel:Login';utag.track('view',e);break;case'Mapping-Glasses-View':break;}
delete e.vtoAction;break;}
case'Overlay-View':{e.overlayUsage=e.overlayUsage||'';e.status=e.status||'open';switch(e.overlayUsage){case'M_PDP_VTO_GUIDE1Overlay':if(e.status=='open'){e.Page_Name='Vto:Intro:CoverPage';utag.track('view',e);}
break;default:break;}
break;}
case'SearchPageReady':{if(!utag_data.Page_Brand.match(/GL/i)){e.Events_SearchRun="1";utag.track('view',e);}
break;}
case'SearchFilterUpdated':{e.Events_SearchFiltering="1";utag.track('link',e);break;}
case'ChatEnd':{break;}
case'ContactUs':{e.Events_ActionContactUs="1";utag.track('link',e);break;}
case'Exam-Funnel-FindStore':{e.Events_FunnelFindStore=1;if(e.Search_Keyword||e.Search_ResultItemsQnt||e.Search_Type){e.Store_Search_Keyword=e.Search_Keyword;e.Store_Search_Type=e.Search_Type;e.Store_Search_ResultItemsQnt=e.Search_ResultItemsQnt;delete e.Search_Keyword;delete e.Search_Type;delete e.Search_ResultItemsQnt;}
if(e.Store_Search_Keyword||e.Store_Search_ResultItemsQnt||e.Store_Search_Type){e.Events_FunnelStoreSearch=1;}
utag.track('link',e);break;}
case'Exam-Funnel-FindStoreResults':{e.Events_FunnelStoreSearch=1;if(e.Search_Keyword||e.Search_ResultItemsQnt||e.Search_Type){e.Store_Search_Keyword=e.Search_Keyword;e.Store_Search_Type=e.Search_Type;e.Store_Search_ResultItemsQnt=e.Search_ResultItemsQnt;delete e.Search_Keyword;delete e.Search_Type;delete e.Search_ResultItemsQnt;}
utag.track('link',e);break;}
case'Exam-Funnel-Info':{e.Events_FunnelPersonalInfo=1;utag.track('link',e);break;}
case'Exam-Funnel-Confirmation':{e.Events_FunnelConfirmation=1;utag.track('link',e);break;}
case'Exam-Funnel-Review':{e.Events_FunnelReview=1;utag.track('link',e);break;}
case'Exam-Funnel-Cancellation':{e.Events_FunnelCancellation=1;utag.track('link',e);break;}
case'Exam-Funnel-AddExam':{e.Events_FunnelAddExam=1;utag.track('link',e);break;}
case'VirtualMirror':{e.Vm_Action=e.Vm_Action||'';switch(e.Vm_Action){case'InitializeSuccess':{break;}
case'Ready':{e.Events_VMReady="1";utag.track('link',e);break;}
case'TryOn':{e.Events_VMTryOn="1";utag.track('link',e);break;}
case'RequestWebcam':{e.Events_VMRequestWebcam="1";utag.track('link',e);break;}
case'WebcamAllowed':{e.Events_VMWebcamAllowed="1";utag.track('link',e);break;}
case'Render':{e.Events_VMRender="1";utag.track('link',e);break;}
case'FitGlasses':{e.Events_VMFit="1";utag.track('link',e);break;}
case'AdjustGlasses':{e.Events_VMAdjust="1";utag.track('link',e);break;}
case'CloseMirror':{e.Events_VMCloseMirror="1";utag.track('link',e);break;}}
break;}
case'OneConfigurator':{e.Tracking_EventId+='-'+e.Oneconf_Action;switch(e.Oneconf_Action){case'Loaded':{e.Events_CPLoaded="1";jQuery('#fluidConfigure').removeAttr("data-analytics_available_call");utag.track('link',e);break;}
case'Randomized':{e.Events_CPRandomized="1";utag.track('link',e);break;}
case'RecipeChanged':{break;}
case'RecipeSaved':{e.Events_ProdFavAdd="1";utag.track('link',e);break;}
case'ConfirmConf':{e.Events_CPConfirmConf="1";utag.track('link',e);break;}
case'AddToCart':{e.Events_CartAdd="1";utag.track('link',e);break;}
case'ApplePayGateway':{e.Page_Type='Gateway';e.Page_Section1='Checkout';e.Events_CheckoutPaymentGateway="1";e.Events_CartAdd="1";e.Events_CartCreate="1";e.Events_CartView="1";e.Events_Checkout="1";utag.track('view',e);break;}
case'StartOver':{e.Events_CPStartOver="1";utag.track('link',e);break;}
case'Closed':{e.Events_CPClosed="1";utag.track('link',e);break;}}
break;}
default:{throw new Error('tracking id not set ('+e.Tracking_EventId+')');}}
if(e.Tracking_EventId_Clean=="Click"&&e.Tracking_Type=="test"&&window.tealium_clickAnalysis){tealium_clickAnalysis.simulate(e.__next);}
tealium_data2track_stack.push(e);tealium_data2track_log+='['+e.id+']';tealium_log.data2track.set('done',Tracking_EventId_Serial);}
catch(err){if(e.Tracking_EventId_Clean=="Click"&&e.Tracking_Type=="test"&&window.tealium_clickAnalysis){tealium_clickAnalysis.simulate(e.__next);}
tealium_logViaPixel('data2track',tealium_objMerge(e,settings)||null,(e&&e.id?e.id+': ':'')+err.stack);}};for(var key in tealium_data2track_backStack){if(tealium_data2track_backStack.hasOwnProperty(key)&&typeof key==="string"){setTimeout(function(k){tealium_data2track.push(tealium_data2track_backStack[k]);},500,key);}}
tealium_logContext='preloader tealium_clickTracking';tealium_logNote='';{utag_data.Page_Brand=utag_data.Page_Brand||'';utag_data.Page_Environment=utag_data.Page_Environment||'';utag_data.Page_Type=utag_data.Page_Type||'';if(utag_data.Page_Brand!=="PV"){var callback=function(__this){var __dl={id:'Click',Click_FocusElement:__this};tealium_log.listener.set('done',__dl,'Listener - X_X_X_ClickDetection');tealium_data2track.push(__dl);};jQuery('body')
.on('mousedown','a,button',function(){callback(this);})
.on('submit','form',function(){callback(this);})
.on('mousedown','input',function(){if(jQuery(this).closest('[id^="tealiumLog_"]').length<1&&(utag_data.Page_Brand==="RB"||!utag_data.Page_Section1||(utag_data.Page_Section1&&!utag_data.Page_Section1.match(/Checkout/i)))){callback(this);}});}
if(utag_data.Page_Brand=="RB"&&utag_data.Page_Type=="Payment"){var clickTrackingPaymentMode=function(device,paymode){if(paymode.match(/card/i))paymode="CreditCard";else if(paymode.match(/paypal/i))paymode="PayPal";else if(paymode.match(/applepay/i))paymode="ApplePay";else if(paymode.match(/klarna|sofort/i))paymode="Sofort";var __dl={'id':'Click','Content_Box':device+'_CheckoutPayment_TypeSelect_'+paymode,'Content_Description':'',};tealium_log.listener.set('done',__dl,'Listener - X_X_X_ClickPaymentModeDetection');tealium_data2track.push(__dl);};jQuery('#payment_mode_form')
.on('mousedown','.payment-mode label',function(){clickTrackingPaymentMode('D',jQuery(this).find('input').val());});jQuery('#payment-options')
.on('mousedown','#wrapper .form-group',function(){var radioBtn=jQuery(this).find('input[type=radio]');if(radioBtn.length>0){clickTrackingPaymentMode('M',radioBtn.attr('id'));}});}}
{{tealium_clickTracking_customized.push({s:'[id*=Add-To-Cart]',ji:function(){return false;}});tealium_clickTracking_customized.push({s:'[id*=Add-To-Bag]',ji:function(){return false;}});tealium_clickTracking_customized.push({s:':not([data-element-id*="MainNav"], [data-element-id*="Footer"])',pn:/:(home|landing|pclp|clp|clv)$/i,tt:"link",sm:true,Tags_AdobeAnalytics_CostLabel:"CTR"});}
{utag_data.Page_Brand=utag_data.Page_Brand||'';switch(utag_data.Page_Brand){case'SGH':{{tealium_clickTracking_customized.push({b:'X X MainNav Logo',s:'a.icon-logo.sgh-logo'});tealium_clickTracking_customized.push({b:'X X MainNav Search',s:'a[title="Search"]'});tealium_clickTracking_customized.push({b:'X X MainNav Fav',s:'a[title="Wishlist"]'});tealium_clickTracking_customized.push({b:'X X MainNav Account',s:'a[title="Account menu"]'});tealium_clickTracking_customized.push({b:'X X MainNav Bag',s:'a[title="Cart"]'});tealium_clickTracking_customized.push({b:'X X MainNav StoreLocator',s:'.btn-find-store'});tealium_clickTracking_customized.push({b:'X X MainNav CountrySelector',s:'.btn-lang-selector a'});tealium_clickTracking_customized.push({b:'X X MainNav',s:'.nav navbar-nav a'});tealium_clickTracking_customized.push({b:'X X MainNav Account',s:'ul.dl-menu.dl-menuopen>li:nth-child(2) a'});tealium_clickTracking_customized.push({b:'X X MainNav',s:'ul.dl-menu.dl-menuopen'});tealium_clickTracking_customized.push({b:'X X MainNav Search-Input',s:'div.sgh-search--input'});tealium_clickTracking_customized.push({b:'X X MainNav Search-Suggest',s:'div.sgh-search-suggestions a'});tealium_clickTracking_customized.push({b:'X X MainNav Search',s:'section.sgh-search-overlay.in a'});tealium_clickTracking_customized.push({b:'X X MainNav Search-Results',s:'div.sgh-search-results a'});tealium_clickTracking_customized.push({b:'X X MainNav Search-NoResults',s:'div.sgh-search-noresults a'});tealium_clickTracking_customized.push({b:'X CheckoutDelivery PickupPoint Overlay',s:'div.show-pickup-mode a.black-button.choose'});tealium_clickTracking_customized.push({b:'X CheckoutDelivery PickupPoint Overlay',s:'div#pickup-recap a.box-subtitle-cta'});tealium_clickTracking_customized.push({b:'X CheckoutDelivery PickupPoint Search',s:'button.pickup-form__search'});tealium_clickTracking_customized.push({b:'X CheckoutDelivery PickupPoint Choose',s:'button.pickup-result__use-btn'});}
break;}
case'RB':{{tealium_clickTracking_customized.push({b:'D_X_MainNav_MyAccount',s:'.wcs-login-link',pd:/desktop/});tealium_clickTracking_customized.push({b:'D_X_MainNav_MyAccount',s:'.wcs-utility-nav-sl-link + a',pd:/desktop/});tealium_clickTracking_customized.push({b:'D_X_MainNav_MyAccount',s:'.wcs-myacc-login ul li a',pd:/desktop/});tealium_clickTracking_customized.push({b:'D_X_MainNav_ShippingInfo',s:'.wcs-shipping-bar-text a',pd:/desktop/});tealium_clickTracking_customized.push({b:'D_X_MainNav_Fav',s:'#selenium-star',pd:/desktop/});tealium_clickTracking_customized.push({b:'D_X_MainNav_Search',s:'#selenium-glass',pd:/desktop/});tealium_clickTracking_customized.push({b:'D_X_MainNav_Bag',s:'#selenium-bag',pd:/desktop/});tealium_clickTracking_customized.push({s:'#preorder_notify_btn',ud:{Events_ProdViewEcomOosEmailClick:1,}});tealium_clickTracking_customized.push({s:'[id*="outOfStock-emailMe-confirm"]',ud:{Events_ProdViewEcomOosEmailClick:1,}});tealium_clickTracking_customized.push({s:'button#bag',tt:'link',ud:{Events_CartAdd:1}});tealium_clickTracking_customized.push({s:'.wcs-carousel > li > a',tt:'hiddenaction'});tealium_clickTracking_customized.push({s:'#addCartButton',tt:'link',pc:/JP/,ud:{Events_CartAdd:1}});tealium_clickTracking_customized.push({b:'X_Pcp_Config_Logo_Img',s:'#fluidConfigure a.fc-logo-link'});tealium_clickTracking_customized.push({b:'X_Pcp_Config_ChangeStyle_Icon',s:'#fluidConfigure button.fc-style-change-model'});{var TCC_Search=function(a){if(!a||!a.attr("value"))return false;tealium_storageW("tealium_data2track_Events_SearchRun",1);tealium_storageW("tealium_data2track_Search_Keyword",a.attr("value").toLowerCase());};var TCC_Search2=function(){tealium_storageW("tealium_data2track_Events_SearchRun",1);if(tealium_cookieR('RBSrchTerms')!==undefined){tealium_storageW("tealium_data2track_Search_Keyword",tealium_cookieR('RBSrchTerms').toLowerCase());}};var TCC_Search3=function(){tealium_storageW("tealium_data2track_Events_SearchRun",1);if(tealium_cookieR('RBSrchTerms')!==undefined){tealium_storageW("tealium_data2track_Search_Keyword",'Popular: '+tealium_cookieR('RBSrchTerms').toLowerCase());}};var TCC_Search4=function(a){tealium_storageW("tealium_data2track_Events_SearchRun",1);if(a.attr('value')){tealium_storageW("tealium_data2track_Search_Keyword",a.attr("value").toLowerCase());}};var TCC_Search5=function(a){tealium_storageW("tealium_data2track_Events_SearchRun",1);if(a.attr('value')){tealium_storageW("tealium_data2track_Search_Keyword",a.val().toLowerCase());}};}
tealium_clickTracking_customized.push({b:'D Search SearchBox Click',s:'input.wcs-slide-search-btn',pd:/desktop/i,js:function(){TCC_Search(jQuery("#search-text-box"));}});tealium_clickTracking_customized.push({b:'D Search PreviewAll',s:'#viewAllResult',pd:/desktop/i,js:function(){TCC_Search4(jQuery("#search-text-box"));}});tealium_clickTracking_customized.push({b:'D Search PreviewProd',s:'#suggestSrchResults a',pd:/desktop/i,js:function(){TCC_Search4(jQuery("#search-text-box"));}});tealium_clickTracking_customized.push({b:'M Search SearchBox',s:'.rb-search-form [name="searchTerm"]:first',pd:/mobile/i,js:function(){TCC_Search5(jQuery(".rb-search-form [name='searchTerm']:first"));},on:'keydown',cn:'event.keyCode==13'});tealium_clickTracking_customized.push({b:'M Search PreviewProd',s:'.rb-search-result-item a',pd:/mobile/i,js:function(){TCC_Search5(jQuery(".rb-search-form [name='searchTerm']:first"));}});tealium_clickTracking_customized.push({b:'M Search PreviewAll',s:'.rb-search-result-count a',pd:/mobile/i,js:function(){TCC_Search5(jQuery(".rb-search-form [name='searchTerm']:first"));}});tealium_clickTracking_customized.push({b:'X DmpHome SearchBox Click',s:'input#searchTermButton',pd:/desktop/i,js:function(){TCC_Search5(jQuery("#searchTerm"));},pc:/JP/});tealium_clickTracking_customized.push({b:'X MenuBar SearchBox Click',s:'#btn-seachword',pd:/desktop/i,js:function(){TCC_Search5(jQuery("input[name=\'search_word\']"));},pc:/JP/});tealium_clickTracking_customized.push({s:'a#btnStep3',pn:/Brand:SohoStore:Home/i,tt:'view',ud:{Page_Name:'Brand:SohoStore:GoogleMaps'}});tealium_clickTracking_customized.push({s:'#createAccount_CN',tt:'view',pd:/desktop/i,pc:/CN/i,ud:{Page_Name:'Checkout:OnePage:NewAccount'}});tealium_clickTracking_customized.push({s:'form#user_register_form',on:'submit',b:'D CheckoutLogin New Start',tt:'link',pd:/desktop/i,pc:/CN/i});tealium_clickTracking_customized.push({s:'#create-account-link',tt:'view',pd:/mobile/i,pc:/CN/i,ud:{Page_Name:'Checkout:OnePage:NewAccount'}});tealium_clickTracking_customized.push({s:'form#createaccount',on:'submit',b:'M CheckoutLogin New Start',tt:'link',pd:/mobile/i,pc:/CN/i});tealium_clickTracking_customized.push({s:'#user_login_form',on:'submit',b:'D CheckoutLogin Returning Start',tt:'link',pd:/desktop/i,pc:/CN/i});tealium_clickTracking_customized.push({s:'#returning #login',on:'submit',b:'M CheckoutLogin Returning Start',tt:'link',pd:/mobile/i,pc:/CN/i});tealium_clickTracking_customized.push({s:'input.wcs-guest-checkout',b:'D CheckoutLogin Guest Start',tt:'link',pd:/desktop/i,pc:/CN/i});tealium_clickTracking_customized.push({s:'#guestCheckout',b:'M CheckoutLogin Guest Start',tt:'link',pd:/mobile/i,pc:/CN/i});tealium_clickTracking_customized.push({s:'.bx-pager-item .bx-pager-link,.bx-next,.bx-prev',ji:function(){return false;}});}
{tealium_clickTracking_customized.push({s:'[data-element-id$="ApplePayCheckout"]',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});tealium_clickTracking_customized.push({b:'D_PCP_Prod_ApplePayAddToCart',s:'#D_PCP_ExpressCheckout_ApplePay',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});tealium_clickTracking_customized.push({b:'M_PCP_Prod_ApplePayAddToCart',s:'#M_PCP_ExpressCheckout_ApplePay',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});tealium_clickTracking_customized.push({b:'D_PCP_Prod_ApplePayAddToCart',s:'.D_PCP_ExpressCheckout_ApplePay',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});tealium_clickTracking_customized.push({b:'M_PCP_Prod_ApplePayAddToCart',s:'.M_PCP_ExpressCheckout_ApplePay',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});tealium_clickTracking_customized.push({s:'[data-element-id="D_CheckoutPayment_Form"]'});tealium_clickTracking_customized.push({s:'[data-element-id="D_X_SearchByImage_Upload"]'});tealium_clickTracking_customized.push({s:'[data-element-id="M_X_SearchByImage_Upload"]'});tealium_clickTracking_customized.push({s:'[data-element-id="D_Search_SearchByIgmEdit_Upload"]'});tealium_clickTracking_customized.push({s:'[data-element-id="M_Search_SearchByIgmEdit_Upload"]'});tealium_clickTracking_customized.push({s:'[data-element-id="D_Search_SearchByIgmEdit_Crop"]'});tealium_clickTracking_customized.push({s:'[data-element-id="M_Search_SearchByIgmEdit_Crop"]'});tealium_clickTracking_customized.push({s:'[id*="Prod_AddToWishList"]',ud:{Events_ProdFavAdd:1}});tealium_clickTracking_customized.push({s:'[title*="Add to Wish List"]',ud:{Events_ProdFavAdd:1}});}
break;}
case'OO':case'OSI':{{tealium_clickTracking_customized.push({s:'div#email-me-available-modal-code button.black.ignore.modal-read-more.sendEmailBtn',tt:'link',ud:{Events_ProdViewEcomOosEmailClick:1,}});}
{tealium_clickTracking_customized.push({s:'[data-element-id*="Prod_FindOrReserve"]',tt:'link'});tealium_clickTracking_customized.push({s:'[data-elem-id*="CartPage_CheckoutExp_Apple"]',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});}
break;}
case'GL':{{tealium_clickTracking_customized.push({s:'.fake_select_activate a',ji:function(){return false;}});tealium_clickTracking_customized.push({s:'ul.fake_select a',ji:function(){return false;}});}
break;}
case'LC':{{tealium_clickTracking_customized.push({s:'[class*="selectBox"] a',ji:function(){return false;}});tealium_clickTracking_customized.push({s:'#examAppDate a',ji:function(){return false;}});}
break;}
case'PO':case'OP':case'VO':case'OC':{{tealium_clickTracking_customized.push({s:'[data-element-id$="CartPage_Summary_CheckoutWithPaypal"]',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'PayPalExpressCheckout',tt:'view'});tealium_clickTracking_customized.push({s:'[data-element-id$="CheckoutPayment_Form_Pay"]',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Standard',Page_Name:'Checkout:Express:Gateway',tt:'view'});tealium_clickTracking_customized.push({s:'[data-element-id$="ApplePayCheckout"]',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'ApplePayExpressCheckout',tt:'view'});}
break;}
case'SV':{tealium_clickTracking_customized.push({s:'[data-element-id$="PayPalCheckout"]',Page_Type:'Gateway',Page_Section1:'Checkout',Page_Section2:'Express',Page_Name:'Checkout:Express:Gateway',Order_PaymentType:'PayPalExpressCheckout',tt:'view'});break;}}}}
tealium_logContext='preloader tealium_listeners';tealium_logNote='';var temp,temp2,temp3,tealium_listenerOn='';if(!tealium_listenerOn.match(/\[X_X_CheckoutThankYou_ErrorDetection\]/i)){if(0||(0&&utag_data.Page_Brand=='SGH'&&utag_data.Page_Type&&utag_data.Page_Type.match(/Thankyou/i))||(0&&utag_data.Page_Brand=='RB'&&utag_data.Page_Platform.match(/WCS/i)&&utag_data.Page_Url.match(/OrderOKView/i))){window.addEventListener('error',function(e){var datalayer={id:'X-X-X-X-Error',Error_Details:'Thank You Page: '+e.stack,Error_Source:'Client',Error_Code:'JS error',};tealium_log.listener.set('done',datalayer,'Listener - X_X_CheckoutThankYou_ErrorDetection');tealium_data2track.push(datalayer);});tealium_listenerOn+='[X_X_CheckoutThankYou_ErrorDetection]';}}
switch(utag_data.Page_Brand){case'RB':{{if(1&&utag_data.Page_Platform.match(/WCS/i)&&utag_data.Tracking_EventId.match(/PageView:default/i)&&utag_data.Page_Type.match(/Pcp|Pdp|Configurator/)&&!tealium_listenerOn.match(/\[WCS_X_PXP_LoadTimer\]/i)&&"performance"in window&&"timing"in window.performance){try{temp=utag_data.Page_Type.match(/Pdp/i)?'PDP':'PCP';temp2=(temp=='PDP')?10:20;temp3=temp2-(((new Date().getTime())-window.performance.timing.domLoading)/1000).toFixed(0);if(temp3<0)temp3=0;var track=function(temp,temp2){tealium_listenerOn=tealium_listenerOn.replace(/\[WCS_X_PXP_LoadTimer\]/g,'');var log=(window.utag&&utag.data&&utag.data.Tracking_EventIdLog)?utag.data.Tracking_EventIdLog:'';window.tealium_data2track_log=window.tealium_data2track_log||'';if(0||log.match(/:OneConfigurator-Loaded\]/)||log.match(/:WCS-X-(PCP|PDP)-Loading-(Error|Ready)\]/)){return;}else{var datalayer={};tealium_log.listener.set('done',datalayer,'Listener - WCS_X_PXP_LoadTimer');datalayer.id='WCS-X-PXP-Loading-TooLong';datalayer.pageType=temp;datalayer.timeLimit=temp2;tealium_data2track.push(datalayer);}};setTimeout(function(temp,temp2){track(temp,temp2);},temp3*1000,temp,temp2);tealium_listenerOn+='[WCS_X_PXP_LoadTimer]';}catch(err){var datalayer={'id':'X-X-X-X-Error'};tealium_log.listener.set('error',datalayer,'Listener - WCS_X_PXP_LoadTimer:'+err.stack);tealium_data2track.push(datalayer);}}}
{if(0&&utag_data.Page_Platform.match(/WCS/i)&&utag_data.Page_DeviceType=='desktop'&&utag_data.Page_Name.match(/Checkout:ThankYou/i)&&!tealium_listenerOn.match(/\[WCS_D_CheckoutThankYou_DoubleCall\]/i)){var WCS_D_CheckoutThankYou_DoubleCall=function(){try{if(window.callAnalytics){window.callAnalytics();}else{window.callAnaytics();}
tealium_log.listener.set('done',null,'Listener - WCS_D_CheckoutThankYou_DoubleCall');}
catch(err){var datalayer={'id':'X-X-X-X-Error'};tealium_log.listener.set('error',datalayer,'Listener - WCS_D_CheckoutThankYou_DoubleCall: '+err.stack);tealium_data2track.push(datalayer);}
document.removeEventListener('ready',WCS_D_CheckoutThankYou_DoubleCall,false);};if(jQuery('#wcsOrderId').length>0){WCS_D_CheckoutThankYou_DoubleCall();}else{document.addEventListener('ready',WCS_D_CheckoutThankYou_DoubleCall,false);}
tealium_listenerOn+='[WCS_D_CheckoutThankYou_DoubleCall]';}}
{if(1&&utag_data.Page_Platform.match(/WCS/i)&&utag_data.Page_Name.match(/^Home/i)&&!tealium_listenerOn.match(/\[WCS_X_Subscribe_Success\]/i)){jQuery(document).ajaxComplete(function(event,xhr,settings){if(!settings.url.match(/SignUpOverlayCmd/i)||!xhr.responseText.match(/BEGIN SignUpOverlaySuccess\.jsp|signupThankYou/i))return;var datalayer={};tealium_log.listener.set('done',datalayer,'Listener - WCS_X_Subscribe_Success');datalayer.id='X-X-User-Newsletter-SignUpConfirm';tealium_data2track.push(datalayer);});tealium_listenerOn+='[WCS_X_Subscribe_Success]';}}
break;}
case'SGH':{if(1&&!tealium_listenerOn.match(/\[SGH-X-X-Loading-TrackLater\]/i)&&utag_data.Page_Type.match(/Pdp|ThankYou|CartPage|Error/i)){var SGHTrackLater=function(){var datalayer={id:'SGH-X-X-Loading-TrackLater',options:'[trackonce]'};tealium_log.listener.set('done',datalayer,'Listener - SGH-X-X-Loading-TrackLater');tealium_data2track.push(datalayer);};if(utag_data.Page_Type.match(/ThankYou/i)){if(0){}
else if(document.readyState=="complete"&&(utag_data.orderId||utag_data.order_id))SGHTrackLater();else if(document.readyState=="complete"&&(!utag_data.orderId&&!utag_data.order_id))setTimeout(SGHTrackLater,2000);else window.addEventListener("load",function(event){SGHTrackLater();});}else{if(0){}
else if(document.readyState=="complete"&&utag_data.Products&&Object.getOwnPropertyNames(utag_data.Products).length)setTimeout(SGHTrackLater,2000);else if(document.readyState=="complete"&&(!utag_data.Products||!Object.getOwnPropertyNames(utag_data.Products).length))setTimeout(SGHTrackLater,2000);else window.addEventListener("load",function(event){setTimeout(SGHTrackLater,2000);});}
tealium_listenerOn+='[SGH-X-X-Loading-TrackLater]';}
break;}
default:{}}
tealium_log.preloader.set('done',utag_data);}catch(err){tealium_logViaPixel('preloader',(window.utag_data||null),err.stack);}}
LuxotticaFrameworkVersion.preloader="20-05-04";}catch(e){utag.DB(e)}}catch(e){}};if(!utag_condload){try{try{window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};window.utag_cfg_ovrd.consentPeriod=390;window.utag_data.language=window.utag_data.Page_Language.toLowerCase();if(window.utag_data.Page_Country.match(/US/i)){window.utag_data.language="en-us";}
else if(window.utag_data.Page_Language.match(/fr/i)){window.utag_data.language="fr-fr";}
else if(window.utag_data.Page_Language.match(/nl/i)){window.utag_data.language="nl-nl";}
else if(window.utag_data.Page_Language.match(/it/i)){window.utag_data.language="it-it";}
window.utag_cfg_ovrd.gdprDLRef="language";}catch(e){utag.DB(e)}}catch(e){}};if(!utag_condload){try{try{if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext000_click_analysis")&&!window.tealium_ext000_click_analysis__WeAreInBeta){window.tealium_ext000_click_analysis__WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext000_click_analysis"));}
else{var tealium_clickAnalysis;try{tealium_clickAnalysis=(function(){{var __detected=[];var __inProgress=false;var __lastEventIndexBeforeSimulation=0;var __tracked=[];var __trackedFilteredAndSorted=[];var __sorting={labels:["Position","Element Id","Description","Status","Element Id & Description"],fields:["__index","box","desc","source","box+desc"],field_selected:4,ordering:["ASC","DESC"],ordering_selected:0,onchange:"tealium_clickAnalysis.applyOrdering",label:"Order by"};var getItemToCompare=function(item,field){var itemCmp="";var fields=field.split("+");for(var i=0;i<fields.length;i++){itemCmp+=item[fields[i]];if(i==0||i==(fields.length-1)){}
else itemCmp+=" ";}
return itemCmp;};var getSortComparison=function(item1,item2){var __item1,__item2;if(__sorting.ordering[__sorting.ordering_selected]=="ASC"){__item1=item1;__item2=item2;}
else{__item1=item2;__item2=item1;}
var __field=__sorting.fields[__sorting.field_selected];var term1=getItemToCompare(__item1,__field);var term2=getItemToCompare(__item2,__field);//@NOTE: improve and use the existing function
return(term1).localeCompare(term2);};var __filters={"footer":{start:true,end:false,active:true,level:1,label:"Footer",value:"Footer",check:function(d){return this.active&&typeof d==='string'&&d.match(new RegExp(this.value))?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},"mainNav":{start:false,end:false,active:true,level:1,label:"Main Nav",value:"MainNav",check:function(d){return this.active&&typeof d==='string'&&d.match(new RegExp(this.value))?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},"others":{start:false,end:true,active:true,level:1,label:"Others/Body",check:function(d1,d2){return(!this.active)||(typeof d1==='string'&&d1.match(/Footer|MainNav/))||(!d1&&(!d2))?false:true;},onclick:"tealium_clickAnalysis.applyFilter"},"text":{start:true,end:true,active:false,level:2,label:"",value:"",check:function(d1,d2){return(!this.active)||((typeof d1==='string'&&d1.match(new RegExp(this.value)))||(typeof d2==='string'&&d2.match(new RegExp(this.value))))?true:false;},onclick:"tealium_clickAnalysis.applyFilter",input_text:{label:"FILTER BY TEXT",onchange:"tealium_clickAnalysis.applyFilterText"},},"correct":{start:true,end:false,active:true,level:2,label:"Correct",value:"OK",status:"success",count:0,check:function(s){return this.active&&typeof s==='string'&&s.match(new RegExp(this.value))?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},"patched":{start:false,end:false,active:true,level:2,label:"Patched",value:"PATCH",status:"warning",count:0,check:function(s){return this.active&&typeof s==='string'&&s.match(new RegExp(this.value))?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},"missed":{start:false,end:false,active:true,level:2,label:"Missed",value:"NO ID",status:"error",count:0,check:function(s){return this.active&&typeof s==='string'&&s.match(new RegExp(this.value))?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},"fixed":{start:false,end:true,active:true,level:2,label:"Fixed",value:"FIXED",status:"info",count:0,check:function(s){return this.active&&typeof s==='string'&&s.match(new RegExp(this.value+"$"))?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},"description":{start:true,end:true,active:false,level:2,label:"GROUP BY ELEMENT ID",check:function(d1,d2){return this.active&&typeof d1==='string'&&typeof d2==='string'&&d1===d2?true:false;},onclick:"tealium_clickAnalysis.applyFilter"},};var __counters=[{label:"DETECTED",value:'0'},{label:"TRACKED",value:'0'},];var __progressBar={label:"Processing",value:0};var __currentSet={label:"CURRENT SET",value:'0'};var __sources={"OK":"correct","NO ID":"missed","PATCH":"patched","FIXED":"fixed"};var getCountersBySource=function(){var i;for(i=0;i<__sources.length-1;i++)__filters[__sources[i]].count=0;__tracked.forEach(function(obj){var keys=Object.keys(__sources);for(i=0;i<keys.length-1;i++){if(typeof obj.source=="string"&&obj.source.match(new RegExp(keys[i]))){__filters[__sources[keys[i]]].count++;break;}}
if(typeof obj.source=="string"&&obj.source.match(new RegExp(keys[(keys.length-1)]))){__filters[__sources[keys[(keys.length-1)]]].count++;}});};var __results={selected:['box','desc','source'],keys:['__index','box','desc','source'],cols:{'__index':{value:"INDEX"},'box':{value:"ELEMENT ID",width:"37%"},'desc':{value:"DESCRIPTION",width:"38%",extraStyle:"overflow-wrap: break-word;"},'source':{value:"STATUS",width:"25%"}},rows:[],empty:{label:"<<< NO RESULTS FOUND >>>"},};var mapResultRows=function(list){var restricted=[];if(__results&&__results.keys&&__results.keys.length>0&&list){if(list.length>0){restricted=__results.keys.filter(function(key){if(list[0].hasOwnProperty(key))return key;});}else{restricted=__results.keys;}}
if(restricted.length>0){var rows=[];list.map(function(obj){var row={};for(var i=0;i<restricted.length;i++){var key=restricted[i];var item={value:obj[key],badge:false,status:undefined};if(key=="source"){item.badge=true;item.status=item.value.match(/OK/)?"success":item.value.match(/NO ID/)?"error":"warning";item.value=item.value.match(/OK/)?"CORRECT":item.value.match(/NO ID/)?"MISSED":(item.value.replace("PATCH","PATCHED"));if(obj[key].match(/FIXED/))item.value+=" (FIXED)";}
row[key]=item;}
rows.push(row);});__results.rows=rows;}};var getResultSorted=function(list){return list.sort(getSortComparison);};var getResultFiltered=function(list){var result=[];var indexOut=-1;list.map(function(obj){if(0||__filters.footer.check(obj.box)||__filters.mainNav.check(obj.box)||__filters.others.check(obj.box,obj.desc)){if(0||__filters.correct.check(obj.source)||__filters.patched.check(obj.source)||__filters.missed.check(obj.source)||__filters.fixed.check(obj.source)){if(__filters.text.check(obj.box,obj.desc)){if(indexOut>-1&&__filters.description.check(obj.box,result[indexOut].box)){result[indexOut].desc+=","+obj.desc;}
else{result.push(JSON.parse(JSON.stringify(obj)));indexOut++;}}}}});return result;};var clean=function(){if(window.tealium_log&&window.tealium_log.events&&typeof window.tealium_log.events.removeFrom==="function"){window.tealium_log.events.removeFrom(__lastEventIndexBeforeSimulation+1);}
if(window.tealium_data2track_stack&&window.tealium_data2track_log){window.tealium_data2track_log="";var tealium_data2track_stack_copy=[];var e;for(var i=0;i<__lastEventIndexBeforeSimulation;i++){e=window.tealium_data2track_stack.shift();tealium_data2track_stack_copy.push(e);window.tealium_data2track_log+='['+e.id+']';}
window.tealium_data2track_stack=tealium_data2track_stack_copy;}};}
var self={};self.detect=function(){__detected=window.jQuery('body').find('a,button');window.jQuery('body').find('input[type!="hidden"]').each(function(k,v){if(window.jQuery(this).closest('[id^="tealiumLog_"]').length<1&&(window.utag_data&&(window.utag_data.Page_Brand==="RB"||!window.utag_data.Page_Section1||(window.utag_data.Page_Section1&&!window.utag_data.Page_Section1.match(/Checkout/i))))){__detected.push(v);}});__counters[0].value=__detected.length;__counters[1].value=__tracked.length;if(self.containerTable&&typeof self.containerTable.update=="function"){self.containerTable.update({counters:__counters});}};self.simulate=function(next){if(__detected&&__detected.length>0){next=(typeof next=="number"&&next>0)?next:0;if(!__inProgress&&(!next)){__lastEventIndexBeforeSimulation=window.tealium_log&&window.tealium_log.events?window.tealium_log.events.qnt:0;__inProgress=true;if(window.tealium_data2track&&typeof window.tealium_data2track.push==="function"){window.tealium_data2track.push({id:'Click',Tracking_Type:'test',Click_FocusElement:__detected[next],__next:(__detected.length>1?1:0)});}}
else if(__inProgress&&next){__progressBar.value=(next/__detected.length*100).toFixed(0);__counters[1].value=__tracked.length;if(self.containerTable&&typeof self.containerTable.update=="function"){self.containerTable.update({counters:__counters,progressBar:__progressBar});}
if(next<__detected.length){setTimeout(function(){if(window.tealium_data2track&&typeof window.tealium_data2track.push==="function"){window.tealium_data2track.push({id:'Click',Tracking_Type:'test',Click_FocusElement:__detected[next],__next:(next+1)});}},1);}
else{clean();getCountersBySource();__trackedFilteredAndSorted=getResultFiltered(getResultSorted(__tracked));mapResultRows(__trackedFilteredAndSorted);__inProgress=false;if(self.containerTable&&typeof self.containerTable.update=="function"){self.containerTable.update({filters:__filters,sorting:__sorting,currentSet:__currentSet,results:__results});}
if(self.postSimulation)self.postSimulation();}}}};self.addTrack=function(box,desc,source){__tracked.push({__index:__tracked.length,box:box,desc:desc,source:source});};self.inProgress=function(){return __inProgress;};self.applyFilter=function(fid){if(fid&&__filters[fid]){__filters[fid].active=!__filters[fid].active;__trackedFilteredAndSorted=getResultFiltered(getResultSorted(__tracked));mapResultRows(__trackedFilteredAndSorted);if(self.containerTable&&typeof self.containerTable.update=="function"){self.containerTable.update({results:__results});}}};self.applyFilterText=function(fid,fvalue){if(fid&&__filters[fid]){__filters[fid].value=fvalue;if(__filters[fid].active){__trackedFilteredAndSorted=getResultFiltered(getResultSorted(__tracked));mapResultRows(__trackedFilteredAndSorted);if(self.containerTable&&typeof self.containerTable.update=="function"){self.containerTable.update({results:__results});}}}};self.applyOrdering=function(option){option=option?option.split("_"):[];if(option.length==2){if(__sorting.fields[option[0]]&&__sorting.ordering[option[1]]){__sorting.field_selected=option[0];__sorting.ordering_selected=option[1];}
__trackedFilteredAndSorted=getResultFiltered(getResultSorted(__tracked));mapResultRows(__trackedFilteredAndSorted);if(self.containerTable&&typeof self.containerTable.update=="function"){self.containerTable.update({results:__results});}}};self.containerTable=undefined;self.postSimulation=undefined;return self;})();}
catch(e){console.error("### tealium_click_analysis is not built! => caused by: "+e);}}
LuxotticaFrameworkVersion.click_analysis="20-04-06";}catch(e){utag.DB(e)}}catch(e){}};if(typeof utag=="undefined"&&!utag_condload){var utag={id:"luxottica.ray-ban",o:{},sender:{},send:{},rpt:{ts:{a:new Date()}},dbi:[],db_log:[],loader:{q:[],lc:0,f:{},p:0,ol:0,wq:[],lq:[],bq:{},bk:{},rf:0,ri:0,rp:0,rq:[],ready_q:[],sendq:{"pending":0},run_ready_q:function(){for(var i=0;i<utag.loader.ready_q.length;i++){utag.DB("READY_Q:"+i);try{utag.loader.ready_q[i]()}catch(e){utag.DB(e)};}},lh:function(a,b,c){a=""+location.hostname;b=a.split(".");c=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\./.test(a))?3:2;return b.splice(b.length-c,c).join(".");},WQ:function(a,b,c,d,g){utag.DB('WQ:'+utag.loader.wq.length);try{if(utag.udoname&&utag.udoname.indexOf(".")<0){utag.ut.merge(utag.data,window[utag.udoname],0);}
if(utag.cfg.load_rules_at_wait){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};d=0;g=[];for(a=0;a<utag.loader.wq.length;a++){b=utag.loader.wq[a];b.load=utag.loader.cfg[b.id].load;if(b.load==4){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.load>0){g.push(b);d++;}else{this.f[b.id]=1;}}
for(a=0;a<g.length;a++){utag.loader.AS(g[a]);}
if(d==0){utag.loader.END();}},AS:function(a,b,c,d){utag.send[a.id]=a;if(typeof a.src=='undefined'){a.src=utag.cfg.path+((typeof a.name!='undefined')?a.name:'ut'+'ag.'+a.id+'.js')}
a.src+=(a.src.indexOf('?')>0?'&':'?')+'utv='+(a.v?utag.cfg.template+a.v:utag.cfg.v);utag.rpt['l_'+a.id]=a.src;b=document;this.f[a.id]=0;if(a.load==2){utag.DB("Attach sync: "+a.src);a.uid=a.id;b.write('<script id="utag_'+a.id+'" src="'+a.src+'"></scr'+'ipt>')
if(typeof a.cb!='undefined')a.cb();}else if(a.load==1||a.load==3){if(b.createElement){c='utag_luxottica.ray-ban_'+a.id;if(!b.getElementById(c)){d={src:a.src,id:c,uid:a.id,loc:a.loc}
if(a.load==3){d.type="iframe"};if(typeof a.cb!='undefined')d.cb=a.cb;utag.ut.loader(d);}}}},GV:function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c)&&typeof a[c]!="function")b[c]=a[c];}
return b},OU:function(a,b,c,d,f){try{if(typeof utag.data['cp.OPTOUTMULTI']!='undefined'){c=utag.loader.cfg;a=utag.ut.decode(utag.data['cp.OPTOUTMULTI']).split('|');for(d=0;d<a.length;d++){b=a[d].split(':');if(b[1]*1!==0){if(b[0].indexOf('c')==0){for(f in utag.loader.GV(c)){if(c[f].tcat==b[0].substring(1))c[f].load=0}}else if(b[0]*1==0){utag.cfg.nocookie=true}else{for(f in utag.loader.GV(c)){if(c[f].tid==b[0])c[f].load=0}}}}}}catch(e){utag.DB(e)}},RDdom:function(o){var d=document||{},l=location||{};o["dom.referrer"]=d.referrer;o["dom.title"]=""+d.title;o["dom.domain"]=""+l.hostname;o["dom.query_string"]=(""+l.search).substring(1);o["dom.hash"]=(""+l.hash).substring(1);o["dom.url"]=""+d.URL;o["dom.pathname"]=""+l.pathname;o["dom.viewport_height"]=window.innerHeight||(d.documentElement?d.documentElement.clientHeight:960);o["dom.viewport_width"]=window.innerWidth||(d.documentElement?d.documentElement.clientWidth:960);},RDcp:function(o,b,c,d){b=utag.loader.RC();for(d in b){if(d.match(/utag_(.*)/)){for(c in utag.loader.GV(b[d])){o["cp.utag_"+RegExp.$1+"_"+c]=b[d][c];}}}
for(c in utag.loader.GV((utag.cl&&!utag.cl['_all_'])?utag.cl:b)){if(c.indexOf("utag_")<0&&typeof b[c]!="undefined")o["cp."+c]=b[c];}
},RDqp:function(o,a,b,c){a=location.search+(location.hash+'').replace("#","&");if(utag.cfg.lowerqp){a=a.toLowerCase()};if(a.length>1){b=a.substring(1).split('&');for(a=0;a<b.length;a++){c=b[a].split("=");if(c.length>1){o["qp."+c[0]]=utag.ut.decode(c[1])}}}},RDmeta:function(o,a,b,h){a=document.getElementsByTagName("meta");for(b=0;b<a.length;b++){try{h=a[b].name||a[b].getAttribute("property")||"";}catch(e){h="";utag.DB(e)};if(utag.cfg.lowermeta){h=h.toLowerCase()};if(h!=""){o["meta."+h]=a[b].content}}},RDva:function(o){var readAttr=function(o,l){var a="",b;a=localStorage.getItem(l);if(!a||a=="{}")return;b=utag.ut.flatten({va:JSON.parse(a)});utag.ut.merge(o,b,1);}
try{readAttr(o,"tealium_va");readAttr(o,"tealium_va_"+o["ut.account"]+"_"+o["ut.profile"]);}catch(e){utag.DB(e)}},RDut:function(o,a){var t={};var d=new Date();var m=(utag.ut.typeOf(d.toISOString)=="function");o["ut.domain"]=utag.cfg.domain;o["ut.version"]=utag.cfg.v;t["tealium_event"]=o["ut.event"]=a||"view";t["tealium_visitor_id"]=o["ut.visitor_id"]=o["cp.utag_main_v_id"];t["tealium_session_id"]=o["ut.session_id"]=o["cp.utag_main_ses_id"];try{t["tealium_datasource"]="";t["tealium_account"]=o["ut.account"]=utag.cfg.utid.split("/")[0];t["tealium_profile"]=o["ut.profile"]=utag.cfg.utid.split("/")[1];t["tealium_environment"]=o["ut.env"]=utag.cfg.path.split("/")[6];}catch(e){utag.DB(e)}
t["tealium_random"]=Math.random().toFixed(16).substring(2);t["tealium_library_name"]="ut"+"ag.js";t["tealium_library_version"]=(utag.cfg.template+"0").substring(2);t["tealium_timestamp_epoch"]=Math.floor(d.getTime()/1000);t["tealium_timestamp_utc"]=(m?d.toISOString():"");d.setHours(d.getHours()-(d.getTimezoneOffset()/60));t["tealium_timestamp_local"]=(m?d.toISOString().replace("Z",""):"");utag.ut.merge(o,t,0);},RDses:function(o,a,c){a=(new Date()).getTime();c=(a+parseInt(utag.cfg.session_timeout))+"";if(!o["cp.utag_main_ses_id"]){o["cp.utag_main_ses_id"]=a+"";o["cp.utag_main__ss"]="1";o["cp.utag_main__sn"]=(1+parseInt(o["cp.utag_main__sn"]||0))+"";}else{o["cp.utag_main__ss"]="0";}
o["cp.utag_main__pn"]=o["cp.utag_main__pn"]||"1";o["cp.utag_main__st"]=c;utag.loader.SC("utag_main",{"_sn":(o["cp.utag_main__sn"]||1),"_ss":o["cp.utag_main__ss"],"_st":c,"ses_id":(o["cp.utag_main_ses_id"]||a)+";exp-session","_pn":o["cp.utag_main__pn"]+";exp-session"});},RDpv:function(o){if(typeof utag.pagevars=="function"){utag.DB("Read page variables");utag.pagevars(o);}},RD:function(o,a){utag.DB("utag.loader.RD");utag.DB(o);utag.loader.RDcp(o);if(!utag.loader.rd_flag){utag.loader.rd_flag=1;o["cp.utag_main_v_id"]=o["cp.utag_main_v_id"]||utag.ut.vi((new Date()).getTime());o["cp.utag_main__pn"]=(1+parseInt(o["cp.utag_main__pn"]||0))+"";utag.loader.SC("utag_main",{"v_id":o["cp.utag_main_v_id"]});utag.loader.RDses(o);}
if(a&&!utag.cfg.noview)utag.loader.RDses(o);utag.loader.RDqp(o);utag.loader.RDmeta(o);utag.loader.RDdom(o);utag.loader.RDut(o,a||"view");utag.loader.RDpv(o);utag.loader.RDva(o);},RC:function(a,x,b,c,d,e,f,g,h,i,j,k,l,m,n,o,v,ck,cv,r,s,t){o={};b=(""+document.cookie!="")?(document.cookie).split("; "):[];r=/^(.*?)=(.*)$/;s=/^(.*);exp-(.*)$/;t=(new Date()).getTime();for(c=0;c<b.length;c++){if(b[c].match(r)){ck=RegExp.$1;cv=RegExp.$2;}
e=utag.ut.decode(cv);if(typeof ck!="undefined"){if(ck.indexOf("ulog")==0||ck.indexOf("utag_")==0){e=cv.split("$");g=[];j={};for(f=0;f<e.length;f++){try{g=e[f].split(":");if(g.length>2){g[1]=g.slice(1).join(":");}
v="";if((""+g[1]).indexOf("~")==0){h=g[1].substring(1).split("|");for(i=0;i<h.length;i++)h[i]=utag.ut.decode(h[i]);v=h}else v=utag.ut.decode(g[1]);j[g[0]]=v;}catch(er){utag.DB(er)};}
o[ck]={};for(f in utag.loader.GV(j)){if(j[f]instanceof Array){n=[];for(m=0;m<j[f].length;m++){if(j[f][m].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);if(k>t)n[m]=(x==0)?j[f][m]:RegExp.$1;}}
j[f]=n.join("|");}else{j[f]=""+j[f];if(j[f].match(s)){k=(RegExp.$2=="session")?(typeof j._st!="undefined"?j._st:t-1):parseInt(RegExp.$2);j[f]=(k<t)?null:(x==0?j[f]:RegExp.$1);}}
if(j[f])o[ck][f]=j[f];}}else if(utag.cl[ck]||utag.cl['_all_']){o[ck]=e}}}
return(a)?(o[a]?o[a]:{}):o;},SC:function(a,b,c,d,e,f,g,h,i,j,k,x,v){if(!a)return 0;if(a=="utag_main"&&utag.cfg.nocookie)return 0;v="";var date=new Date();var exp=new Date();exp.setTime(date.getTime()+(365*24*60*60*1000));x=exp.toGMTString();if(c&&c=="da"){x="Thu, 31 Dec 2009 00:00:00 GMT";}else if(a.indexOf("utag_")!=0&&a.indexOf("ulog")!=0){if(typeof b!="object"){v=b}}else{d=utag.loader.RC(a,0);for(e in utag.loader.GV(b)){f=""+b[e];if(f.match(/^(.*);exp-(\d+)(\w)$/)){g=date.getTime()+parseInt(RegExp.$2)*((RegExp.$3=="h")?3600000:86400000);if(RegExp.$3=="u")g=parseInt(RegExp.$2);f=RegExp.$1+";exp-"+g;}
if(c=="i"){if(d[e]==null)d[e]=f;}else if(c=="d")delete d[e];else if(c=="a")d[e]=(d[e]!=null)?(f-0)+(d[e]-0):f;else if(c=="ap"||c=="au"){if(d[e]==null)d[e]=f;else{if(d[e].indexOf("|")>0){d[e]=d[e].split("|")}
g=(d[e]instanceof Array)?d[e]:[d[e]];g.push(f);if(c=="au"){h={};k={};for(i=0;i<g.length;i++){if(g[i].match(/^(.*);exp-(.*)$/)){j=RegExp.$1;}
if(typeof k[j]=="undefined"){k[j]=1;h[g[i]]=1;}}
g=[];for(i in utag.loader.GV(h)){g.push(i);}}
d[e]=g}}else d[e]=f;}
h=new Array();for(g in utag.loader.GV(d)){if(d[g]instanceof Array){for(c=0;c<d[g].length;c++){d[g][c]=encodeURIComponent(d[g][c])}
h.push(g+":~"+d[g].join("|"))}else h.push((g+":").replace(/[\,\$\;\?]/g,"")+encodeURIComponent(d[g]))}
if(h.length==0){h.push("");x=""}
v=(h.join("$"));}
document.cookie=a+"="+v+";path=/;domain="+utag.cfg.domain+";expires="+x;return 1},LOAD:function(a,b,c,d){if(!utag.loader.cfg){return}
if(this.ol==0){if(utag.loader.cfg[a].block&&utag.loader.cfg[a].cbf){this.f[a]=1;delete utag.loader.bq[a];}
for(b in utag.loader.GV(utag.loader.bq)){if(utag.loader.cfg[a].load==4&&utag.loader.cfg[a].wait==0){utag.loader.bk[a]=1;utag.DB("blocked: "+a);}
utag.DB("blocking: "+b);return;}
utag.loader.INIT();return;}
utag.DB('utag.loader.LOAD:'+a);if(this.f[a]==0){this.f[a]=1;if(utag.cfg.noview!=true){if(utag.loader.cfg[a].send){utag.DB("SENDING: "+a);try{if(utag.loader.sendq.pending>0&&utag.loader.sendq[a]){utag.DB("utag.loader.LOAD:sendq: "+a);while(d=utag.loader.sendq[a].shift()){utag.DB(d);utag.sender[a].send(d.event,utag.handler.C(d.data));utag.loader.sendq.pending--;}}else{utag.sender[a].send('view',utag.handler.C(utag.data));}
utag.rpt['s_'+a]=0;}catch(e){utag.DB(e);utag.rpt['s_'+a]=1;}}}
if(utag.loader.rf==0)return;for(b in utag.loader.GV(this.f)){if(this.f[b]==0||this.f[b]==2)return}
utag.loader.END();}},EV:function(a,b,c,d){if(b=="ready"){if(!utag.data){try{utag.cl={'_all_':1};utag.loader.initdata();utag.loader.RD(utag.data);}catch(e){utag.DB(e)};}
if((document.attachEvent||utag.cfg.dom_complete)?document.readyState==="complete":document.readyState!=="loading")setTimeout(c,1);else{utag.loader.ready_q.push(c);var RH;if(utag.loader.ready_q.length<=1){if(document.addEventListener){RH=function(){document.removeEventListener("DOMContentLoaded",RH,false);utag.loader.run_ready_q()};if(!utag.cfg.dom_complete)document.addEventListener("DOMContentLoaded",RH,false);window.addEventListener("load",utag.loader.run_ready_q,false);}else if(document.attachEvent){RH=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",RH);utag.loader.run_ready_q()}};document.attachEvent("onreadystatechange",RH);window.attachEvent("onload",utag.loader.run_ready_q);}}}}else{if(a.addEventListener){a.addEventListener(b,c,false)}else if(a.attachEvent){a.attachEvent(((d==1)?"":"on")+b,c)}}},END:function(b,c,d,e,v,w){if(this.ended){return};this.ended=1;utag.DB("loader.END");b=utag.data;if(utag.handler.base&&utag.handler.base!='*'){e=utag.handler.base.split(",");for(d=0;d<e.length;d++){if(typeof b[e[d]]!="undefined")utag.handler.df[e[d]]=b[e[d]]}}else if(utag.handler.base=='*'){utag.ut.merge(utag.handler.df,b,1);}
utag.rpt['r_0']="t";for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}
utag.rpt.ts['s']=new Date();(function(a,b,c,l){if(typeof utag_err!='undefined'&&utag_err.length>0){a='//uconnect.tealiumiq.com/ulog/_error?utid='+utag.cfg.utid;l=utag_err.length>5?5:utag_err.length;for(b=0;b<l;b++){c=utag_err[b];a+='&e'+b+'='+encodeURIComponent(c.t+'::'+c.l+'::'+c.s+'::'+c.e);}
utag.dbi.push((new Image()).src=a);}})();v=".tiqcdn.com";w=utag.cfg.path.indexOf(v);if(w>0&&b["cp.utag_main__ss"]==1&&!utag.cfg.no_session_count)utag.ut.loader({src:utag.cfg.path.substring(0,w)+v+"/ut"+"ag/tiqapp/ut"+"ag.v.js?a="+utag.cfg.utid+(utag.cfg.nocookie?"&nocookie=1":"&cb="+(new Date).getTime()),id:"tiqapp"})
if(utag.cfg.noview!=true)utag.handler.RE('view',b,"end");utag.handler.INIT();}},DB:function(a,b){if(utag.cfg.utagdb===false){return;}else if(typeof utag.cfg.utagdb=="undefined"){b=document.cookie+'';utag.cfg.utagdb=((b.indexOf('utagdb=true')>=0)?true:false);}
if(utag.cfg.utagdb===true){var t;if(utag.ut.typeOf(a)=="object"){t=utag.handler.C(a)}else{t=a}
utag.db_log.push(t);try{if(!utag.cfg.noconsole)console.log(t)}catch(e){}}},RP:function(a,b,c){if(typeof a!='undefined'&&typeof a.src!='undefined'&&a.src!=''){b=[];for(c in utag.loader.GV(a)){if(c!='src')b.push(c+'='+escape(a[c]))}
this.dbi.push((new Image()).src=a.src+'?utv='+utag.cfg.v+'&utid='+utag.cfg.utid+'&'+(b.join('&')))}},view:function(a,c,d){return this.track({event:'view',data:a,cfg:{cb:c,uids:d}})},link:function(a,c,d){return this.track({event:'link',data:a,cfg:{cb:c,uids:d}})},track:function(a,b,c,d){if(typeof a=="string")a={event:a,data:b,cfg:{cb:c}};for(d in utag.loader.GV(utag.o)){try{utag.o[d].handler.trigger(a.event||"view",a.data||a,a.cfg)}catch(e){utag.DB(e)};}
if(a.cfg&&a.cfg.cb)try{a.cfg.cb()}catch(e){utag.DB(e)};return true},handler:{base:"",df:{},o:{},send:{},iflag:0,INIT:function(a,b,c){utag.DB('utag.handler.INIT');if(utag.initcatch){utag.initcatch=0;return}
this.iflag=1;a=utag.loader.q.length;if(a>0){utag.DB("Loader queue");for(b=0;b<a;b++){c=utag.loader.q[b];utag.handler.trigger(c.a,c.b,c.c)}}
},test:function(){return 1},LR:function(b){utag.DB("Load Rules");for(var d in utag.loader.GV(utag.cond)){utag.cond[d]=false;}
utag.DB(b);utag.loader.loadrules(b);utag.DB(utag.cond);utag.loader.initcfg();utag.loader.OU();for(var r in utag.loader.GV(utag.cond)){utag.rpt['r_'+r]=(utag.cond[r])?"t":"f";}},RE:function(a,b,c,d,e,f,g){if(c!="alr"&&!this.cfg_extend){return 0;}
utag.DB("RE: "+c);if(c=="alr")utag.DB("All Tags EXTENSIONS");utag.DB(b);if(typeof this.extend!="undefined"){g=0;for(d=0;d<this.extend.length;d++){try{e=0;if(typeof this.cfg_extend!="undefined"){f=this.cfg_extend[d];if(typeof f.count=="undefined")f.count=0;if(f[a]==0||(f.once==1&&f.count>0)||f[c]==0){e=1}else{if(f[c]==1){g=1};f.count++}}
if(e!=1){this.extend[d](a,b);utag.rpt['ex_'+d]=0}}catch(er){utag.DB(er);utag.rpt['ex_'+d]=1;utag.ut.error({e:er.message,s:utag.cfg.path+'utag.js',l:d,t:'ge'});}}
utag.DB(b);return g;}},trigger:function(a,b,c,d,e,f){utag.DB('trigger:'+a+(c&&c.uids?":"+c.uids.join(","):""));b=b||{};utag.DB(b);if(!this.iflag){utag.DB("trigger:called before tags loaded");for(d in utag.loader.f){if(!(utag.loader.f[d]===1))utag.DB('Tag '+d+' did not LOAD')}
utag.loader.q.push({a:a,b:utag.handler.C(b),c:c});return;}
utag.ut.merge(b,this.df,0);utag.loader.RD(b,a);utag.cfg.noview=false;function sendTag(a,b,d){try{if(typeof utag.sender[d]!="undefined"){utag.DB("SENDING: "+d);utag.sender[d].send(a,utag.handler.C(b));utag.rpt['s_'+d]=0;}else if(utag.loader.cfg[d].load!=2&&utag.loader.cfg[d].s2s!=1){utag.loader.sendq[d]=utag.loader.sendq[d]||[];utag.loader.sendq[d].push({"event":a,"data":utag.handler.C(b)});utag.loader.sendq.pending++;utag.loader.AS({id:d,load:1});}}catch(e){utag.DB(e)}}
if(c&&c.uids){this.RE(a,b,"alr");for(f=0;f<c.uids.length;f++){d=c.uids[f];sendTag(a,b,d);}}else if(utag.cfg.load_rules_ajax){this.RE(a,b,"blr");this.LR(b);this.RE(a,b,"alr");for(f=0;f<utag.loader.cfgsort.length;f++){d=utag.loader.cfgsort[f];if(utag.loader.cfg[d].load&&utag.loader.cfg[d].send){sendTag(a,b,d);}}}else{this.RE(a,b,"alr");for(d in utag.loader.GV(utag.sender)){sendTag(a,b,d);}}
this.RE(a,b,"end");},C:function(a,b,c){b={};for(c in utag.loader.GV(a)){if(a[c]instanceof Array){b[c]=a[c].slice(0)}else{b[c]=a[c]}}
return b}},ut:{pad:function(a,b,c,d){a=""+((a-0).toString(16));d='';if(b>a.length){for(c=0;c<(b-a.length);c++){d+='0'}}return""+d+a},vi:function(t,a,b){if(!utag.v_id){a=this.pad(t,12);b=""+Math.random();a+=this.pad(b.substring(2,b.length),16);try{a+=this.pad((navigator.plugins.length?navigator.plugins.length:0),2);a+=this.pad(navigator.userAgent.length,3);a+=this.pad(document.URL.length,4);a+=this.pad(navigator.appVersion.length,3);a+=this.pad(screen.width+screen.height+parseInt((screen.colorDepth)?screen.colorDepth:screen.pixelDepth),5)}catch(e){utag.DB(e);a+="12345"};utag.v_id=a;}
return utag.v_id},hasOwn:function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a)},isEmptyObject:function(o,a){for(a in o){if(utag.ut.hasOwn(o,a))return false}
return true},isEmpty:function(o){var t=utag.ut.typeOf(o);if(t=="number"){return isNaN(o)}else if(t=="boolean"){return false}else if(t=="string"){return o.length===0}else return utag.ut.isEmptyObject(o)},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},flatten:function(o){var a={};function r(c,p){if(Object(c)!==c||c instanceof Array){a[p]=c;}else{if(utag.ut.isEmptyObject(c)){}else{for(var d in c){r(c[d],p?p+"."+d:d);}}}}
r(o,"");return a;},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d]}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")a[d]=b[d]}}},decode:function(a,b){b="";try{b=decodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=unescape(a)};return b},encode:function(a,b){b="";try{b=encodeURIComponent(a)}catch(e){utag.DB(e)};if(b==""){b=escape(a)};return b},error:function(a,b,c){if(typeof utag_err!="undefined"){utag_err.push(a)}},loader:function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}
o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}
if(o.id){b.id=o.id};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l])}
b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}
if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}}};utag.o['luxottica.ray-ban']=utag;utag.cfg={template:"ut4.42.",load_rules_ajax:true,load_rules_at_wait:false,lowerqp:false,noconsole:false,session_timeout:1800000,readywait:0,noload:0,domain:utag.loader.lh(),path:"//tags.tiqcdn.com/utag/luxottica/ray-ban/prod/",utid:"luxottica/ray-ban/202005181620"};utag.cfg.v=utag.cfg.template+"202005190941";utag.cond={105:0,106:0,112:0,118:0,119:0,125:0,126:0,127:0,128:0,147:0,28:0,3:0,424:0,428:0,431:0,458:0,469:0,483:0,484:0,485:0,487:0,489:0,490:0,491:0,493:0,532:0,539:0,540:0,541:0,545:0,546:0,567:0,569:0,570:0,571:0,576:0,584:0,594:0,595:0,596:0,59:0,63:0,67:0,682:0,683:0,684:0,689:0,691:0,692:0,693:0,694:0,696:0,699:0,700:0,701:0,702:0,703:0,70:0,75:0,7:0,80:0,81:0,86:0,88:0,90:0,92:0,96:0};utag.pagevars=function(ud){ud=ud||utag.data;try{ud['js_page.tealium_listenerOn']=tealium_listenerOn}catch(e){utag.DB(e)};try{ud['js_page.tealium_cookies_object']=tealium_cookies_object}catch(e){utag.DB(e)};try{ud['js_page.tealium_querystring_object']=tealium_querystring_object}catch(e){utag.DB(e)};try{ud['js_page.tealium_data_user_segments']=tealium_data_user_segments}catch(e){utag.DB(e)};try{ud['js_page.__smartserveStartTime']=__smartserveStartTime}catch(e){utag.DB(e)};};utag.loader.initdata=function(){try{utag.data=(typeof utag_data!='undefined')?utag_data:{};utag.udoname='utag_data';}catch(e){utag.data={};utag.DB('idf:'+e);}};utag.loader.loadrules=function(_pd,_pc){var d=_pd||utag.data;var c=_pc||utag.cond;for(var l in utag.loader.GV(c)){switch(l){case'105':try{c[105]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('FR'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'106':try{c[106]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/DK|IE|PL|GB|AT|NO|SE|TR|DE|ES|FR|BE|CH|IT|NL|PT/.test(d['Page_Country'])&&typeof d['Page_Name']!='undefined'&&d['Page_Name']!=''&&d['Page_Name'].toString().indexOf('VirtualModel:Landing')>-1)}catch(e){utag.DB(e)};break;case'112':try{c[112]|=(/AT|BE|CH|DE|DK|ES|FI|FR|GB|IE|IT|NL|NO|PL|PT|SE|TR/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'118':try{c[118]|=(/GB|FR|DE|IT|NL|ES|NO|DK|AT|SE|PL|PT|TR|IE|CH|BE|JP|BR/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'119':try{c[119]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('CN'.toLowerCase())<0)||(typeof d['Page_Country']!='undefined'&&d['Page_Country']=='')}catch(e){utag.DB(e)};break;case'125':try{c[125]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/US|GB|DE|FR|IT|ES/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'126':try{c[126]|=(/BR|GB/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'127':try{c[127]|=(typeof d['Page_Type']!='undefined'&&d['Page_Type']!=''&&/Home|Clv|Clp|Plp|Pdp|Pcp|SearchResultsPage|Search|CartPage|Thankyou/i.test(d['Page_Type']))}catch(e){utag.DB(e)};break;case'128':try{c[128]|=(typeof d['page_type']!='undefined'&&d['page_type']!=''&&/home|category|product|search|cart|checkout|confirmation/i.test(d['page_type']))}catch(e){utag.DB(e)};break;case'147':try{c[147]|=(/^UD/i.test(d['Order_DiscountCode']))}catch(e){utag.DB(e)};break;case'28':try{c[28]|=(typeof d['Page_DeviceType']!='undefined'&&d['Page_DeviceType']!=''&&d['Page_DeviceType'].toString().toLowerCase().indexOf('mobile'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'3':try{c[3]|=(typeof d['Page_Name']!='undefined'&&d['Page_Name']!=''&&d['Page_Name'].toString().toLowerCase().indexOf('Checkout:ThankYou'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('servlet/orderokview'.toLowerCase())>-1)||(d['dom.url'].toString().toLowerCase().indexOf('servlet/thankyoupageview'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'424':try{c[424]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!='')||(typeof d['Page_Platform']!='undefined'&&d['Page_Platform']!=''&&/IN-STORE-APP/.test(d['Page_Platform']))}catch(e){utag.DB(e)};break;case'428':try{c[428]|=(typeof d['Tags_AdobeAnalytics_Abort']=='undefined')||(typeof d['Tags_AdobeAnalytics_Abort']!='undefined'&&d['Tags_AdobeAnalytics_Abort']=='')||(d['Tags_AdobeAnalytics_Abort']!='1')}catch(e){utag.DB(e)};break;case'431':try{c[431]|=(typeof d['Tracking_Type']=='undefined')||(typeof d['Tracking_Type']!='undefined'&&d['Tracking_Type']=='')||(d['Tracking_Type'].toString().toLowerCase()!='hiddenaction'.toLowerCase())}catch(e){utag.DB(e)};break;case'458':try{c[458]|=(typeof d['page_type']!='undefined'&&d['page_type']!=''&&/home|category|product|cart|confirmation/i.test(d['page_type']))}catch(e){utag.DB(e)};break;case'469':try{c[469]|=(d['Page_Country'].toString().toLowerCase().indexOf('CN'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'483':try{c[483]|=(d['page_type']=='category')}catch(e){utag.DB(e)};break;case'484':try{c[484]|=(d['page_type'].toString().toLowerCase()=='home'.toLowerCase())}catch(e){utag.DB(e)};break;case'485':try{c[485]|=(d['page_type'].toString().toLowerCase()=='product'.toLowerCase())}catch(e){utag.DB(e)};break;case'487':try{c[487]|=(d['page_type'].toString().toLowerCase()=='cart'.toLowerCase())}catch(e){utag.DB(e)};break;case'489':try{c[489]|=(d['page_type'].toString().toLowerCase()=='confirmation'.toLowerCase())}catch(e){utag.DB(e)};break;case'490':try{c[490]|=(d['tealium_event'].toString().toLowerCase()=='cart_add'.toLowerCase())}catch(e){utag.DB(e)};break;case'491':try{c[491]|=(d['tealium_event'].toString().toLowerCase()=='user_register'.toLowerCase())}catch(e){utag.DB(e)};break;case'493':try{c[493]|=(d['tealium_event'].toString().toLowerCase()=='user_login'.toLowerCase())}catch(e){utag.DB(e)};break;case'532':try{c[532]|=(typeof d['Page_Country']!='undefined'&&/AT|BE|CH|DK|ES|FR|DE|GB|CA|IT|IE|NL|NO|PL|PT|SE|TR|FI/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'539':try{c[539]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('AU'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'540':try{c[540]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('CA'.toLowerCase())>-1&&d['Page_Language'].toString().toLowerCase().indexOf('EN'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'541':try{c[541]|=(d['Page_Section2'].toString().toLowerCase().indexOf('StoreLocator'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'545':try{c[545]|=(typeof d['Tags__Abort']=='undefined')||(typeof d['Tags__Abort']!='undefined'&&d['Tags__Abort']=='')||(d['Tags__Abort']!='1')}catch(e){utag.DB(e)};break;case'546':try{c[546]|=(d['tealium_event'].toString().toLowerCase()=='cart_add'.toLowerCase())}catch(e){utag.DB(e)};break;case'567':try{c[567]|=(d['Page_Country'].toString().toLowerCase()=='MX'.toLowerCase())}catch(e){utag.DB(e)};break;case'569':try{c[569]|=(/DE|ES|FR|IT|GB|US|CA|BR|NL|PL|NO|AT|BE|IE|PT/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'570':try{c[570]|=(/DE|FR|ES|NL|AT|SE|GB/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'571':try{c[571]|=(d['Tracking_EventId'].toString().toLowerCase().indexOf('WCS-D-X-Cart-Preview'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'576':try{c[576]|=(/^(EUR|CHF|DKK|NOK|PLN|SEK|TRY|GBP|USD|CAD)$/.test(d['Order_Currency']))}catch(e){utag.DB(e)};break;case'584':try{c[584]|=(d['Page_Country'].toString().toLowerCase()=='JP'.toLowerCase())||(d['Page_Country'].toString().toLowerCase()=='KR'.toLowerCase())}catch(e){utag.DB(e)};break;case'59':try{c[59]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/BR|AU|GB|FR|DE|IT|NL|ES|NO|DK|AT|SE|PL|PT|TR|IE|CH|BE|FI/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'594':try{c[594]|=(d['Page_Region'].toString().toLowerCase().indexOf('EU'.toLowerCase())>-1)||(d['Page_Country'].toString().toLowerCase().indexOf('US'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'595':try{c[595]|=(d['Action_Type'].toString().toLowerCase()=='view'.toLowerCase())}catch(e){utag.DB(e)};break;case'596':try{c[596]|=(/DE|FR|GB|IT|RU|MEA/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'63':try{c[63]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('BR'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'67':try{c[67]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/US|CA/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'682':try{c[682]|=(d['Page_Type'].toString().indexOf('Landing')>-1&&d['Page_Section2'].toString().indexOf('Remix')>-1)||(d['Page_Type'].toString().toLowerCase().indexOf('RemixHome'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'683':try{c[683]|=(/^(EUR|CHF|DKK|NOK|PLN|SEK|TRY|GBP|USD|CAD)$/.test(d['Order_Currency']))||(/MEA|RU/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'684':try{c[684]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/US|GB|DE|FR/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'689':try{c[689]|=(d['Page_Brand'].toString().toLowerCase()!='RB'.toLowerCase())}catch(e){utag.DB(e)};break;case'691':try{c[691]|=(d['Tracking_EventId'].toString().toLowerCase()!='LinkTracking:VirtualMirror'.toLowerCase()&&d['Tracking_EventId'].toString().toLowerCase()!='LinkTracking:Click'.toLowerCase()&&!/\[PageView:default:abort\]\[PageView:WCS-X-PDP-Loading-Ready\]$/i.test(d['Tracking_EventIdLog'])&&d['Page_DeviceType'].toString().toLowerCase()!='mobile'.toLowerCase())||(d['Tracking_EventId'].toString().toLowerCase()!='LinkTracking:VirtualMirror'.toLowerCase()&&d['Tracking_EventId'].toString().toLowerCase()!='LinkTracking:Click'.toLowerCase()&&d['Page_DeviceType'].toString().toLowerCase()=='mobile'.toLowerCase())}catch(e){utag.DB(e)};break;case'692':try{c[692]|=(typeof d['order_id']!='undefined'&&typeof d['order_id']!='undefined'&&d['order_id']!='')||(typeof d['Order_Id']!='undefined'&&d['Order_Id']!='')}catch(e){utag.DB(e)};break;case'693':try{c[693]|=(typeof d['Tags__Abort']=='undefined')||(typeof d['Tags__Abort']!='undefined'&&d['Tags__Abort']=='')||(d['Tags__Abort']!='1')}catch(e){utag.DB(e)};break;case'694':try{c[694]|=(d['page_type'].toString().toLowerCase()=='confirmation'.toLowerCase())}catch(e){utag.DB(e)};break;case'696':try{c[696]|=(/UK|GB|DE|FR|ES|NL|AT|SE/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'699':try{c[699]|=(d['Tracking_EventId'].toString().toLowerCase().indexOf('Cart-Preview'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'7':try{c[7]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('US'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'70':try{c[70]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('CN'.toLowerCase())<0&&d['Page_Country'].toString().toLowerCase().indexOf('BR'.toLowerCase())<0)||(typeof d['Page_Country']!='undefined'&&d['Page_Country']=='')}catch(e){utag.DB(e)};break;case'700':try{c[700]|=(d['dom.domain'].toString().toLowerCase().indexOf('acceptance1.ray-ban'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'701':try{c[701]|=(d['Tracking_EventId'].toString().toLowerCase()!='LinkTracking:VirtualMirror'.toLowerCase())||(d['tealium_event'].toString().toLowerCase().indexOf('cart_add'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'702':try{c[702]|=(d['Tracking_EventId'].toString().toLowerCase().indexOf('PageView:WCS-X-PDP-Loading-Ready'.toLowerCase())>-1&&d['Tracking_EventIdLog'].toString().indexOf('LinkTracking:VirtualMirror')<0)||(d['tealium_event'].toString().toLowerCase().indexOf('cart_add'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'703':try{c[703]|=(d['Action_PreviousEvent'].toString().toLowerCase().indexOf('ColorThumbs'.toLowerCase())<0)||(d['tealium_event'].toString().toLowerCase().indexOf('cart_add'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'75':try{c[75]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/JP/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'80':try{c[80]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&d['Page_Country'].toString().toLowerCase().indexOf('JP'.toLowerCase())<0&&d['Page_Country'].toString().toLowerCase().indexOf('IN'.toLowerCase())<0&&d['Page_Country'].toString().toLowerCase().indexOf('CN'.toLowerCase())<0)}catch(e){utag.DB(e)};break;case'81':try{c[81]|=(typeof d['Page_Platform']!='undefined'&&d['Page_Platform']=='')||(typeof d['Page_Platform']!='undefined'&&d['Page_Platform']!=''&&d['Page_Platform'].toString().toLowerCase()!='IN-STORE-APP'.toLowerCase())}catch(e){utag.DB(e)};break;case'86':try{c[86]|=(typeof d['Page_Country']!='undefined'&&d['Page_Country']!=''&&/CA|GB|FR|ES|AT|CH|DK|IE|DE|US|NL/i.test(d['Page_Country']))}catch(e){utag.DB(e)};break;case'88':try{c[88]|=(typeof d['Page_Url']!='undefined'&&d['Page_Url']!=''&&d['Page_Url'].toString().toLowerCase().indexOf('/greece/courage'.toLowerCase())>-1)}catch(e){utag.DB(e)};break;case'90':try{c[90]|=(typeof d['Page_Name']!='undefined'&&d['Page_Name']!=''&&/Remix:Landing|Remix:Remix:RemixHome|Remix:Landing/i.test(d['Page_Name']))}catch(e){utag.DB(e)};break;case'92':try{c[92]|=(typeof d['Page_Name']!='undefined'&&d['Page_Name']!=''&&/Home|Sun:(.*)Clp|Sun:(.*)Plp|Home:HomePage|Sunglasses:CategoryLanding|Sunglasses:CategoryListing|WorldwideWonderland|LifeCode/i.test(d['Page_Name']))}catch(e){utag.DB(e)};break;case'96':try{c[96]|=(typeof d['Tags__Abort']=='undefined')||(typeof d['Tags__Abort']!='undefined'&&d['Tags__Abort']=='')||(d['Tags__Abort']!='1')}catch(e){utag.DB(e)};break;}}};utag.pre=function(){utag.loader.initdata();utag.pagevars();try{utag.loader.RD(utag.data)}catch(e){utag.DB(e)};utag.loader.loadrules();};utag.loader.GET=function(){utag.cl={'_all_':1};utag.pre();utag.handler.extend=[function(a,b){try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext200")&&!b.tealium_ext200_WeAreInBeta){b.tealium_ext200_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext200"));}
else try{tealium_logContext='builder';tealium_log.builder.set('processing',b);{b.Tracking_EventId=b.Tracking_EventId||'';if(!b.Tracking_EventId.match(/^PageView:|^LinkTracking:/))
b.Tracking_EventId=((a=='view'?'PageView':'LinkTracking'))+(b.Tracking_EventId?':':'')+b.Tracking_EventId;b.Tracking_EventIdLog=utag.data.Tracking_EventIdLog=(utag.data.Tracking_EventIdLog||'')+'['+b.Tracking_EventId+']';b.Tracking_Pusher=b.Tracking_Pusher||"utag.track";b.Tracking_DataLayerType=(b.Tracking_EventId.match(/PageView:default/))?"IGNORE":b.Tracking_DataLayerType;b.Tracking_EventSerial_Ids=b.Tracking_EventId+(b.Tracking_EventId_Serial?"::"+b.Tracking_EventId_Serial:"");}
{var execute_cmds=function(cmds){for(var i=0;i<cmds.length;i++){try{utag_builder(cmds[i],b,{'local_a':a});}
catch(err){tealium_log.builder.set('error',b,'builder '+cmds[i]+': '+err.stack);}}};execute_cmds(['_resume','_checkGet','_checkStorage']);try{utag_repairer(b,"200-AllTagsBefore");}
catch(err){tealium_log.builder.set('error',b,'repairer: '+err.stack);}
execute_cmds(['Page_','Tags_','Device_','User_','Session_','Products-Recommendations-Order_','Errors_','Action_','Event-Source_','Events_']);}
{tealium_logContext='builder abort';b.Tags__Abort=utag_settings('Tags__Abort',b);if(b.Tags__Abort){b.Tracking_EventId=b.Tracking_EventId.match(/\:/)?b.Tracking_EventId.replace(/[\:].*/,':abort'):b.Tracking_EventId+':abort';b.Tracking_EventIdLog=utag.data.Tracking_EventIdLog=b.Tracking_EventIdLog.replace(/\]$/,':abort]');}else{execute_cmds(['_updateStorage']);}}
tealium_log.builder.set('done',b);}catch(err){tealium_log.builder.set('error',b,tealium_logContext+': '+err.stack);}
LuxotticaFrameworkVersion.alltagsbefore="20-03-06";}}catch(e){utag.DB(e)}},function(a,b,c,d){b._ccity=(typeof b['']!='undefined')?b['']:'';b._ccountry=(typeof b['User_Country']!='undefined')?b['User_Country']:'';b._ccurrency=(typeof b['Order_Currency']!='undefined')?b['Order_Currency']:'';b._ccustid=(typeof b['User_IdTimeStamp']!='undefined')?b['User_IdTimeStamp']:'';b._corder=(typeof b['Order_Id']!='undefined')?b['Order_Id']:'';b._cpromo=(typeof b['Order_DiscountCode']!='undefined')?b['Order_DiscountCode']:'';b._cship=(typeof b['Order_ShippingRevenue']!='undefined')?b['Order_ShippingRevenue']:'';b._cstate=(typeof b['']!='undefined')?b['']:'';b._cstore=(typeof b['Page_Country']!='undefined')?b['Page_Country']:'web';b._csubtotal=(typeof b['Order_ProductsRevenue']!='undefined')?b['Order_ProductsRevenue']:'';b._ctax=(typeof b['Order_TaxAmount']!='undefined')?b['Order_TaxAmount']:'';b._ctotal=(typeof b['Order_TotalAmount']!='undefined')?b['Order_TotalAmount']:'';b._ctype=(typeof b['Order_PaymentType']!='undefined')?b['Order_PaymentType']:'';b._czip=(typeof b['User_ZipCode']!='undefined')?b['User_ZipCode']:'';b._cprod=(typeof b['Products_Id_Array']!='undefined'&&b['Products_Id_Array'].length>0)?b['Products_Id_Array']:[];b._cprodname=(typeof b['Products_ModelName_Array']!='undefined'&&b['Products_ModelName_Array'].length>0)?b['Products_ModelName_Array']:[];b._cbrand=(typeof b['Products_Brand_Array']!='undefined'&&b['Products_Brand_Array'].length>0)?b['Products_Brand_Array']:[];b._ccat=(typeof b['Products_Category_Array']!='undefined'&&b['Products_Category_Array'].length>0)?b['Products_Category_Array']:[];b._ccat2=(typeof b['']!='undefined'&&b[''].length>0)?b['']:[];b._cquan=(typeof b['Products_Units_Array']!='undefined'&&b['Products_Units_Array'].length>0)?b['Products_Units_Array']:[];b._cprice=(typeof b['Products_RevenuePerUnit_Array']!='undefined'&&b['Products_RevenuePerUnit_Array'].length>0)?b['Products_RevenuePerUnit_Array']:[];b._csku=(typeof b['Products_Sku_Array']!='undefined'&&b['Products_Sku_Array'].length>0)?b['Products_Sku_Array']:[];b._cpdisc=(typeof b['Products_DiscountPerUnit_Array']!='undefined'&&b['Products_DiscountPerUnit_Array'].length>0)?b['Products_DiscountPerUnit_Array']:[];if(b._cprod.length==0){b._cprod=b._csku.slice()};if(b._cprodname.length==0){b._cprodname=b._csku.slice()};function tf(a){if(a==''||isNaN(parseFloat(a))){return a}else{return(parseFloat(a)).toFixed(2)}};b._ctotal=tf(b._ctotal);b._csubtotal=tf(b._csubtotal);b._ctax=tf(b._ctax);b._cship=tf(b._cship);for(c=0;c<b._cprice.length;c++){b._cprice[c]=tf(b._cprice[c])};for(c=0;c<b._cpdisc.length;c++){b._cpdisc[c]=tf(b._cpdisc[c])};},function(a,b){try{if(1){b.Storage_Tealium_Team=window.localStorage.getItem('tealium_team');b.Storage_Tealium_Log=window.localStorage.getItem('tealium_log');}}catch(e){utag.DB(e)}},function(a,b){try{if(b['event_name']=='cart_add'){b['tealium_event']='cart_add';}}catch(e){utag.DB(e)}try{if(b['event_name']=='cart_remove'){b['tealium_event']='cart_empty';}}catch(e){utag.DB(e)}try{if(b['event_name']=='cart_remove'){b['tealium_event']='cart_remove';}}catch(e){utag.DB(e)}try{if((b['page_type']=='cart'&&b['Page_Section1'].toString().toLowerCase().indexOf('cart'.toLowerCase())>-1&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='cart_view';}}catch(e){utag.DB(e)}try{if((b['page_type']=='category'&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='category_view';}}catch(e){utag.DB(e)}try{if((b['page_type']=='checkout'&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='checkout';}}catch(e){utag.DB(e)}try{if(b['event_name']=='email_signup'){b['tealium_event']='email_signup';}}catch(e){utag.DB(e)}try{if(b['tealium_event']=='view'){b['tealium_event']='page_view';}}catch(e){utag.DB(e)}try{if((b['page_type']=='product'&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='product_view';}}catch(e){utag.DB(e)}try{if((b['page_type']=='confirmation'&&b['tealium_event'].toString().indexOf('view')>-1)){b['tealium_event']='purchase';}}catch(e){utag.DB(e)}try{if((b['page_type']=='search'&&b['tealium_event'].toString().indexOf('view')>-1)||b['event_name'].toString().toLowerCase().indexOf('search_view'.toLowerCase())>-1){b['tealium_event']='search';}}catch(e){utag.DB(e)}try{if(b['event_name'].toString().toLowerCase().indexOf('share'.toLowerCase())>-1){b['tealium_event']='social_share';}}catch(e){utag.DB(e)}try{if(b['event_name']=='user_login'){b['tealium_event']='user_login';}}catch(e){utag.DB(e)}try{if(b['event_name']=='user_logout'){b['tealium_event']='user_logout';}}catch(e){utag.DB(e)}try{if(b['event_name']=='user_register'){b['tealium_event']='user_register';}}catch(e){utag.DB(e)}},function(a,b){try{if(/facet_applied|fav_add|exam_step1|exam_step2|exam_confirmation|vm_ready|vm_tryon|vm_render|vm_fit/i.test(b['event_name'])){b['tealium_event']=b['event_name']}}catch(e){utag.DB(e)}},function(a,b){try{if(b['dom.url'].toString().indexOf('/store-locator')>-1){b['tealium_event']='store_locator'}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext400")&&!b.tealium_ext400_WeAreInBeta){b.tealium_ext400_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext400"));}
else try{tealium_logContext='all tags after - clean';delete b.Tracking_EventId_Serial;if(b.Tracking_Pusher){delete b.Tracking_Pusher;}
delete window.tealium_ext000_automatic_qa__WeAreInBeta;delete window.tealium_ext000_WeAreInBeta;delete window.tealium_ext100_WeAreInBeta;delete b.tealium_ext200_WeAreInBeta;delete b.tealium_ext300_WeAreInBeta;delete b.tealium_ext400_WeAreInBeta;delete b.page_type;delete b.page_typeLast;delete b.Page_NameLast;delete b.Page_CodeLast;}catch(err){tealium_log.builder.set('error',b,tealium_logContext+': '+err.stack);}
LuxotticaFrameworkVersion.alltagsafter="19-12-02.0";}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(!b.Order_Currency){if(typeof b.Page_Country==="string"){var mapCountryCurrency={AT:'EUR',BE:'EUR',FR:'EUR',DE:'EUR',IE:'EUR',IT:'EUR',NL:'EUR',PT:'EUR',ES:'EUR',FI:'EUR',LU:'EUR',SK:'EUR',AU:'AUD',BR:'BRL',CA:'CAD',CH:'CHF',CN:'CNY',CZ:'CZK',DK:'DKK',GB:'GBP',UK:'GBP',HK:'HKD',IN:'INR',JP:'JPY',KR:'KRW',MX:'MXN',NO:'NOK',PL:'PLN',TR:'TRY',US:'USD',SE:'SEK',};b.Order_Currency=mapCountryCurrency[b.Page_Country.toUpperCase()];}}}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.url'].toString().toLowerCase().indexOf('cjevent'.toLowerCase())>-1&&b['dom.domain'].toString().toLowerCase().indexOf('ray-ban'.toLowerCase())>-1)){document.cookie="cjevent="+b['qp.cjevent']+";path=/;domain="+utag.cfg.domain+";expires="+(function(){var d=new Date();d.setTime(d.getTime()+(14*86400000));return d.toGMTString()})()+"";b['cp.cjevent']=b['qp.cjevent'];}}catch(e){utag.DB(e)}},function(a,b){try{if((b['dom.domain'].toString().toLowerCase().indexOf('ray-ban'.toLowerCase())>-1&&b['dom.url'].toString().toLowerCase().indexOf('cjevent'.toLowerCase())>-1)){try{b['qp.cjevent']=utag.data['qp.cjevent']}catch(e){}}}catch(e){utag.DB(e)}},function(a,b,c,d,e,f,g){if(1){d=b['_cprod'];if(typeof d=='undefined')return;c=[{'rmx':'Y'}];if(typeof b['Products_IsRemix_Array']==='undefined'){b['Products_IsRemix_Array']=[];}for(var h=0;h<d.length;h++){var m=false;for(e=0;e<c.length;e++){for(f in c[e]){g=new RegExp(f,'i');if(g.test(d[h])){b['Products_IsRemix_Array'][h]=c[e][f];m=true};};if(m)break};if(!m)b['Products_IsRemix_Array'][h]='N';};}},function(a,b,c,d,e,f,g){if(1){d=b['_cprod'];if(typeof d=='undefined')return;c=[{'rx':'Y'}];if(typeof b['Products_IsPrescription_Array']==='undefined'){b['Products_IsPrescription_Array']=[];}for(var h=0;h<d.length;h++){var m=false;for(e=0;e<c.length;e++){for(f in c[e]){g=new RegExp(f,'i');if(g.test(d[h])){b['Products_IsPrescription_Array'][h]=c[e][f];m=true};};if(m)break};if(!m)b['Products_IsPrescription_Array'][h]='N';};}},function(a,b){localStorage.setItem('tealiumData',JSON.stringify(utag.data));var TealiumCookiesArray=document.cookie.split(';');for(var i=0;i<TealiumCookiesArray.length;i++){if(TealiumCookiesArray[i].match(/tealium_/ig)||TealiumCookiesArray[i].match(/ABTesting/ig)){var tealiumCookieValue=TealiumCookiesArray[i].split('=');window.localStorage.setItem(tealiumCookieValue[0],tealiumCookieValue[1]);}};},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[2255]=='undefined'){utag.runonce.ext[2255]=1;if(b['dom.pathname'].toString().toLowerCase().indexOf('/mexico'.toLowerCase())>-1){!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="//configusa.veinteractive.com/tags/DF029B95/C6D4/46E0/95EF/5539C8EAF981/tag.js";var b=document.getElementsByTagName("head")[0];if(b)b.appendChild(a,b);else{var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}}();}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b.tealium_event=b.tealium_event||"";b.Page_Type=b.Page_Type||"";b.Page_Section2=b.Page_Section2||"";b.Products_ModelName_Csv=b.Products_ModelName_Csv||"";b.Search_Keyword=b.Search_Keyword||"";b.Products_Category_Csv=b.Products_Category_Csv||"";b.Search_FacetValues_String=b.Search_FacetValues_String||"";b.UDH_Rule_Event=(b.tealium_event==="cart_add")?"AddToCart":(b.tealium_event==="fav_add")?"AddToFav":(b.tealium_event==="search")?"Search":(b.tealium_event==="facet_applied")?"Filter":(b.tealium_event==="category_view"&&b.Page_Type.match(/Clp/i))?"Clp - Page View":(b.tealium_event==="category_view"&&b.Page_Type.match(/Plp/i))?"Plp - Page View":(b.tealium_event==="product_view"&&b.Page_Type.match(/Pdp|Pcp/i)&&!b.Event_Source.match(/ColorThumbs/i))?"Prod View":(b.tealium_event==="product_view"&&b.Event_Source.match(/ColorThumbs/i))?"Prod Variant View":"";b.UDH_Rule_EventSA=(b.tealium_event==="page_view"&&b.Page_Section2.match(/Remix/i))?"Landing - Page View - Custom":(b.Tracking_EventSerial_Ids==="WCS-X-PCP-NewConfiguration")?"Pcp - Events - Custom":(b.Action_PreviousEvent&&b.Action_PreviousEvent.match(/Click \[D PDP Prod CustomizeIt/i))?"Pdp - Click Link - Custom":(b.tealium_event==="store_locator")?"Page View - Store Locator":(b.tealium_event==="page_view"&&(document.location.href.match(/prescription-insurance-and-reimbursement/i)))?"Page View - Prescription":(b.Content_Box&&b.Content_Box.match(/Prod AddPrescription/i))?"Pdp - Click Add - Prescription":(b.tealium_event==="category_view"&&b.Page_Type==="Clp"&&document.location.href.match(/gift/i))?"Page View - Gifts":"";b.UDH_Rule_Interest=(b.Page_Section2.match(/Aviator/i)||b.Products_ModelName_Csv.match(/Aviator/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/Aviator|rb3025/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/rb3025/i)))?"- Icon Aviator ":(b.Page_Section2.match(/Clubmaster/i)||b.Products_ModelName_Csv.match(/CLUBMASTER/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/CLUBMASTER|RB3016/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/RB3016/i)))?"- Icon Clubmaster ":(b.Page_Section2.match(/Erika/i)||b.Products_ModelName_Csv.match(/ERIKA/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/ERIKA|RB4171/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/RB4171/i)))?"- Icon Erika ":(b.Page_Section2.match(/Justin/i)||b.Products_ModelName_Csv.match(/JUSTIN/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/JUSTIN|RB4165/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/RB4165/i)))?"- Icon Justin ":(b.Page_Section2.match(/New-wayfarer/i)||b.Products_ModelName_Csv.match(/NEW WAYFARER/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/NEW WAYFARER|WAYFARER new|RB2132/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/RB2132/i)))?"- Icon New Wayfarer ":(b.Page_Section2.match(/Wayfarer/i)||b.Products_ModelName_Csv.match(/ORIGINAL WAYFARER/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/ORIGINAL WAYFARER|WAYFARER|RB2140/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/RB2140/i)))?"- Icon Original Wayfarer ":(b.Page_Section2.match(/Round-style/i)||b.Products_ModelName_Csv.match(/ROUND METAL/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/ROUND|RB3447/i))||(b.Products&&Object.values(b.Products)[0].Id.match(/RB3447/i)))?"- Icon Round Metal ":"";b.UDH_Rule_Interest+=(b.UDH_Rule_Event.match(/View/i)&&b.Page_Section1.match(/Opt/i)||(b.Products_Id_Array&&b.Products_Id_Array[0].match(/RX/i)))?"- Eyeglasses ":"";b.UDH_Rule_Interest+=((b.UDH_Rule_Event==="Pdp - Prod View"&&b.Page_Section1.match(/Rox/i))||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/prescription/i)))?"- Prescription ":"";b.UDH_Rule_Interest+=(b.Products_Category_Csv.match(/Giftcard/i)||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/gift/i)))?"- Gifts ":"";b.UDH_Rule_Interest+=(b.Page_Section2.match(/Junior/i)||(b.Products&&Object.values(b.Products)[0].Sku.match(/RY|RJ/i))||(b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/children|kid|school|child|junior/i)))?"- Kids ":"";b.UDH_Rule_Interest+=((b.UDH_Rule_Event=="Search"&&b.Search_Keyword.match(/woman|women|feminine/i))||(b.UDH_Rule_Event.match(/Filter/i)&&b.Search_FacetValues_String.match(/GENDER=women/i))||b.Page_Section2.match(/women|woman/i))?"- Woman ":"";b.UDH_Rule_Interest+=(b.Products&&Object.values(b.Products)[0].Id.match(/Rmx_/i))?"- Custom ":"";if(b.UDH_Rule_Event&&b.UDH_Rule_Interest){b.UDH_Rule=b.UDH_Rule_Event+b.UDH_Rule_Interest;}else if(b.UDH_Rule_EventSA){b.UDH_Rule=b.UDH_Rule_EventSA;}
if(b.UDH_Rule){console.info("%cUDH Rule: "+"%c"+b.UDH_Rule,"color:orange;","color:none;")}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['qp.adobetest'].toString().indexOf('on')>-1){document.cookie="adobetest="+b['qp.adobetest']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.adobetest']=b['qp.adobetest'];}}catch(e){utag.DB(e)}},function(a,b){try{utag.runonce=utag.runonce||{};utag.runonce.ext=utag.runonce.ext||{};if(typeof utag.runonce.ext[2473]=='undefined'){utag.runonce.ext[2473]=1;if((b['Page_Country'].toString().toLowerCase()=='US'.toLowerCase()&&b['Page_Brand'].toString().toLowerCase()!='AR'.toLowerCase())){(!tealium_cookieR('CONSENTMGR'))?tealium_cookieW("CONSENTMGR","consent:true"):'';}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['_cprod']!='undefined'&&b['_cprod']!=''&&typeof b['_cprice']!='undefined'&&b['_cprice']=='')){b['_cprice']=b['Products_Price_Array']}}catch(e){utag.DB(e)}},function(a,b){try{if(typeof b['cp.tealium_data_tags_zanox_publisherId']=='undefined'){document.cookie="tealium_data_tags_zanox_publisherId="+b['qp.zanpid']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.tealium_data_tags_zanox_publisherId']=b['qp.zanpid'];}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b['Tags_Zanox_PublisherId']=b['cp.tealium_data_tags_zanox_publisherId']}}catch(e){utag.DB(e)}},function(a,b){try{document.cookie="tealium_data_tags_headway_hwdId="+b['qp.hwdid']+";path=/;domain="+utag.cfg.domain+";expires=";b['cp.tealium_data_tags_headway_hwdId']=b['qp.hwdid'];}catch(e){utag.DB(e)}},function(a,b){try{if(1){b['Tags_Headway_Hwdid']=b['cp.tealium_data_tags_headway_hwdId']}}catch(e){utag.DB(e)}}];utag.handler.cfg_extend=[{"end":0,"blr":1,"bwq":0,"alr":0,"id":"2303"},{"end":0,"id":"2214","alr":1,"bwq":0,"blr":0},{"end":0,"blr":1,"bwq":0,"alr":0,"id":"2378"},{"id":"2215","bwq":0,"alr":0,"blr":1,"end":0},{"blr":1,"id":"2371","bwq":0,"alr":0,"end":0},{"id":"2324","bwq":0,"alr":0,"blr":1,"end":0},{"end":1,"alr":0,"bwq":0,"id":"2312","blr":0},{"bwq":0,"alr":0,"id":"2357","blr":1,"end":0},{"blr":0,"bwq":0,"alr":1,"id":"2300","end":0},{"end":0,"blr":0,"bwq":0,"alr":1,"id":"2301"},{"id":"2310","alr":1,"bwq":0,"blr":0,"end":0},{"blr":0,"id":"2311","bwq":0,"alr":1,"end":0},{"end":1,"alr":0,"bwq":0,"id":"157","blr":0},{"end":1,"id":"2255","alr":0,"bwq":0,"blr":0},{"bwq":0,"alr":0,"id":"2467","blr":1,"end":0},{"blr":1,"bwq":0,"alr":0,"id":"2468","end":0},{"end":0,"blr":1,"alr":0,"bwq":0,"id":"2473"},{"blr":0,"id":"2476","bwq":0,"alr":1,"end":0},{"blr":0,"bwq":0,"alr":1,"id":"2479","end":0},{"blr":0,"id":"2480","bwq":0,"alr":1,"end":0},{"id":"2481","alr":1,"bwq":0,"blr":0,"end":0},{"end":0,"alr":1,"bwq":0,"id":"2482","blr":0}];utag.loader.initcfg=function(){utag.loader.cfg={"391":{load:4,tcat:9,send:1,v:202002171630,wait:0,tid:1191},"162":{load:(utag.cond[545]&&utag.cond[80]&&utag.cond[81]),tcat:9,send:1,v:201909240824,wait:0,tid:20010},"448":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[489]),tcat:9,send:1,v:202005110914,wait:0,tid:26002},"275":{load:(utag.cond[693]&&utag.cond[428]&&utag.cond[431]&&utag.cond[689]&&utag.cond[424]),tcat:1,send:1,v:202005181630,wait:1,tid:19063},"486":{load:(utag.cond[545]&&utag.cond[428]&&utag.cond[431]&&utag.cond[424]),tcat:1,send:1,v:202004241253,wait:1,tid:19063},"485":{load:4,send:(utag.cond[96]&&utag.cond[428]&&utag.cond[431]&&utag.cond[691]&&utag.cond[7]&&utag.cond[699]),tcat:6,v:202004231356,wait:0,tid:20108},"191":{load:(utag.cond[545]&&utag.cond[428]&&utag.cond[119]),tcat:1,send:1,v:201909240824,wait:1,tid:7110},"211":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[28]&&utag.cond[484]),tcat:9,send:1,v:201909240824,wait:1,tid:8009},"212":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[28]&&utag.cond[484]),tcat:1,send:1,v:201909240824,wait:1,tid:3015},"241":{load:4,send:(utag.cond[545]&&utag.cond[125]),tcat:1,v:201912031648,wait:1,tid:3117},"216":{load:(utag.cond[545]&&utag.cond[106]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"196":{load:(utag.cond[545]&&utag.cond[88]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"231":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[3]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"232":{load:(utag.cond[545]&&utag.cond[63]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"233":{load:(utag.cond[545]&&utag.cond[63]),tcat:9,send:1,v:201911221359,wait:1,tid:2045},"224":{load:(utag.cond[545]&&utag.cond[469]&&utag.cond[493]),tcat:9,send:1,v:201910211046,wait:1,tid:20011},"229":{load:(utag.cond[545]&&utag.cond[469]&&utag.cond[491]),tcat:9,send:1,v:201910211046,wait:1,tid:20011},"373":{load:(utag.cond[545]&&utag.cond[539]),tcat:7,send:1,v:201910211046,wait:1,tid:6026},"168":{load:(utag.cond[545]&&utag.cond[7]&&utag.cond[28]&&utag.cond[3]),tcat:9,send:1,v:201909240824,wait:1,tid:20011},"200":{load:(utag.cond[545]&&utag.cond[105]&&utag.cond[90]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"261":{load:(utag.cond[545]&&utag.cond[63]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"235":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[128]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"203":{load:(utag.cond[545]&&utag.cond[70]&&utag.cond[92]),tcat:7,send:1,v:201909240824,wait:1,tid:16018},"215":{load:(utag.cond[545]&&utag.cond[70]&&utag.cond[3]),tcat:7,send:1,v:201909240824,wait:1,tid:16044},"192":{load:(utag.cond[545]&&utag.cond[86]&&utag.cond[3]&&utag.cond[147]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"315":{load:(utag.cond[545]&&utag.cond[539]&&utag.cond[3]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"236":{load:(utag.cond[545]&&utag.cond[63]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"266":{load:(utag.cond[545]&&utag.cond[63]),tcat:9,send:1,v:201909240824,wait:1,tid:22019},"240":{load:(utag.cond[545]&&utag.cond[63]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"279":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[458]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"298":{load:(utag.cond[545]&&utag.cond[484]),tcat:9,send:1,v:201909240824,wait:1,tid:2011},"305":{load:(utag.cond[545]&&utag.cond[483]),tcat:9,send:1,v:201909240824,wait:1,tid:2011},"313":{load:(utag.cond[545]&&utag.cond[485]),tcat:9,send:1,v:201909240824,wait:1,tid:2011},"314":{load:(utag.cond[545]&&utag.cond[490]),tcat:9,send:1,v:201909240824,wait:1,tid:2011},"303":{load:(utag.cond[545]&&utag.cond[487]),tcat:9,send:1,v:201909240824,wait:1,tid:2011},"302":{load:(utag.cond[545]&&utag.cond[489]),tcat:9,send:1,v:201909240824,wait:1,tid:2011},"311":{load:(utag.cond[545]&&utag.cond[539]),tcat:9,send:1,v:201911221359,wait:1,tid:2045},"417":{load:(utag.cond[545]&&utag.cond[67]&&utag.cond[3]),tcat:9,send:1,v:201912191142,wait:1,tid:3004},"453":{load:(utag.cond[545]&&utag.cond[126]&&utag.cond[489]),tcat:9,send:1,v:201912191142,wait:1,tid:18032},"353":{load:(utag.cond[545]&&utag.cond[532]&&utag.cond[489]),tcat:9,send:1,v:201912191142,wait:1,tid:4001},"358":{load:(utag.cond[545]&&utag.cond[540]),tcat:9,send:1,v:201909240824,wait:1,tid:4001},"359":{load:(utag.cond[545]&&utag.cond[540]&&utag.cond[541]),tcat:9,send:1,v:201909240824,wait:1,tid:4001},"360":{load:(utag.cond[545]&&utag.cond[540]&&utag.cond[3]),tcat:9,send:1,v:201909240824,wait:1,tid:4001},"44":{load:(utag.cond[545]&&utag.cond[118]),tcat:9,send:1,v:201909240824,wait:1,tid:7114},"372":{load:(utag.cond[545]&&utag.cond[59]&&utag.cond[3]),tcat:9,send:1,v:201912191142,wait:1,tid:7050},"156":{load:(utag.cond[545]&&utag.cond[67]&&utag.cond[3]),tcat:9,send:1,v:201909240824,wait:1,tid:7050},"307":{load:(utag.cond[545]&&utag.cond[539]),tcat:9,send:1,v:201909240824,wait:1,tid:7132},"310":{load:(utag.cond[545]&&utag.cond[539]&&utag.cond[489]),tcat:9,send:1,v:201909240824,wait:1,tid:7114},"379":{load:(utag.cond[545]&&utag.cond[539]),tcat:9,send:1,v:202004291435,wait:1,tid:7132},"383":{load:(utag.cond[545]&&utag.cond[539]&&utag.cond[489]),tcat:9,send:1,v:202004291435,wait:1,tid:7132},"385":{load:(utag.cond[545]&&utag.cond[539]),tcat:9,send:1,v:201911221359,wait:1,tid:2045},"388":{load:(utag.cond[545]&&utag.cond[700]),tcat:9,send:1,v:202005110914,wait:1,tid:20067},"395":{load:(utag.cond[545]&&utag.cond[539]&&utag.cond[3]),tcat:9,send:1,v:202001291513,wait:1,tid:16017},"405":{load:(utag.cond[545]&&utag.cond[571]),tcat:9,send:1,v:201911201603,wait:1,tid:20010},"409":{load:(utag.cond[545]&&utag.cond[567]),tcat:1,send:1,v:201911221359,wait:1,tid:2063},"267":{load:(utag.cond[545]&&utag.cond[112]),tcat:9,send:1,v:201911221359,wait:1,tid:2045},"410":{load:(utag.cond[545]&&utag.cond[569]&&utag.cond[127]),tcat:9,send:1,v:202004231351,wait:1,tid:3108},"397":{load:(utag.cond[545]&&utag.cond[7]&&utag.cond[484]),tcat:9,send:1,v:201909240824,wait:1,tid:4001},"459":{load:(utag.cond[545]&&utag.cond[683]),tcat:9,send:1,v:201911221416,wait:1,tid:4049},"419":{load:(utag.cond[545]&&utag.cond[576]),tcat:9,send:1,v:201912191142,wait:1,tid:4049},"441":{load:(utag.cond[545]&&utag.cond[67]&&utag.cond[489]),tcat:9,send:1,v:201909240824,wait:1,tid:7132},"442":{load:(utag.cond[545]&&utag.cond[67]),tcat:9,send:1,v:201912191142,wait:1,tid:7132},"445":{load:(utag.cond[545]&&utag.cond[584]),tcat:9,send:1,v:201909240824,wait:1,tid:7132},"446":{load:(utag.cond[545]&&utag.cond[584]&&utag.cond[489]),tcat:9,send:1,v:201909240824,wait:1,tid:7132},"465":{load:4,send:(utag.cond[545]&&utag.cond[596]),tcat:9,v:201912191142,wait:1,tid:4049},"415":{load:(utag.cond[545]&&utag.cond[570]),tcat:9,send:1,v:201912191142,wait:1,tid:1024},"416":{load:(utag.cond[545]&&utag.cond[570]&&utag.cond[489]),tcat:9,send:1,v:201912191142,wait:1,tid:1024},"436":{load:(utag.cond[545]&&utag.cond[63]&&utag.cond[489]),tcat:9,send:1,v:201909240824,wait:1,tid:20010},"434":{load:(utag.cond[545]&&utag.cond[75]&&utag.cond[489]),tcat:1,send:1,v:201909240824,wait:1,tid:25004},"460":{load:(utag.cond[545]&&utag.cond[567]&&utag.cond[491]),tcat:9,send:1,v:201909240824,wait:1,tid:7132},"462":{load:(utag.cond[545]&&utag.cond[595]&&utag.cond[469]),tcat:7,send:1,v:202002121052,wait:1,tid:6026},"463":{load:(utag.cond[545]&&utag.cond[469]&&utag.cond[546]),tcat:7,send:1,v:201910211046,wait:1,tid:6026},"464":{load:(utag.cond[545]&&utag.cond[67]),tcat:9,send:1,v:201911221700,wait:1,tid:2045},"480":{load:(utag.cond[96]&&utag.cond[682]),tcat:9,send:1,v:201911211151,wait:1,tid:4049},"422":{load:(utag.cond[545]&&utag.cond[428]&&utag.cond[431]&&utag.cond[7]&&utag.cond[424]),tcat:0,send:1,v:202001211744,wait:1,tid:20064},"481":{load:(utag.cond[96]&&utag.cond[7]&&utag.cond[682]),tcat:9,send:1,v:201912191142,wait:1,tid:4049},"482":{load:(utag.cond[96]&&utag.cond[684]),tcat:1,send:1,v:202001291528,wait:1,tid:15032},"487":{load:(utag.cond[693]&&utag.cond[696]&&utag.cond[694]&&utag.cond[692]),tcat:9,send:1,v:202003250907,wait:1,tid:3004},"488":{load:(utag.cond[96]&&utag.cond[539]),tcat:9,send:1,v:202004101446,wait:1,tid:4049},"493":{load:(utag.cond[96]&&utag.cond[75]),tcat:9,send:1,v:202003301644,wait:1,tid:20010},"495":{load:(utag.cond[96]&&utag.cond[75]),tcat:9,send:1,v:202003301644,wait:1,tid:20010},"496":{load:(utag.cond[96]&&utag.cond[567]&&utag.cond[701]&&utag.cond[702]&&utag.cond[703]),tcat:6,send:1,v:202005190940,wait:1,tid:20113}};utag.loader.cfgsort=["391","162","448","275","486","485","191","211","212","241","216","196","231","232","233","224","229","373","168","200","261","235","203","215","192","315","236","266","240","279","298","305","313","314","303","302","311","417","453","353","358","359","360","44","372","156","307","310","379","383","385","388","395","405","409","267","410","397","459","419","441","442","445","446","465","415","416","436","434","460","462","463","464","480","422","481","482","487","488","493","495","496"];}
utag.loader.initcfg();try{utag.gdpr.applyConsentState();}catch(e){utag.DB(e)}}
utag.gdpr={consent_prompt:{noShow:false,isEnabled:true,content:{}},preferences_prompt:{single_cookie:false,noShow:false,isEnabled:true,defaultState:true,content:{},categories:{"search":{"enabled":"0","id":4},"mobile":{"enabled":"0","id":12},"social":{"id":7,"enabled":"1"},"email":{"id":5,"enabled":"0"},"affiliates":{"enabled":"0","id":2},"analytics":{"enabled":"1","id":1},"cookiematch":{"id":10,"enabled":"0"},"crm":{"enabled":"0","id":15},"misc":{"enabled":"1","id":9},"personalization":{"id":6,"enabled":"0"},"monitoring":{"id":14,"enabled":"0"},"big_data":{"id":8,"enabled":"0"},"display_ads":{"enabled":"0","id":3},"cdp":{"id":11,"enabled":"0"},"engagement":{"enabled":"0","id":13}}},getCategories:function(onlyEnabledCats){if(!(utag.gdpr.preferences_prompt&&utag.gdpr.preferences_prompt.categories)){return[];}
var length=utag.gdpr.keys(utag.gdpr.preferences_prompt.categories).length,cats=new Array(length),gdpr_cats=utag.gdpr.preferences_prompt.categories;for(var cat in gdpr_cats){if(!gdpr_cats.hasOwnProperty(cat)){continue;}
if(onlyEnabledCats&&!gdpr_cats[cat].enabled){continue;}
cats[gdpr_cats[cat].id-1]=cat;}
for(var i=cats.length-1;i>=0;i--){if(cats[i]===undefined){cats.splice(i,1);}}
return cats;},getSelectedCategories:function(){var sc=[],gc=utag.gdpr.getCategories(),cs=utag.gdpr.getConsentState(),i;try{if(typeof cs==="number"){return(parseInt(cs)===1)?gc:sc;}else{for(i in utag.loader.GV(cs)){if("1"===cs[i].ct){sc.push(gc[i]);}}}}catch(e){utag.DB(e);}
return sc;},getCategoryLanguage:function(category){if(!(utag.gdpr.preferences_prompt&&utag.gdpr.preferences_prompt.categories)){return[];}
var language=utag.gdpr.getLanguage(utag.gdpr.preferences_prompt);return utag.gdpr.preferences_prompt.languages[language].categories[category];},getConsentState:function(){var re=/^c\d+/,cd=utag.gdpr.getCookieValues(),np=1,gc=utag.gdpr.getCategories(),pc=(function(gc){var pc=[];for(var i=0;i<gc.length;i++){pc.push({ct:null,name:gc[i]});}
return pc;}(gc)),filteredCD=(function(cd){var d={};for(var prop in cd){if(!cd.hasOwnProperty(prop)){continue;}
if(re.test(prop)){d[prop]=cd[prop];}}
return d;}(cd));filteredCD=utag.gdpr.sortedObject(filteredCD,function(val1,val2){var idx1=parseInt((val1||"").substring(1),10),idx2=parseInt((val2||"").substring(1),10);if(isNaN(idx1)||isNaN(idx2)){return 0;}
return idx1>idx2?1:-1;});for(var cn in utag.loader.GV(filteredCD)){if(cn.match(re)){var idx=parseInt(cn.substring(1),10)-1,ct=gc[idx];pc[idx].ct=cd[cn];if(cd[cn]*1!==1){np=0;}}}
if(cd.consent){if(cd.consent===true||cd.consent==="true"){return np?np:pc;}else{return-1;}}else if(np===0){return pc;}else{return 0;}},getCookieValues:function(){var values={},rcd=(function(){var value="; "+document.cookie;var parts=value.split("; CONSENTMGR=");if(parts.length==2)return utag.ut.decode(parts.pop().split(";").shift());}()),cd=utag.gdpr.typeOf(rcd)==="string"?rcd:"";if(utag.data){utag.data["cp.CONSENTMGR"]=cd;}
if(cd){var i,optOut,optOutData=decodeURI(cd).split("|");for(i=0;i<optOutData.length;i++){optOut=optOutData[i].split(":");values[optOut[0]]=optOut[1];}}
utag.gdpr.values=values;return values;},getDeTokenizedContent:function(data,_lang){if(utag.gdpr.isEmpty(data))return null;var reg=/{{(.*?)}}/gm,token_match=/[{}]/g,two_part=/display_ads|big_data/;var lang=utag.gdpr.getLanguage(data,_lang),langData=data.languages[lang];for(var t in langData.common_tokens){if(!langData.common_tokens.hasOwnProperty(t)){continue;}
var replacements=langData.common_tokens[t].match(reg);if(replacements){for(var i=0;i<replacements.length;i++){var token=replacements[i].replace(token_match,"");langData.common_tokens[t]=langData.common_tokens[t].replace(replacements[i],langData.custom_tokens[token]);}}}
function tokenReplace(str){var replacements=str.match(reg);if(replacements){for(var i=0;i<replacements.length;i++){var token=replacements[i].replace(/[{}]/g,"")||"";if(langData.common_tokens[token]){str=str.replace(replacements[i],langData.common_tokens[token]);}else if(langData.custom_tokens[token]){str=str.replace(replacements[i],langData.custom_tokens[token]);}else if(langData.categories&&token.indexOf("category_")>-1){var split_token=token.split("_");if(token.match(two_part)){split_token[1]=split_token[1]+'_'+split_token[2];split_token.splice(2,1);}
var category=langData.categories[split_token[1]],key={"title":"name","description":"notes"}[split_token[2]];if(category[key]){str=str.replace(replacements[i],category[key]);}}}}
return str;}
return{js:tokenReplace(data.content.js),html:tokenReplace(data.content.html),css:tokenReplace(data.content.css)};},getLanguage:function(promptData,preferredLang){var udoName=window.utag.udoname||"utag_data";var dataObject=window.utag.data||window[udoName];var langLocale=(preferredLang||dataObject[window.utag.cfg.gdprDLRef]||(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)).toLowerCase();var lang=(langLocale||"").split("-")[0];if(!promptData){return langLocale;}
var languages=promptData.languages;return languages[langLocale]?langLocale:languages[lang]?lang:promptData.defaultLang;},getTokenLanguage:function(promptData,token,lang){if(utag.gdpr.isEmpty(promptData))return null;lang=lang||utag.gdpr.getLanguage(promptData);var langData=promptData.languages[lang];if(utag.gdpr.isEmpty(langData))return null;if(utag.gdpr.isEmpty(promptData))return null;if(utag.gdpr.isEmpty(token))return null;if(langData.common_tokens[token]){return langData.common_tokens[token];}else if(langData.custom_tokens[token]){return langData.custom_tokens[token];}else if(langData.categories&&token.indexOf("category_")>-1){var split_token=token.split("_"),category=langData.categories[split_token[1]];if(category[split_token[2]]){return category[split_token[2]];}}
return null;},setCookie:function(cookieData){utag.DB("Consent Manager: Set Cookie");if(utag.gdpr.typeOf(cookieData)!=="object"){return;}
if(utag.gdpr.keys(cookieData).length===0){return;}
if(utag.gdpr.typeOf(cookieData.consent)!=="boolean"&&!(utag.gdpr.typeOf(cookieData.consent)==="string"&&(cookieData.consent.toLowerCase()==="true"||cookieData.consent.toLowerCase()==="false"))){utag.DB("Invlaid option sent to setCookie [consent must be true/false]");return;}
if(utag.gdpr.typeOf(cookieData.ts)!=="number"||(cookieData.ts.toString().length!==13)){cookieData.ts=new Date().getTime();}
var cp=utag.cfg.consentPeriod||90;utag.gdpr.values=cookieData;var mo2Val=[];for(var i in utag.loader.GV(cookieData)){if(/^(consent|ts|c\d+)$/.test(i)){mo2Val.push(i+":"+cookieData[i]);}else{utag.DB("Invlaid option sent to setCookie ["+i+"], is unkown");}}
var cD=new Date();cD.setDate(cD.getDate()+cp);document.cookie="CONSENTMGR="+encodeURI(mo2Val.join("|"))+";domain="+utag.cfg.domain+";path=/; expires="+cD.toGMTString()+";";utag.data["cp.CONSENTMGR"]=mo2Val.join("|");},setCookieValue:function(key,value){utag.DB("Consent Manager: Set Cookie Value");if(!key||(utag.gdpr.typeOf(value)==="undefined"||utag.gdpr.typeOf(value)==="null"))return;var cookieData=utag.handler.C(utag.gdpr.getCookieValues());cookieData[key]=value;utag.gdpr.setCookie(cookieData);},setConsentValue:function(_response){utag.DB("Consent Manager: Set Consent Value: "+_response);var valid={true:1,"true":1,1:1,false:0,"false":0,0:0};if(!valid.hasOwnProperty(_response)){throw new Error("No response supplied");}
var response=valid[_response]===1;utag.gdpr.setCookieValue("ts",new Date().getTime());utag.gdpr.setCookieValue("consent",response);utag.gdpr.processQueue(response);var xhr=new XMLHttpRequest();xhr.open("POST","https://collect.tealiumiq.com/event");if(response){xhr.send('{"tealium_account":"luxottica","tealium_profile":"'+(utag.gdpr.eventProfile||"main")+'","tealium_event":"grant_full_consent","consent_categories":"'+utag.gdpr.getCategories(true).join(", ")+'","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}else{xhr.send('{"tealium_account":"luxottica","tealium_profile":"'+(utag.gdpr.eventProfile||"main")+'","tealium_event":"decline_consent","consent_categories":"","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}},setPreferencesValues:function(categories,noCollect){utag.DB("Consent Manager: Set Preferences Values");var cookie_data=utag.gdpr.getCookieValues(),lookup={},i,rgx=/\D/,names=utag.gdpr.getCategories(),chosen_list=[],consent_seen=false,decline_seen=false,crgx=/c\d/,fld;if(utag.gdpr.typeOf(categories)!=="object"){utag.DB("Categories is not type object.");return;}
try{for(i=0;i<names.length;i++){lookup[names[i]]='c'+(i+1);}
for(var cat in categories){if(!categories.hasOwnProperty(cat)){continue;}
if(categories[cat]!=="1"&&categories[cat]!=="0"&&categories[cat]!==1&&categories[cat]!==0){continue;}
if(cat.match(rgx)){cookie_data[lookup[cat]]=categories[cat];if(categories[cat]!=0){chosen_list.push(cat);}}else{cookie_data["c"+cat]=categories[cat];if(categories[cat]!=0){chosen_list.push(names[cat-1]);}}}
for(fld in utag.loader.GV(cookie_data)){if(fld.match(crgx)){if(cookie_data[fld]!=0){consent_seen=true;}else{decline_seen=true;}}}
cookie_data["ts"]=new Date().getTime();cookie_data["consent"]=consent_seen;utag.gdpr.setCookie(cookie_data);utag.gdpr.processQueue(consent_seen);}catch(e){utag.DB(e);}
if(noCollect){return;}
var xhr=new XMLHttpRequest();xhr.open("POST","https://collect.tealiumiq.com/event");if(decline_seen){if(consent_seen){xhr.send('{"tealium_account":"luxottica","tealium_profile":"'+(utag.gdpr.eventProfile||"main")+'","tealium_event":"grant_partial_consent","consent_categories":"'+chosen_list.join(",")+'","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}else{xhr.send('{"tealium_account":"luxottica","tealium_profile":"'+(utag.gdpr.eventProfile||"main")+'","tealium_event":"decline_consent","consent_categories":"","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}}else if(!decline_seen&&consent_seen){xhr.send('{"tealium_account":"luxottica","tealium_profile":"'+(utag.gdpr.eventProfile||"main")+'","tealium_event":"grant_full_consent","consent_categories":"'+utag.gdpr.getCategories(true).join(", ")+'","policy":"gdpr", "tealium_visitor_id" : "'+utag.data['cp.utag_main_v_id']+'"}');}},setAllCategories:function(state,noCollect){utag.DB("Consent Manager: Set Preferences All Categories: "+state);if(state===undefined)return;if(utag.gdpr.typeOf(state)!=="boolean")return;var allCats=utag.gdpr.getCategories(),prefs={};for(var i=0;i<allCats.length;i++){prefs[""+(i+1)]=state?"1":"0";}
utag.gdpr.setPreferencesValues(prefs,noCollect);},setPreferencesFromList:function(list){utag.DB("Consent Manager: Set Preferences From List");var prefs={},allCats=utag.gdpr.getCategories();if(utag.gdpr.typeOf(list)!=="array"){utag.DB("List should be of type array");return;}
for(var i=0;i<list.length;i++){prefs[list[i]]="1";}
for(var j=0;j<allCats.length;j++){if(!prefs[allCats[j]]){prefs[allCats[j]]="0";}}
utag.gdpr.setPreferencesValues(prefs);},refreshCookie:function(){try{utag.gdpr.setCookie(utag.gdpr.getCookieValues());}catch(e){}},processQueue:function(consent_seen){utag.DB("Consent Manager: Processing Consent Queue");if(utag.gdpr.noqueue){return;}
if(!consent_seen){utag.gdpr.queue=[];return;}
utag.DB("Consent Manager: Processing Consent Queue Length: "+utag.gdpr.queue.length);var event,data,conds={};utag.gdpr.merge(conds,utag.cond);for(var i=0;i<utag.gdpr.queue.length;i++){event=utag.gdpr.queue[i];if(!(event.cfg&&event.cfg.uids)){data={};utag.loader.RD(data,event.event);utag.gdpr.merge(data,event.data);for(var cond in conds){if(!conds.hasOwnProperty(cond)){continue;}
conds[cond]=0;}
utag.loader.loadrules(data,conds);event.cfg=event.cfg||{};event.cfg.uids=[];utag.cond=conds;utag.loader.initcfg();for(var id in utag.loader.GV(utag.loader.cfg)){if(!utag.gdpr.omittedTags[id]&&utag.loader.cfg[id].load){event.cfg.uids.push(id);}}}
utag.track_old.call(this,event);}
utag.gdpr.queue=[];},typeOf:function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();},merge:function(a,b,c,d){if(c){for(d in utag.loader.GV(b)){a[d]=b[d];}}else{for(d in utag.loader.GV(b)){if(typeof a[d]=="undefined")
a[d]=b[d];}}},applyConsentState:function(){utag.DB("Consent Manager: Applying consent");try{var i,lc=utag.loader.cfg,cs=utag.gdpr.getConsentState(),ot=utag.gdpr.omittedTags;if(typeof cs==="number"){if((utag.gdpr.consent_prompt.isEnabled&&parseInt(cs)!==1)||((!utag.gdpr.consent_prompt.isEnabled&&utag.gdpr.preferences_prompt.isEnabled)&&parseInt(cs)===-1)){utag.DB("Consent Manager: Setting all tags to off");for(i in utag.loader.GV(lc)){if(typeof ot[i]==="undefined"){lc[i].load=0;}}}}else{utag.DB("Consent Manager: Partial Consent");for(i in utag.loader.GV(lc)){if(typeof ot[i]==="undefined"){if(lc[i].tcat>0&&cs[lc[i].tcat-1].ct==0){lc[i].load=0;}}}}}catch(e){utag.DB(e);}},updateConsentCookie:function(consent_categories){utag.DB("Consent Manager: Updating consent cookie");var list,listType=utag.gdpr.typeOf(consent_categories);if(listType==="string"){list=consent_categories.split(/\s*,\s*/);}else if(listType!=="array"){list=[];}else{list=consent_categories.slice();}
if(list.length===0){utag.gdpr.setConsentValue(false);utag.gdpr.setAllCategories(false);return;}else{utag.gdpr.setConsentValue(true);}
utag.gdpr.setPreferencesFromList(list);},keys:function(obj){if(Object.keys){return Object.keys(obj);}
var array=[];for(var prop in obj){if(!obj.hasOwnProperty(prop)){continue;}
array.push(prop);}
return array;},sortedObject:function(obj,func){var _obj={};if(obj!==undefined){var _k1=utag.gdpr.keys(obj).sort(func);for(var z=0;z<_k1.length;z++){_obj[_k1[z]]=obj[_k1[z]];}}
return _obj;},isEmpty:function(obj){var t=utag.gdpr.typeOf(obj);switch(t){case"string":case"array":return obj.length===0;case"object":for(var p in obj){if(!obj.hasOwnProperty(p)){continue;}
return false;}
default:return true;}},queue:[],noqueue:window.utag_cfg_ovrd?window.utag_cfg_ovrd.nogdprqueue:false,noview:window.utag_cfg_ovrd?window.utag_cfg_ovrd.noview:false,omittedTags:{"388":1,"391":1,"485":1,"275":1}};utag.loader.initdataOld=utag.loader.initdata;utag.loader.initdata=function(){utag.loader.initdataOld();if(utag.gdpr.getConsentState()!==0)return;if(utag.gdpr.noview)return;if(!utag.loader.rd_flag&&!utag.gdpr.noqueue){utag.gdpr.queue.push({event:"view",data:utag.handler.C(utag.data)});}};utag.preOld=utag.pre;utag.pre=function(){utag.preOld();if(utag.gdpr.consent_prompt.isEnabled===true&&!(utag.cond[96]&&utag.cond[594])){utag.gdpr.consent_prompt.isEnabled=false;}
utag.pre=utag.preOld;};utag.gdpr.consent_prompt.languages={"pl":{"common_tokens":{"message":"Używamy niezbędnych plików cookie i podobnych technologii, aby zapewnić sprawne działanie naszej witryny. Możemy również wykorzystywać opcjonalne pliki cookie i podobne technologie do celów analitycznych, społecznościowych i marketingowych, które pozwalają nam ulepszać naszą działalność. Kliknięcie przycisku OK lub dalsze przeglądanie naszej witryny jest równoznaczne z wyrażeniem przez użytkownika zgody na korzystanie z tych technologii. Zapoznaj się z naszą <a href=\"{{privacy_policy_url}}\">polityką plików cookie</a>, aby dowiedzieć się więcej, lub zmień ustawienia, <a href=\"{{preferences}}\">klikając tutaj</a>.","title":"","confirmation_button":""},"isDefault":"false","custom_tokens":{"under16":"","preferences":"javascript:window.__gdpr.goToPreferences()","company_logo_url":"","californiaresident":"","older16":"","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()"},"display_name":"Polish (pl)"},"sv":{"common_tokens":{"message":"Vi använder nödvändiga cookies och liknande tekniker för att säkerställa att vår webbplats fungerar effektivt. Vi vill också gärna ställa in alternativa cookies och liknande tekniker för analytiska och statistiska ändamål samt marknadsföringsändamål som hjälper oss att förbättra våra aktiviteter. Genom att klicka på OK eller på andra element på sidan som gör att du kan fortsätta att använda vår webbplats godkänner du användningen av dessa tekniker. Ta del av vår <a href=\"{{privacy_policy_url}}\">cookiepolicy</a> för att ta reda på mer eller ställ in dina specifika preferenser genom att <a href=\"{{preferences}}\">klicka här</a>.","title":"","confirmation_button":""},"isDefault":"false","display_name":"Swedish (sv)","custom_tokens":{"under16":"","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","californiaresident":"","older16":"","company_logo_url":"","preferences":"javascript:window.__gdpr.goToPreferences()"}},"it-it":{"custom_tokens":{"privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","californiaresident":"","company_logo_url":"","older16":"","preferences":"javascript:window.__gdpr.goToPreferences()","under16":""},"display_name":"Italian (Italy) (it-it)","isDefault":"false","common_tokens":{"message":"Utilizziamo cookie e tecnologie affini necessarie per il funzionamento del sito. Vorremmo utilizzare anche ulteriori cookie e tecnologie affini opzionali per finalità analitiche, di marketing e di interazione con i social network. Cliccando su OK, o su altri elementi della pagina per continuare la navigazione, acconsenti all’utilizzo delle tecnologie di cui sopra. Visita la nostra <a href=\"{{privacy_policy_url}}\">cookie policy</a> per saperne di più o <a href=\"{{preferences}}\">clicca qui</a> per comunicarci le tue preferenze.","title":"","confirmation_button":"Ok"}},"en":{"isDefault":"true","custom_tokens":{"preferences":"javascript:window.__gdpr.goToPreferences()","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","californiaresident":"","older16":"","company_logo_url":"","under16":""},"display_name":"English (en)","common_tokens":{"title":"","confirmation_button":"Ok","message":"We use necessary cookies and similar technologies to ensure our site works efficiently. We'd also like to set optional cookies and similar technologies for analytics, social and marketing purposes to help us improve our activities. By clicking OK, or on other elements of the page that allow you to continue browsing our website, you consent to the use of these technologies. Check our <a href=\"{{privacy_policy_url}}\">cookie policy</a> to discover more, or set your specific preferences by <a href=\"{{preferences}}\">clicking here</a>."}},"nl-nl":{"common_tokens":{"message":"We maken gebruik van cookies en soortgelijke technologieën om onze website goed te laten werken. We zouden graag optionele cookies en soortgelijke technologieën voor analytische, sociale en marketingdoeleinden willen instellen, zodat we onze activiteiten kunnen verbeteren. Door op OK of een willekeurig element op de pagina te klikken waardoor je onze website kunt blijven bezoeken, geef je toestemming voor het gebruik van deze technologieën. Bestudeer ons <a href=\"{{privacy_policy_url}}\">cookies-beleid</a> voor meer informatie of stel je specifieke voorkeur in door <a href=\"{{preferences}}\">hier te klikken</a>.","title":"","confirmation_button":"Ok"},"custom_tokens":{"under16":"","older16":"","company_logo_url":"","californiaresident":"","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","preferences":"javascript:window.__gdpr.goToPreferences()"},"display_name":"Dutch (Netherlands) (nl-nl)","isDefault":"false"},"es":{"display_name":"Spanish (es)","custom_tokens":{"privacy_policy_url":"javascript:TealiumConsentPrivacyLink()()()","californiaresident":"","older16":"","company_logo_url":"","preferences":"javascript:window.__gdpr.goToPreferences()","under16":""},"isDefault":"false","common_tokens":{"title":"","confirmation_button":"Ok","message":"Usamos cookies necesarios y tecnologías similares que garantizan el funcionamiento eficaz de nuestro sitio web. Además, nos gustaría añadir otros cookies y tecnologías similares opcionales, para fines sociales, de analítica y de marketing, que nos ayudarían a mejorar nuestras actividades. Al hacer clic en OK, o en otros elementos de la página que te permiten seguir navegando por nuestra web, consientes al uso de dichas tecnologías. Consulta nuestra <a href=\"{{privacy_policy_url}}\">política de cookies</a> si deseas más información, o cambia tus preferencias concretas haciendo <a href=\"{{preferences}}\">clic aquí</a>."}},"pt":{"isDefault":"false","display_name":"Portuguese (pt)","custom_tokens":{"under16":"","preferences":"javascript:window.__gdpr.goToPreferences()","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","company_logo_url":"","older16":"","californiaresident":""},"common_tokens":{"title":"","confirmation_button":"","message":"Utilizamos os cookies necessários e outras tecnologias semelhantes para garantir o funcionamento eficaz do nosso site. Também gostaríamos de definir cookies opcionais e tecnologias semelhantes para efeitos analíticos, sociais e de marketing que nos ajudassem a melhorar a nossa atividade. E clicar em OK, ou noutros elementos da página que lhe permitem continuar a navegar pelo nosso website, concorda com a utilização das referidas tecnologias. Veja a nossa <a href=\"{{privacy_policy_url}}\">política de cookies</a> para saber mais, ou defina as suas preferências específicas ao <a href=\"{{preferences}}\">clicar aqui</a>."}},"nl-be":{"common_tokens":{"message":"We maken gebruik van cookies en soortgelijke technologieën om onze website goed te laten werken. We zouden graag optionele cookies en soortgelijke technologieën voor analytische, sociale en marketingdoeleinden willen instellen, zodat we onze activiteiten kunnen verbeteren. Door op OK of een willekeurig element op de pagina te klikken waardoor je onze website kunt blijven bezoeken, geef je toestemming voor het gebruik van deze technologieën. Bestudeer ons <a href=\"{{privacy_policy_url}}\">cookies-beleid</a> voor meer informatie of stel je specifieke voorkeur in door <a href=\"{{preferences}}\">hier te klikken</a>.","confirmation_button":"Ok","title":""},"custom_tokens":{"under16":"","preferences":"javascript:window.__gdpr.goToPreferences()","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","older16":"","company_logo_url":"","californiaresident":""},"display_name":"Dutch (Belgium) (nl-be)","isDefault":"false"},"fr-fr":{"common_tokens":{"title":"","confirmation_button":"Ok","message":"Nous utilisons les cookies nécessaires et des technologies similaires pour assurer le bon fonctionnement de notre site. Nous aimerions également mettre en place des cookies optionnels et des technologies similaires à des fins analytiques, sociales et marketing pour nous aider à améliorer nos activités. En cliquant sur OK, ou sur d'autres éléments de la page vous permettant de continuer à naviguer sur notre site, vous acceptez l'utilisation de ces technologies. Consultez notre <a href=\"{{privacy_policy_url}}\">politique en matière de cookies</a> pour en savoir plus ou définissez vos préférences spécifiques en <a href=\"{{preferences}}\">cliquant ici</a>."},"custom_tokens":{"under16":"","company_logo_url":"","californiaresident":"","older16":"","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","preferences":"javascript:window.__gdpr.goToPreferences()"},"display_name":"French (France) (fr-fr)","isDefault":"false"},"de":{"common_tokens":{"message":"Wir verwenden die erforderlichen Cookies und ähnliche Technologien, um sicherzustellen, dass unsere Website effizient funktioniert. Wir möchten gerne optionale Cookies und ähnliche Technologien für Analyse-, Sozial- und Marketingzwecke einsetzen, um so unsere Aktivitäten verbessern zu können. Wenn Sie auf OK oder auf andere Seitenelemente klicken, um so weiter durch unsere Webseite stöbern zu können, erklären Sie sich mit dem Einsatz dieser Technologien einverstanden. Mehr Informationen finden Sie in unserer <a href=\"{{privacy_policy_url}}\">Cookie-Richtlinie</a>, oder <a href=\"{{preferences}}\">klicken Sie hier</a> und nehmen Sie Ihre individuellen Einstellungen vor.","title":"","confirmation_button":"Ok"},"isDefault":"false","display_name":"German (de)","custom_tokens":{"privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","company_logo_url":"","californiaresident":"","older16":"","preferences":"javascript:window.__gdpr.goToPreferences()","under16":""}},"en-us":{"common_tokens":{"message":"If you are a California resident, you may review your rights by visiting the <a href=\"{{privacy_policy_url}}\">California Consumer Privacy Rights</a> section of our Privacy Policy. \n\nCalifornia consumers who wish to exercise their privacy rights may fill out a verifiable consumer request by visiting the following: <a href=\"{{preferences}}\">Do Not Sell My Personal Information</a>.","title":"","confirmation_button":"I AM NOT A CALIFORNIA RESIDENT"},"isDefault":"false","display_name":"English (United States) (en-us)","custom_tokens":{"preferences":"javascript:window.__gdpr.goToPreferences()","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","company_logo_url":"","californiaresident":"I am a California resident and I confirm that:","older16":"I am 16 or older","under16":"I am under 16"}}};utag.gdpr.consent_prompt.content.css="#__tealiumGDPRecModal .privacy_prompt1 {  position: fixed;  top: 0;  left: 0;  z-index: 100000000;  width: auto;  height: auto;  padding: 10px 2%;  font-family: \"Lato\",\"Arial\";  font-weight: 400;  text-align: left;  background-color: #000;  color: #fff;}#__tealiumGDPRecModal .privacy_prompt1 a {   text-decoration: underline;   color: #fff;   font-weight: 600;}#__tealiumGDPRecModal .privacy_prompt1 a:hover {   text-decoration: none;   cursor: pointer;}#__tealiumGDPRecModal .privacy_prompt_container1 {  width: 100%;  height: inherit;  overflow-y: auto;}#__tealiumGDPRecModal .privacy_prompt_content1 {  width: 81.9%;  height: inherit;  float: left;  font-size: 13px;  line-height: 1.54;  color: #ffffff;}#__tealiumGDPRecModal .privacy_prompt_footer1 {  width: 18.1%;  float: left;}#__tealiumGDPRecModal .privacy_prompt_footer1 .__button {  width: 60px;  float: right;  background-color: #fff;  color: #000;  font-size: 14px;  text-align: center;  text-transform: uppercase;  cursor: pointer;  font-family: Oswald-medium;  padding: 10px 0px;}#__tealiumGDPRecModal .privacy_prompt_footer1 .__buttonccpa {  width: 220px;  float: right;  background-color: #fff;  color: #000;  text-align: center;  text-transform: uppercase;  cursor: pointer;  font-family: Oswald-medium;  font-size: 14px;    line-height: 14px;  padding: 12px 0px;  height: 14px;   }#__tealiumGDPRecModal .privacy_prompt_content1_resident{  font-size: 13px;  font-weight: 600;  line-height: 2.15;  color: #ffffff;  padding: 10px 0;}#__tealiumGDPRecModal .privacy_prompt_content1_resident .__button {  width: 67px;  margin-left: 10px;  border: 1px solid #fff;  background-color: #000;  color: #fff;  text-align: center;  cursor: pointer;	font-family: oswald-medium;	font-size: 12px;	text-transform: uppercase; 	height: 21px;	padding: 8px 21px;	border-radius: 0px;	font-weight: 500;	 } #__tealiumGDPRecModal .privacy_prompt_content1_resident .__button:hover {	background-color: white;	color: #1f1f24;  }   /* Tablets & larger smartphones */@media (max-width: 768px) {  #__tealiumGDPRecModal .privacy_prompt1 {    top: auto;    bottom: 0;    position: fixed;  }    #__tealiumGDPRecModal .privacy_prompt_content1 {    width: 100%;    float: none;  }    #__tealiumGDPRecModal .privacy_prompt_footer1 {    width: 100%;    padding-top: 20px;    padding-bottom: 0px;    float: none;  }      #__tealiumGDPRecModal .privacy_prompt_footer1 .__button {	float: none;	width: auto;	font-family: oswald-medium;	font-size: 14px;	height: 44px;	margin-bottom: 16px;	line-height: 24px;  }    #__tealiumGDPRecModal .privacy_prompt_footer1 .__buttonccpa {	width: 256px;	height: 46px;	padding: 8px, 21px;	line-height: 24px;	margin-bottom: 16px;  }    #__tealiumGDPRecModal .privacy_prompt_content1_resident .container_buttons {    margin-top: 5px;    display: block;  }    #__tealiumGDPRecModal .privacy_prompt_content1_resident .__button {    margin: 10px 10px 10px 0px; 		font-size: 14px;		font-weight: 400;			border-radius: 0px;				text-shadow: none;			background-color: #1f1f24;		  }    #__tealiumGDPRecModal .privacy_prompt_content1_resident .__button:hover {	background-color: white;	color: #1f1f24;  }   /* Versione responsive con bottone di conferma completamente allungato  #__tealiumGDPRecModal .privacy_prompt_footer1 .__button {    width: 90%;    padding: 5px 5%;    float: none;  }  */}";utag.gdpr.consent_prompt.content.html="<div class=\"privacy_prompt1 explicit_consent\">	<div class=\"privacy_prompt_container1\">	  <div class=\"privacy_prompt_content1\">			{{message}}			<div id=\"consent_prompt_res_tou_age\" class=\"privacy_prompt_content1_resident\" style=\"display:none;\">      	{{californiaresident}}      	<span class=\"container_buttons\">      		<span id=\"consent_prompt_less_age\" class=\"__button\">        		{{under16}}      		</span>      		<span id=\"consent_prompt_more_age\" class=\"__button\">        		{{older16}}      		</span>      	</span>    	</div>	  </div>	  <div class=\"privacy_prompt_footer1\">	    <div id=\"consent_prompt_submit\" class=\"__button\">	      {{confirmation_button}}	    </div>	  </div>	</div><!-- <div class=\"close_btn_thick\"></div>  --></div>";utag.gdpr.consent_prompt.content.js="(function consent_prompt(){var $el=document.getElementById(\"consent_prompt_submit\");var $modal=document.getElementById(\"__tealiumGDPRecModal\");var $pagelinks=jQuery(\"a\").not(\"div#__tealiumGDPRecModal a\").not(\"[id*=bx-campaign]\");var __isUS=((utag.gdpr.getLanguage&&utag.gdpr.getLanguage().match(\"en-us\"))||utag_data&&utag_data.Page_Country&&utag_data.Page_Country==\"US\")||(utag&&utag.data&&utag.data.Page_Country&&utag.data.Page_Country==\"US\")?true:false;var $less_age,$more_age,$res_tou_age;if(__isUS){$res_tou_age=document.getElementById(\"consent_prompt_res_tou_age\");$less_age=document.getElementById(\"consent_prompt_less_age\");$more_age=document.getElementById(\"consent_prompt_more_age\");document.getElementById(\"consent_prompt_submit\").classList.remove(\"__button\");document.getElementById(\"consent_prompt_submit\").classList.add(\"__buttonccpa\");$res_tou_age.style.display=\"block\";}window.__gdpr={__isLessAgeConsent:false,};var callBack=function(){utag_data.Tags_AdobeAnalytics_Abort=\"1\";utag.gdpr.setConsentValue(1);setTimeout(function(){if(window.utag&&window.utag.udoname||window.utag_data){utag.view(window[window.utag&&window.utag.udoname||\"utag_data\"]);}},0);closePrompt();};var closePrompt=function(){$modal.style.display=\"none\";};var eventAdvanced=function(consent){if(typeof window.__gdpr===\"object\")window.__gdpr.__isLessAgeConsent=!consent;utag.gdpr.setConsentValue(0);utag.gdpr.showConsentPreferences();closePrompt();};var isLessAge=function(){eventAdvanced(0);};var isMoreAge=function(){eventAdvanced(1);};if(document.addEventListener){for(var i=0;i<$pagelinks.length;i++){$pagelinks[i].addEventListener(\"click\",callBack,false);}$el.addEventListener(\"click\",callBack,false);if($less_age)$less_age.addEventListener(\"click\",isLessAge,false);if($more_age)$more_age.addEventListener(\"click\",isMoreAge,false);}else if(document.attachEvent){for(var i=0;i<$pagelinks.length;i++){$pagelinks[i].attachEvent(\"click\",callBack);}$el.attachEvent(\"click\",callBack);if($less_age)$less_age.attachEvent(\"click\",isLessAge);if($more_age)$more_age.attachEvent(\"click\",isMoreAge);}else{for(var i=0;i<$pagelinks.length;i++){$pagelinks[i].onclick=callBack;}$el.onclick=callBack;if($less_age)$less_age.onclick=isLessAge;if($more_age)$more_age.onclick=isMoreAge;}setTimeout(function(){$(window).on('scroll',function(){callBack();$(window).unbind('scroll');})},3000);if(typeof window.__gdpr===\"object\"){window.__gdpr.goToPreferences=isMoreAge;}setTimeout(function(){var $pagelinks=jQuery(\"a\").not(\"div#__tealiumGDPRecModal a\").not(\"[id*=bx-campaign]\");if(document.addEventListener){for(var i=0;i<$pagelinks.length;i++){$pagelinks[i].addEventListener(\"click\",callBack,false);}}},5000);}());";utag.gdpr.consent_prompt.defaultLang="en";utag.gdpr.showExplicitConsent=function(_lang){var cn=document.getElementById("__tealiumGDPRecStyle");if(cn){cn.parentNode.removeChild(cn);}var hn=document.getElementById("__tealiumGDPRecModal");if(hn){hn.parentNode.removeChild(hn);}var sn=document.getElementById("__tealiumGDPRecScript");if(sn){sn.parentNode.removeChild(sn);}var dtc=utag.gdpr.getDeTokenizedContent(utag.gdpr.consent_prompt,_lang);var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),mDiv=document.createElement("div"),scr=document.createElement("script"),body=document.body||document.getElementsByTagName("body")[0];style.type="text/css";style.id="__tealiumGDPRecStyle";if(style.styleSheet){style.styleSheet.cssText=dtc.css;}else{style.appendChild(document.createTextNode(dtc.css));}head.appendChild(style);mDiv.innerHTML=dtc.html;mDiv.id="__tealiumGDPRecModal";body.appendChild(mDiv);scr.language="javascript";scr.type="text/javascript";scr.text="try{"+dtc.js+"} catch(e){utag.DB(e)}";scr.id="__tealiumGDPRecScript";head.appendChild(scr);};utag.gdpr.preferences_prompt.languages={"pl":{"common_tokens":{"yes":"ON","confirmation_button":"OK","title":"USTAWIENIA PLIKÓW COOKIES","message":"","no":"OFF","description":"Stosujemy pliki cookies w celu dostosowywania treści do preferencji użytkowników, korzystania z funkcji mediów społecznościowych i analizowania ruchu na stronie. W przypadku niewyrażenia zgody na stosowanie wybranych plików cookies niektóre interaktywne funkcje na naszych stronach mogą nie działać."},"categories":{"display_ads":{"name":"","notes":""},"cdp":{"notes":"","name":""},"engagement":{"name":"","notes":""},"crm":{"name":"","notes":""},"personalization":{"notes":"","name":""},"misc":{"name":"Marketing","notes":"Marketingowe pliki cookies umożliwiają publikowanie reklam dostosowanych do preferencji użytkowników."},"monitoring":{"name":"","notes":""},"big_data":{"notes":"","name":""},"search":{"name":"","notes":""},"mobile":{"notes":"","name":""},"social":{"name":"Social","notes":"Społecznościowe pliki cookies umożliwiają użytkownikom korzystanie z funkcji mediów społecznościowych."},"email":{"notes":"","name":""},"analytics":{"notes":"Analityczne pliki cookies umożliwiają zbieranie informacji o sposobie korzystania z naszych stron.","name":"Analytics"},"affiliates":{"notes":"","name":""},"cookiematch":{"name":"","notes":""}},"isDefault":"false","custom_tokens":{"less_16_description":"","company_logo_url":"","privacy_policy_url":""},"display_name":"Polish (pl)"},"en":{"categories":{"cdp":{"name":"CDP","notes":""},"display_ads":{"notes":"","name":"Display Ad"},"engagement":{"name":"Engagement","notes":""},"monitoring":{"name":"Monitoring","notes":""},"personalization":{"name":"Personalization","notes":""},"crm":{"notes":"","name":"CRM"},"misc":{"name":"Marketing","notes":"Marketing cookies are used to offer personalized advertisements. "},"big_data":{"name":"Big Data","notes":""},"mobile":{"name":"Mobile","notes":""},"social":{"notes":"Social cookies allow you to utilize social media features.","name":"Social"},"email":{"notes":"","name":"Email"},"search":{"notes":"","name":"Search"},"cookiematch":{"notes":"","name":"Cookie Match"},"affiliates":{"name":"Affiliates","notes":""},"analytics":{"name":"Analytics","notes":"Analytics cookies are used to understand how you interact with our content."}},"common_tokens":{"description":"We use cookies to personalize content, to provide social media features and to analyze our traffic. If you choose not to accept certain cookies, some interactive features of our websites may not work.","message":"To review your rights, please visit the <a href=\"{{privacy_policy_url}}\">California Consumer Privacy Rights</a> section of our Privacy Policy. ","confirmation_button":"OK","title":"PRIVACY PREFERENCES","yes":"ON","status":"Status","category":"Category","no":"OFF"},"isDefault":"true","display_name":"English (en)","custom_tokens":{"company_logo_url":"","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","less_16_description":"All the cookies tracking has been disabled"}},"it-it":{"categories":{"cdp":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"engagement":{"notes":"","name":""},"monitoring":{"notes":"","name":""},"crm":{"notes":"","name":""},"personalization":{"notes":"","name":""},"misc":{"notes":"I cookies di marketing servono per offrirti annunci pubblicitari personalizzati.","name":"Marketing"},"big_data":{"name":"","notes":""},"email":{"name":"","notes":""},"mobile":{"name":"","notes":""},"social":{"notes":"I cookies dei social network ti consentono di sfruttare le funzionalità dei social.","name":"Social"},"search":{"name":"","notes":""},"cookiematch":{"name":"","notes":""},"analytics":{"notes":"I cookies analitici ci servono per capire come interagisci con i nostri contenuti.","name":"Analytics"},"affiliates":{"name":"","notes":""}},"common_tokens":{"description":"Utilizziamo i cookies per personalizzare i contenuti, fornire le funzionalità dei social media e analizzare i dati del nostro traffico. Se decidi di non accettare alcuni cookies, determinati servizi interattivi dei nostri siti web potrebbero non funzionare.","no":"OFF","message":"","title":"PREFERENZE PRIVACY","confirmation_button":"OK","yes":"ON"},"custom_tokens":{"less_16_description":"","company_logo_url":"","privacy_policy_url":""},"display_name":"Italian (Italy) (it-it)","isDefault":"false"},"no":{"common_tokens":{"yes":"ON","title":"PERSONVERNPREFERANSER","confirmation_button":"OK","no":"OFF","message":"","description":"Vi bruker informasjonskapsler (cookies) for å persontilpasse innhold, for bruk til sosiale medier, og for å analysere trafikken vår. Dersom du velger å ikke akseptere visse informasjonskapsler, kan det være at noen av de interaktive funksjonene på våre nettsider ikke fungerer."},"categories":{"engagement":{"notes":"","name":""},"cdp":{"notes":"","name":""},"display_ads":{"name":"","notes":""},"cookiematch":{"name":"","notes":""},"affiliates":{"notes":"","name":""},"analytics":{"notes":"Analytiske informasjonskapsler brukes for å forstå hvordan du samhandler med innholdet vårt.","name":"Analytics"},"email":{"name":"","notes":""},"mobile":{"name":"","notes":""},"social":{"name":"Social","notes":"Sosiale informasjonskapsler lar deg bruke funksjoner knyttet til sosiale media."},"search":{"name":"","notes":""},"big_data":{"notes":"","name":""},"monitoring":{"name":"","notes":""},"misc":{"name":"Marketing","notes":"Informasjonskapsler for markedsføring brukes for å tilby persontilpasset reklame."},"personalization":{"notes":"","name":""},"crm":{"name":"","notes":""}},"custom_tokens":{"company_logo_url":"","privacy_policy_url":"","less_16_description":""},"display_name":"Norwegian (no)","isDefault":"false"},"nl-nl":{"categories":{"analytics":{"name":"Analytics","notes":"Analytische cookies worden gebruikt om te begrijpen hoe je onze inhoud gebruikt."},"affiliates":{"name":"","notes":""},"cookiematch":{"notes":"","name":""},"search":{"notes":"","name":""},"social":{"name":"Social","notes":"Sociale cookies zorgen ervoor dat je de social media-functies kunt gebruiken."},"email":{"name":"","notes":""},"mobile":{"notes":"","name":""},"big_data":{"notes":"","name":""},"personalization":{"notes":"","name":""},"misc":{"notes":"Marketing cookies worden gebruikt om gepersonaliseerde reclame aan te bieden.","name":"Marketing"},"crm":{"notes":"","name":""},"monitoring":{"notes":"","name":""},"engagement":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"cdp":{"name":"","notes":""}},"common_tokens":{"no":"OFF","message":"","description":"We maken gebruik van cookies om de inhoud te personaliseren, social media-functies te bieden en ons verkeer te analyseren. Sommige interactieve functies van onze websites kunnen mogelijkerwijs niet werken als u ervoor kiest om bepaalde cookies niet te accepteren.","yes":"ON","title":"PRIVACYVOORKEUR","confirmation_button":"OK"},"custom_tokens":{"privacy_policy_url":"","company_logo_url":"","less_16_description":""},"display_name":"Dutch (Netherlands) (nl-nl)","isDefault":"false"},"sv-fi":{"common_tokens":{"description":"Vi använder cookies för att personanpassa innehåll, erbjuda sociala mediafunktioner och analysera vår trafik. Om du väljer att inte godkänna vissa cookies fungerar eventuellt inte några interaktiva funktioner på vår webbplats.","no":"OFF","message":"","title":"SEKRETESSPREFERENSER","confirmation_button":"OK","yes":"ON"},"categories":{"display_ads":{"notes":"","name":""},"cdp":{"name":"","notes":""},"engagement":{"name":"","notes":""},"personalization":{"notes":"","name":""},"crm":{"name":"","notes":""},"misc":{"name":"Marketing","notes":"Marknadsföringscookies används för att erbjuda personanpassad reklam."},"monitoring":{"name":"","notes":""},"big_data":{"name":"","notes":""},"search":{"name":"","notes":""},"social":{"notes":"Sociala medier-cookies gör att du kan använda sociala mediafunktioner.","name":"Social"},"email":{"notes":"","name":""},"mobile":{"name":"","notes":""},"affiliates":{"name":"","notes":""},"analytics":{"name":"Analytics","notes":"Analyscookies används för att förstå hur du interagerar med vårt innehåll."},"cookiematch":{"notes":"","name":""}},"isDefault":"false","custom_tokens":{"less_16_description":"","privacy_policy_url":"","company_logo_url":""},"display_name":"Swedish (Finland) (sv-fi)"},"pt":{"common_tokens":{"message":"","no":"OFF","description":"Utilizamos cookies para personalizar o conteúdo, para proporcionar características de redes sociais e para analisarmos o nosso tráfego. Se optar por não aceitar determinados cookies, algumas características interativas dos nossos websites poderão não funcionar.","yes":"ON","confirmation_button":"OK","title":"PREFERÊNCIAS DE PRIVACIDADE"},"categories":{"engagement":{"name":"","notes":""},"cdp":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"big_data":{"notes":"","name":""},"monitoring":{"name":"","notes":""},"personalization":{"name":"","notes":""},"crm":{"notes":"","name":""},"misc":{"notes":"Os cookies de marketing utilizam-se para oferecer publicidade personalizada.","name":"Marketing"},"cookiematch":{"notes":"","name":""},"affiliates":{"notes":"","name":""},"analytics":{"name":"Analytics","notes":"Os cookies analíticos utilizam-se para perceber de que forma interage com o nosso conteúdo."},"mobile":{"notes":"","name":""},"social":{"notes":"Os cookies sociais permitem-lhe utilizar as características das redes sociais.","name":"Social"},"email":{"name":"","notes":""},"search":{"name":"","notes":""}},"isDefault":"false","custom_tokens":{"less_16_description":"","company_logo_url":"","privacy_policy_url":""},"display_name":"Portuguese (pt)"},"es":{"common_tokens":{"description":"Utilizamos cookies para personalizar el contenido, ofrecer funciones de redes sociales y analizar el tráfico. Si eliges no aceptar ciertas cookies, algunas funciones interactivas de nuestras webs podrían no funcionar.","message":"","no":"OFF","confirmation_button":"OK","title":"PREFERENCIAS DE PRIVACIDAD","yes":"ON"},"categories":{"cdp":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"engagement":{"name":"","notes":""},"social":{"notes":"Las cookies sociales te permiten utilizar las funciones de las redes sociales.","name":"Social"},"email":{"name":"","notes":""},"mobile":{"name":"","notes":""},"search":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"affiliates":{"notes":"","name":""},"analytics":{"name":"Analytics","notes":"Las cookies de analítica se usan para entender cómo interactúas con nuestro contenido."},"monitoring":{"name":"","notes":""},"misc":{"notes":"Las cookies de marketing se usan para ofrecer anuncios personalizados.","name":"Marketing"},"crm":{"name":"","notes":""},"personalization":{"notes":"","name":""},"big_data":{"notes":"","name":""}},"isDefault":"false","display_name":"Spanish (es)","custom_tokens":{"privacy_policy_url":"","company_logo_url":"","less_16_description":""}},"de":{"categories":{"engagement":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"cdp":{"name":"","notes":""},"big_data":{"notes":"","name":""},"misc":{"notes":"Diese Cookies werden zur Personalisierung von Werbung eingesetzt.","name":"Marketing"},"crm":{"notes":"","name":""},"personalization":{"notes":"","name":""},"monitoring":{"notes":"","name":""},"analytics":{"notes":"Diese Cookies werden verwendet, um zu erkennen, wie Sie mit unseren Inhalten umgehen.","name":"Analytics"},"affiliates":{"notes":"","name":""},"cookiematch":{"name":"","notes":""},"search":{"name":"","notes":""},"mobile":{"notes":"","name":""},"social":{"notes":"Diese Cookies ermöglichen Ihnen die Nutzung von Social Media Funktionen.","name":"Social"},"email":{"notes":"","name":""}},"common_tokens":{"yes":"ON","confirmation_button":"OK","title":"DATENSCHUTZEINSTELLUNGEN","message":"","no":"OFF","description":"Wir verwenden Cookies, um Inhalte zu personalisieren, Social Media-Funktionen bereitzustellen und unseren Traffic zu analysieren. Wenn Sie sich dafür entscheiden, bestimmte Cookies nicht zu akzeptieren, funktionieren einige interaktive Funktionen unserer Websites möglicherweise nicht."},"isDefault":"false","display_name":"German (de)","custom_tokens":{"less_16_description":"","company_logo_url":"","privacy_policy_url":""}},"nl-be":{"display_name":"Dutch (Belgium) (nl-be)","custom_tokens":{"less_16_description":"","company_logo_url":"","privacy_policy_url":""},"isDefault":"false","categories":{"social":{"name":"Social","notes":"Sociale cookies zorgen ervoor dat je de social media-functies kunt gebruiken."},"mobile":{"notes":"","name":""},"email":{"name":"","notes":""},"search":{"notes":"","name":""},"cookiematch":{"notes":"","name":""},"affiliates":{"notes":"","name":""},"analytics":{"notes":"Analytische cookies worden gebruikt om te begrijpen hoe je onze inhoud gebruikt.","name":"Analytics"},"monitoring":{"notes":"","name":""},"crm":{"name":"","notes":""},"personalization":{"notes":"","name":""},"misc":{"notes":"Marketing cookies worden gebruikt om gepersonaliseerde reclame aan te bieden.","name":"Marketing"},"big_data":{"name":"","notes":""},"cdp":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"engagement":{"notes":"","name":""}},"common_tokens":{"title":"PRIVACYVOORKEUR","confirmation_button":"OK","yes":"ON","status":"","description":"We maken gebruik van cookies om de inhoud te personaliseren, social media-functies te bieden en ons verkeer te analyseren. Sommige interactieve functies van onze websites kunnen mogelijkerwijs niet werken als u ervoor kiest om bepaalde cookies niet te accepteren.","no":"OFF","message":""}},"fr-fr":{"categories":{"engagement":{"notes":"","name":""},"display_ads":{"notes":"","name":""},"cdp":{"name":"","notes":""},"affiliates":{"notes":"","name":""},"analytics":{"name":"Analytics","notes":"Les cookies d’analyse sont utilisés afin de comprendre la façon dont vous interagissez avec notre contenu."},"cookiematch":{"name":"","notes":""},"search":{"name":"","notes":""},"email":{"name":"","notes":""},"mobile":{"notes":"","name":""},"social":{"name":"Social","notes":"Les cookies sociaux vous permettent d'utiliser les fonctionnalités relatives aux réseaux sociaux."},"big_data":{"notes":"","name":""},"misc":{"name":"Marketing","notes":"Les cookies marketing sont utilisés afin d'offrir des publicités personnalisées."},"crm":{"name":"","notes":""},"personalization":{"notes":"","name":""},"monitoring":{"notes":"","name":""}},"common_tokens":{"confirmation_button":"OK","title":"PRÉFÉRENCES DE CONFIDENTIALITÉ","yes":"ON","description":"Nous utilisons des cookies afin de personnaliser le contenu, de fournir des fonctionnalités relatives aux réseaux sociaux et d’analyser notre trafic. Si vous choisissez de ne pas accepter les cookies, il se peut que certaines fonctionnalités interactives de nos sites ne fonctionnent pas.","message":"","no":"OFF"},"isDefault":"false","custom_tokens":{"less_16_description":"","privacy_policy_url":"","company_logo_url":""},"display_name":"French (France) (fr-fr)"},"en-us":{"common_tokens":{"description":"We use cookies to personalize content, to provide social media features and to analyze our traffic. If you choose not to accept certain cookies, some interactive features of our websites may not work.","message":"To review your rights, please visit the <a href=\"{{privacy_policy_url}}\">California Consumer Privacy Rights</a> section of our Privacy Policy. ","title":"PRIVACY PREFERENCES","confirmation_button":"I am over the age of 16","yes":"ON","status":"","no":"OFF","category":""},"categories":{"display_ads":{"notes":"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ","name":"Display Ad"},"cdp":{"name":"","notes":""},"engagement":{"name":"","notes":""},"personalization":{"name":"","notes":""},"crm":{"notes":"","name":""},"misc":{"notes":"Marketing cookies are used to offer personalized advertisements. ","name":"Marketing"},"monitoring":{"name":"","notes":""},"big_data":{"name":"","notes":""},"search":{"name":"","notes":""},"email":{"name":"","notes":""},"mobile":{"name":"","notes":""},"social":{"notes":"Social cookies allow you to utilize social media features.","name":"Social"},"analytics":{"name":"Analytics","notes":"Analytics cookies are used to understand how you interact with our content."},"affiliates":{"name":"Affiliates","notes":""},"cookiematch":{"notes":"","name":""}},"isDefault":"false","custom_tokens":{"company_logo_url":"","privacy_policy_url":"javascript:TealiumConsentPrivacyLink()","less_16_description":"Cookie tracking has been disabled."},"display_name":"English (United States) (en-us)"},"sv-se":{"custom_tokens":{"privacy_policy_url":"","company_logo_url":"","less_16_description":""},"display_name":"Swedish (Sweden) (sv-se)","isDefault":"false","common_tokens":{"title":"SEKRETESSPREFERENSER","confirmation_button":"OK","yes":"ON","description":"Vi använder cookies för att personanpassa innehåll, erbjuda sociala mediafunktioner och analysera vår trafik. Om du väljer att inte godkänna vissa cookies fungerar eventuellt inte några interaktiva funktioner på vår webbplats.","no":"OFF","message":""},"categories":{"cookiematch":{"name":"","notes":""},"analytics":{"name":"Analytics","notes":"Analyscookies används för att förstå hur du interagerar med vårt innehåll."},"affiliates":{"notes":"","name":""},"email":{"name":"","notes":""},"mobile":{"notes":"","name":""},"social":{"notes":"Sociala medier-cookies gör att du kan använda sociala mediafunktioner.","name":"Social"},"search":{"name":"","notes":""},"big_data":{"notes":"","name":""},"monitoring":{"name":"","notes":""},"personalization":{"name":"","notes":""},"misc":{"name":"Marketing","notes":"Marknadsföringscookies används för att erbjuda personanpassad reklam."},"crm":{"notes":"","name":""},"engagement":{"notes":"","name":""},"cdp":{"name":"","notes":""},"display_ads":{"name":"","notes":""}}}};utag.gdpr.preferences_prompt.content.css="#__tealiumGDPRcpPrefs {    width: 100%;    height: 100%;    background: rgba(0, 0, 0, 0.7);    font-family: \"Lato\",\"Arial\";	font-weight: 400;    position: fixed;    z-index: 1000000000;	top: 0;}#__tealiumGDPRcpPrefs .privacy_prompt {    position: absolute;    width: 50%;    height: auto;    top: 5%;    left: 50%;    margin-left: -25%;    border: 1px solid #CCC;    border-radius: 1px;    background-color: #FFF;    color: #6d6d6d;    font-size: 12px;    z-index: 1000;    overflow: auto; } #__tealiumGDPRcpPrefs .privacy_prompt a {    color: #6d6d6d;    font-size: 12px;    font-weight: 600;    text-decoration: underline; } #__tealiumGDPRcpPrefs .privacy_prompt a:hover {     text-decoration: none; } #__tealiumGDPRcpPrefs .privacy_prompt hr {   margin-top: 8px;   margin-bottom: 15px; }#__tealiumGDPRcpPrefs .privacy_prompt_content {     padding: 40px;     font-size: 12px;	 line-height: 18px;	 padding-left: 20px;	 padding-right: 20px; }#__tealiumGDPRcpPrefs .privacy_prompt_content > .close_btn_thick {    position: absolute;    display: block;    top: 0;    right: 0;    width: 35px;    height: 35px;    border: 1px solid #ccc;    background-color: #222222;    text-decoration: none;    text-shadow: 1px 1px 3px rgba(255, 255, 255, 1);    color: #fff;    font-size: 22px;    font-family: \"Arial\";    cursor: pointer;}#__tealiumGDPRcpPrefs .privacy_prompt_content > .close_btn_thick:after {    content: \"×\";    padding-left: 7px;    font: 33px/100% arial, sans-serif;    font-weight: lighter;}#__tealiumGDPRcpPrefs .privacy_prompt_content > .sdgdpradv_headline {    font-family: Oswald-medium;	font-weight: 400;    font-size: 20px;    font-weight: 400;    line-height: 0.69;    letter-spacing: 0px;    color: #222222;    text-transform: uppercase;}#__tealiumGDPRcpPrefs .privacy_prompt .option {     margin: 10px 0px;     color: #444;}#__tealiumGDPRcpPrefs .privacy_prompt_footer {     padding: 0px 40px 40px 40px;}#__tealiumGDPRcpPrefs .privacy_prompt .__button {    width: fit-content;    border: 1px solid #CCC;    padding: 10px 21px;    min-width: 60px;    text-align: center;    text-transform: uppercase;    border-radius: 4px;    background-color: #000;    text-shadow: 1px 1px 3px rgba(255, 255, 255, 1);    color: #fff;    cursor: pointer;	font-family: Oswald-medium;		font-size: 14px;	}#__tealiumGDPRcpPrefs .privacy_prompt .sdgdpradv_td_category {  font-size: 14px;  font-weight: 600;  color: #222222;}#__tealiumGDPRcpPrefs .privacy_prompt .sdgdpradv_td_desc {  font-size: 12px;  font-weight: 600;  color: #6d6d6d;  padding-bottom: 20px;}#__tealiumGDPRcpPrefs .privacy_prompt .sdgdpradv_td_desc.last {  padding-bottom: 0px;}#__tealiumGDPRcpPrefs .privacy_prompt table {	font-weight: 400;    padding: 0px;    border-collapse: collapse;    margin: 25px 0 0 0;}#__tealiumGDPRcpPrefs .privacy_prompt table td {     vertical-align: middle;     padding: 0px 5px 3px 5px;	 border:0 !important;	 text-align: left;}#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle {     opacity: 0;     position: absolute;     left: -99999px; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle + label {     height: 24px;     line-height: 24px;     background-color: #ccc;     padding: 0px 16px;     border-radius: 16px;     display: inline-block;     position: relative;     cursor: pointer;     -moz-transition: all 0.25s ease-in;     -o-transition: all 0.25s ease-in;     -webkit-transition: all 0.25s ease-in;     transition: all 0.25s ease-in;     -moz-box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);     -webkit-box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5);     box-shadow: inset 0px 0px 2px rgba(0, 0, 0, 0.5); }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle + label:before, .privacy_prompt input[type=\"checkbox\"].toggle + label:hover:before {     content: \" \";     position: absolute;     top: 2px;     left: 2px;     width: 26px;     height: 20px;     background: #fff;     z-index: 2;     -moz-transition: all 0.25s ease-in;     -o-transition: all 0.25s ease-in;     -webkit-transition: all 0.25s ease-in;     transition: all 0.25s ease-in;     -moz-border-radius: 14px;     -webkit-border-radius: 14px;     border-radius: 14px; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle + label .off, .privacy_prompt input[type=\"checkbox\"].toggle + label .on {     color: #fff; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle + label .off {     margin-left: 20px;     display: inline-block; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle + label .on {     display: none; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle:checked + label .off {     display: none; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle:checked + label .on {     margin-right: 20px;     display: inline-block; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle:checked + label, .privacy_prompt input[type=\"checkbox\"].toggle:focus:checked + label {     background-color: #000; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle:checked + label:before, .privacy_prompt input[type=\"checkbox\"].toggle:checked + label:hover:before, .privacy_prompt input[type=\"checkbox\"].toggle:focus:checked + label:before, .privacy_prompt input[type=\"checkbox\"].toggle:focus:checked + label:hover:before {     background-position: 0 0;     top: 2px;     left: 100%;     margin-left: -28px; }#__tealiumGDPRcpPrefs .privacy_prompt input[type=\"checkbox\"].toggle + label {    overflow: hidden;     text-overflow: ellipsis;     max-height: 24px;     height: 24px;}@media (max-width: 1023px) {    #__tealiumGDPRcpPrefs .privacy_prompt {        width: 90%;		height: auto;        top: 5%;        left: 5%;        margin-left: 0;	    }    #__tealiumGDPRcpPrefs .privacy_prompt_content h1 {        text-align: left;    }    #__tealiumGDPRcpPrefs .privacy_prompt_content table,    #__tealiumGDPRcpPrefs .privacy_prompt_content thead,    #__tealiumGDPRcpPrefs .privacy_prompt_content tbody,    #__tealiumGDPRcpPrefs .privacy_prompt_content td,    #__tealiumGDPRcpPrefs .privacy_prompt_content tr {        position: relative;		border: 0;	    }	    #__tealiumGDPRcpPrefs .privacy_prompt_content table tbody tr {        display: block;		text-align: left;				line-height: 16px;		padding-left: 0px;		    }    #__tealiumGDPRcpPrefs .privacy_prompt_content tbody tr {        margin: 0;    }}";utag.gdpr.preferences_prompt.content.html="<div id=\"consent_wrapper_advanced\" class=\"consent_preferences\">	<div class=\"privacy_prompt\">		<div class=\"privacy_prompt_content\">			<strong class=\"sdgdpradv_headline\">{{title}}</strong>			<div class=\"close_btn_thick\"></div>			<hr>			<div id=\"__lessAge\" style=\"display:none;font-size: 13px;line-height: 28px;\">{{less_16_description}}</div>			<div id=\"__moreAge1\">{{description}}</div>			<table id=\"__moreAge2\" style=\"display:block;\">				<col width=\"10%\">				<col width=\"90%\">				<!-- Analytics -->				<tr>					<td class=\"sdgdpradv_td_status\">						<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat1\"/>						<label for=\"toggle_cat1\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>					</td>					<td class=\"sdgdpradv_td_category\">{{category_analytics_title}}</td>				</tr>				<tr>					<td class=\"empty\"></td>					<td class=\"sdgdpradv_td_desc\">{{category_analytics_description}}</td>				</tr>				<!-- Social -->				<tr>					<td class=\"sdgdpradv_td_status\">						<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat7\"/>						<label for=\"toggle_cat7\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>					</td>					<td class=\"sdgdpradv_td_category\">{{category_social_title}}</td>				</tr>				<tr>					<td class=\"empty\"></td>					<td class=\"sdgdpradv_td_desc\">{{category_social_description}}</td>				</tr>				<!-- Misc -->				<tr>					<td class=\"sdgdpradv_td_status\">						<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat9\"/>						<label for=\"toggle_cat9\"> <span class=\"on\">{{yes}}</span> <span class=\"off\">{{no}}</span></label>					</td>					<td class=\"sdgdpradv_td_category\">{{category_misc_title}}</td>				</tr>				<tr>					<td class=\"empty\"></td>					<td class=\"sdgdpradv_td_desc last\">{{category_misc_description}}</td>				</tr>				<!-- Hidden categories -->				<tr style=\"display:none;\">					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat3\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat2\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat4\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat5\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat6\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat8\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat10\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat11\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat12\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat13\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat14\"/>					<input type=\"checkbox\" class=\"toggle\" id=\"toggle_cat15\"/>				</tr>			</table>		</div>		<div class=\"privacy_prompt_footer\">			<div id=\"preferences_prompt_submit\" class=\"__button\">{{confirmation_button}}</div>			<hr>			<div id=\"__message\" style=\"display:none;\">{{message}}</div>		</div>	</div></div>";utag.gdpr.preferences_prompt.content.js="(function preferences_prompt(){var $el=document.getElementById(\"preferences_prompt_submit\"),$modal=document.getElementById(\"__tealiumGDPRcpPrefs\"),$lessAge=document.getElementById(\"__lessAge\"),$moreAge1=document.getElementById(\"__moreAge1\"),$moreAge2=document.getElementById(\"__moreAge2\"),$message=document.getElementById(\"__message\"),$closeBtn=$modal.getElementsByClassName(\"close_btn_thick\")[0],$body=$modal.getElementsByClassName(\"consent_preferences\")[0],reg_match=/\\d+$/,i;var __isUS=((utag.gdpr.getLanguage&&utag.gdpr.getLanguage().match(\"en-us\"))||utag_data&&utag_data.Page_Country&&utag_data.Page_Country==\"US\")||(utag&&utag.data&&utag.data.Page_Country&&utag.data.Page_Country==\"US\")?true:false;if(__isUS){$message.display=\"block\";}var callBack=function(){var inputs=$body.getElementsByClassName(\"toggle\"),cats={};for(var i=0;i<inputs.length;i++){var obj=inputs[i];cats[obj.id.match(reg_match)[0]]=obj.checked?1:0;}closePrompt();utag_data.Tags_AdobeAnalytics_Abort=\"1\";utag.gdpr.setPreferencesValues(cats);setTimeout(function(){if(window.utag&&window.utag.udoname||window.utag_data){utag.view(window[window.utag&&window.utag.udoname||\"utag_data\"]);}},0);};var callBack2=function(){closePrompt();utag.gdpr.showExplicitConsent();};var closePrompt=function(){$modal.style.display=\"none\";};var consentState=utag.gdpr.getConsentState();if(typeof consentState===\"number\"){var _state=false;if(consentState===1||consentState===-1){_state=consentState===1;}else{_state=!!utag.gdpr.preferences_prompt.defaultState;}var activeCats=utag.gdpr.getCategories(true);for(var i=0;i<activeCats.length;i++){var id=utag.gdpr.preferences_prompt.categories[activeCats[i]].id;document.getElementById(\"toggle_cat\"+id).checked=_state;}}else{for(i=0;i<consentState.length;i++){if(consentState[i].ct!==\"1\"){continue;}var el=document.getElementById(\"toggle_cat\"+(i+1));if(el){el.checked=true;}}}if(document.addEventListener){$el.addEventListener(\"click\",callBack,false);$closeBtn.addEventListener(\"click\",callBack2,false);}else if(document.attachEvent){$el.attachEvent(\"click\",callBack);$closeBtn.attachEvent(\"click\",callBack2);}else{$el.onclick=callBack;$closeBtn.onclick=callBack2;}if(typeof window.__gdpr===\"object\"&&typeof window.__gdpr.__isLessAgeConsent===\"boolean\"&&window.__gdpr.__isLessAgeConsent){$moreAge1.style.display=\"none\";$moreAge2.style.display=\"none\";$lessAge.style.display=\"block\";$el.innerHTML=\"Ok\";$el.style.width=\"120px\";}delete window.__gdpr;}());";utag.gdpr.preferences_prompt.defaultLang="en";utag.gdpr.showConsentPreferences=function(_lang){try{if(utag.gdpr.preferences_prompt.noShow){return;}var cn=document.getElementById("__tealiumGDPRcpStyle");if(cn){cn.parentNode.removeChild(cn);}var hn=document.getElementById("__tealiumGDPRcpPrefs");if(hn){hn.parentNode.removeChild(hn);}var sn=document.getElementById("__tealiumGDPRcpPrefsScript");if(sn){sn.parentNode.removeChild(sn);}var dtc=utag.gdpr.getDeTokenizedContent(utag.gdpr.preferences_prompt,_lang);var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style"),mDiv=document.createElement("div"),scr=document.createElement("script"),body=document.body||document.getElementsByTagName("body")[0];style.type="text/css";style.id="__tealiumGDPRcpStyle";if(style.styleSheet){style.styleSheet.cssText=dtc.css;}else{style.appendChild(document.createTextNode(dtc.css));}head.appendChild(style);var activeCats=utag.gdpr.getCategories(true);var cats='';var id;for(var i=0;i<activeCats.length;i++){id=utag.gdpr.preferences_prompt.categories[activeCats[i]].id;cats+='<tr><td>{{category_'+activeCats[i]+'_title}}</td><td>{{category_'+activeCats[i]+'_description}}</td><td><input type="checkbox" class="toggle" id="toggle_cat'+id+'"/><label for="toggle_cat'+id+'"> <span class="on">{{yes}}</span> <span class="off">{{no}}</span></label></td></tr>';}mDiv.innerHTML=dtc.html.replace('<!--CATEGORIES-->',cats);mDiv.id="__tealiumGDPRcpPrefs";body.appendChild(mDiv);scr.language="javascript";scr.type="text/javascript";scr.text="try{"+dtc.js+"} catch(e){utag.DB(e)}";scr.id="__tealiumGDPRcpPrefsScript";head.appendChild(scr);}catch(e){utag.DB(e);}};utag.track_old=utag.track;utag.track=function(a,b,c,d){if(typeof a=="string")a={event:a,data:b,cfg:{cb:c,uids:d}};if(a.event==="update_consent_cookie"&&b.consent_categories){utag.gdpr.updateConsentCookie(b.consent_categories);}else{if(utag.gdpr.getConsentState()===0){if(!utag.gdpr.noqueue)utag.gdpr.queue.push({event:a.event,data:utag.handler.C(a.data),cfg:utag.handler.C(a.cfg)});}
utag.gdpr.refreshCookie();return utag.track_old.apply(this,arguments);}};utag.loader.OU_old=utag.loader.OU;utag.loader.OU=function(){utag.loader.OU_old();utag.gdpr.applyConsentState();};if(utag.gdpr.preferences_prompt.single_cookie){window.utag_cfg_ovrd=window.utag_cfg_ovrd||{};window.utag_cfg_ovrd.nocookie=true;}
if(!utag.gdpr.consent_prompt.isEnabled&&utag.gdpr.getConsentState()==0){utag.gdpr.setAllCategories(utag.gdpr.preferences_prompt.defaultState,!0);}
if(typeof utag_cfg_ovrd!='undefined'){for(var i in utag.loader.GV(utag_cfg_ovrd))utag.cfg[i]=utag_cfg_ovrd[i]};utag.loader.PINIT=function(a,b,c){utag.DB("Pre-INIT");if(utag.cfg.noload){return;}
try{this.GET();if(utag.handler.RE('view',utag.data,"blr")){utag.handler.LR(utag.data);}}catch(e){utag.DB(e)};a=this.cfg;c=0;for(b in this.GV(a)){if(a[b].block==1||(a[b].load>0&&(typeof a[b].src!='undefined'&&a[b].src!=''))){a[b].block=1;c=1;this.bq[b]=1;}}
if(c==1){for(b in this.GV(a)){if(a[b].block){a[b].id=b;if(a[b].load==4)a[b].load=1;a[b].cb=function(){var d=this.uid;utag.loader.cfg[d].cbf=1;utag.loader.LOAD(d)};this.AS(a[b]);}}}
if(c==0)this.INIT();};utag.loader.INIT=function(a,b,c,d,e){utag.DB('utag.loader.INIT');if(this.ol==1)return-1;else this.ol=1;if(utag.cfg.noview!=true)utag.handler.RE('view',utag.data,"alr");utag.rpt.ts['i']=new Date();d=this.cfgsort;for(a=0;a<d.length;a++){e=d[a];b=this.cfg[e];b.id=e;if(b.block!=1&&b.s2s!=1){if(utag.loader.bk[b.id]||((utag.cfg.readywait||utag.cfg.noview)&&b.load==4)){this.f[b.id]=0;utag.loader.LOAD(b.id)}else if(b.wait==1&&utag.loader.rf==0){utag.DB('utag.loader.INIT: waiting '+b.id);this.wq.push(b)
this.f[b.id]=2;}else if(b.load>0){utag.DB('utag.loader.INIT: loading '+b.id);this.lq.push(b);this.AS(b);}}}
if(this.wq.length>0)utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.DB('READY:utag.loader.wq');utag.loader.rf=1;utag.loader.WQ();}});else if(this.lq.length>0)utag.loader.rf=1;else if(this.lq.length==0)utag.loader.END();return 1};utag.loader.EV('','ready',function(a){if(utag.loader.efr!=1){utag.loader.efr=1;try{if(!utag.gdpr.consent_prompt.noShow){if(!utag.gdpr.getConsentState()){if(utag.gdpr.consent_prompt.isEnabled){utag.gdpr.showExplicitConsent();}}}}catch(e){utag.DB(e);}try{try{if(1){if(window.localStorage&&window.localStorage.getItem("tealium_log")==="show"&&window.sessionStorage&&window.sessionStorage.getItem("tealium_ext100")&&!window.tealium_ext100_WeAreInBeta){window.tealium_ext100_WeAreInBeta=true;eval(window.sessionStorage.getItem("tealium_ext100"));}
else try{tealium_logContext='domready';tealium_log.domready.set('processing',utag_data);var country=utag_data.Page_Country||'',plat=utag_data.Page_Platform||'',pag=utag_data.Page_Code||'',dev=utag_data.Page_DeviceType||'',path=utag_data.Page_Path||'',lan=utag_data.Page_Language||'',box='';switch(utag_data.Page_Brand){case'RB':{tealium_logContext='modifiche presenti su JIRA';{}
tealium_logContext='modifiche non presenti su JIRA';{if(pag.match(/./)){if(dev.match(/desktop/)){box='D_X_MainNav_Logo_temp';jQuery('.wcs-title_logo > a').addClass(box);box='D_X_MainNav_temp';jQuery('.wcs-header .wcs-primary>a').addClass(box);box='D_X_MainNav_temp';jQuery('.wcs-header .wcs-primary .wcs-container a#FeaturedTitle').addClass(box);box='D_X_MainNav_Lens_temp';jQuery('.wcs-drop_panel.wcs-lenses a').addClass(box);box='D_X_MainNav_Lab_temp';jQuery('.wcs-drop_panel.wcs-lab a').addClass(box);box='D_X_MainNav_Stories_temp';jQuery('.wcs-drop_panel.wcs-stories a').addClass(box);}
if(dev.match(/mobile/)){box='M_X_MainNav_temp';jQuery('.rb-menu a').removeAttr('onclick').addClass(box);box='M_X_MainNav_MenuIcon_temp';jQuery('.rb-menu-button.rb-icon.rb-icon-menu-bright').addClass(box);box='M_X_MainNav_Search_temp';jQuery('.rb-icon-search-bright').addClass(box);box='M_X_MainNav_Fav_temp';jQuery('.rb-icon-star-bright').addClass(box);box='M_X_MainNav_Bag_temp';jQuery('.rb-icon-shoppingbag-bright').addClass(box);}}
if(pag.match(/./)){if(dev.match(/desktop/)){box='D_X_MiniSidebar_Search_temp';jQuery('.wcs-right-nav button#glass').addClass(box);box='D_X_MiniSidebar_Bag_temp';jQuery('.wcs-right-nav button#bag').addClass(box);box='D_X_MiniSidebar_Fav_temp';jQuery('.wcs-right-nav button#star').addClass(box);}}
if(pag.match(/:Home$/i)){if(dev.match(/mobile/)){box='M_Home_BottomMenu_temp';jQuery('.rb-page-link-group.footerMenu a').removeAttr('onclick').addClass(box);}}
if(pag.match(/:ProductDetail:ProductDetailPage|PDP/)){box='D_PDP_Prod_TabSize_temp';jQuery('.wcs-pdp-tab-links li a[href="#tab3"]').addClass(box);box='D_PDP_Prod_TabFrame_temp';jQuery('.wcs-pdp-tab-links li a[href="#tab2"]').addClass(box);box='D_PDP_Prod_TabDetails_temp';jQuery('.wcs-pdp-tab-links li a[href="#tab1"]').addClass(box);box='D_PDP_Prod_TabReadMore_temp';jQuery('#tab1 .adjust').addClass(box);}
if(pag.match(/:ProductDetail:ProductDetailPage|PDP/))jQuery('#wcs-lenstreatmentcolor').attr('data-description','Lens Name');if(pag.match(/:M:Cart:CartSummary:LandingPage/))jQuery('p[content_box="M CartPage HeaderLogin"] + p > a').attr('data-description','EmailYourBasket');if(path.match(/LogonForm$/i))jQuery("form[action='UserRegistrationAdd'] > button[class*='rb-input-submit']").attr('id','mobi-myProfile-createAccount_temp');if(path.match(/MyDetailsEditView$/i))jQuery("form[action='UserDetailsUpdate'] > button[class*='rb-input-submit']").attr('id','mobi-myProfile-saveDetails_temp');if(path.match(/MyDetailsEditView$/i))jQuery("input[id*=\'rb-input-checkbox-emailSubscription_\']").removeAttr('data-checkbox-analytics');if(path.match(/PreOrderRemindMeEmailView$/))jQuery(".rb-input-submit").attr('id','mobi-pdp-outOfStock-emailMe-confirm_temp');if(path.match(/PreOrderRemindMeEmailView$/))jQuery(".rb-input-submit").removeAttr('data-analytics');if(pag.match(/Cart:CartPage:ProdDetails/i)){if(dev.match(/desktop/)){box='D_CartPage_Prods_View_temp';jQuery('.wcs-modified-table.wcs-table > div > div > a').addClass(box);box='D_CartPage_Prods_QntMinus_temp';jQuery('.wcs-shopping-item-qtyMinus').addClass(box);box='D_CartPage_Prods_QntPlus_temp';jQuery('.wcs-shopping-item-qtyPlus').addClass(box);box='D_CartPage_Summary_CalculateTax_temp';jQuery('#wcs-calculate-tax').addClass(box);box='D_CartPage_Summary_CalculateTax_temp';jQuery('#wcs-recalculate-tax').addClass(box);box='D_CartPage_Bottom_Banner_temp';jQuery('.wcs-shopping-content-recommends').addClass(box);box='D_CartPage_Summary_ContinueShopping_temp';jQuery('.wcs-basket-continue-shopping').addClass(box);box='D_CartPage_Top_ShopRunnerInfo_temp';jQuery('#D_Cart_Top_ShopRunner .srd_a_wrap a:nth-child(1)').addClass(box);box='D_CartPage_Top_ShopRunnerSignIn_temp';jQuery('#D_Cart_Top_ShopRunner .srd_a_wrap a:nth-child(2)').addClass(box);}else if(dev.match(/mobile/)){box='M_CartPage_Top_InboxYourItems_temp';jQuery('p[content_box="M CartPage HeaderLogin"]+ p > a').addClass(box);box='M_CartPage_Prods_View_temp';jQuery('#pdpUrl').addClass(box);box='M CartPage Top SignIn_temp';jQuery('p[content_box="M CartPage HeaderLogin"]').attr('content_box',box);}}
if(pag.match(/./)){if(dev.match(/desktop/)){box='D_X_Footer_SharePinterest_temp';jQuery('.wcs-pin a').attr('data-eventType','SocialShare').addClass(box);box='D_X_Footer_ShareTwitter_temp';jQuery('.wcs-twitter  a').attr('data-eventType','SocialShare').addClass(box);box='D_X_Footer_ShareFacebook_temp';jQuery('.wcs-facebook a').attr('data-eventType','SocialShare').addClass(box);box='D_X_Footer_ShareYoutube_temp';jQuery('.wcs-youtube a').attr('data-eventType','SocialShare').addClass(box);box='D_X_Footer_ShareGooglePlus_temp';jQuery('.wcs-google a').attr('data-eventType','SocialShare').addClass(box);}
if(dev.match(/mobile/)){box='M_X_Footer_Buttons_temp';jQuery('footer.rb-footer').addClass(box);box='M_X_Footer_Share_temp';jQuery('footer.rb-footer .rb-footer-social').addClass(box);}}
if(pag.match(/PClp/i)){jQuery('[data-element-id*="_PDP_6-Banner"]').each(function(){box=jQuery(this).attr("data-element-id").replace('_PDP','_PClp')+"_temp";jQuery(this).attr("data-element-id",box);});}
}
break;}
case'SGH':{tealium_logContext='modifiche presenti su JIRA';{if(jQuery("title")&&jQuery("title").text&&jQuery("title").text().match(/Generic Application Error Test JSP/i)){utag_data.Error_Source="Server";utag_data.Error_Code="Generic Application Error Test JSP";utag_data.Error_Message=(jQuery("div h1[role='main']")&&jQuery("div h1[role='main']").first&&jQuery("div h1[role='main']").first().text)?jQuery("div h1[role='main']").first().text():"";utag_data.Events_Error="1";}}
break;}
case'GL':{tealium_logContext='modifiche presenti su JIRA';{if((jQuery("title")&&jQuery("title").text&&jQuery("title").text().match(/Generic Application Error Test JSP/i))||(jQuery("div h1[role='main']")&&jQuery("div h1[role='main']").text&&jQuery("div h1[role='main']").text().match(/The store has encountered a problem/i))){utag_data.Error_Source="Server";utag_data.Error_Code="Generic Application Error Test JSP";utag_data.Error_Message=(jQuery("div h1[role='main']")&&jQuery("div h1[role='main']").first&&jQuery("div h1[role='main']").first().text)?jQuery("div h1[role='main']").first().text():"";utag_data.Events_Error="1";}}
break;}
case'OO':case'OSI':{tealium_logContext='modifiche presenti su JIRA';jQuery('[data-element-id').each(function(){var __id=jQuery(this).attr("data-element-id");if(__id.match("|")){var parts=__id.split("|");if(parts.length==2){var cps=parts[0].split("_");if(cps.length>2){box=cps[0]+"_"+cps[1]+"_"+parts[1]+"_temp";jQuery(this).attr("data-element-id",box);}}}});break;}
default:break;}
if(utag_data.pageName&&utag_data.pageName.match(/^OPSM_/i)){tealium_logContext='reloading utag_data';delete utag_data.Tracking_EventId_Serial;tealium_data2track.push(tealium_objMerge({id:'Loading-Ready'},utag_data));}
tealium_log.domready.set('done',utag_data);}catch(err){var datalayer={'id':'X-X-X-X-Error'};tealium_log.domready.set('error',datalayer,tealium_logContext+': '+err.stack);tealium_data2track.push(datalayer);}
LuxotticaFrameworkVersion.domready="20-02-02";}}catch(e){utag.DB(e)}}catch(e){utag.DB(e)};}})
if(utag.cfg.readywait||utag.cfg.waittimer){utag.loader.EV('','ready',function(a){if(utag.loader.rf==0){utag.loader.rf=1;utag.cfg.readywait=1;utag.DB('READY:utag.cfg.readywait');setTimeout(function(){utag.loader.PINIT()},utag.cfg.waittimer||1);}})}else{utag.loader.PINIT()}}
//tealium universal tag - utag.391 ut4.0.202005190941, Copyright 2020 Tealium.com Inc. All Rights Reserved.
var e=function(){"use strict";function e(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var i=this.callbacks[e].push(t)-1;return function(){this.callbacks[e].splice(i,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var i=this.callbacks[e].shift();"function"==typeof i?i.apply(null,t):i instanceof Array&&i[1].apply(i[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!v.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var i=void 0!==e[t]?e[t]:"";this.execute(t,i)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}function t(e){for(var t=/^\d+$/,i=0,n=e.length;i<n;i++)if(!t.test(e[i]))return!1;return!0}function i(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function n(e,t){for(var i=0;i<e.length;i++){var n=parseInt(e[i],10),r=parseInt(t[i],10);if(n>r)return 1;if(r>n)return-1}return 0}function r(e,r){if(e===r)return 0;var a=e.toString().split("."),s=r.toString().split(".");return t(a.concat(s))?(i(a,s),n(a,s)):NaN}var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,i,n=1;n<arguments.length;++n){i=arguments[n];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e};var s={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},o={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},l={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut"},d={CUSTOMERIDS:"getCustomerIDs"},c={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs"},u={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},f={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},g={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},m={GLOBAL:"global"},_={MESSAGES:s,STATE_KEYS_MAP:o,ASYNC_API_MAP:l,SYNC_API_MAP:d,ALL_APIS:c,FIELDGROUP_TO_FIELD:u,FIELDS:f,AUTH_STATE:g,OPT_OUT:m},h=_.STATE_KEYS_MAP,p=function(e){function t(){}function i(t,i){var n=this;return function(){var t=e(0,h.MCMID),r={};return r[h.MCMID]=t,n.setStateAndPublish(r),i(t),t}}this.getMarketingCloudVisitorID=function(e){e=e||t;var n=this.findField(h.MCMID,e),r=i.call(this,h.MCMID,e);return void 0!==n?n:r()}},C=_.MESSAGES,S=_.ASYNC_API_MAP,I=_.SYNC_API_MAP,D=function(){function e(){}function t(e,t){var i=this;return function(){return i.callbackRegistry.add(e,t),i.messageParent(C.GETSTATE),""}}function i(i){this[S[i]]=function(n){n=n||e;var r=this.findField(i,n),a=t.call(this,i,n);return void 0!==r?r:a()}}function n(t){this[I[t]]=function(){return this.findField(t,e)||{}}}Object.keys(S).forEach(i,this),Object.keys(I).forEach(n,this)},A=_.ASYNC_API_MAP,M=function(){Object.keys(A).forEach(function(e){this[A[e]]=function(t){this.callbackRegistry.add(e,t)}},this)},v=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){t.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},t.isValueEmpty=function(e){return""===e||t.isObjectEmpty(e)},t.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},t.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},t.isObject=function(e){return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}}),y=(v.isObjectEmpty,v.isValueEmpty,v.getIeVersion,v.encodeAndBuildRequest,v.isObject,e),b=_.MESSAGES,T={0:"prefix",1:"orgID",2:"state"},k=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,i){if(void 0!==e){t[T[i]]=2!==i?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(i){var n=this.parse(i);if(!n||Object.keys(n).length<2)return!0;var r=e!==n.orgID,a=!t||i.origin!==t,s=-1===Object.keys(b).indexOf(n.prefix);return r||a||s},this.send=function(i,n,r){var a=n+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{i.postMessage(a,t)}catch(e){}}},O=_.MESSAGES,E=function(e,t,i,n){function r(e){Object.assign(m,e)}function s(e){Object.assign(m.state,e),m.callbackRegistry.executeAll(m.state)}function o(e){if(!C.isInvalid(e)){h=!1;var t=C.parse(e);m.setStateAndPublish(t.state)}}function l(e){!h&&_&&(h=!0,C.send(n,e))}function d(){r(new p(i._generateID)),m.getMarketingCloudVisitorID(),m.callbackRegistry.executeAll(m.state,!0),a.removeEventListener("message",c)}function c(e){if(!C.isInvalid(e)){var t=C.parse(e);h=!1,a.clearTimeout(m._handshakeTimeout),a.removeEventListener("message",c),r(new D(m)),a.addEventListener("message",o),m.setStateAndPublish(t.state),m.callbackRegistry.hasCallbacks()&&l(O.GETSTATE)}}function u(){_&&postMessage?(a.addEventListener("message",c),l(O.HANDSHAKE),m._handshakeTimeout=setTimeout(d,250)):d()}function f(){a.s_c_in||(a.s_c_il=[],a.s_c_in=0),m._c="Visitor",m._il=a.s_c_il,m._in=a.s_c_in,m._il[m._in]=m,a.s_c_in++}function g(){function e(e){0!==e.indexOf("_")&&"function"==typeof i[e]&&(m[e]=function(){})}Object.keys(i).forEach(e),m.getSupplementalDataID=i.getSupplementalDataID}var m=this,_=t.whitelistParentDomain;m.state={},m.version=i.version,m.marketingCloudOrgID=e,m.cookieDomain=i.cookieDomain||"",m._instanceType="child";var h=!1,C=new k(e,_);m.callbackRegistry=y(),m.init=function(){f(),g(),r(new M(m)),u()},m.findField=function(e,t){if(m.state[e])return t(m.state[e]),m.state[e]},m.messageParent=l,m.setStateAndPublish=s},L=_.MESSAGES,P=_.ALL_APIS,R=_.ASYNC_API_MAP,F=_.FIELDGROUP_TO_FIELD,w=function(e,t){function i(){var t={};return Object.keys(P).forEach(function(i){var n=P[i],r=e[n]();v.isValueEmpty(r)||(t[i]=r)}),t}function n(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(i){if(e._loading[i]){var n=F[i];t.push(n)}}),t.length?t:null}function r(t){return function i(r){var a=n();if(a){var s=R[a[0]];e[s](i,!0)}else t()}}function a(e,n){var r=i();t.send(e,n,r)}function s(e){l(e),a(e,L.HANDSHAKE)}function o(e){r(function(){a(e,L.PARENTSTATE)})()}function l(i){function n(n){r.call(e,n),t.send(i,L.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=n}return function(e){if(!t.isInvalid(e)){(t.parse(e).prefix===L.HANDSHAKE?s:o)(e.source)}}},V=function(e,t){function i(e){return function(i){n[e]=i,r++,r===a&&t(n)}}var n={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var n=e[t];if(n.fn){var r=n.args||[];r.unshift(i(t)),n.fn.apply(n.context||null,r)}})},N=function(e){var t;if(!e&&a.location&&(e=a.location.hostname),t=e)if(/^[0-9.]+$/.test(t))t="";else{var i=",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,",n=t.split("."),r=n.length-1,s=r-1;if(r>1&&n[r].length<=2&&(2===n[r-1].length||i.indexOf(","+n[r]+",")<0)&&s--,s>0)for(t="";r>=s;)t=n[r]+(t?".":"")+t,r--}return t},x={compare:r,isLessThan:function(e,t){return r(e,t)<0},areVersionsDifferent:function(e,t){return 0!==r(e,t)},isGreaterThan:function(e,t){return r(e,t)>0},isEqual:function(e,t){return 0===r(e,t)}},j=!!a.postMessage,U={postMessage:function(e,t,i){var n=1;t&&(j?i.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(i.location=t.replace(/#.*$/,"")+"#"+ +new Date+n+++"&"+e))},receiveMessage:function(e,t){var i;try{j&&(e&&(i=function(i){if("string"==typeof t&&i.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(i.origin))return!1;e(i)}),a.addEventListener?a[e?"addEventListener":"removeEventListener"]("message",i):a[e?"attachEvent":"detachEvent"]("onmessage",i))}catch(e){}}},H=function(e){var t,i,n="0123456789",r="",a="",s=8,o=10,l=10;if(1==e){for(n+="ABCDEF",t=0;16>t;t++)i=Math.floor(Math.random()*s),r+=n.substring(i,i+1),i=Math.floor(Math.random()*s),a+=n.substring(i,i+1),s=16;return r+"-"+a}for(t=0;19>t;t++)i=Math.floor(Math.random()*o),r+=n.substring(i,i+1),0===t&&9==i?o=3:(1==t||2==t)&&10!=o&&2>i?o=10:2<t&&(o=10),i=Math.floor(Math.random()*l),a+=n.substring(i,i+1),0===t&&9==i?l=3:(1==t||2==t)&&10!=l&&2>i?l=10:2<t&&(l=10);return r+a},B=function(e,t){return{corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(a.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new a[this.corsMetadata.corsType]},fireCORS:function(t,i,n){function r(e){var i;try{if((i=JSON.parse(e))!==Object(i))return void s.handleCORSError(t,null,"Response is not JSON")}catch(e){return void s.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var n=t.callback,r=a,o=0;o<n.length;o++)r=r[n[o]];r(i)}catch(e){s.handleCORSError(t,e,"Error forming callback function")}}var s=this;i&&(t.loadErrorHandler=i);try{var o=this.getCORSInstance();o.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&r(this.responseText)}),o.onerror=function(e){s.handleCORSError(t,e,"onerror")},o.ontimeout=function(e){s.handleCORSError(t,e,"ontimeout")},o.send(),e._log.requests.push(t.corsUrl)}catch(e){this.handleCORSError(t,e,"try-catch")}},handleCORSError:function(t,i,n){e.CORSErrors.push({corsData:t,error:i,description:n}),t.loadErrorHandler&&("ontimeout"===n?t.loadErrorHandler(!0):t.loadErrorHandler(!1))}}},G={POST_MESSAGE_ENABLED:!!a.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/},q=function(e,t){var i=a.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,n="http://fast.",r="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(i.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(n=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=n+this.subdomain+".demdex.net/dest5.html"+r,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(i.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:G.POST_MESSAGE_ENABLED?null:100,jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){r=i.createElement("iframe"),r.sandbox="allow-scripts allow-same-origin",r.title="Adobe ID Syncing iFrame",r.id=n.id,r.name=n.id+"_name",r.style.cssText="display: none; width: 0; height: 0;",r.src=n.url,n.newIframeCreated=!0,t(),i.body.appendChild(r)}function t(e){r.addEventListener("load",function(){r.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.fireIframeLoadedCallbacks(e),n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,r=i.getElementById(this.id);r?"IFRAME"!==r.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==r.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=r,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=r},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach(function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})}),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function i(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var n,r=this;if(t===Object(t)&&t.ibs)if(n=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var a,s,o,l=!1;for(a=0,s=this.jsonForComparison.length;a<s;a++)if(o=this.jsonForComparison[a],n===JSON.stringify(o.ibs||[])){l=!0;break}l?this.jsonDuplicates.push(t):i()}else i();if((this.receivedThirdPartyCookiesNotification||!G.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var d=this.jsonWaiting.shift();this.process(d),this.requestToProcess()}e.idSyncDisableSyncs||e.disableIdSyncs||!this.iframeHasLoaded||!this.messages.length||this.sendingMessages||(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=G.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,i){var n=e._getField("MCAAMLH"),r=t.d_region||t.dcs_region;return n?r&&(e._setFieldExpire("MCAAMLH",i),e._setField("MCAAMLH",r),parseInt(n,10)!==r&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField("MCSYNCSOP",""),e._setField("MCSYNCS",""),n=r)):(n=r)&&(e._setFieldExpire("MCAAMLH",i),e._setField("MCAAMLH",n)),n||(n=""),n},processSyncOnPage:function(e){var t,i,n,r;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(n=0;n<i;n++)r=t[n],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,i,n,r,a,s=encodeURIComponent,o=!1;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(o=!0,n=0;n<i;n++)r=t[n],a=[s("ibs"),s(r.id||""),s(r.tag||""),v.encodeAndBuildRequest(r.url||[],","),s(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));o&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,i,n){var r="syncOnPage"===n,a=r?"MCSYNCSOP":"MCSYNCS";e._readVisitor();var s,o,l=e._getField(a),d=!1,c=!1,u=Math.ceil((new Date).getTime()/G.MILLIS_PER_DAY);l?(s=l.split("*"),o=this.pruneSyncData(s,t.id,u),d=o.dataPresent,c=o.dataValid,d&&c||this.fireSync(r,t,i,s,a,u)):(s=[],this.fireSync(r,t,i,s,a,u))},pruneSyncData:function(e,t,i){var n,r,a,s=!1,o=!1;for(r=0;r<e.length;r++)n=e[r],a=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(s=!0,i<a?o=!0:(e.splice(r,1),r--)):i>=a&&(e.splice(r,1),r--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,i,n,r,a,s){var o=this;if(t){if("img"===i.tag){var l,d,c,u,f=i.url,g=e.loadSSL?"https:":"http:";for(l=0,d=f.length;l<d;l++){c=f[l],u=/^\/\//.test(c);var m=new Image;m.addEventListener("load",function(t,i,n,r){return function(){o.onPagePixels[t]=null,e._readVisitor();var s,l=e._getField(a),d=[];if(l){s=l.split("*");var c,u,f;for(c=0,u=s.length;c<u;c++)f=s[c],f.match("^"+i.id+"-")||d.push(f)}o.setSyncTrackingData(d,i,n,r)}}(this.onPagePixels.length,i,a,s)),m.src=(u?g:"")+c,this.onPagePixels.push(m)}}}else this.addMessage(n),this.setSyncTrackingData(r,i,a,s)},addMessage:function(t){var i=encodeURIComponent,n=i(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((G.POST_MESSAGE_ENABLED?"":n)+t)},setSyncTrackingData:function(t,i,n,r){t.push(i.id+"-"+(r+Math.ceil(i.ttl/60/24))),this.manageSyncsSize(t),e._setField(n,t.join("*"))},sendMessages:function(){var e,t=this,i="",n=encodeURIComponent;this.regionChanged&&(i=n("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?G.POST_MESSAGE_ENABLED?(e=i+n("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(i+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){U.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,i=/^---destpub-to-parent---/;"string"==typeof e&&i.test(e)&&(t=e.replace(i,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(n){(null==this.url||n.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=n.subdomain||"",this.url=this.getUrl()),n.ibs instanceof Array&&n.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===i.readyState||"loaded"===i.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(n):this.requestToProcess(n),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(n)},canMakeSyncIDCall:function(t,i){return e._forceSyncIDCall||!t||i-t>G.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(i.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}},Y={audienceManagerServer:{},audienceManagerServerSecure:{},cookieDomain:{},cookieLifetime:{},cookieName:{},disableThirdPartyCalls:{},idSyncAfterIDCallResult:{},idSyncAttachIframeOnWindowLoad:{},idSyncContainerID:{},idSyncDisable3rdPartySyncing:{},disableThirdPartyCookies:{},idSyncDisableSyncs:{},disableIdSyncs:{},idSyncIDCallResult:{},idSyncSSLUseAkamai:{},isCoopSafe:{},loadSSL:{},loadTimeout:{},marketingCloudServer:{},marketingCloudServerSecure:{},overwriteCrossDomainMCIDAndAID:{},resetBeforeVersion:{},sdidParamExpiry:{},serverState:{},sessionCookieName:{},secureCookie:{},takeTimeoutMetrics:{},trackingServer:{},trackingServerSecure:{},whitelistIframeDomains:{},whitelistParentDomain:{}},X={getConfigNames:function(){return Object.keys(Y)},getConfigs:function(){return Y}},W=function(e,t,i){function n(e){var t=e;return function(e){var i=e||c.location.href;try{var n=d._extractParamFromUri(i,t);if(n)return y.parsePipeDelimetedKeyValues(n)}catch(e){}}}function r(e){function t(e,t){e&&e.match(G.VALID_VISITOR_ID_REGEX)&&t(e)}t(e[m],d.setMarketingCloudVisitorID),d._setFieldExpire(I,-1),t(e[C],d.setAnalyticsVisitorID)}function s(e){e=e||{},d._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",d._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},d._supplementalDataIDLast=e.supplementalDataIDLast||"",d._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function o(e){function t(e,t,i){return i=i?i+="|":i,i+=e+"="+encodeURIComponent(t)}function i(e,i){var n=i[0],r=i[1];return null!=r&&r!==D&&(e=t(n,r,e)),e}var n=e.reduce(i,"");return function(e){var t=y.getTimestampInSeconds();return e=e?e+="|":e,e+="TS="+t}(n)}function l(e){var t=e.minutesToLive,i="";return(d.idSyncDisableSyncs||d.disableIdSyncs)&&(i=i||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(i=i||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(i=i||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(i=i||"Error: config.minutesToLive needs to be a positive number")),{error:i,ttl:t}}if(!i||i.split("").reverse().join("")!==e)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var d=this;d.version="3.3.0";var c=a,u=c.Visitor;u.version=d.version,u.AuthState=_.AUTH_STATE,u.OptOut=_.OPT_OUT,c.s_c_in||(c.s_c_il=[],c.s_c_in=0),d._c="Visitor",d._il=c.s_c_il,d._in=c.s_c_in,d._il[d._in]=d,c.s_c_in++,d._instanceType="regular",d._log={requests:[]},d.marketingCloudOrgID=e,d.cookieName="AMCV_"+e,d.sessionCookieName="AMCVS_"+e,d.cookieDomain=N(),d.cookieDomain===c.location.hostname&&(d.cookieDomain=""),d.loadSSL=c.location.protocol.toLowerCase().indexOf("https")>=0,d.loadTimeout=3e4,d.CORSErrors=[],d.marketingCloudServer=d.audienceManagerServer="dpm.demdex.net",d.sdidParamExpiry=30;var f=c.document,g=null,m="MCMID",h="MCIDTS",p="A",C="MCAID",S="AAM",I="MCAAMB",D="NONE",A=function(e){return!Object.prototype[e]},M=B(d);d.FIELDS=_.FIELDS,d.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+f.cookie).split(" ").join(";"),i=t.indexOf(";"+e+"="),n=i<0?i:t.indexOf(";",i+1);return i<0?"":decodeURIComponent(t.substring(i+2+e.length,n<0?t.length:n))},d.cookieWrite=function(e,t,i){var n,r=d.cookieLifetime,a="";if(t=""+t,r=r?(""+r).toUpperCase():"",i&&"SESSION"!==r&&"NONE"!==r){if(n=""!==t?parseInt(r||0,10):-60)i=new Date,i.setTime(i.getTime()+1e3*n);else if(1===i){i=new Date;var s=i.getYear();i.setYear(s+2+(s<1900?1900:0))}}else i=0;return e&&"NONE"!==r?(d.configs&&d.configs.secureCookie&&"https:"===location.protocol&&(a="Secure"),f.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(i?" expires="+i.toGMTString()+";":"")+(d.cookieDomain?" domain="+d.cookieDomain+";":"")+a,d.cookieRead(e)===t):0},d.resetState=function(e){e?d._mergeServerState(e):s()},d._isAllowedDone=!1,d._isAllowedFlag=!1,d.isAllowed=function(){return d._isAllowedDone||(d._isAllowedDone=!0,(d.cookieRead(d.cookieName)||d.cookieWrite(d.cookieName,"T",1))&&(d._isAllowedFlag=!0)),d._isAllowedFlag},d.setMarketingCloudVisitorID=function(e){d._setMarketingCloudFields(e)},d._use1stPartyMarketingCloudServer=!1,d.getMarketingCloudVisitorID=function(e,t){if(d.isAllowed()){d.marketingCloudServer&&d.marketingCloudServer.indexOf(".demdex.net")<0&&(d._use1stPartyMarketingCloudServer=!0);var i=d._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return d._getRemoteField(m,n,e,t,i)}return""},d.getVisitorValues=function(e,t){var i={MCMID:{fn:d.getMarketingCloudVisitorID,args:[!0],context:d},MCOPTOUT:{fn:d.isOptedOut,args:[void 0,!0],context:d},MCAID:{fn:d.getAnalyticsVisitorID,args:[!0],context:d},MCAAMLH:{fn:d.getAudienceManagerLocationHint,args:[!0],context:d},MCAAMB:{fn:d.getAudienceManagerBlob,args:[!0],context:d}},n=t&&t.length?y.pluck(i,t):i;V(n,e)},d._currentCustomerIDs={},d._customerIDsHashChanged=!1,d._newCustomerIDsHash="",d.setCustomerIDs=function(e){function t(){d._customerIDsHashChanged=!1}if(d.isAllowed()&&e){if(!v.isObject(e)||v.isObjectEmpty(e))return!1;d._readVisitor();var i,n;for(i in e)if(A(i)&&(n=e[i]))if("object"==typeof n){var r={};n.id&&(r.id=n.id),void 0!=n.authState&&(r.authState=n.authState),d._currentCustomerIDs[i]=r}else d._currentCustomerIDs[i]={id:n};var a=d.getCustomerIDs(),s=d._getField("MCCIDH"),o="";s||(s=0);for(i in a)A(i)&&(n=a[i],o+=(o?"|":"")+i+"|"+(n.id?n.id:"")+(n.authState?n.authState:""));d._newCustomerIDsHash=String(d._hash(o)),d._newCustomerIDsHash!==s&&(d._customerIDsHashChanged=!0,d._mapCustomerIDs(t))}},d.getCustomerIDs=function(){d._readVisitor();var e,t,i={};for(e in d._currentCustomerIDs)A(e)&&(t=d._currentCustomerIDs[e],i[e]||(i[e]={}),t.id&&(i[e].id=t.id),void 0!=t.authState?i[e].authState=t.authState:i[e].authState=u.AuthState.UNKNOWN);return i},d.setAnalyticsVisitorID=function(e){d._setAnalyticsFields(e)},d.getAnalyticsVisitorID=function(e,t,i){if(!y.isTrackingServerPopulated()&&!i)return d._callCallback(e,[""]),"";if(d.isAllowed()){var n="";if(i||(n=d.getMarketingCloudVisitorID(function(t){d.getAnalyticsVisitorID(e,!0)})),n||i){var r=i?d.marketingCloudServer:d.trackingServer,a="";d.loadSSL&&(i?d.marketingCloudServerSecure&&(r=d.marketingCloudServerSecure):d.trackingServerSecure&&(r=d.trackingServerSecure));var s={};if(r){var o="http"+(d.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+d.version+"&mcorgid="+encodeURIComponent(d.marketingCloudOrgID)+(n?"&mid="+encodeURIComponent(n):"")+(d.idSyncDisable3rdPartySyncing||d.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",d._in,"_set"+(i?"MarketingCloud":"Analytics")+"Fields"];a=o+"?"+l+"&callback=s_c_il%5B"+d._in+"%5D._set"+(i?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+l,s.callback=c}return s.url=a,d._getRemoteField(i?m:C,a,e,t,s)}}return""},d.getAudienceManagerLocationHint=function(e,t){if(d.isAllowed()){if(d.getMarketingCloudVisitorID(function(t){d.getAudienceManagerLocationHint(e,!0)})){var i=d._getField(C);if(!i&&y.isTrackingServerPopulated()&&(i=d.getAnalyticsVisitorID(function(t){d.getAudienceManagerLocationHint(e,!0)})),i||!y.isTrackingServerPopulated()){var n=d._getAudienceManagerURLData(),r=n.url;return d._getRemoteField("MCAAMLH",r,e,t,n)}}}return""},d.getLocationHint=d.getAudienceManagerLocationHint,d.getAudienceManagerBlob=function(e,t){if(d.isAllowed()){if(d.getMarketingCloudVisitorID(function(t){d.getAudienceManagerBlob(e,!0)})){var i=d._getField(C);if(!i&&y.isTrackingServerPopulated()&&(i=d.getAnalyticsVisitorID(function(t){d.getAudienceManagerBlob(e,!0)})),i||!y.isTrackingServerPopulated()){var n=d._getAudienceManagerURLData(),r=n.url;return d._customerIDsHashChanged&&d._setFieldExpire(I,-1),d._getRemoteField(I,r,e,t,n)}}}return""},d._supplementalDataIDCurrent="",d._supplementalDataIDCurrentConsumed={},d._supplementalDataIDLast="",d._supplementalDataIDLastConsumed={},d.getSupplementalDataID=function(e,t){d._supplementalDataIDCurrent||t||(d._supplementalDataIDCurrent=d._generateID(1));var i=d._supplementalDataIDCurrent;return d._supplementalDataIDLast&&!d._supplementalDataIDLastConsumed[e]?(i=d._supplementalDataIDLast,d._supplementalDataIDLastConsumed[e]=!0):i&&(d._supplementalDataIDCurrentConsumed[e]&&(d._supplementalDataIDLast=d._supplementalDataIDCurrent,d._supplementalDataIDLastConsumed=d._supplementalDataIDCurrentConsumed,d._supplementalDataIDCurrent=i=t?"":d._generateID(1),d._supplementalDataIDCurrentConsumed={}),i&&(d._supplementalDataIDCurrentConsumed[e]=!0)),i},d.getOptOut=function(e,t){if(d.isAllowed()){var i=d._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return d._getRemoteField("MCOPTOUT",n,e,t,i)}return""},d.isOptedOut=function(e,t,i){if(d.isAllowed()){t||(t=u.OptOut.GLOBAL);var n=d.getOptOut(function(i){var n=i===u.OptOut.GLOBAL||i.indexOf(t)>=0;d._callCallback(e,[n])},i);return n?n===u.OptOut.GLOBAL||n.indexOf(t)>=0:null}return!1},d._fields=null,d._fieldsExpired=null,d._hash=function(e){var t,i,n=0;if(e)for(t=0;t<e.length;t++)i=e.charCodeAt(t),n=(n<<5)-n+i,n&=n;return n},d._generateID=H,d._generateLocalMID=function(){var e=d._generateID(0);return T.isClientSideMarketingCloudVisitorID=!0,e},d._callbackList=null,d._callCallback=function(e,t){try{"function"==typeof e?e.apply(c,t):e[1].apply(e[0],t)}catch(e){}},d._registerCallback=function(e,t){t&&(null==d._callbackList&&(d._callbackList={}),void 0==d._callbackList[e]&&(d._callbackList[e]=[]),d._callbackList[e].push(t))},d._callAllCallbacks=function(e,t){if(null!=d._callbackList){var i=d._callbackList[e];if(i)for(;i.length>0;)d._callCallback(i.shift(),t)}},d._addQuerystringParam=function(e,t,i,n){var r=encodeURIComponent(t)+"="+encodeURIComponent(i),a=y.parseHash(e),s=y.hashlessUrl(e);if(-1===s.indexOf("?"))return s+"?"+r+a;var o=s.split("?"),l=o[0]+"?",d=o[1];return l+y.addQueryParamAtLocation(d,r,n)+a},d._extractParamFromUri=function(e,t){var i=new RegExp("[\\?&#]"+t+"=([^&#]*)"),n=i.exec(e);if(n&&n.length)return decodeURIComponent(n[1])},d._parseAdobeMcFromUrl=n(G.ADOBE_MC),d._parseAdobeMcSdidFromUrl=n(G.ADOBE_MC_SDID),d._attemptToPopulateSdidFromUrl=function(t){var i=d._parseAdobeMcSdidFromUrl(t),n=1e9;i&&i.TS&&(n=y.getTimestampInSeconds()-i.TS),i&&i.SDID&&i.MCORGID===e&&n<d.sdidParamExpiry&&(d._supplementalDataIDCurrent=i.SDID,d._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},d._attemptToPopulateIdsFromUrl=function(){var t=d._parseAdobeMcFromUrl();if(t&&t.TS){var i=y.getTimestampInSeconds(),n=i-t.TS;if(Math.floor(n/60)>G.ADOBE_MC_TTL_IN_MIN||t.MCORGID!==e)return;r(t)}},d._mergeServerState=function(e){if(e)try{if(e=function(e){return y.isObject(e)?e:JSON.parse(e)}(e),e[d.marketingCloudOrgID]){var t=e[d.marketingCloudOrgID];!function(e){y.isObject(e)&&d.setCustomerIDs(e)}(t.customerIDs),s(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},d._timeout=null,d._loadData=function(e,t,i,n){t=d._addQuerystringParam(t,"d_fieldgroup",e,1),n.url=d._addQuerystringParam(n.url,"d_fieldgroup",e,1),n.corsUrl=d._addQuerystringParam(n.corsUrl,"d_fieldgroup",e,1),T.fieldGroupObj[e]=!0,n===Object(n)&&n.corsUrl&&"XMLHttpRequest"===M.corsMetadata.corsType&&M.fireCORS(n,i,e)},d._clearTimeout=function(e){null!=d._timeout&&d._timeout[e]&&(clearTimeout(d._timeout[e]),d._timeout[e]=0)},d._settingsDigest=0,d._getSettingsDigest=function(){if(!d._settingsDigest){var e=d.version;d.audienceManagerServer&&(e+="|"+d.audienceManagerServer),d.audienceManagerServerSecure&&(e+="|"+d.audienceManagerServerSecure),d._settingsDigest=d._hash(e)}return d._settingsDigest},d._readVisitorDone=!1,d._readVisitor=function(){if(!d._readVisitorDone){d._readVisitorDone=!0;var e,t,i,n,r,a,s=d._getSettingsDigest(),o=!1,l=d.cookieRead(d.cookieName),c=new Date;if(null==d._fields&&(d._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==s&&(o=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),i=t[0],n=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),o&&("MCCIDH"===i&&(n=""),r>0&&(r=c.getTime()/1e3-60)),i&&n&&(d._setField(i,n,1),r>0&&(d._fields["expire"+i]=r+(a?"s":""),(c.getTime()>=1e3*r||a&&!d.cookieRead(d.sessionCookieName))&&(d._fieldsExpired||(d._fieldsExpired={}),d._fieldsExpired[i]=!0)));!d._getField(C)&&y.isTrackingServerPopulated()&&(l=d.cookieRead("s_vi"))&&(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(n=l[1],e=n.indexOf("["),e>=0&&(n=n.substring(0,e)),n&&n.match(G.VALID_VISITOR_ID_REGEX)&&d._setField(C,n)))}},d._appendVersionTo=function(e){var t="vVersion|"+d.version,i=e?d._getCookieVersion(e):null;return i?x.areVersionsDifferent(i,d.version)&&(e=e.replace(G.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},d._writeVisitor=function(){var e,t,i=d._getSettingsDigest();for(e in d._fields)A(e)&&d._fields[e]&&"expire"!==e.substring(0,6)&&(t=d._fields[e],i+=(i?"|":"")+e+(d._fields["expire"+e]?"-"+d._fields["expire"+e]:"")+"|"+t);i=d._appendVersionTo(i),d.cookieWrite(d.cookieName,i,1)},d._getField=function(e,t){return null==d._fields||!t&&d._fieldsExpired&&d._fieldsExpired[e]?null:d._fields[e]},d._setField=function(e,t,i){null==d._fields&&(d._fields={}),d._fields[e]=t,i||d._writeVisitor()},d._getFieldList=function(e,t){var i=d._getField(e,t);return i?i.split("*"):null},d._setFieldList=function(e,t,i){d._setField(e,t?t.join("*"):"",i)},d._getFieldMap=function(e,t){var i=d._getFieldList(e,t);if(i){var n,r={};for(n=0;n<i.length;n+=2)r[i[n]]=i[n+1];return r}return null},d._setFieldMap=function(e,t,i){var n,r=null;if(t){r=[];for(n in t)A(n)&&(r.push(n),r.push(t[n]))}d._setFieldList(e,r,i)},d._setFieldExpire=function(e,t,i){var n=new Date;n.setTime(n.getTime()+1e3*t),null==d._fields&&(d._fields={}),d._fields["expire"+e]=Math.floor(n.getTime()/1e3)+(i?"s":""),t<0?(d._fieldsExpired||(d._fieldsExpired={}),d._fieldsExpired[e]=!0):d._fieldsExpired&&(d._fieldsExpired[e]=!1),i&&(d.cookieRead(d.sessionCookieName)||d.cookieWrite(d.sessionCookieName,"1"))},d._findVisitorID=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&"NOTARGET"===(e=e.toUpperCase())&&(e=D),e&&(e===D||e.match(G.VALID_VISITOR_ID_REGEX))||(e="")),e},d._setFields=function(e,t){if(d._clearTimeout(e),null!=d._loading&&(d._loading[e]=!1),T.fieldGroupObj[e]&&T.setState(e,!1),"MC"===e){!0!==T.isClientSideMarketingCloudVisitorID&&(T.isClientSideMarketingCloudVisitorID=!1);var i=d._getField(m);if(!i||d.overwriteCrossDomainMCIDAndAID){if(!(i="object"==typeof t&&t.mid?t.mid:d._findVisitorID(t))){if(d._use1stPartyMarketingCloudServer&&!d.tried1stPartyMarketingCloudServer)return d.tried1stPartyMarketingCloudServer=!0,void d.getAnalyticsVisitorID(null,!1,!0);i=d._generateLocalMID()}d._setField(m,i)}i&&i!==D||(i=""),"object"==typeof t&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&d._setFields(S,t),d._use1stPartyMarketingCloudServer&&t.mid&&d._setFields(p,{id:t.id})),d._callAllCallbacks(m,[i])}if(e===S&&"object"==typeof t){var n=604800;void 0!=t.id_sync_ttl&&t.id_sync_ttl&&(n=parseInt(t.id_sync_ttl,10));var r=b.getRegionAndCheckIfChanged(t,n);d._callAllCallbacks("MCAAMLH",[r]);var a=d._getField(I);(t.d_blob||t.blob)&&(a=t.d_blob,a||(a=t.blob),d._setFieldExpire(I,n),d._setField(I,a)),a||(a=""),d._callAllCallbacks(I,[a]),!t.error_msg&&d._newCustomerIDsHash&&d._setField("MCCIDH",d._newCustomerIDsHash)}if(e===p){var s=d._getField(C);s&&!d.overwriteCrossDomainMCIDAndAID||(s=d._findVisitorID(t),s?s!==D&&d._setFieldExpire(I,-1):s=D,d._setField(C,s)),s&&s!==D||(s=""),d._callAllCallbacks(C,[s])}if(d.idSyncDisableSyncs||d.disableIdSyncs)b.idCallNotProcesssed=!0;else{b.idCallNotProcesssed=!1;var o={};o.ibs=t.ibs,o.subdomain=t.subdomain,b.processIDCallData(o)}if(t===Object(t)){var l,c;d.isAllowed()&&(l=d._getField("MCOPTOUT")),l||(l=D,t.d_optout&&t.d_optout instanceof Array&&(l=t.d_optout.join(",")),c=parseInt(t.d_ottl,10),isNaN(c)&&(c=7200),d._setFieldExpire("MCOPTOUT",c,!0),d._setField("MCOPTOUT",l)),d._callAllCallbacks("MCOPTOUT",[l])}},d._loading=null,d._getRemoteField=function(e,t,i,n,r){var a,s="",o=y.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(d.isAllowed()){d._readVisitor(),s=d._getField(e,!0===l[e]);if(function(){return(!s||d._fieldsExpired&&d._fieldsExpired[e])&&(!d.disableThirdPartyCalls||o)}()){if(e===m||"MCOPTOUT"===e?a="MC":"MCAAMLH"===e||e===I?a=S:e===C&&(a=p),a)return!t||null!=d._loading&&d._loading[a]||(null==d._loading&&(d._loading={}),d._loading[a]=!0,d._loadData(a,t,function(t){if(!d._getField(e)){t&&T.setState(a,!0);var i="";e===m?i=d._generateLocalMID():a===S&&(i={error_msg:"timeout"}),d._setFields(a,i)}},r)),d._registerCallback(e,i),s||(t||d._setFields(a,{id:D}),"")}else s||(e===m?(d._registerCallback(e,i),s=d._generateLocalMID(),d.setMarketingCloudVisitorID(s)):e===C?(d._registerCallback(e,i),s="",d.setAnalyticsVisitorID(s)):(s="",n=!0))}return e!==m&&e!==C||s!==D||(s="",n=!0),i&&n&&d._callCallback(i,[s]),s},d._setMarketingCloudFields=function(e){d._readVisitor(),d._setFields("MC",e)},d._mapCustomerIDs=function(e){d.getAudienceManagerBlob(e,!0)},d._setAnalyticsFields=function(e){d._readVisitor(),d._setFields(p,e)},d._setAudienceManagerFields=function(e){d._readVisitor(),d._setFields(S,e)},d._getAudienceManagerURLData=function(e){var t=d.audienceManagerServer,i="",n=d._getField(m),r=d._getField(I,!0),a=d._getField(C),s=a&&a!==D?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(d.loadSSL&&d.audienceManagerServerSecure&&(t=d.audienceManagerServerSecure),t){var o,l,c=d.getCustomerIDs();if(c)for(o in c)A(o)&&(l=c[o],s+="&d_cid_ic="+encodeURIComponent(o)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var u="http"+(d.loadSSL?"s":"")+"://"+t+"/id",f="d_visid_ver="+d.version+"&d_rtbd=json&d_ver=2"+(!n&&d._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(d.marketingCloudOrgID)+"&d_nsid="+(d.idSyncContainerID||0)+(n?"&d_mid="+encodeURIComponent(n):"")+(d.idSyncDisable3rdPartySyncing||d.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===g?"&d_coop_safe=1":!1===g?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+s,_=["s_c_il",d._in,e];return i=u+"?"+f+"&d_cb=s_c_il%5B"+d._in+"%5D."+e,{url:i,corsUrl:u+"?"+f,callback:_}}return{url:i}},d.appendVisitorIDsTo=function(e){try{var t=[[m,d._getField(m)],[C,d._getField(C)],["MCORGID",d.marketingCloudOrgID]];return d._addQuerystringParam(e,G.ADOBE_MC,o(t))}catch(t){return e}},d.appendSupplementalDataIDTo=function(e,t){if(!(t=t||d.getSupplementalDataID(y.generateRandomString(),!0)))return e;try{var i=o([["SDID",t],["MCORGID",d.marketingCloudOrgID]]);return d._addQuerystringParam(e,G.ADOBE_MC_SDID,i)}catch(t){return e}};var y={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,i){var n=e.split("&");return i=null!=i?i:n.length,n.splice(i,0,t),n.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,i){if(e!==C)return!1;var n;return t||(t=d.trackingServer),i||(i=d.trackingServerSecure),!("string"!=typeof(n=d.loadSSL?i:t)||!n.length)&&(n.indexOf("2o7.net")<0&&n.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+(d.cookieDomain?" domain="+d.cookieDomain+";":"")},isTrackingServerPopulated:function(){return!!d.trackingServer||!!d.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var i=t.split("=");return e[i[0]]=decodeURIComponent(i[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=i[Math.floor(Math.random()*i.length)];return t},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var i in e)e.hasOwnProperty(i)&&"function"==typeof e[i]&&(e[i]=t);return e},pluck:function(e,t){return t.reduce(function(t,i){return e[i]&&(t[i]=e[i]),t},Object.create(null))}};d._helpers=y;var b=q(d,u);d._destinationPublishing=b,d.timeoutMetricsLog=[];var T={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case"MC":!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case p:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case S:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};d.isClientSideMarketingCloudVisitorID=function(){return T.isClientSideMarketingCloudVisitorID},d.MCIDCallTimedOut=function(){return T.MCIDCallTimedOut},d.AnalyticsIDCallTimedOut=function(){return T.AnalyticsIDCallTimedOut},d.AAMIDCallTimedOut=function(){return T.AAMIDCallTimedOut},d.idSyncGetOnPageSyncInfo=function(){return d._readVisitor(),d._getField("MCSYNCSOP")},d.idSyncByURL=function(e){var t=l(e||{});if(t.error)return t.error;var i,n,r=e.url,a=encodeURIComponent,s=b;return r=r.replace(/^https:/,"").replace(/^http:/,""),i=v.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),n=["ibs",a(e.dpid),"img",a(r),t.ttl,"",i],s.addMessage(n.join("|")),s.requestToProcess(),"Successfully queued"},d.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,d.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},d.publishDestinations=function(e,t,i){if(i="function"==typeof i?i:function(){},"string"!=typeof e||!e.length)return void i({error:"subdomain is not a populated string."});if(!(t instanceof Array&&t.length))return void i({error:"messages is not a populated array."});var n=b;if(!n.readyToAttachIframePreliminary())return void i({error:"The destination publishing iframe is disabled in the Visitor library."});var r=!1;if(t.forEach(function(e){"string"==typeof e&&e.length&&(n.addMessage(e),r=!0)}),!r)return void i({error:"None of the messages are populated strings."});n.iframe?(i({message:"The destination publishing iframe is already attached and loaded."}),n.requestToProcess()):!d.subdomain&&d._getField(m)?(n.subdomain=e,n.doAttachIframe=!0,n.url=n.getUrl(),n.readyToAttachIframe()?(n.iframeLoadedCallbacks.push(function(e){i({message:"Attempted to attach and load the destination publishing iframe through this API call. Result: "+(e.message||"no result")})}),n.attachIframe()):i({error:"Encountered a problem in attempting to attach and load the destination publishing iframe through this API call."})):n.iframeLoadedCallbacks.push(function(e){i({message:"Attempted to attach and load the destination publishing iframe through normal Visitor API processing. Result: "+(e.message||"no result")})})},d._getCookieVersion=function(e){e=e||d.cookieRead(d.cookieName);var t=G.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},d._resetAmcvCookie=function(e){var t=d._getCookieVersion();t&&!x.isLessThan(t,e)||y.removeCookie(d.cookieName)},d.setAsCoopSafe=function(){g=!0},d.setAsCoopUnsafe=function(){g=!1},d.init=function(){!function(){if(t&&"object"==typeof t){d.configs=Object.create(null);for(var e in t)A(e)&&(d[e]=t[e],d.configs[e]=t[e]);d.idSyncContainerID=d.idSyncContainerID||0,g="boolean"==typeof d.isCoopSafe?d.isCoopSafe:y.parseBoolean(d.isCoopSafe),d.resetBeforeVersion&&d._resetAmcvCookie(d.resetBeforeVersion),d._attemptToPopulateIdsFromUrl(),d._attemptToPopulateSdidFromUrl(),d._readVisitor();var i=d._getField(h),n=Math.ceil((new Date).getTime()/G.MILLIS_PER_DAY);d.idSyncDisableSyncs||d.disableIdSyncs||!b.canMakeSyncIDCall(i,n)||(d._setFieldExpire(I,-1),d._setField(h,n)),d.getMarketingCloudVisitorID(),d.getAudienceManagerLocationHint(),d.getAudienceManagerBlob(),d._mergeServerState(d.serverState)}else d._attemptToPopulateIdsFromUrl(),d._attemptToPopulateSdidFromUrl()}(),function(){if(!d.idSyncDisableSyncs&&!d.disableIdSyncs){b.checkDPIframeSrc();var e=function(){var e=b;e.readyToAttachIframe()&&e.attachIframe()};c.addEventListener("load",function(){u.windowLoaded=!0,e()});try{U.receiveMessage(function(e){b.receiveMessage(e.data)},b.iframeHost)}catch(e){}}}(),function(){d.whitelistIframeDomains&&G.POST_MESSAGE_ENABLED&&(d.whitelistIframeDomains=d.whitelistIframeDomains instanceof Array?d.whitelistIframeDomains:[d.whitelistIframeDomains],d.whitelistIframeDomains.forEach(function(t){var i=new k(e,t),n=w(d,i);U.receiveMessage(n,t)}))}()}};return W.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var i=function(){var t=a.s_c_il;if(t)for(var i=0;i<t.length;i++){var n=t[i];if(n&&"Visitor"===n._c&&n.marketingCloudOrgID===e)return n}}();if(i)return i;var n=e,r=n.split("").reverse().join(""),s=new W(e,null,r);t===Object(t)&&t.cookieDomain&&(s.cookieDomain=t.cookieDomain),function(){a.s_c_il.splice(--a.s_c_in,1)}();var o=v.getIeVersion();if("number"==typeof o&&o<10)return s._helpers.replaceMethodsWithFunction(s,function(){});var l=function(){try{return a.self!==a.parent}catch(e){return!0}}()&&!function(e){return e.cookieWrite("TEST_AMCV_COOKIE","T",1),"T"===e.cookieRead("TEST_AMCV_COOKIE")&&(e._helpers.removeCookie("TEST_AMCV_COOKIE"),!0)}(s)&&a.parent?new E(e,t,s,a.parent):new W(e,t,r);return s=null,l.init(),l},function(){function e(){W.windowLoaded=!0}a.addEventListener?a.addEventListener("load",e):a.attachEvent&&a.attachEvent("onload",e),W.codeLoadEnd=(new Date).getTime()}(),W.config=X,a.Visitor=W,W}();try{(function(id,loader){window.utag.tagsettings=window.utag.tagsettings||{};window.utag.tagsettings.adobe=window.utag.tagsettings.adobe||{};var vAPI=window.utag.tagsettings.adobe.visitorAPI=window.utag.tagsettings.adobe.visitorAPI||(function(){function logger(msg){utag.DB('['+id+'] : '+msg);}
function Observer(orgId,config){var observers=[],visitor={},demdex=null,instance=null,regex=new RegExp('AMCV_'+window.encodeURIComponent(orgId)+'=(.*?)(;|$)'),active=false,util={'hasOwn':function(o,a){return o!==null&&Object.prototype.hasOwnProperty.call(o,a);}},mTags=(function(){var tags=[],tag,cfg=utag.loader.cfg,loadcond={1:1,4:1};for(tag in cfg){if(!util.hasOwn(cfg,tag)){continue;}
if(cfg[tag].tid===1191&&loadcond[cfg[tag].load]){tags.push(tag);}}
return tags;}());function mTagsLoaded(){var loaded=true,id;for(var i=0,len=mTags.length;i<len;i++){id=mTags[i];if(!utag.loader.f[id]){loaded=false;break;}}
return loaded;}
function notify(result){instance=result;if(instance&&instance.setCustomerIDs){var aliases,alias;for(aliases in visitor){if(util.hasOwn(visitor,aliases)){alias=visitor[aliases];if(alias.authState&&Visitor.AuthState[alias.authState]!==undefined){alias.authState=Visitor.AuthState[alias.authState];}}}
instance.setCustomerIDs(visitor);}
while(observers.length!==0){var nextCallback=observers.shift();nextCallback(instance);}
return true;}
this.sync=function(ids){var alias;for(alias in ids){if(util.hasOwn(ids,alias)){if(!visitor[alias]){visitor[alias]=ids[alias];}}}
return true;};this.subscribe=function(callback){var self=this;if(instance!==null){return callback(instance);}else{observers.push(callback);if(!active){logger('demdex org id ['+orgId+'] sync requested');(function retry(retries){if(retries===0){logger('demdex org id ['+orgId+'] sync timed out!');active=false;return notify(undefined);}else{active=true;if(regex.test(document.cookie)&&/\|mcmid\|/i.test(window.decodeURIComponent(RegExp.$1))&&mTagsLoaded()){logger('demdex org id ['+orgId+'] sync completed');return config?notify(window.Visitor.getInstance(orgId,config)):notify(window.Visitor.getInstance(orgId));}else{if(window.Visitor&&window.Visitor.getInstance){if(config&&!demdex){demdex=window.Visitor.getInstance(orgId,config);}}
window.setTimeout(function(){logger('demdex org id ['+orgId+'] sync, waiting...');retry(--retries);},25);}}}(80));}}
return true;};}
function VisitorAPIWrapper(){var observers={};this._version='1.0';this.getInstance=function(orgId,callback,config,customerIds){if(!orgId){return callback(undefined);}
orgId=!/@AdobeOrg$/.test(orgId)?orgId+'@AdobeOrg':orgId;if(!observers[orgId]){if(!config){logger('demdex org id ['+orgId+'] sync error. marketing cloud tag missing demdex config');return callback(undefined);}
observers[orgId]=new Observer(orgId,config);}
if(customerIds){observers[orgId].sync(customerIds);}
observers[orgId].subscribe(callback);return true;};}
return new VisitorAPIWrapper();}());var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};u.isEmptyObject=function(o,a){for(a in o){if(u.hasOwn(o,a))return false;}return true;};u.ev={"view":1};u.initialized=false;u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.clearEmptyKeys=function(object){for(var key in object){if(object[key]===""||object[key]===undefined){delete object[key];}}
return object;};u.map={"Tags_AdobeAnalytics_Server":"config.trackingServer","Tags_AdobeAnalytics_ServerSecure":"config.trackingServerSecure","User_Email_MD5":"customer_ids.email_md5.id"};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:391");utag.DB(b);var c,d,e,f;u.data={"adobe_org_id":"125138B3527845350A490D4C@AdobeOrg","config":{"trackingServer":"","trackingServerSecure":"","marketingCloudServer":"","marketingCloudServerSecure":"","cookieDomain":(function(){return utag.loader.RC('utag_main').vapi_domain||(function(){var i=0,d=document.domain,p=d.split('.'),s='_vapi'+new Date().getTime();while(i<(p.length-1)&&document.cookie.indexOf(s+'='+s)===-1){d=p.slice(-1-(++i)).join('.');document.cookie=s+'='+s+';domain='+d+';';}
document.cookie=s+'=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain='+d+';';utag.loader.SC('utag_main',{'vapi_domain':d});return d;}());}())},'customer_ids':{}};utag.DB("send:391:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}}
utag.DB("send:391:MAPPINGS");utag.DB(u.data);if(!u.data.adobe_org_id){utag.DB(u.id+": Tag not fired: Required attribute not populated [adobe_org_id]");return;}
if(!u.initialized){u.initialized=!0;vAPI.getInstance(u.data.adobe_org_id,function(instance){},u.clearEmptyKeys(u.data.config),u.data.customer_ids);}
utag.DB("send:391:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("391","luxottica.ray-ban"));}catch(error){utag.DB(error);}

//tealium universal tag - utag.485 ut4.0.202005190941, Copyright 2020 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){function at(config){window.adobe=window.adobe||{},window.adobe.target=function(){"use strict";function n(){}function t(n){if(null===n||void 0===n)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function e(n){return Gc.call(n)}function r(n){return e(n)}function i(n){var t=void 0===n?"undefined":Kc(n);return null!=n&&("object"===t||"function"===t)}function o(n){return!!i(n)&&r(n)===Jc}function u(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o(n)?setTimeout(n,Number(t)||0):-1}function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;-1!==n&&clearTimeout(n)}function a(n){return null==n}function f(n){return n}function s(n){return o(n)?n:f}function l(n){return a(n)?[]:Object.keys(n)}function d(n,t){return a(t)?[]:(Wc(t)?Qc:na)(s(n),t)}function h(n){return n&&n.length?n[0]:void 0}function p(n){return a(n)?[]:[].concat.apply([],n)}function v(n){for(var t=this,e=n?n.length:0,r=e;r-=1;)if(!o(n[r]))throw new TypeError("Expected a function");return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];for(var u=0,c=e?n[u].apply(t,i):i[0];(u+=1)<e;)c=n[u].call(t,c);return c}}function m(n,t){if(!a(t)){(Wc(t)?Xc:Yc)(s(n),t)}}function g(n){return null!=n&&"object"===(void 0===n?"undefined":Kc(n))}function y(n){return"string"==typeof n||!Wc(n)&&g(n)&&r(n)===ta}function b(n){if(!y(n))return-1;for(var t=0,e=n.length,r=0;r<e;r+=1)t=(t<<5)-t+n.charCodeAt(r)&4294967295;return t}function x(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=ea}function E(n){return null!=n&&x(n.length)&&!o(n)}function w(n,t){return ra(function(n){return t[n]},n)}function C(n){for(var t=0,e=n.length,r=Array(e);t<e;)r[t]=n[t],t+=1;return r}function S(n){return n.split("")}function T(n){return a(n)?[]:E(n)?y(n)?S(n):C(n):w(l(n),n)}function O(n){if(null==n)return!0;if(E(n)&&(Wc(n)||y(n)||o(n.splice)))return!n.length;for(var t in n)if(oa.call(n,t))return!1;return!0}function N(n){return a(n)?"":ca.call(n)}function k(n){return y(n)?!N(n):O(n)}function A(n){return Object.getPrototypeOf(Object(n))}function D(n){if(!g(n)||r(n)!==aa)return!1;var t=A(n);if(null===t)return!0;var e=da.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&la.call(e)===ha}function j(n){return g(n)&&1===n.nodeType&&!D(n)}function _(n){return"number"==typeof n||g(n)&&r(n)===va}function I(n,t){return a(t)?[]:(Wc(t)?ra:ma)(s(n),t)}function R(){}function P(){return(new Date).getTime()}function M(n,t,e){return a(e)?t:(Wc(e)?ga:ya)(s(n),t,e)}function q(n){return null==n?n:xa.call(n)}function L(n,t){return k(t)?[]:t.split(n)}function U(n,t){return n+Math.floor(Math.random()*(t-n+1))}function F(){var n=P();return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+U(0,16))%16|0;return n=Math.floor(n/16),("x"===t?e:3&e|8).toString(16)})}function $(n){return Sd.test(n)}function V(n){if($(n))return n;var t=q(L(".",n)),e=t.length;return e>=3&&Td.test(t[1])?t[2]+"."+t[1]+"."+t[0]:1===e?t[0]:t[1]+"."+t[0]}function H(n,t){n.enabled&&m(function(e){a(t[e])||(n[e]=t[e])},kd)}function B(n){var t=n.documentMode;return!t||t>=10}function z(n){var t=n.compatMode;return t&&"CSS1Compat"===t}function Z(n,t,e){var r=n.location.protocol===Od,i="";r||(i=V(n.location.hostname)),e[Sl]=i,e[Qs]=z(t)&&B(t),H(e,n[fd]||{})}function G(n){Z(Ea,wa,n);var t=Ea.location.protocol===Od;Nd=zc({},n),Nd[ll]=n[ll]/1e3,Nd[dl]=n[dl]/1e3,Nd[El]="x-only"===Nd[rl],Nd[wl]="disabled"!==Nd[rl],Nd[Cl]=Nd[yl]||t?"https:":""}function K(){return Nd}function J(n,t){return t={exports:{}},n(t,t.exports),t.exports}function W(n){try{return decodeURIComponent(n)}catch(t){return n}}function X(n){try{return encodeURIComponent(n)}catch(t){return n}}function Y(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function Q(n){if(zd[n])return zd[n];Bd.href=n;var t=Md(Bd.href);return t.queryKey=Hd(t.query),zd[n]=t,zd[n]}function nn(n,t,e){return{name:n,value:t,expires:e}}function tn(n){var t=L("#",n);return O(t)||t.length<3?null:isNaN(parseInt(t[2],10))?null:nn(W(t[0]),W(t[1]),Number(t[2]))}function en(n){return k(n)?[]:L("|",n)}function rn(){var n=I(tn,en(Id(Ys))),t=Math.ceil(P()/1e3),e=function(n){return i(n)&&t<=n.expires};return M(function(n,t){return n[t.name]=t,n},{},d(e,n))}function on(n){var t=rn(),e=t[n];return i(e)?e.value:""}function un(n){return[X(n.name),X(n.value),n.expires].join("#")}function cn(n){return n.expires}function an(n){var t=I(cn,n);return Math.max.apply(null,t)}function fn(n,t){var e=T(n),r=Math.abs(1e3*an(e)-P()),i=I(un,e).join("|"),o=new Date(P()+r);Rd(Ys,i,{domain:t,expires:o})}function sn(n){var t=n.name,e=n.value,r=n.expires,i=n.domain,o=rn();o[t]=nn(t,e,Math.ceil(r+P()/1e3)),fn(o,i)}function ln(n){return pa(Id(n))}function dn(n,t){var e=n.location,r=e.search,i=Hd(r);return pa(i[t])}function hn(n,t){var e=n.referrer,r=Q(e),i=r.queryKey;return!a(i)&&pa(i[t])}function pn(n,t,e){return ln(e)||dn(n,e)||hn(t,e)}function vn(){var n=K(),t=n[Sl];Rd(mf,gf,{domain:t});var e=Id(mf)===gf;return Pd(mf),e}function mn(){return pn(Ea,wa,pf)}function gn(){var n=K(),t=n[Qs];return n[El]?t&&!mn():t&&vn()&&!mn()}function yn(){return pn(Ea,wa,hf)}function bn(){return pn(Ea,wa,vf)}function xn(n,t){var e=n.console;return!a(e)&&o(e[t])}function En(n,t){var e=n.console;xn(n,"warn")&&e.warn.apply(e,[Gd].concat(t))}function wn(n,t){var e=n.console;xn(n,"debug")&&yn()&&e.debug.apply(e,[Gd].concat(t))}function Cn(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];En(Ea,t)}function Sn(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];wn(Ea,t)}function Tn(n){return M(function(t,e){return t[e]=n[e],t},{},Jd)}function On(n,t,e){var r=n[ad]||[];if(e){var i=r.push;r[cl]=Kd,r[od]=Tn(t),r[ud]=[],r[cd]=[],r.push=function(n){r[cd].push(n),i.call(this,n)}}n[ad]=r}function Nn(n,t,e,r){if(t){var i={};i[dd]=P(),n[ad][e].push(zc(i,r))}}function kn(){On(Ea,K(),yn())}function An(n,t){Nn(Ea,yn(),n,t)}function Dn(){var n={};return n[As]=!0,n}function jn(n){var t={};return t[As]=!1,t[Os]=n,t}function _n(n){return k(n)?jn(Ff):n.length>yf?jn($f):Dn()}function In(n){if(!i(n))return jn(Uf);var t=n[js],e=_n(t);return e[As]?o(n[Ds])?o(n[Os])?Dn():jn(Hf):jn(Vf):e}function Rn(n){if(!i(n))return jn(Uf);var t=n[js],e=_n(t);if(!e[As])return e;var r=n[_s];return Wc(r)?Dn():jn(Bf)}function Pn(n){if(!i(n))return jn(Uf);var t=n[js],e=_n(t);return e[As]?Dn():e}function Mn(n,t){if(!i(n))return jn(Uf);var e=n[Is];if(k(e))return jn(zf);var r=L(".",e);if(!O(d(function(n){return!bf.test(n)},r)))return jn(Zf);var u=n[Rs];return!Wc(u)||O(u)?jn(Gf):O(d(function(n){return a(t[n])},u))?o(n[Ps])?Dn():jn(Kf):jn(Jf)}function qn(){return o(Qd)}function Ln(n){return new Qd(n)}function Un(){var n=wa.createTextNode(""),t=function(){n.textContent=n.textContent.length>0?"":"a"},e=[];return Ln(function(){for(var n=e.length,t=0;t<n;t+=1)e[t]();e.splice(0,n)}).observe(n,{characterData:!0}),function(n){e.push(n),t()}}function Fn(){return function(n){var t=Yd("<script>");t.on("readystatechange",function(){t.on("readystatechange",null),t.remove(),t=null,n()}),Yd(wa.documentElement).append(t)}}function $n(n){return new Xd(n)}function Vn(n){return Xd.resolve(n)}function Hn(n){return Xd.reject(n)}function Bn(n){return Wc(n)?Xd.race(n):Hn(new TypeError(nh))}function zn(n){return Wc(n)?Xd.all(n):Hn(new TypeError(nh))}function Zn(n,t,e){var r=-1;return Bn([n,$n(function(n,i){r=u(function(){return i(new Error(e))},t)})]).then(function(n){return c(r),n},function(n){throw c(r),n})}function Gn(n){return o(n[bd])&&o(n[vd])}function Kn(n,t){return!!t&&(!a(n)&&(!a(n[yd])&&Gn(n[yd])))}function Jn(n,t){return n[vd](t)}function Wn(n,t){return $n(function(e,r){n[bd](function(){n[vd](t)?e(!0):r(new Error(Cd))},!0)})}function Xn(){var n=Ea[gd][yd];return Jn(n,n[xd][Ed])}function Yn(){var n=K(),t=n[md];return Kn(Ea[gd],t)}function Qn(){var n=Ea[gd][yd];return Wn(n,n[xd][Ed])}function nt(){var n=Ea[gd][yd];return Jn(n,n[xd][wd])}function tt(n,t){sn({name:Xl,value:n,expires:t[dl],domain:t[Sl]})}function et(n){var t=K();t[El]||tt(n,t)}function rt(){var n=K();return n[El]?th:Yn()&&!Xn()?th:(k(on(Xl))&&tt(th,n),on(Xl))}function it(n){var t=K();t[El]||sn({name:Jl,value:n,expires:t[ll],domain:t[Sl]})}function ot(){return K()[El]?"":on(Jl)}function ut(n){if(k(n))return"";var t=eh.exec(n);return O(t)||2!==t.length?"":t[1]}function ct(){if(!K()[vl])return"";var n=Id(Wl);return k(n)?"":n}function at(n){var t=K();if(t[vl]){var e=t[Sl],r=new Date(P()+t[ml]),i=Id(Wl),o={domain:e,expires:r};if(pa(i))return void Rd(Wl,i,o);var u=ut(n);k(u)||Rd(Wl,u,o)}}function ft(n){return n[Ca]===uf}function st(n,t){var e=n(),r=t(),i={};return i.sessionId=e,pa(r)?(i.deviceId=r,i):i}function lt(n,t,e,r){var i=new n.CustomEvent(e,{detail:r});t.dispatchEvent(i)}function dt(n){return!O(n)&&!O(d(ft,n))}function ht(){lt(Ea,wa,rh,{type:rh})}function pt(n){var t={type:ih,mbox:n.mbox,tracking:st(rt,ot)};lt(Ea,wa,ih,t)}function vt(n,t){var e=n.responseTokens,r={type:oh,mbox:n.mbox,redirect:dt(t),tracking:st(rt,ot)};O(e)||(r.responseTokens=e),lt(Ea,wa,oh,r)}function mt(n){lt(Ea,wa,uh,{type:uh,mbox:n.mbox,message:n.message,tracking:st(rt,ot)})}function gt(n){var t={type:ch,mbox:n.mbox,tracking:st(rt,ot)};lt(Ea,wa,ch,t)}function yt(n){lt(Ea,wa,ah,{type:ah,mbox:n.mbox,tracking:st(rt,ot)})}function bt(n){lt(Ea,wa,fh,{type:fh,mbox:n.mbox,message:n.message,actions:n.actions,tracking:st(rt,ot)})}function xt(n){var t={type:sh,mbox:n.mbox,tracking:st(rt,ot)};lt(Ea,wa,sh,t)}function Et(n){var t={type:lh,mbox:n.mbox,url:n.url,tracking:st(rt,ot)};lt(Ea,wa,lh,t)}function wt(n){throw new Error(n)}function Ct(n){var t=n[gh]||vh,e=n[yh]||wt(ph),r=n[bh]||{},i=n[xh]||null,o=n[Eh]||!1,u=n[wh]||3e3,c=!!a(n[Ch])||!0===n[Ch],f={};return f[gh]=t,f[yh]=e,f[bh]=r,f[xh]=i,f[Eh]=o,f[wh]=u,f[Ch]=c,f}function St(n,t,e,r){return n.onload=function(){var i=1223===n.status?204:n.status;if(i<100||i>599)return r[Os]=dh,An(ud,r),void e(new Error(dh));var o=n.responseText,u=n.getAllResponseHeaders(),c={status:i,headers:u,response:o};r[$s]=c,An(ud,r),t(c)},n}function Tt(n,t,e){return n.onerror=function(){e[Os]=dh,An(ud,e),t(new Error(dh))},n}function Ot(n,t,e,r){return n.timeout=t,n.ontimeout=function(){r[Os]=hh,An(ud,r),e(new Error(hh))},n}function Nt(n,t){return!0===t&&(n.withCredentials=t),n}function kt(n,t){return m(function(t,e){m(function(t){return n.setRequestHeader(e,t)},t)},t),n}function At(n,t){var e={},r=Ct(t),i=r[gh],o=r[yh],u=r[bh],c=r[xh],a=r[Eh],f=r[wh],s=r[Ch];return e[Vs]=r,$n(function(t,r){var l=new n.XMLHttpRequest;l=St(l,t,r,e),l=Tt(l,r,e),l.open(i,o,s),l=Nt(l,a),l=kt(l,u),s&&(l=Ot(l,f,r,e)),l.send(c)})}function Dt(n){return At(Ea,n)}function jt(n,t){var e=t.sessionId;return pa(e)&&n(e),t}function _t(n,t){var e=t.tntId;return pa(e)&&n(e),t}function It(n,t){return n(t.tntId),t}function Rt(n,t){n[ad].push(t)}function Pt(n,t){var e=t.trace;return i(e)&&Rt(n,e),t}function Mt(n){var t=n[Os];if(pa(t)){var e={};throw e[Ms]=Os,e[Os]=t,e}return n}function qt(n){var t=n.message;return k(t)?Nh:t}function Lt(n){var t=n.duration;return _(t)?t:Oh}function Ut(n,t,e){var r=n[Sl],i=qt(e),o=new Date(P()+Lt(e));t(Sh,i,{domain:r,expires:o})}function Ft(n,t,e){var r=e.disabled;if(i(r)){var o={};throw o[Ms]=Th,o[Os]=qt(r),Ut(n,t,r),o}return e}function $t(n){return pa(n[Tf])}function Vt(n){return i(n[Sf])||Wc(n[Sf])}function Ht(n){return pa(n[uf])}function Bt(n){return Wc(n[Ls])&&!O(n[Ls])}function zt(n){return i(n[Hs])&&pa(n[Hs][Fa])}function Zt(n){return a(n[Tf])&&a(n[uf])&&a(n[Ls])&&a(n[Hs])}function Gt(n){return pa(n[zs])}function Kt(n){return Wc(n[Bs])&&!O(n[Bs])}function Jt(n){if(Gt(n)){var t={};return t[Ca]=af,t[Oa]=n[zs],[t]}return[]}function Wt(n){return Kt(n)?[n.html].concat(n.plugins):[n.html]}function Xt(n){var t=d($t,n);if(O(t))return Vn([]);var e=p(I(Jt,t)),r={};return r[Ca]=Ka,r[Na]=p(I(Wt,t)).join(""),Vn([r].concat(e))}function Yt(n){return n[Sf]}function Qt(n){return M(function(n,t){return n.push(Yt(t)),n},[],n)}function ne(n){var t=d(Vt,n);if(O(t))return Vn([]);var e={};return e[Ca]=Wa,e[Na]=Qt(t),Vn([e])}function te(n,t){return Vn([n({action:uf,url:t[uf]})])}function ee(n){return{action:rf,content:n}}function re(n){return Kt(n)?I(ee,n.plugins):[]}function ie(n){var t=n[za];if(k(t))return"";var e=kh.exec(t);return O(e)||2!==e.length?"":e[1]}function oe(n,t){var e=document.createElement(Mf);e.innerHTML=t;var r=e.firstElementChild;return a(r)?t:(r.id=n,r.outerHTML)}function ue(n){var t=n[Na],e=ie(n);if(k(e)||k(t))return n;var r=n[za];return n[za]=r.replace(Ah,""),n[Na]=oe(e,t),n}function ce(n){var t=n[Ta];return k(t)?n:(n[Na]="<"+Pf+" "+kf+'="'+t+'" />',n)}function ae(n){var t=ue(n);if(!y(t[Na]))return Sn(rs,t),null;var e=n[ka];return Nf===e&&(n[Ca]=Ja),n}function fe(n){var t=ue(n);return y(t[Na])?t:(Sn(rs,t),null)}function se(n){var t=ue(n);return y(t[Na])?t:(Sn(rs,t),null)}function le(n){var t=ue(n);return y(t[Na])?t:(Sn(rs,t),null)}function de(n){var t=ue(ce(n));return y(t[Na])?t:(Sn(rs,t),null)}function he(n){var t=ue(ce(n));return y(t[Na])?t:(Sn(rs,t),null)}function pe(n){return y(n[Na])?n:(Sn(rs,n),null)}function ve(n){var t=n[Sa],e=n[Ta];return k(t)||k(e)?(Sn(is,n),null):n}function me(n){var t=n[Ha],e=n[Ta];if(k(t)||k(e))return Sn(os,n),null;var r={};return r[t]=e,n[Ga]=r,n}function ge(n){var t=n[Aa],e=n[Da];if(k(t)||k(e))return Sn(us,n),null;var r={};return r[ja]=t,r[_a]=e,n[Ca]=Ya,n[Ga]=r,n}function ye(n){var t=Number(n[Ia]),e=Number(n[Ra]);if(isNaN(t)||isNaN(e))return Sn(cs,n),null;var r=n[qa],i={};return i[Pa]=t,i[Ma]=e,pa(r)&&(i[qa]=r),n[Ca]=Ya,n[Ga]=i,n}function be(n){var t=Number(n[La]),e=Number(n[Ua]);return isNaN(t)||isNaN(e)?(Sn(as,n),null):n}function xe(n,t){return n(t)}function Ee(n){return k(n[Oa])?(Sn(ss,n),null):n}function we(n,t){switch(t[Ca]){case Ka:return ae(t);case of:return fe(t);case lf:return se(t);case df:return le(t);case ff:return de(t);case sf:return he(t);case rf:return pe(t);case Xa:return ve(t);case Ya:return me(t);case nf:return ge(t);case tf:return ye(t);case ef:return t;case Qa:return be(t);case uf:return xe(n,t);case cf:return Ee(t);default:return null}}function Ce(n,t){return d(function(n){return!a(n)},I(function(t){return we(n,t)},t))}function Se(n,t){return Vn([].concat(Ce(n,t.actions),re(t)))}function Te(n){var t=n.queryKey,e=t[Dh];if(!y(e))return t;if(k(e))return t;var r=Math.round(P()/1e3);return t[Dh]=e.replace(/\|TS=\d+/,"|TS="+r),t}function Oe(n,t){var e={};return m(function(n,t){a(e[t])&&(e[t]=[]),Wc(n)?e[t].push.apply(e[t],n):e[t].push(n)},n),m(function(n,t){a(e[t])&&(e[t]=[]),Wc(n)?e[t].push.apply(e[t],n):e[t].push(n)},t),e}function Ne(n,t){var e=Q(n),r=e.protocol,i=e.host,o=e.path,u=""===e.port?"":":"+e.port,c=k(e.anchor)?"":"#"+e.anchor,a=Te(e),f=Zd(Oe(a,t));return r+"://"+i+u+o+(k(f)?"":"?"+f)+c}function ke(n){var t={};return m(function(n){a(t[n.type])&&(t[n.type]={}),t[n.type][n.name]=n.defaultValue},n[qs]),t}function Ae(n){return a(n[Vs])?{}:n[Vs]}function De(n){return-1!==n.indexOf(js)}function je(n){var t={};return a(n[js])?t:(m(function(n,e){De(e)||(t[e]=n)},n[js]),t)}function _e(n,t){m(function(e,r){var i=t[r];a(i)||(n[r]=i)},n)}function Ie(n,t,e,r){return _e(n,t),_e(e,r),zc({},n,e)}function Re(n,t,e){var r={};return r[gh]=vh,r[yh]=Ne(n,t),r[wh]=e,r}function Pe(n){return n>=200&&n<300||304===n}function Me(n,t){if(!Pe(n[Ms]))return[];var e=n[$s];if(k(e))return[];var r={};return r[Ca]=Ka,r[Na]=e,[r].concat(Jt(t),re(t))}function qe(n,t,e,r){var i=r[Hs],o=ke(i),u=Ae(o),c=je(o),a=Hd(n.location.search),f=e[qs],s=i[yh],l=Ie(u,a,c,f),d=e[wh],h=function(n){return Me(n,r)};return t(Re(s,l,d)).then(h)['catch'](function(){return[]})}function Le(n){return Vn([].concat(Jt(n),re(n)))}function Ue(n,t,e,r,i){var o=[];return m(function(i){return Ht(i)?void o.push(te(e,i)):Bt(i)?void o.push(Se(e,i)):zt(i)?void o.push(qe(n,t,r,i)):void(Zt(i)&&o.push(Le(i)))},i),o.concat(Xt(i),ne(i))}function Fe(n){var t=[];return m(function(n){var e=n[Us];i(e)&&t.push(e)},n),t}function $e(n,t){m(function(n){n.id=F()},n);var e={};return e[Ls]=n,e[Us]=t,e}function Ve(n,t,e,r,i){var o=i[Zs];if(!Wc(o))return Vn($e([],[]));var u=Ue(n,t,e,r,o),c=Fe(o),a=function(n){return $e(p(n),c)};return zn(u).then(a)}function He(n,t,e){var r=e[Fa];if(k(r))return Sn(fs,e),null;var i=String(e[$a])===_h,o=String(e[Va])===_h,u={};return i&&(u=zc({},Hd(n.location.search))),o&&(u[jh]=t()),e[Fa]=Ne(r,u),e}function Be(n){return!O(n)&&2===n.length&&pa(n[0])}function ze(n){var t=n.indexOf("=");return-1===t?[]:[n.substr(0,t),n.substr(t+1)]}function Ze(n,t,e,r){m(function(n,o){i(n)?(t.push(o),Ze(n,t,e,r),t.pop()):O(t)?e[r(o)]=n:e[r(t.concat(o).join("."))]=n},n)}function Ge(n){return d(function(n,t){return pa(t)},Hd(n))}function Ke(n){var t=M(function(n,t){return n.push(ze(t)),n},[],d(pa,n));return M(function(n,t){return n[W(N(t[0]))]=W(N(t[1])),n},{},d(Be,t))}function Je(n,t){var e={};return a(t)?Ze(n,[],e,f):Ze(n,[],e,t),e}function We(n){if(!o(n))return{};var t=null;try{t=n()}catch(n){return{}}return a(t)?{}:Wc(t)?Ke(t):y(t)&&pa(t)?Ge(t):i(t)?Je(t):{}}function Xe(){var n=Ea.devicePixelRatio;if(!a(n))return n;n=1;var t=Ea.screen,e=t.systemXDPI,r=t.logicalXDPI;return!a(e)&&!a(r)&&e>r&&(n=e/r),n}function Ye(){var n=Ea.screen,t=n.orientation,e=n.width,r=n.height;if(a(t))return e>r?"landscape":"portrait";if(a(t.type))return null;var i=L("-",t.type);if(O(i))return null;var o=i[0];return a(o)?null:o}function Qe(){return Ih}function nr(){var n=Ea.screen,t=wa.documentElement,e={};e[kl]=t.clientHeight,e[Al]=t.clientWidth,e[Dl]=-(new Date).getTimezoneOffset(),e[jl]=n.height,e[_l]=n.width,e[Rl]=n.colorDepth,e[Pl]=Xe();var r=Ye();a(r)||(e[Il]=r);var i=Qe();return a(i)||(e[Ml]=i),e}function tr(){return Rh}function er(){var n=new Date;return n.getTime()-6e4*n.getTimezoneOffset()}function rr(){var n=K(),t=Ea.location,e={};return e[Ll]=rt(),n[El]||(e[Ul]=ot()),e[Fl]=tr(),e[$l]=F(),e[Vl]=n[cl],e[Hl]=Ph,e[Bl]=er(),e[zl]=t.hostname,e[Zl]=t.href,e[Gl]=wa.referrer,n[wl]&&(e[Kl]=n[rl]),Ph+=1,e}function ir(n){return zc({},n,We(Ea.targetPageParamsAll))}function or(n){return zc({},n,We(Ea.targetPageParams))}function ur(n){var t=K(),e=t[ol],r=t[Tl],i=t[Ol];return e!==n?ir(r||{}):zc(ir(r||{}),or(i||{}))}function cr(n,t){var e={};e[ql]=n;var r=Ke(t),i=rr(),o=nr(),u=ur(n);return zc({},e,r,i,o,u)}function ar(){var n=K(),t=n[ol],e={};e[ql]=t;var r=rr(),i=nr(),o=ur(t);return zc({},e,r,i,o)}function fr(n){return""+Jh+n}function sr(n){if(!o(n[Zh]))return{};var t=n[Zh]();return i(t)?Je(t,fr):{}}function lr(n){var t={};return pa(n[Gh])&&(t[Wh]=n[Gh]),pa(n[Kh])&&(t[Xh]=n[Kh]),t}function dr(n,t){var e={};return o(n[zh])?(e[Bh]=n[zh](js+":"+t),e):{}}function hr(n,t){if(a(n))return{};var e=sr(n),r=lr(n),i=dr(n,t);return zc({},i,r,e)}function pr(n){var t={},e=n[Uh],r=n[qh],i=n[Lh];return pa(e)&&(t[Hh]=e),pa(r)&&(t[$h]=r),isNaN(parseInt(i,10))||(t[Vh]=i),t}function vr(n,t,e){if(k(t))return null;if(a(n[Yh]))return null;if(!o(n[Yh][Qh]))return null;var r=n[Yh][Qh](t,{sdidParamExpiry:e,doesOptInApply:!0});return i(r)&&o(r[np])&&r[np]()?r:null}function mr(n,t){if(!o(n.getVisitorValues))return Vn({});var e=[Uh,qh,Lh];return t&&e.push(Fh),$n(function(t){n.getVisitorValues(function(n){return t(n)},e)})}function gr(n){return Sn(ep,n),{}}function yr(n,t,e){return a(n)?Vn({}):Zn(mr(n,e),t,tp)['catch'](gr)}function br(){return{status:Os,error:Mh}}function xr(n,t,e){return a(n)?Vn({}):!0===e[Fh]?Hn(br()):Vn(zc({},t,pr(e)))}function Er(n,t){if(!o(n.getVisitorValues))return{};var e=[Uh,qh,Lh];t&&e.push(Fh);var r={};return n.getVisitorValues(function(n){return zc(r,n)},e),r}function wr(n,t){return a(n)?{}:Er(n,t)}function Cr(n,t,e){return a(n)?{}:!0===e[Fh]?{}:zc({},t,pr(e))}function Sr(){var n=K(),t=n[tl],e=n[bl];return vr(Ea,t,e)}function Tr(){var n=Sr(),t=K();return yr(n,t[pl],t[gl])}function Or(){return wr(Sr(),K()[gl])}function Nr(n){var t=Sr(),e=hr(t,n),r=function(n){return xr(t,e,n)};return Tr().then(r)}function kr(n){var t=Sr();return Cr(t,hr(t,n),Or())}function Ar(n,t){rp[n]=t}function Dr(n){return rp[n]}function jr(n){var t=n[fd];if(a(t))return!1;var e=t[ld];return!(!Wc(e)||O(e))}function _r(n){var t=n[Is];if(!y(t)||O(t))return!1;var e=n[cl];if(!y(e)||O(e))return!1;var r=n[il];return!(!a(r)&&!_(r))&&!!o(n[Gs])}function Ir(n){return $n(function(t,e){n(function(n,r){if(!a(n))return void e(n);t(r)})})}function Rr(n,t,e,r,i,o){var u={};u[n]=t,u[e]=r,u[i]=o;var c={};return c[sd]=u,c}function Pr(n){var t=n[Is],e=n[cl],r=n[il]||up;return Zn(Ir(n[Gs]),r,op).then(function(n){var r=Rr(Is,t,cl,e,qs,n);return Sn(ip,Ds,r),An(ud,r),n})['catch'](function(n){var r=Rr(Is,t,cl,e,Os,n);return Sn(ip,Os,r),An(ud,r),{}})}function Mr(n){var t=M(function(n,t){return zc(n,t)},{},n);return Ar(ld,t),t}function qr(n){return jr(n)?zn(I(Pr,d(_r,n[fd][ld]))).then(Mr):Vn({})}function Lr(){var n=Dr(ld);return a(n)?{}:n}function Ur(){return qr(Ea)}function Fr(){return Lr(Ea)}function $r(n,t,e,r){if(!r)return e;var i=n();return k(i)?e:e.replace(t,""+cp+i)}function Vr(n){return fp.replace(ap,n)}function Hr(n,t){var e=n[nl],r=n[el],i=n[vl];return[n[Cl],sp,$r(t,e,r,i),Vr(e)].join("")}function Br(n){return d(function(n,t){return!(Yn()&&!nt())||t!==Bh},n)}function zr(n,t,e,r){var i=zc({},r[qs],Br(e)),o={};return o[yh]=Hr(n,t),o[xh]=Zd(i),o[wh]=r[wh],o}function Zr(n){return zc({},n[0],n[1])}function Gr(n,t){var e=t[js],r=function(e){return zr(n,ct,Zr(e),t)};return!Yn()||Xn()?zn([Nr(e),Ur()]).then(r):Qn().then(function(){return zn([Nr(e),Ur()])}).then(r)}function Kr(n,t,e){return zr(n,ct,Zr([kr(e?F():t[js]),Fr()]),t)}function Jr(n){return n>=200&&n<300||304===n}function Wr(n){var t={};return t[Ms]=Os,t[Os]=n,t}function Xr(n,t,e,r,i,o){return v([function(n){return jt(et,n)},function(n){return _t(it,n)},function(n){return It(at,n)},function(n){return Pt(t,n)},Mt,function(t){return Ft(n,Rd,t)},function(n){return Ve(t,e,r,i,n)}])(o)}function Yr(){var n={};return n[hd]=[pd],n}function Qr(n,t){var e=n[El],r=n[Nl],i=t[yh],o=t[xh],u=i+"?"+o,c={};return c[Eh]=!0,c[gh]=vh,c[wh]=t[wh],c[yh]=u,e?c:u.length>r?(c[gh]=mh,c[yh]=i,c[bh]=Yr(),c[xh]=o,c):c}function ni(n){if(!Jr(n[Ms]))return Wr(Ts);try{return JSON.parse(n[$s])}catch(n){return Wr(n.message||lp)}}function ti(n,t,e,r){var i=function(n){return Qr(t,n)},o=function(t){return He(n,rt,t)},u=function(i){return Xr(t,n,e,o,r,ni(i))};return Gr(t,r).then(i).then(e).then(u)}function ei(n){var t=K();return ti(Ea,t,Dt,n)}function ri(n,t){return Kr(K(),n,t)}function ii(n,t){var e=t[il];return _(e)?e<=0?n[il]:e:n[il]}function oi(n){return i(n)&&pa(n[Os])?n[Os]:i(n)&&pa(n[Fs])?n[Fs]:pa(n)?n:Ts}function ui(n,t){var e=t[js],r=i(t[qs])?t[qs]:{},o={};return o[js]=e,o[qs]=zc({},cr(e),r),o[il]=ii(n,t),o}function ci(n,t,e){var r=e[Ls],i={};i[js]=t[js],i[Us]=e[Us],Sn(dp,Yf,r),t[Ds](r),n(i,r)}function ai(n,t,e){var r=e[Ms]||ks,i=oi(e),o={};o[js]=t[js],o[Fs]=i,Cn(dp,Qf,e),t[Os](r,i),n(o)}function fi(n,t,e,r,i,o,c,a){var f=t(a),s=f[Os];if(!f[As])return void Cn(dp,s);if(!n())return u(a[Os](Ns,qf)),void Cn(qf);var l={};l[js]=a[js];var d=function(n){return ci(i,a,n)},h=function(n){return ai(o,a,n)};r(l),e(ui(c,a)).then(d)['catch'](h)}function si(n){fi(gn,In,ei,pt,vt,mt,K(),n)}function li(n){var t=n.charAt(0),e=n.charAt(1),r=n.charAt(2),i={key:n};return i.val="-"===e?""+t+e+"\\3"+r+" ":t+"\\3"+e+" ",i}function di(n){var t=n.match(mp);if(O(t))return n;var e=I(li,t);return M(function(n,t){return n.replace(t.key,t.val)},n,e)}function hi(n){for(var t=[],e=N(n),r=e.indexOf(hp),i=void 0,o=void 0,u=void 0,c=void 0;-1!==r;)i=N(e.substring(0,r)),o=N(e.substring(r)),c=o.indexOf(pp),u=N(o.substring(vp,c)),e=N(o.substring(c+1)),r=e.indexOf(hp),i&&u&&t.push({sel:i,eq:Number(u)});return e&&t.push({sel:e}),t}function pi(n){if(j(n))return Yd(n);if(!y(n))return Yd(n);var t=di(n);if(-1===t.indexOf(hp))return Yd(t);var e=hi(t);return M(function(n,t){var e=t.sel,r=t.eq;return n=n.find(e),_(r)&&(n=n.eq(r)),n},Yd(wa),e)}function vi(n){return pi(n).length>0}function mi(n){return Yd("<"+Mf+"/>").append(n)}function gi(n){return Yd(n)}function yi(n){return pi(n).prev()}function bi(n){return pi(n).next()}function xi(n){return pi(n).parent()}function Ei(n,t){return pi(t).is(n)}function wi(n,t){return pi(t).find(n)}function Ci(n){return pi(n).children()}function Si(n,t,e){return pi(e).on(n,t)}function Ti(n){return i(n)&&pa(n[Os])?n[Os]:i(n)&&pa(n[Fs])?n[Fs]:pa(n)?n:Ts}function Oi(n){return function(){Sn(hs,n),n[Ds]()}}function Ni(n){return function(t){var e=t[Ms]||ks,r=Ti(t);Cn(ps,n,t),n[Os](e,r)}}function ki(n,t){var e=t[js],r=zc({},t),u=i(t[qs])?t[qs]:{},c=n[il],a=t[il];return r[qs]=zc({},cr(e),u),r[il]=_(a)&&a>=0?a:c,r[Ds]=o(t[Ds])?t[Ds]:R,r[Os]=o(t[Os])?t[Os]:R,r}function Ai(n,t){var e=Oi(t),r=Ni(t);n(t).then(e)['catch'](r)}function Di(n,t){return Ai(n,t),!t.preventDefault}function ji(n,t,e){var r=e[za],i=e[jf],o=T(pi(r)),u=function(){return Di(n,e)};m(function(n){return t(i,u,n)},o)}function _i(n){var t=n[jf],e=n[za];return pa(t)&&(pa(e)||j(e))}function Ii(n,t,e,r,i,o,u){if(!r())return void Cn(qf);var c=Pn(u),a=c[Os];if(!c[As])return void Cn(gp,a);var f=ki(n,u);return Yn()&&!Xn()?(Cn(gp,Cd),void f[Os](Os,Cd)):_i(f)?void i(t,e,f):void o(t,f)}function Ri(){var n={};return n[hd]=[pd],n}function Pi(n,t){var e=t[yh],r=t[xh],i=e+"?"+r;return $n(function(t,e){if(n[yp][bp](i))return void t();e(xp)})}function Mi(n){var t=n[yh],e=n[xh],r={};return r[gh]=mh,r[yh]=t+"?"+e,r[Eh]=!0,r[Ch]=!1,r[bh]=Ri(),Dt(r)}function qi(n){return yp in n&&bp in n[yp]}function Li(n,t,e){var r=ri(t,e);return qi(n)?Pi(n,r):Mi(r)}function Ui(n,t){Ii(K(),function(n){return Li(Ea,n,t)},Si,gn,ji,Ai,n)}function Fi(n){return pi(n).empty().remove()}function $i(n,t){return pi(t).after(n)}function Vi(n,t){return pi(t).before(n)}function Hi(n,t){return pi(t).append(n)}function Bi(n,t){return pi(t).prepend(n)}function zi(n,t){return pi(t).html(n)}function Zi(n){return pi(n).html()}function Gi(n,t){return pi(t).text(n)}function Ki(n,t){return pi(t).attr(n)}function Ji(n,t,e){return pi(e).attr(n,t)}function Wi(n,t){return pi(t).removeAttr(n)}function Xi(n,t,e){var r=Ki(n,e);pa(r)&&(Wi(n,e),Ji(t,r,e))}function Yi(n,t){return pa(Ki(n,t))}function Qi(n){var t={};t[Ca]=n,An(ud,t)}function no(n,t){var e={};e[Ca]=n,e[Os]=t,An(ud,e)}function to(n){return Ki(xf,n)}function eo(n){return Yi(xf,n)}function ro(n){return m(function(n){return Xi(kf,xf,n)},T(wi(Pf,n))),n}function io(n){return m(function(n){return Xi(xf,kf,n)},T(wi(Pf,n))),n}function oo(n){return Sn(ds,n),Ki(kf,Ji(kf,n,gi("<"+Pf+"/>")))}function uo(n){var t=d(eo,T(wi(Pf,n)));return O(t)?n:(m(oo,I(to,t)),n)}function co(n){return v([ro,uo,io])(n)}function ao(n){var t=Ki(kf,n);return pa(t)?t:null}function fo(n){return d(pa,I(ao,T(wi(Of,n))))}function so(n){return M(function(n,t){return n.then(function(){return Sn(Ss,t),Cp(t)})},Vn(),n)}function lo(n){return Qi(n),n}function ho(n,t){return Sn(Xf,t),no(n,t),n}function po(n,t){var e=pi(t[za]),r=co(mi(t[Na])),i=fo(r),o=void 0;try{o=Vn(n(e,r))}catch(n){return Hn(ho(t,n))}return O(i)?o.then(function(){return lo(t)})['catch'](function(n){return ho(t,n)}):o.then(function(){return so(i)}).then(function(){return lo(t)})['catch'](function(n){return ho(t,n)})}function vo(n,t){return zi(Zi(t),n)}function mo(n){return Sn(es,n),po(vo,n)}function go(n){var t=pi(n[za]),e=n[Na];return Sn(es,n),Qi(n),Gi(e,t),Vn(n)}function yo(n,t){return Hi(Zi(t),n)}function bo(n){return Sn(es,n),po(yo,n)}function xo(n,t){return Bi(Zi(t),n)}function Eo(n){return Sn(es,n),po(xo,n)}function wo(n,t){var e=xi(n);return Fi(Vi(Zi(t),n)),e}function Co(n){return Sn(es,n),po(wo,n)}function So(n,t){return yi(Vi(Zi(t),n))}function To(n){return Sn(es,n),po(So,n)}function Oo(n,t){return bi($i(Zi(t),n))}function No(n){return Sn(es,n),po(Oo,n)}function ko(n,t){return xi(Vi(Zi(t),n))}function Ao(n){return Sn(es,n),po(ko,n)}function Do(n,t){return kf===t&&Ei(Pf,n)}function jo(n,t){Wi(kf,n),Ji(kf,oo(t),n)}function _o(n){var t=n[Sa],e=n[Ta],r=pi(n[za]);return Sn(es,n),Qi(n),Do(r,t)?jo(r,e):Ji(t,e,r),Vn(n)}function Io(n,t){return pi(t).addClass(n)}function Ro(n,t){return pi(t).removeClass(n)}function Po(n,t){return pi(t).hasClass(n)}function Mo(n,t){return pi(t).css(n)}function qo(n,t,e){m(function(n){m(function(t,r){return n.style.setProperty(r,t,e)},t)},T(n))}function Lo(n){var t=pi(n[za]),e=n[Ba];return Sn(es,n),Qi(n),k(e)?Mo(n[Ga],t):qo(t,n[Ga],e),Vn(n)}function Uo(n){var t=pi(n[za]);return Sn(es,n),Qi(n),Fi(t),Vn(n)}function Fo(n){var t=n[La],e=n[Ua],r=pi(n[za]),i=T(Ci(r)),o=i[t],u=i[e];return vi(o)&&vi(u)?(Sn(es,n),Qi(n),t<e?$i(o,u):Vi(o,u),Vn(n)):(Sn(ls,n),no(n,ls),Vn(n))}function $o(n,t){return Sn(es,t),Qi(t),n(Sp,t),Vn(t)}function Vo(n,t){return Sn(es,t),Qi(t),n(Tp,t),Vn(t)}function Ho(n){var t=mi(n);return M(function(n,t){return n.push(Zi(mi(t))),n},[],T(wi(Op,t))).join("")}function Bo(n){var t=zc({},n),e=t[Na];if(k(e))return t;var r=pi(t[za]);return Ei(If,r)?(t[Ca]=of,t[Na]=Ho(e),t):t}function zo(n,t){var e=t[Fa];Sn(es,t),n.location.replace(e)}function Zo(n,t){var e=Bo(t);switch(e[Ca]){case Ka:return mo(e);case Ja:return go(e);case of:return bo(e);case lf:return Eo(e);case df:return Co(e);case ff:return To(e);case sf:return No(e);case rf:return Ao(e);case Xa:return _o(e);case Ya:return Lo(e);case ef:return Uo(e);case Qa:return Fo(e);case cf:return $o(n,e);case af:return Vo(n,e);default:return Vn(e)}}function Go(){}function Ko(n,t,e){n.emit(t,e)}function Jo(n,t,e){n.on(t,e)}function Wo(n,t,e){n.once(t,e)}function Xo(n,t){n.off(t)}function Yo(n,t){Ko(kp,n,t)}function Qo(n,t){Jo(kp,n,t)}function nu(n,t){Wo(kp,n,t)}function tu(n){Xo(kp,n)}function eu(n,t){return"<"+Rf+" "+Af+'="'+n+'" '+Df+'="'+Js+'">'+t+"</"+Rf+">"}function ru(n,t){return eu(Ap+b(t),t+" {"+n+"}")}function iu(n){if(!0===n[sl]&&!vi(jp)){var t=n[fl];Hi(eu(Dp,t),If)}}function ou(n){!0===n[sl]&&vi(jp)&&Fi(Rf+"["+Af+'="'+Dp+'"]')}function uu(n,t){if(!O(t)){var e=n[al];Hi(I(function(n){return ru(e,n)},t).join("\n"),If)}}function cu(n){var t="\n."+Ks+" {"+n[al]+"}\n";Hi(eu(_p,t),If)}function au(){iu(K())}function fu(){ou(K())}function su(n){uu(K(),n)}function lu(n){Fi("#"+(Ap+b(n)))}function du(){cu(K())}function hu(n,t){for(var e=0,r=-1,i=n.length;e<i;){if(n[e].id===t.id){r=e;break}e+=1}-1!==r&&n.splice(r,1)}function pu(n){return Mp[n]=Mp[n]||{},!Mp[n][qp]&&(Mp[n][qp]=!0,!0)}function vu(n){Mp[n]&&(Mp[n][qp]=!1)}function mu(n,t){return Mp[n]=Mp[n]||{},Mp[n][t]||[]}function gu(n,t,e){Mp[n]=Mp[n]||{},Mp[n][t]=e}function yu(n){delete Mp[n]}function bu(n,t,e){Mp[n]=Mp[n]||{},Mp[n][t]=Mp[n][t]||[],Mp[n][t].push(e)}function xu(n,t,e){Mp[n]=Mp[n]||{},Mp[n][t]=Mp[n][t]||[],hu(Mp[n][t],e)}function Eu(){m(function(n){return n()},Lp)}function wu(){a(Up)&&(Up=Ln(Eu),Up.observe(wa,{childList:!0,subtree:!0}))}function Cu(n,t){Lp[n]=t,t(),wu()}function Su(n){delete Lp[n],a(Up)||O(Lp)&&(Up.disconnect(),Up=null)}function Tu(n){if(wa[$p]===Vp)return void Ea.requestAnimationFrame(n);u(n,Fp)}function Ou(){if(!O(Hp)){Tu(function(){m(function(n){return n()},Hp),Ou()})}}function Nu(n,t){Hp[n]=t,t(),Ou()}function ku(n){delete Hp[n]}function Au(n,t){if(qn())return void Cu(n,t);Nu(n,t)}function Du(n){if(qn())return void Su(n);ku(n)}function ju(n){su(d(pa,I(function(n){return n[Za]},n)))}function _u(n){Io(Ws,Ro(Ks,n))}function Iu(n){var t=n[za],e=n[Za];(pa(t)||j(t))&&(Bp(n)?Io(Xs,Ro(Ks,t)):_u(t)),pa(e)&&lu(e)}function Ru(n){m(Iu,n)}function Pu(n,t,e){var r=mu(n,Ip),i=mu(n,Rp),o=r.concat(i);if(yu(n),!O(o))return Ru(o),void e(o);t()}function Mu(n){var t=mu(n,Ip),e=mu(n,Pp);return O(t)&&O(e)}function qu(n,t,e){var r=Ql+"-"+n;Zo(t,e).then(function(){Sn(ts,e),Iu(e),xu(n,Pp,e),Mu(n)&&Yo(r)})['catch'](function(t){Sn(Xf,t),Iu(e),xu(n,Pp,e),bu(n,Rp,e),Mu(n)&&Yo(r)})}function Lu(n,t){u(function(){return Yo(nd+"-"+n)},t)}function Uu(n,t,e,r){var i=Yl+"-"+n,o=nd+"-"+n,u=Ql+"-"+n;Qo(i,function(){if(pu(n)){if(Mu(n))return Yo(u),void vu(n);var e=mu(n,Ip),r=[];m(function(e){if(vi(e[za]))return bu(n,Pp,e),void qu(n,t,e);r.push(e)},e),gu(n,Ip,r),vu(n)}}),nu(u,function(){Du(n),tu(i),tu(o),Pu(n,e,r)}),nu(o,function(){Du(n),tu(i),tu(u),Pu(n,e,r)}),Au(n,function(){return Yo(i)})}function Fu(n,t,e){var r=K(),i=r[hl],o=F();return Lu(o,i),ju(e),n(),gu(o,Ip,e),$n(function(n,e){return Uu(o,t,n,e)})}
function $u(n){zo(Ea,n)}function Vu(n,t,e){return Fu(n,t,e)}function Hu(n,t,e){var r={};r[t]=e[Oa];var i={};return i[js]=n+wf,i[jf]=_f,i[za]=e[za],i[qs]=r,i}function Bu(n){return pa(n)?n:j(n)?n:If}function zu(n){Io(Ws,Ro(Ks,n))}function Zu(n,t){a(t[za])&&(t[za]=n)}function Gu(n,t){m(function(t){return Zu(n,t)},t)}function Ku(n,t){var e={};return e[js]=n,e[Fs]=Wf,e[Ls]=t,e}function Ju(n){var t={};return t[Os]=n,t}function Wu(n,t){var e=Ku(n,t),r=Ju(e);Cn(Wf,t),An(ud,r),bt(e)}function Xu(n){var t={};t[js]=n,Sn(ns),yt(t)}function Yu(n){return I(function(n){return zc({},n)},n)}function Qu(n){var t=n[js],e=Bu(n[za]),r=Rn(n),i=r[Os];if(!r[As])return Cn(zp,i),void zu(e);if(!gn())return Cn(qf),void zu(e);var o=n[_s],u={};if(u[js]=t,O(o))return Sn(zp,bs),zu(e),Yo(td,t),void xt(u);var c=h(d(Zp,o));if(!a(c))return u[Fa]=c[Fa],Sn(zp,xs),Et(u),void $u(c);var f=function(n,e){var r=Hu(t,n,e);if(e[Ca]===cf)return void Ui(r,!0);Ui(r)},s=function(){return Yo(ed,t)},l=Yu(o);Gu(e,l),gt(u),Vu(s,f,l).then(function(){return Xu(t)})['catch'](function(n){return Wu(t,n)})}function nc(){return{log:Sn,error:Cn}}function tc(n){var t={};return t[nl]=n[nl],t[el]=n[el],t[il]=n[il],t[ol]=n[ol],t[ul]=n[ul],t}function ec(n,t,e){for(var r=L(".",t),i=r.length,o=0;o<i-1;o+=1){var u=r[o];n[u]=n[u]||{},n=n[u]}n[r[i-1]]=e}function rc(n,t,e,r){var i={logger:nc(),settings:tc(t)},o=e(r,i),u=o[Os];if(!o[As])throw new Error(u);var c=n[Gp][Kp];c[Jp]=c[Jp]||{};var a=r[Is],f=r[Rs],s=r[Ps],l=M(function(n,t){return n.push(i[t]),n},[],f);ec(c[Jp],a,s.apply(void 0,l))}function ic(n){rc(Ea,K(),Mn,n)}function oc(n){return i(n)&&pa(n[Os])?n[Os]:!a(n)&&pa(n[Fs])?n[Fs]:pa(n)?n:Ts}function uc(n,t){return Io(""+Cf+t,Ji(Ef,t,n))}function cc(n,t,e){var r=e[Ls],i={};i[js]=n,i[Us]=e[Us];var o={};o[js]=n,o[za]=t,o[_s]=r,Sn(ms,n),vt(i,r),Qu(o)}function ac(n,t,e){var r=oc(e),i={};i[js]=n,i[Fs]=r,Cn(gs,n,e),mt(i),Io(Ws,Ro(Ks,t))}function fc(n,t){return[].slice.call(n,t)}function sc(n){return js+":"+n}function lc(n,t){var e=Dr(n);a(e)?Ar(sc(n),[t]):(e.push(t),Ar(sc(n),e))}function dc(n){return Dr(sc(n))}function hc(n,t,e){var r=K(),i={};i[js]=n,i[qs]=t,i[il]=r[il];var o={};o[js]=n;var u=function(t){return cc(n,e,t)},c=function(t){return ac(n,e,t)};pt(o),ei(i).then(u)['catch'](c)}function pc(n,t){if(!j(n))return Cn(Xp,ws,Es,t),pi(If);if(Ei(If,xi(n)))return Sn(Xp,Cs,t),pi(If);var e=yi(n);return Ei(Mf,e)&&Po(Ks,e)?e:(Sn(Xp,vs,Es,t),pi(If))}function vc(n,t,e){if(!gn()&&!bn())return void Cn(qf);var r=_n(t),i=r[Os];if(!r[As])return void Cn(Xp,i);var o=pc(n,t),u=cr(t,e),c={};c[js]=t,c[qs]=u,c[za]=uc(o,t),Sn(Xp,t,u,o),lc(t,c),gn()&&hc(t,u,o)}function mc(n,t){var e=pi("#"+n);return vi(e)?e:(Sn(Yp,vs,Es,t),pi(If))}function gc(n,t,e){if(!gn()&&!bn())return void Cn(qf);if(k(n))return void Cn(Yp,ys);var r=_n(t),i=r[Os];if(!r[As])return void Cn(Yp,i);var o=mc(n,t),u=cr(t,e),c={};c[js]=t,c[qs]=u,c[za]=uc(o,t),Sn(Yp,t,u,o),lc(t,c)}function yc(n,t){if(!gn())return void Cn(qf);var e=_n(n),r=e[Os];if(!e[As])return void Cn(Qp,r);var i=Ke(t);i[Fl]=F();var o=dc(n);Sn(Qp,o),m(function(n){var t=n[js],e=n[qs],r=n[za];hc(t,zc({},e,i),r)},o)}function bc(n){var t=fc(arguments,1);Wp.skipStackDepth=2,vc(Wp(),n,t)}function xc(n,t){gc(n,t,fc(arguments,2))}function Ec(n){yc(n,fc(arguments,1))}function wc(n){n[ev]=n[ev]||{},n[ev].querySelectorAll=pi}function Cc(n,t){t.addEventListener(_f,function(t){o(n[ev][rv])&&n[ev][rv](t)},!0)}function Sc(n,t,e){if(bn()){wc(n);var r=e[xl],i=function(){return Cc(n,t)},o=function(){return Cn(nv)};Sn(tv),Cp(r).then(i)['catch'](o)}}function Tc(n){return i(n)&&pa(n[Os])?n[Os]:!a(n)&&pa(n[Fs])?n[Fs]:pa(n)?n:Ts}function Oc(n,t,e){var r=e[Ls],i={};i[js]=n,i[Us]=e[Us];var o={};o[js]=n,o[za]=t,o[_s]=r,Sn(ms,n),vt(i,r),Qu(o)}function Nc(n,t){var e={};e[js]=n,e[Fs]=Tc(t),Cn(gs,n,t),mt(e),Yo(id,n)}function kc(){var n=K(),t=n[ol],e={};e[js]=t,e[qs]=ar(),e[il]=n[il];var r=function(n){return Oc(t,If,n)},i=function(n){return Nc(t,n)};Sn(ms,t);var o={};o[js]=t,pt(o),ei(e).then(r)['catch'](i)}function Ac(){nu(rd,au)}function Dc(n,t){Qo(n,function(e){e===t&&(fu(),tu(n))})}function jc(n){if(!n[ul])return void Sn(iv,ov);var t=n[ol],e=_n(t),r=e[Os];if(!e[As])return void Cn(iv,r);Ac(),Dc(id,t),Dc(td,t),Dc(ed,t),kc()}function _c(n){var t=function(){};n.adobe=n.adobe||{},n.adobe.target={VERSION:"",event:{},getOffer:t,applyOffer:t,trackEvent:t,registerExtension:t,init:t},n.mboxCreate=t,n.mboxDefine=t,n.mboxUpdate=t}function Ic(n,t,e){if(n.adobe&&n.adobe.target&&void 0!==n.adobe.target.getOffer)return void Cn(Lf);G(e);var r=K(),i=r[cl];if(n.adobe.target.VERSION=i,n.adobe.target.event={LIBRARY_LOADED:rh,REQUEST_START:ih,REQUEST_SUCCEEDED:oh,REQUEST_FAILED:uh,CONTENT_RENDERING_START:ch,CONTENT_RENDERING_SUCCEEDED:ah,CONTENT_RENDERING_FAILED:fh,CONTENT_RENDERING_NO_OFFERS:sh,CONTENT_RENDERING_REDIRECT:lh},!r[Qs])return _c(n),void Cn(qf);Sc(n,t,r),gn()&&(du(),kn(),Sr(),jc(r)),n.adobe.target.getOffer=si,n.adobe.target.trackEvent=Ui,n.adobe.target.applyOffer=Qu,n.adobe.target.registerExtension=ic,n.mboxCreate=bc,n.mboxDefine=xc,n.mboxUpdate=Ec,Yo(rd),ht()}var Rc,Pc=window,Mc=document,qc=!Mc.documentMode||Mc.documentMode>=10,Lc=Mc.compatMode&&"CSS1Compat"===Mc.compatMode,Uc=Lc&&qc,Fc=Pc.targetGlobalSettings;if(!Uc||Fc&&!1===Fc.enabled)return Pc.adobe=Pc.adobe||{},Pc.adobe.target={VERSION:"",event:{},getOffer:n,applyOffer:n,trackEvent:n,registerExtension:n,init:n},Pc.mboxCreate=n,Pc.mboxDefine=n,Pc.mboxUpdate=n,"console"in Pc&&"warn"in Pc.console&&Pc.console.warn("AT: Adobe Target content delivery is disabled. Update your DOCTYPE to support Standards mode."),Pc.adobe.target;var $c=Object.getOwnPropertySymbols,Vc=Object.prototype.hasOwnProperty,Hc=Object.prototype.propertyIsEnumerable,Bc=function(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de","5"===Object.getOwnPropertyNames(n)[0])return!1;for(var t={},e=0;e<10;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(n){return t[n]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(n){r[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(n){return!1}}()?Object.assign:function(n,e){for(var r,i,o=t(n),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)Vc.call(r,c)&&(o[c]=r[c]);if($c){i=$c(r);for(var a=0;a<i.length;a++)Hc.call(r,i[a])&&(o[i[a]]=r[i[a]])}}return o},zc=Bc,Zc=Object.prototype,Gc=Zc.toString,Kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jc="[object Function]",Wc=Array.isArray,Xc=function(n,t){return t.forEach(n)},Yc=function(n,t){Xc(function(e){return n(t[e],e)},l(t))},Qc=function(n,t){return t.filter(n)},na=function(n,t){var e={};return Yc(function(t,r){n(t,r)&&(e[r]=t)},t),e},ta="[object String]",ea=9007199254740991,ra=function(n,t){return t.map(n)},ia=Object.prototype,oa=ia.hasOwnProperty,ua=String.prototype,ca=ua.trim,aa="[object Object]",fa=Function.prototype,sa=Object.prototype,la=fa.toString,da=sa.hasOwnProperty,ha=la.call(Object),pa=function(n){return!k(n)},va="[object Number]",ma=function(n,t){var e={};return Yc(function(t,r){e[r]=n(t,r)},t),e},ga=function(n,t,e){return e.reduce(n,t)},ya=function(n,t,e){var r=t;return Yc(function(t,e){r=n(r,t,e)},e),r},ba=Array.prototype,xa=ba.reverse,Ea=window,wa=document,Ca="action",Sa="attribute",Ta="value",Oa="clickTrackId",Na="content",ka="contentType",Aa="finalHeight",Da="finalWidth",ja="height",_a="width",Ia="finalLeftPosition",Ra="finalTopPosition",Pa="left",Ma="top",qa="position",La="from",Ua="to",Fa="url",$a="includeAllUrlParameters",Va="passMboxSession",Ha="property",Ba="priority",za="selector",Za="cssSelector",Ga="style",Ka="setContent",Ja="setText",Wa="setJson",Xa="setAttribute",Ya="setStyle",Qa="rearrange",nf="resize",tf="move",ef="remove",rf="customCode",of="appendContent",uf="redirect",cf="trackClick",af="signalClick",ff="insertBefore",sf="insertAfter",lf="prependContent",df="replaceContent",hf="mboxDebug",pf="mboxDisable",vf="mboxEdit",mf="check",gf="true",yf=250,bf=/^[a-zA-Z]+$/,xf="data-at-src",Ef="data-at-mbox-name",wf="-clicked",Cf="mbox-name-",Sf="json",Tf="html",Of="script",Nf="text",kf="src",Af="id",Df="class",jf="type",_f="click",If="head",Rf="style",Pf="img",Mf="div",qf='Adobe Target content delivery is disabled. Ensure that you can save cookies to your current domain, there is no "mboxDisable" cookie and there is no "mboxDisable" parameter in query string.',Lf="Adobe Target has already been initialized.",Uf="options argument is required",Ff="mbox option is required",$f="mbox option is too long",Vf="success option is required",Hf="error option is required",Bf="offer option is required",zf="name option is required",Zf="name is invalid",Gf="modules option is required",Kf="register option is required",Jf="modules do not exists",Wf="Failed actions",Xf="Unexpected error",Yf="actions to be rendered",Qf="request failed",ns="All actions rendered successfully",ts="Action rendered successfully",es="Rendering action",rs="Action has no content",is="Action has no attribute or value",os="Action has no property or value",us="Action has no height or width",cs="Action has no left, top or position",as="Action has no from or to",fs="Action has no url",ss="Action has no click track ID",ls="Rearrange elements are missing",ds="Loading image",hs="Track event request succeeded",ps="Track event request failed",vs="Mbox container not found",ms="Rendering mbox",gs="Rendering mbox failed",ys="ID is missing",bs="No actions to be rendered",xs="Redirect action",Es="default to HEAD",ws="document.currentScript is missing or not supported",Cs="executing from HTML HEAD",Ss="Script load",Ts="unknown error",Os="error",Ns="warning",ks="unknown",As="valid",Ds="success",js="mbox",_s="offer",Is="name",Rs="modules",Ps="register",Ms="status",qs="params",Ls="actions",Us="responseTokens",Fs="message",$s="response",Vs="request",Hs="dynamic",Bs="plugins",zs="clickToken",Zs="offers",Gs="provider",Ks="mboxDefault",Js="at-flicker-control",Ws="at-element-marker",Xs="at-element-click-tracking",Ys=js,Qs="enabled",nl="clientCode",tl="imsOrgId",el="serverDomain",rl="crossDomain",il="timeout",ol="globalMboxName",ul="globalMboxAutoCreate",cl="version",al="defaultContentHiddenStyle",fl="bodyHiddenStyle",sl="bodyHidingEnabled",ll="deviceIdLifetime",dl="sessionIdLifetime",hl="selectorsPollingTimeout",pl="visitorApiTimeout",vl="overrideMboxEdgeServer",ml="overrideMboxEdgeServerTimeout",gl="optoutEnabled",yl="secureOnly",bl="supplementalDataIdParamTimeout",xl="authoringScriptUrl",El="crossDomainOnly",wl="crossDomainEnabled",Cl="scheme",Sl="cookieDomain",Tl="mboxParams",Ol="globalMboxParams",Nl="urlSizeLimit",kl="browserHeight",Al="browserWidth",Dl="browserTimeOffset",jl="screenHeight",_l="screenWidth",Il="screenOrientation",Rl="colorDepth",Pl="devicePixelRatio",Ml="webGLRenderer",ql=js,Ll="mboxSession",Ul="mboxPC",Fl="mboxPage",$l="mboxRid",Vl="mboxVersion",Hl="mboxCount",Bl="mboxTime",zl="mboxHost",Zl="mboxURL",Gl="mboxReferrer",Kl="mboxXDomain",Jl="PC",Wl="mboxEdgeCluster",Xl="session",Yl="at-tick",Ql="at-render-complete",nd="at-timeout",td="at-no-offers",ed="at-selectors-hidden",rd="at-library-loaded",id="at-global-mbox-failed",od="settings",ud="clientTraces",cd="serverTraces",ad="___target_traces",fd="targetGlobalSettings",sd="dataProvider",ld=sd+"s",dd="timestamp",hd="Content-Type",pd="application/x-www-form-urlencoded",vd="isApproved",md="optinEnabled",gd="adobe",yd="optIn",bd="fetchPermissions",xd="Categories",Ed="TARGET",wd="ANALYTICS",Cd="Target is not Opted In",Sd=/^(?!0)(?!.*\.$)((1?\d?\d|25[0-5]|2[0-4]\d)(\.|$)){4}$/,Td=/^(com|edu|gov|net|mil|org|nom|co|name|info|biz)$/i,Od="file:",Nd={},kd=[Qs,nl,tl,el,Sl,rl,il,ul,Tl,Ol,al,"defaultContentVisibleStyle",fl,sl,hl,pl,vl,ml,gl,md,yl,bl,xl,Nl],Ad="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Dd=J(function(n,t){!function(e){var r=!1;if("function"==typeof Rc&&Rc.amd&&(Rc(e),r=!0),"object"===(void 0===t?"undefined":Kc(t))&&(n.exports=e(),r=!0),!r){var i=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=i,o}}}(function(){function n(){for(var n=0,t={};n<arguments.length;n++){var e=arguments[n];for(var r in e)t[r]=e[r]}return t}function t(e){function r(t,i,o){var u;if("undefined"!=typeof document){if(arguments.length>1){if(o=n({path:"/"},r.defaults,o),"number"==typeof o.expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*o.expires),o.expires=c}o.expires=o.expires?o.expires.toUTCString():"";try{u=JSON.stringify(i),/^[\{\[]/.test(u)&&(i=u)}catch(n){}i=e.write?e.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var a="";for(var f in o)o[f]&&(a+="; "+f,!0!==o[f]&&(a+="="+o[f]));return document.cookie=t+"="+i+a}t||(u={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,d=0;d<s.length;d++){var h=s[d].split("="),p=h.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var v=h[0].replace(l,decodeURIComponent);if(p=e.read?e.read(p,v):e(p,v)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(n){}if(t===v){u=p;break}t||(u[v]=p)}catch(n){}}return u}}return r.set=r,r.get=function(n){return r.call(r,n)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,e){r(t,"",n(e,{expires:-1}))},r.withConverter=t,r}return t(function(){})})}),jd=Dd,_d={get:jd.get,set:jd.set,remove:jd.remove},Id=_d.get,Rd=_d.set,Pd=_d.remove,Md=function(n,t){t=t||{};for(var e={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=e.parser[t.strictMode?"strict":"loose"].exec(n),i={},o=14;o--;)i[e.key[o]]=r[o]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(n,t,r){t&&(i[e.q.name][t]=r)}),i},qd=function(n,t,e,r){t=t||"&",e=e||"=";var i={};if("string"!=typeof n||0===n.length)return i;var o=/\+/g;n=n.split(t);var u=1e3;r&&"number"==typeof r.maxKeys&&(u=r.maxKeys);var c=n.length;u>0&&c>u&&(c=u);for(var a=0;a<c;++a){var f,s,l,d,h=n[a].replace(o,"%20"),p=h.indexOf(e);p>=0?(f=h.substr(0,p),s=h.substr(p+1)):(f=h,s=""),l=decodeURIComponent(f),d=decodeURIComponent(s),Y(i,l)?Array.isArray(i[l])?i[l].push(d):i[l]=[i[l],d]:i[l]=d}return i},Ld=function(n){switch(void 0===n?"undefined":Kc(n)){case"string":return n;case"boolean":return n?"true":"false";case"number":return isFinite(n)?n:"";default:return""}},Ud=function(n,t,e,r){return t=t||"&",e=e||"=",null===n&&(n=void 0),"object"===(void 0===n?"undefined":Kc(n))?Object.keys(n).map(function(r){var i=encodeURIComponent(Ld(r))+e;return Array.isArray(n[r])?n[r].map(function(n){return i+encodeURIComponent(Ld(n))}).join(t):i+encodeURIComponent(Ld(n[r]))}).join(t):r?encodeURIComponent(Ld(r))+e+encodeURIComponent(Ld(n)):""},Fd=J(function(n,t){t.decode=t.parse=qd,t.encode=t.stringify=Ud}),$d=(Fd.encode,Fd.stringify,Fd.decode,Fd.parse,Fd),Vd={parse:function(n){return"string"==typeof n&&(n=n.trim().replace(/^[?#&]/,"")),$d.parse(n)},stringify:function(n){return $d.stringify(n)}},Hd=Vd.parse,Bd=wa.createElement("a"),zd={},Zd=Vd.stringify,Gd="AT:",Kd="1",Jd=[Qs,nl,tl,el,Sl,rl,il,ul,Tl,Ol,al,"defaultContentVisibleStyle",fl,sl,hl,pl,vl,ml,gl,yl,bl,xl],Wd=J(function(n){!function(t){function e(){}function r(n,t){return function(){n.apply(t,arguments)}}function i(n){if("object"!==Kc(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(n,this)}function o(n,t){for(;3===n._state;)n=n._value;if(0===n._state)return void n._deferreds.push(t);n._handled=!0,i._immediateFn(function(){var e=1===n._state?t.onFulfilled:t.onRejected;if(null===e)return void(1===n._state?u:c)(t.promise,n._value);var r;try{r=e(n._value)}catch(n){return void c(t.promise,n)}u(t.promise,r)})}function u(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":Kc(t))||"function"==typeof t)){var e=t.then;if(t instanceof i)return n._state=3,n._value=t,void a(n);if("function"==typeof e)return void s(r(e,t),n)}n._state=1,n._value=t,a(n)}catch(t){c(n,t)}}function c(n,t){n._state=2,n._value=t,a(n)}function a(n){2===n._state&&0===n._deferreds.length&&i._immediateFn(function(){n._handled||i._unhandledRejectionFn(n._value)});for(var t=0,e=n._deferreds.length;t<e;t++)o(n,n._deferreds[t]);n._deferreds=null}function f(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function s(n,t){var e=!1;try{n(function(n){e||(e=!0,u(t,n))},function(n){e||(e=!0,c(t,n))})}catch(n){if(e)return;e=!0,c(t,n)}}var l=setTimeout;i.prototype['catch']=function(n){return this.then(null,n)},i.prototype.then=function(n,t){var r=new this.constructor(e);return o(this,new f(n,t,r)),r},i.all=function(n){var t=Array.prototype.slice.call(n);return new i(function(n,e){function r(o,u){try{if(u&&("object"===(void 0===u?"undefined":Kc(u))||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,function(n){r(o,n)},e)}t[o]=u,0==--i&&n(t)}catch(n){e(n)}}if(0===t.length)return n([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.resolve=function(n){return n&&"object"===(void 0===n?"undefined":Kc(n))&&n.constructor===i?n:new i(function(t){t(n)})},i.reject=function(n){return new i(function(t,e){e(n)})},i.race=function(n){return new i(function(t,e){for(var r=0,i=n.length;r<i;r++)n[r].then(t,e)})},i._immediateFn="function"==typeof setImmediate&&function(n){setImmediate(n)}||function(n){l(n,0)},i._unhandledRejectionFn=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)},i._setImmediateFn=function(n){i._immediateFn=n},i._setUnhandledRejectionFn=function(n){i._unhandledRejectionFn=n},void 0!==n&&n.exports?n.exports=i:t.Promise||(t.Promise=i)}(Ad)}),Xd=window.Promise||Wd,Yd=function(n){var t=function(){function t(n){return null==n?String(n):J[W.call(n)]||"object"}function e(n){return"function"==t(n)}function r(n){return null!=n&&n==n.window}function i(n){return null!=n&&n.nodeType==n.DOCUMENT_NODE}function o(n){return"object"==t(n)}function u(n){return o(n)&&!r(n)&&Object.getPrototypeOf(n)==Object.prototype}function c(n){var t=!!n&&"length"in n&&n.length,e=T.type(n);return"function"!=e&&!r(n)&&("array"==e||0===t||"number"==typeof t&&t>0&&t-1 in n)}function a(n){return j.call(n,function(n){return null!=n})}function f(n){return n.length>0?T.fn.concat.apply([],n):n}function s(n){return n.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(n){return n in P?P[n]:P[n]=new RegExp("(^|\\s)"+n+"(\\s|$)")}function d(n,t){return"number"!=typeof t||M[s(n)]?t:t+"px"}function h(n){var t,e;return R[n]||(t=I.createElement(n),I.body.appendChild(t),e=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==e&&(e="block"),R[n]=e),R[n]}function p(n){return"children"in n?_.call(n.children):T.map(n.childNodes,function(n){if(1==n.nodeType)return n})}function v(n,t){var e,r=n?n.length:0;for(e=0;e<r;e++)this[e]=n[e];this.length=r,this.selector=t||""}function m(n,t,e){for(S in t)e&&(u(t[S])||nn(t[S]))?(u(t[S])&&!u(n[S])&&(n[S]={}),nn(t[S])&&!nn(n[S])&&(n[S]=[]),m(n[S],t[S],e)):t[S]!==C&&(n[S]=t[S])}function g(n,t){return null==t?T(n):T(n).filter(t)}function y(n,t,r,i){return e(t)?t.call(n,r,i):t}function b(n,t,e){null==e?n.removeAttribute(t):n.setAttribute(t,e)}function x(n,t){var e=n.className||"",r=e&&e.baseVal!==C;if(t===C)return r?e.baseVal:e;r?e.baseVal=t:n.className=t}function E(n){try{return n?"true"==n||"false"!=n&&("null"==n?null:+n+""==n?+n:/^[\[\{]/.test(n)?T.parseJSON(n):n):n}catch(t){return n}}function w(n,t){t(n);for(var e=0,r=n.childNodes.length;e<r;e++)w(n.childNodes[e],t)}var C,S,T,O,N,k,A=[],D=A.concat,j=A.filter,_=A.slice,I=n.document,R={},P={},M={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},q=/^\s*<(\w+|!)[^>]*>/,L=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,U=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,$=/([A-Z])/g,V=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],B=I.createElement("table"),z=I.createElement("tr"),Z={tr:I.createElement("tbody"),tbody:B,thead:B,tfoot:B,td:z,th:z,"*":I.createElement("div")},G=/complete|loaded|interactive/,K=/^[\w-]*$/,J={},W=J.toString,X={},Y=I.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",'for':"htmlFor",'class':"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},nn=Array.isArray||function(n){return n instanceof Array};return X.matches=function(n,t){if(!t||!n||1!==n.nodeType)return!1;var e=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.oMatchesSelector||n.matchesSelector;if(e)return e.call(n,t);var r,i=n.parentNode,o=!i;return o&&(i=Y).appendChild(n),r=~X.qsa(i,t).indexOf(n),o&&Y.removeChild(n),r},N=function(n){return n.replace(/-+(.)?/g,function(n,t){return t?t.toUpperCase():""})},k=function(n){return j.call(n,function(t,e){return n.indexOf(t)==e})},X.fragment=function(n,t,e){var r,i,o;return L.test(n)&&(r=T(I.createElement(RegExp.$1))),r||(n.replace&&(n=n.replace(U,"<$1></$2>")),t===C&&(t=q.test(n)&&RegExp.$1),t in Z||(t="*"),o=Z[t],o.innerHTML=""+n,r=T.each(_.call(o.childNodes),function(){o.removeChild(this)})),u(e)&&(i=T(r),T.each(e,function(n,t){V.indexOf(n)>-1?i[n](t):i.attr(n,t)})),r},X.Z=function(n,t){return new v(n,t)},X.isZ=function(n){return n instanceof X.Z},X.init=function(n,t){var r;if(!n)return X.Z();if("string"==typeof n)if(n=n.trim(),"<"==n[0]&&q.test(n))r=X.fragment(n,RegExp.$1,t),n=null;else{if(t!==C)return T(t).find(n);r=X.qsa(I,n)}else{if(e(n))return T(I).ready(n);if(X.isZ(n))return n;if(nn(n))r=a(n);else if(o(n))r=[n],n=null;else if(q.test(n))r=X.fragment(n.trim(),RegExp.$1,t),n=null;else{if(t!==C)return T(t).find(n);r=X.qsa(I,n)}}return X.Z(r,n)},T=function(n,t){return X.init(n,t)},T.extend=function(n){var t,e=_.call(arguments,1);return"boolean"==typeof n&&(t=n,n=e.shift()),e.forEach(function(e){m(n,e,t)}),n},X.qsa=function(n,t){var e,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,u=K.test(o);return n.getElementById&&u&&r?(e=n.getElementById(o))?[e]:[]:1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType?[]:_.call(u&&!r&&n.getElementsByClassName?i?n.getElementsByClassName(o):n.getElementsByTagName(t):n.querySelectorAll(t))},T.contains=I.documentElement.contains?function(n,t){return n!==t&&n.contains(t)}:function(n,t){for(;t&&(t=t.parentNode);)if(t===n)return!0;return!1},T.type=t,T.isFunction=e,T.isWindow=r,T.isArray=nn,T.isPlainObject=u,T.isEmptyObject=function(n){var t;for(t in n)return!1;return!0},T.isNumeric=function(n){var t=Number(n),e=void 0===n?"undefined":Kc(n);return null!=n&&"boolean"!=e&&("string"!=e||n.length)&&!isNaN(t)&&isFinite(t)||!1},T.inArray=function(n,t,e){return A.indexOf.call(t,n,e)},T.camelCase=N,T.trim=function(n){return null==n?"":String.prototype.trim.call(n)},T.uuid=0,T.support={},T.expr={},T.noop=function(){},T.map=function(n,t){var e,r,i,o=[];if(c(n))for(r=0;r<n.length;r++)null!=(e=t(n[r],r))&&o.push(e);else for(i in n)null!=(e=t(n[i],i))&&o.push(e);return f(o)},T.each=function(n,t){var e,r;if(c(n)){for(e=0;e<n.length;e++)if(!1===t.call(n[e],e,n[e]))return n}else for(r in n)if(!1===t.call(n[r],r,n[r]))return n;return n},T.grep=function(n,t){return j.call(n,t)},n.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){J["[object "+t+"]"]=t.toLowerCase()}),T.fn={constructor:X.Z,length:0,forEach:A.forEach,reduce:A.reduce,push:A.push,sort:A.sort,splice:A.splice,indexOf:A.indexOf,concat:function(){var n,t,e=[];for(n=0;n<arguments.length;n++)t=arguments[n],e[n]=X.isZ(t)?t.toArray():t;return D.apply(X.isZ(this)?this.toArray():this,e)},map:function(n){return T(T.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return T(_.apply(this,arguments))},ready:function(n){return G.test(I.readyState)&&I.body?n(T):I.addEventListener("DOMContentLoaded",function(){n(T)},!1),this},get:function(n){return n===C?_.call(this):this[n>=0?n:n+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){for(var t,e=this.length,r=0;r<e&&(t=this[r],!1!==n.call(t,r,t));)r++;return this},filter:function(n){return e(n)?this.not(this.not(n)):T(j.call(this,function(t){return X.matches(t,n)}))},add:function(n,t){return T(k(this.concat(T(n,t))))},is:function(n){return this.length>0&&X.matches(this[0],n)},not:function(n){var t=[];if(e(n)&&n.call!==C)this.each(function(e){n.call(this,e)||t.push(this)});else{var r="string"==typeof n?this.filter(n):c(n)&&e(n.item)?_.call(n):T(n);this.forEach(function(n){r.indexOf(n)<0&&t.push(n)})}return T(t)},has:function(n){return this.filter(function(){return o(n)?T.contains(this,n):T(this).find(n).size()})},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},first:function(){var n=this[0];return n&&!o(n)?n:T(n)},last:function(){var n=this[this.length-1];return n&&!o(n)?n:T(n)},find:function(n){var t=this;return n?"object"==(void 0===n?"undefined":Kc(n))?T(n).filter(function(){var n=this;return A.some.call(t,function(t){return T.contains(t,n)})}):1==this.length?T(X.qsa(this[0],n)):this.map(function(){return X.qsa(this,n)}):T()},closest:function(n,t){var e=[],r="object"==(void 0===n?"undefined":Kc(n))&&T(n);return this.each(function(o,u){for(;u&&!(r?r.indexOf(u)>=0:X.matches(u,n));)u=u!==t&&!i(u)&&u.parentNode;u&&e.indexOf(u)<0&&e.push(u)}),T(e)},parents:function(n){for(var t=[],e=this;e.length>0;)e=T.map(e,function(n){if((n=n.parentNode)&&!i(n)&&t.indexOf(n)<0)return t.push(n),n});return g(t,n)},parent:function(n){return g(k(this.pluck("parentNode")),n)},children:function(n){return g(this.map(function(){return p(this)}),n)},contents:function(){return this.map(function(){return this.contentDocument||_.call(this.childNodes)})},siblings:function(n){return g(this.map(function(n,t){return j.call(p(t.parentNode),function(n){return n!==t})}),n)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(n){return T.map(this,function(t){return t[n]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(n){return this.before(n).remove()},wrap:function(n){var t=e(n);if(this[0]&&!t)var r=T(n).get(0),i=r.parentNode||this.length>1;return this.each(function(e){T(this).wrapAll(t?n.call(this,e):i?r.cloneNode(!0):r)})},wrapAll:function(n){if(this[0]){T(this[0]).before(n=T(n));for(var t;(t=n.children()).length;)n=t.first();T(n).append(this)}return this},wrapInner:function(n){var t=e(n);return this.each(function(e){var r=T(this),i=r.contents(),o=t?n.call(this,e):n;i.length?i.wrapAll(o):r.append(o)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(n){return this.each(function(){var t=T(this);(n===C?"none"==t.css("display"):n)?t.show():t.hide()})},prev:function(n){return T(this.pluck("previousElementSibling")).filter(n||"*")},next:function(n){return T(this.pluck("nextElementSibling")).filter(n||"*")},html:function(n){return 0 in arguments?this.each(function(t){var e=this.innerHTML;T(this).empty().append(y(this,n,t,e))}):0 in this?this[0].innerHTML:null},text:function(n){return 0 in arguments?this.each(function(t){var e=y(this,n,t,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(n,t){var e;return"string"!=typeof n||1 in arguments?this.each(function(e){if(1===this.nodeType)if(o(n))for(S in n)b(this,S,n[S]);else b(this,n,y(this,t,e,this.getAttribute(n)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(n))?e:C},removeAttr:function(n){return this.each(function(){1===this.nodeType&&n.split(" ").forEach(function(n){b(this,n)},this)})},prop:function(n,t){return n=Q[n]||n,1 in arguments?this.each(function(e){this[n]=y(this,t,e,this[n])}):this[0]&&this[0][n]},removeProp:function(n){return n=Q[n]||n,this.each(function(){delete this[n]})},data:function(n,t){var e="data-"+n.replace($,"-$1").toLowerCase(),r=1 in arguments?this.attr(e,t):this.attr(e);return null!==r?E(r):C},val:function(n){return 0 in arguments?(null==n&&(n=""),this.each(function(t){this.value=y(this,n,t,this.value)})):this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(n){var e=T(this),r=y(this,t,n,e.offset()),i=e.offsetParent().offset(),o={top:r.top-i.top,left:r.left-i.left};"static"==e.css("position")&&(o.position="relative"),e.css(o)});if(!this.length)return null;if(I.documentElement!==this[0]&&!T.contains(I.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+n.pageXOffset,top:e.top+n.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(n,e){if(arguments.length<2){var r=this[0];if("string"==typeof n){if(!r)return;return r.style[N(n)]||getComputedStyle(r,"").getPropertyValue(n)}if(nn(n)){if(!r)return;var i={},o=getComputedStyle(r,"");return T.each(n,function(n,t){i[t]=r.style[N(t)]||o.getPropertyValue(t)}),i}}var u="";if("string"==t(n))e||0===e?u=s(n)+":"+d(n,e):this.each(function(){this.style.removeProperty(s(n))});else for(S in n)n[S]||0===n[S]?u+=s(S)+":"+d(S,n[S])+";":this.each(function(){this.style.removeProperty(s(S))});return this.each(function(){this.style.cssText+=";"+u})},index:function(n){return n?this.indexOf(T(n)[0]):this.parent().children().indexOf(this[0])},hasClass:function(n){return!!n&&A.some.call(this,function(n){return this.test(x(n))},l(n))},addClass:function(n){return n?this.each(function(t){if("className"in this){O=[];var e=x(this);y(this,n,t,e).split(/\s+/g).forEach(function(n){T(this).hasClass(n)||O.push(n)},this),O.length&&x(this,e+(e?" ":"")+O.join(" "))}}):this},removeClass:function(n){return this.each(function(t){if("className"in this){if(n===C)return x(this,"");O=x(this),y(this,n,t,O).split(/\s+/g).forEach(function(n){O=O.replace(l(n)," ")}),x(this,O.trim())}})},toggleClass:function(n,t){return n?this.each(function(e){var r=T(this);y(this,n,e,x(this)).split(/\s+/g).forEach(function(n){(t===C?!r.hasClass(n):t)?r.addClass(n):r.removeClass(n)})}):this},scrollTop:function(n){if(this.length){var t="scrollTop"in this[0];return n===C?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=n}:function(){this.scrollTo(this.scrollX,n)})}},scrollLeft:function(n){if(this.length){var t="scrollLeft"in this[0];return n===C?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=n}:function(){this.scrollTo(n,this.scrollY)})}},position:function(){if(this.length){var n=this[0],t=this.offsetParent(),e=this.offset(),r=F.test(t[0].nodeName)?{top:0,left:0}:t.offset();return e.top-=parseFloat(T(n).css("margin-top"))||0,e.left-=parseFloat(T(n).css("margin-left"))||0,r.top+=parseFloat(T(t[0]).css("border-top-width"))||0,r.left+=parseFloat(T(t[0]).css("border-left-width"))||0,{top:e.top-r.top,left:e.left-r.left}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||I.body;n&&!F.test(n.nodeName)&&"static"==T(n).css("position");)n=n.offsetParent;return n})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(n){var t=n.replace(/./,function(n){return n[0].toUpperCase()});T.fn[n]=function(e){var o,u=this[0];return e===C?r(u)?u["inner"+t]:i(u)?u.documentElement["scroll"+t]:(o=this.offset())&&o[n]:this.each(function(t){u=T(this),u.css(n,y(this,e,t,u[n]()))})}}),H.forEach(function(e,r){var i=r%2;T.fn[e]=function(){var e,o,u=T.map(arguments,function(n){var r=[];return e=t(n),"array"==e?(n.forEach(function(n){return n.nodeType!==C?r.push(n):T.zepto.isZ(n)?r=r.concat(n.get()):void(r=r.concat(X.fragment(n)))}),r):"object"==e||null==n?n:X.fragment(n)}),c=this.length>1;return u.length<1?this:this.each(function(t,e){o=i?e:e.parentNode,e=0==r?e.nextSibling:1==r?e.firstChild:2==r?e:null;var a=T.contains(I.documentElement,o),f=/^(text|application)\/(javascript|ecmascript)$/;u.forEach(function(t){if(c)t=t.cloneNode(!0);else if(!o)return T(t).remove();o.insertBefore(t,e),a&&w(t,function(t){if(null!=t.nodeName&&"SCRIPT"===t.nodeName.toUpperCase()&&(!t.type||f.test(t.type.toLowerCase()))&&!t.src){var e=t.ownerDocument?t.ownerDocument.defaultView:n;e.eval.call(e,t.innerHTML)}})})})},T.fn[i?e+"To":"insert"+(r?"Before":"After")]=function(n){return T(n)[e](this),this}}),X.Z.prototype=v.prototype=T.fn,X.uniq=k,X.deserializeValue=E,T.zepto=X,T}();return function(t){function e(n){return n._zid||(n._zid=h++)}function r(n,t,r,u){if(t=i(t),t.ns)var c=o(t.ns);return(g[e(n)]||[]).filter(function(n){return n&&(!t.e||n.e==t.e)&&(!t.ns||c.test(n.ns))&&(!r||e(n.fn)===e(r))&&(!u||n.sel==u)})}function i(n){var t=(""+n).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(n){return new RegExp("(?:^| )"+n.replace(" "," .* ?")+"(?: |$)")}function u(n,t){return n.del&&!b&&n.e in x||!!t}function c(n){return E[n]||b&&x[n]||n}function a(n,r,o,a,f,l,h){var p=e(n),v=g[p]||(g[p]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(o);var r=i(e);r.fn=o,r.sel=f,r.e in E&&(o=function(n){var e=n.relatedTarget;if(!e||e!==this&&!t.contains(this,e))return r.fn.apply(this,arguments)}),r.del=l;var p=l||o;r.proxy=function(t){if(t=s(t),!t.isImmediatePropagationStopped()){t.data=a;var e=p.apply(n,t._args==d?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},r.i=v.length,v.push(r),"addEventListener"in n&&n.addEventListener(c(r.e),r.proxy,u(r,h))})}function f(n,t,i,o,a){var f=e(n);(t||"").split(/\s/).forEach(function(t){r(n,t,i,o).forEach(function(t){delete g[f][t.i],"removeEventListener"in n&&n.removeEventListener(c(t.e),t.proxy,u(t,a))})})}function s(n,e){if(e||!n.isDefaultPrevented){e||(e=n),t.each(T,function(t,r){var i=e[t];n[t]=function(){return this[r]=w,i&&i.apply(e,arguments)},n[r]=C});try{n.timeStamp||(n.timeStamp=(new Date).getTime())}catch(n){}(e.defaultPrevented!==d?e.defaultPrevented:"returnValue"in e?!1===e.returnValue:e.getPreventDefault&&e.getPreventDefault())&&(n.isDefaultPrevented=w)}return n}function l(n){var t,e={originalEvent:n};for(t in n)S.test(t)||n[t]===d||(e[t]=n[t]);return s(e,n)}var d,h=1,p=Array.prototype.slice,v=t.isFunction,m=function(n){return"string"==typeof n},g={},y={},b="onfocusin"in n,x={focus:"focusin",blur:"focusout"},E={mouseenter:"mouseover",mouseleave:"mouseout"};y.click=y.mousedown=y.mouseup=y.mousemove="MouseEvents",t.event={add:a,remove:f},t.proxy=function(n,r){var i=2 in arguments&&p.call(arguments,2);if(v(n)){var o=function(){return n.apply(r,i?i.concat(p.call(arguments)):arguments)};return o._zid=e(n),o}if(m(r))return i?(i.unshift(n[r],n),t.proxy.apply(null,i)):t.proxy(n[r],n);throw new TypeError("expected function")},t.fn.bind=function(n,t,e){return this.on(n,t,e)},t.fn.unbind=function(n,t){return this.off(n,t)},t.fn.one=function(n,t,e,r){return this.on(n,t,e,r,1)};var w=function(){return!0},C=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(n,t,e){return this.on(t,n,e)},t.fn.undelegate=function(n,t,e){return this.off(t,n,e)},t.fn.live=function(n,e){return t(document.body).delegate(this.selector,n,e),this},t.fn.die=function(n,e){return t(document.body).undelegate(this.selector,n,e),this},t.fn.on=function(n,e,r,i,o){var u,c,s=this;return n&&!m(n)?(t.each(n,function(n,t){s.on(n,e,r,t,o)}),s):(m(e)||v(i)||!1===i||(i=r,r=e,e=d),i!==d&&!1!==r||(i=r,r=d),!1===i&&(i=C),s.each(function(s,d){o&&(u=function(n){return f(d,n.type,i),i.apply(this,arguments)}),e&&(c=function(n){var r,o=t(n.target).closest(e,d).get(0);if(o&&o!==d)return r=t.extend(l(n),{currentTarget:o,liveFired:d}),(u||i).apply(o,[r].concat(p.call(arguments,1)))}),a(d,n,i,r,e,c||u)}))},t.fn.off=function(n,e,r){var i=this;return n&&!m(n)?(t.each(n,function(n,t){i.off(n,e,t)}),i):(m(e)||v(r)||!1===r||(r=e,e=d),!1===r&&(r=C),i.each(function(){f(this,n,r,e)}))},t.fn.trigger=function(n,e){return n=m(n)||t.isPlainObject(n)?t.Event(n):s(n),n._args=e,this.each(function(){n.type in x&&"function"==typeof this[n.type]?this[n.type]():"dispatchEvent"in this?this.dispatchEvent(n):t(this).triggerHandler(n,e)})},t.fn.triggerHandler=function(n,e){var i,o;return this.each(function(u,c){i=l(m(n)?t.Event(n):n),i._args=e,i.target=c,t.each(r(c,n.type||n),function(n,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(n){t.fn[n]=function(t){return 0 in arguments?this.bind(n,t):this.trigger(n)}}),t.Event=function(n,t){m(n)||(t=n,n=t.type);var e=document.createEvent(y[n]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:e[i]=t[i];return e.initEvent(n,r,!0),s(e)}}(t),function(){try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;n.getComputedStyle=function(n,e){try{return t(n,e)}catch(n){return null}}}}(),function(n){var t=n.zepto,e=t.qsa,r=/^\s*>/,i="Zepto"+ +new Date;t.qsa=function(t,o){var u,c,a=o;try{a?r.test(a)&&(c=n(t).addClass(i),a="."+i+" "+a):a="*",u=e(t,a)}catch(n){throw n}finally{c&&c.removeClass(i)}return u}}(t),t}(window),Qd=Ea.MutationObserver||Ea.WebkitMutationObserver,nh="Expected an array of promises";Xd._setImmediateFn&&function(){if(qn())return void Xd._setImmediateFn(Un());-1!==Ea.navigator.userAgent.indexOf("MSIE 10")&&Xd._setImmediateFn(Fn())}();var th=F(),eh=/.*\.(\d+)_\d+/;!function(n,t){function e(n,e){var r=t.createEvent("CustomEvent");return e=e||{bubbles:!1,cancelable:!1,detail:void 0},r.initCustomEvent(n,e.bubbles,e.cancelable,e.detail),r}o(n.CustomEvent)||(e.prototype=n.Event.prototype,n.CustomEvent=e)}(Ea,wa);var rh="at-library-loaded",ih="at-request-start",oh="at-request-succeeded",uh="at-request-failed",ch="at-content-rendering-start",ah="at-content-rendering-succeeded",fh="at-content-rendering-failed",sh="at-content-rendering-no-offers",lh="at-content-rendering-redirect",dh="Network request failed",hh="Request timed out",ph="URL is required",vh="GET",mh="POST",gh="method",yh="url",bh="headers",xh="data",Eh="credentials",wh="timeout",Ch="async",Sh="mboxDisable",Th="disabled",Oh=864e5,Nh="3rd party cookies disabled",kh=/CLKTRK#(\S+)/,Ah=/CLKTRK#(\S+)\s/,Dh="adobe_mc_sdid",jh="mboxSession",_h="true",Ih=function(){var n=wa.createElement("canvas"),t=n.getContext("webgl")||n.getContext("experimental-webgl");if(a(t))return null;var e=t.getExtension("WEBGL_debug_renderer_info");if(a(e))return null;var r=t.getParameter(e.UNMASKED_RENDERER_WEBGL);return a(r)?null:r}(),Rh=F(),Ph=1,Mh="Disabled due to optout",qh="MCAAMB",Lh="MCAAMLH",Uh="MCMID",Fh="MCOPTOUT",$h="mboxAAMB",Vh="mboxMCGLH",Hh="mboxMCGVID",Bh="mboxMCSDID",zh="getSupplementalDataID",Zh="getCustomerIDs",Gh="trackingServer",Kh=Gh+"Secure",Jh="vst.",Wh=Jh+"trk",Xh=Jh+"trks",Yh="Visitor",Qh="getInstance",np="isAllowed",tp="Visitor API requests timed out",ep="Visitor API requests error",rp={},ip="Data provider",op="timed out",up=2e3,cp="mboxedge",ap="<clientCode>",fp="/m2/"+ap+"/mbox/json",sp="//",lp="JSON parser error",dp="[getOffer()]",hp=":eq(",pp=")",vp=hp.length,mp=/((\.|#)(-)?\d{1})/g,gp="[trackEvent()]",yp="navigator",bp="sendBeacon",xp="sendBeacon() request failed",Ep=Xd,wp=function(n,t){return new Ep(function(e,r){"onload"in t?(t.onload=function(){e(t)},t.onerror=function(){r(new Error("Failed to load script "+n))}):"readyState"in t&&(t.onreadystatechange=function(){var n=t.readyState;"loaded"!==n&&"complete"!==n||(t.onreadystatechange=null,e(t))})})},Cp=function(n){var t=document.createElement("script");t.src=n,t.async=!0;var e=wp(n,t);return document.getElementsByTagName("head")[0].appendChild(t),e},Sp="clickTrackId",Tp="mboxTarget",Op="script,link,"+Rf;Go.prototype={on:function(n,t,e){var r=this.e||(this.e={});return(r[n]||(r[n]=[])).push({fn:t,ctx:e}),this},once:function(n,t,e){function r(){i.off(n,r),t.apply(e,arguments)}var i=this;return r._=t,this.on(n,r,e)},emit:function(n){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[n]||[]).slice(),r=0,i=e.length;for(r;r<i;r++)e[r].fn.apply(e[r].ctx,t);return this},off:function(n,t){var e=this.e||(this.e={}),r=e[n],i=[];if(r&&t)for(var o=0,u=r.length;o<u;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?e[n]=i:delete e[n],this}};var Np=Go,kp=function(){return new Np}(),Ap="at-",Dp="at-body-style",jp="#"+Dp,_p="at-makers-style",Ip="m",Rp="f",Pp="p",Mp={},qp="l",Lp={},Up=null,Fp=1e3,$p="visibilityState",Vp="visible",Hp={},Bp=function(n){return n[Ca]===cf||n[Ca]===af},zp="[applyOffer()]",Zp=function(n){return!a(n[Fa])},Gp="adobe",Kp="target",Jp="ext",Wp=J(function(n,t){!function(e,r){"function"==typeof Rc&&Rc.amd?Rc([],r):"object"===(void 0===t?"undefined":Kc(t))?n.exports=r():e.currentExecutingScript=r()}(Ad||window,function(){function n(n,t){var e,r=null;if(t=t||f,"string"==typeof n&&n)for(e=t.length;e--;)if(t[e].src===n){r=t[e];break}return r}function t(n){var t,e,r=null;for(n=n||f,t=0,e=n.length;t<e;t++)if(!n[t].hasAttribute("src")){if(r){r=null;break}r=n[t]}return r}function e(n,t){var r,i,o=null,u="number"==typeof t;return t=u?Math.round(t):0,"string"==typeof n&&n&&(u?r=n.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(r=n.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&r[1]||(r=n.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),r&&r[1]&&(t>0?(i=n.slice(n.indexOf(r[0])+r[0].length),o=e(i,t-1)):o=r[1])),o}function r(){return null}function i(){return null}function o(){if(0===f.length)return null;var r,i,c,v,m,g=[],y=o.skipStackDepth||1;for(r=0;r<f.length;r++)l&&s?u.test(f[r].readyState)&&g.push(f[r]):g.push(f[r]);if(i=new Error,h&&(c=i.stack),!c&&p)try{throw i}catch(n){c=n.stack}if(c&&(v=e(c,y),!(m=n(v,g))&&a&&v===a&&(m=t(g))),m||1===g.length&&(m=g[0]),m||d&&(m=document.currentScript),!m&&l&&s)for(r=g.length;r--;)if("interactive"===g[r].readyState){m=g[r];break}return m||(m=g[g.length-1]||null),m}var u=/^(interactive|loaded|complete)$/,c=window.location?window.location.href:null,a=c?c.replace(/#.*$/,"").replace(/\?.*$/,"")||null:null,f=document.getElementsByTagName("script"),s="readyState"in(f[0]||document.createElement("script")),l=!window.opera||"[object Opera]"!==window.opera.toString(),d="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error.stackTraceLimit=1/0);var h=!1,p=!1;!function(){try{var n=new Error;throw h="string"==typeof n.stack&&!!n.stack,n}catch(n){p="string"==typeof n.stack&&!!n.stack}}(),o.skipStackDepth=1;var v=o;return v.near=o,v.far=r,v.origin=i,v})}),Xp="[mboxCreate()]",Yp="[mboxDefine()]",Qp="[mboxUpdate()]",nv="Unable to load target-vec.js",tv="Loading target-vec.js",ev="_AT",rv="clickHandlerForExperienceEditor",iv="[global mbox]",ov="auto-create disabled";return{init:Ic}}(),window.adobe.target.init(window,document,config);}
window.utag.tagsettings=window.utag.tagsettings||{};window.utag.tagsettings.adobe=window.utag.tagsettings.adobe||{};var vAPI=window.utag.tagsettings.adobe.visitorAPI=window.utag.tagsettings.adobe.visitorAPI||(function(){return{getInstance:function(orgID,callback){if(orgID){utag.DB("["+u.id+"] OrgID used, but no 'Adobe Marketing Cloud ID Service' tag detected");}
return callback();}};}());var u={'id':id};utag.o[loader].sender[id]=u;u.ev={'view':1,'link':1};u.hasOwnProperty=Object.prototype.hasOwnProperty;u.typeOf=function(obj){return({}).toString.call(obj).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};u.isEmpty=function(obj){var type=u.typeOf(obj),key;if(/number|boolean/.test(type)){return false;}if(obj===undefined||obj===null){return true;}if(obj.length!==undefined){return obj.length===0;}for(key in obj){if(u.hasOwnProperty.call(obj,key)){return false;}}return true;};u.clearEmptyKeys=function(obj){var key;for(key in obj){if(u.hasOwnProperty.call(obj,key)){if(u.isEmpty(obj[key])){delete obj[key];}}}return obj;};u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.func=function(){};window.__TEALIUM=window.__TEALIUM||{};window.__TEALIUM.adobe=window.__TEALIUM.adobe||{};var target=window.__TEALIUM.adobe.target=window.__TEALIUM.adobe.target||{'loaded':false,'css':{'id':'unknown','status':'visible','hide':u.func,'show':u.func,'remove':u.func,'render':u.func,'removeRender':u.func}};target.loaded=true;u.mboxes={};u.mboxListener=false;u.loaded=false;u.showAllDivs=function(){target.css.remove();target.css.removeRender();};u.showDiv=function(mbox){var divs,i,tnt=null;if(!(utag.cfg.tntFF&&utag.cfg.tntFF.lkp)){return;}
for(id in utag.cfg.tntFF.lkp){tnt=utag.cfg.tntFF.lkp[id];if(tnt&&tnt[mbox]){divs=tnt[mbox];for(i=0;i<divs.length;i++){try{target.css.render(divs[i]);}catch(e){utag.DB(e);}}}}};u.eventListener=function(event){if(event.detail.mbox==='target-global-mbox'){if(target.css.status==='hidden'){target.css.remove();}}
if(/rendering-(succeeded|failed)/i.test(event.type)){return u.showDiv(event.detail.mbox);}
if(/request-(succeeded|failed)/i.test(event.type)){if(target.css.status==='hidden'){target.css.remove();}}
return true;};u.ebx=function(p){"use strict";function NB(a,i){var n="";if(a.length==0){return[document.body,"document.body"]}else if(a.length==1){n="document.body.childNodes["+a[0]+"]"}else{n="document.body.childNodes["+a[0]+"]";for(i=1;i<a.length;i++){n=n+".childNodes["+a[i]+"]"}}return[eval(n),n]}p=p.replace("/html/body/","").split("/");var d="",a=[],e="",n=0,c=0,x=0;for(x=0;x<p.length;x++){if(p[x].indexOf('[')>0){e=p[x].match(/[a-z]+/)[0];n=p[x].match(/[0-9]+/)[0]-1}else{e=p[x]}c=0;d=NB(a)[0].childNodes;for(i=0;i<d.length;i++){if(d[i].localName==e&&n>0){if(c==n){a.push(i);break}c++}else if(d[i].localName==e){a.push(i);break}}n=0}return(NB(a))};u.processPageParams=function(origData,mapData){function convertFromString(data){var i,result={},split1=(data||"").split("&"),split2;for(i=0;i<split1.length;i++){split2=split1[i].split("=");result[split2[0]]=split2[1];}
return result;}
function convertFromArray(data){var i,result={},split1;for(i=0;i<data.length;i++){split1=data[i].split("=");result[split1[0]]=split1[1];}
return result;}
if(!mapData){return origData;}
if(!origData){return mapData;}
var result,key,origDataType=u.typeOf(origData),mappedDataType=u.typeOf(mapData),oD,tD;if(origDataType==="string"){oD=convertFromString(origData);}else if(origDataType==="array"){oD=convertFromArray(origData);}else if(origDataType==="object"){oD=origData;}else{return origData;}
if(mappedDataType==="string"){tD=convertFromString(mapData);}else if(mappedDataType==="array"){tD=convertFromArray(mapData);}else if(mappedDataType==="object"){tD=mapData;}else{return origData;}
result={};for(key in utag.loader.GV(oD)){result[key]=oD[key];}
for(key in utag.loader.GV(tD)){result[key]=tD[key];}
return result;};u.GV=function(a,b,c){b={};for(c in a){if(a.hasOwnProperty(c))b[c]=a[c];}
return b};u.trackEvent=function(evt){evt=u.clearEmptyKeys(evt);evt.success=u.typeOf(evt.success)==="string"?window[evt.success]:(u.event_success||function(){});evt.error=u.typeOf(evt.error)==="string"?window[evt.error]:(u.event_error||function(error){utag.DB(error);});adobe.target.trackEvent(evt);};u.targetPageParamsAll=window.targetPageParamsAll;window.targetPageParamsAll=function(){var result={};if(u.targetPageParamsAll){result=u.targetPageParamsAll()||{};}
return u.processPageParams(result,u.data.targetPageParamsAll);};u.targetPageParams=window.targetPageParams;window.targetPageParams=function(){var result={};if(u.targetPageParams){result=u.targetPageParams()||{};}
return u.processPageParams(result,u.data.targetPageParams);};u.map={"Products_Id_Csv":"targetPageParams.entity.id","Products_Category_Csv":"targetPageParams.entity.categoryId","Page_Type":"targetPageParams.pageType","Page_Name":"targetPageParams.pageName"};u.extend=[function(a,b){try{if(b['Page_Section1'].toString().toLowerCase().indexOf('checkout'.toLowerCase())>-1||b['Page_Name'].toString().toLowerCase().indexOf('checkout'.toLowerCase())>-1){var dataLayer=utag.handler.C(b);var timeout=3000;if(!b.tag_delay&&a=="view"){setTimeout(function(){dataLayer.tag_delay=true;utag.view(dataLayer,null,[id]);},timeout);return false;}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:485");utag.DB(b);var c,d,e,f,config,mboxCookie=utag.loader.RC("mbox");if(u.typeOf(mboxCookie)==="string"&&mboxCookie.indexOf("disable")>-1){utag.DB("Target AT.js ["+u.id+"] - mbox disable cookie detected, exiting...");return u.showAllDivs();}
u.data={"config":{'clientCode':'luxottica','imsOrgId':'125138B3527845350A490D4C@AdobeOrg','serverDomain':'luxottica.tt.omtrdc.net','timeout':parseInt(('7000'||7000),10),'globalMboxName':'target-global-mbox','globalMboxAutoCreate':'true'==='true','authoringScriptUrl':'','version':'1.8.0','defaultContentHiddenStyle':'visibility:hidden !important;','defaultContentVisibleStyle':'visibility:visible !important;','bodyHiddenStyle':'body{opacity:0  !important}','bodyHidingEnabled':target.css.status==="hidden",'deviceIdLifetime':63244800000,'sessionIdLifetime':1860000,'selectorsPollingTimeout':5000,'pollingAfterDomReadyTimeout':180000,'visitorApiTimeout':2000,'overrideMboxEdgeServer':false,'overrideMboxEdgeServerTimeout':1860000,'optoutEnabled':false,'crossDomain':'enabled','secureOnly':false,"supplementalDataIdParamTimeout":30}};for(f=0;f<u.extend.length;f++){try{d=u.extend[f](a,b,u);if(d===false){return;}}catch(e){utag.DB("["+u.id+"] Extension Error "+e.message);}}
for(d in u.GV(u.map)){if(b[d]!==undefined&&b[d]!==''){e=u.map[d].split(',');for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}}
utag.DB("send:485:MAPPINGS");utag.DB(u.data);config=u.clearEmptyKeys(u.data.config);if(a==="link"){if(u.loaded){if(u.data.evt){u.trackEvent(u.data.evt);}}else{u.events=u.events||[];u.events.push(utag.handler.C(u.data.evt));}
return;}
if(!config.globalMboxAutoCreate){target.css.remove();}
window.setTimeout(function(){utag.DB("Target AT.js ["+u.id+"] - Time out rolled over, removing defined CSS");u.showAllDivs();},config.timeout);vAPI.getInstance(config.imsOrgId,function(instance){window.targetGlobalSettings=window.targetGlobalSettings||{};if(!window.targetGlobalSettings.cookieDomain){window.targetGlobalSettings.cookieDomain=(function(){return utag.loader.RC('utag_main').vapi_domain||(function(){var i=0,d=document.domain,p=d.split('.'),s='_vapi'+new Date().getTime();while(i<(p.length-1)&&document.cookie.indexOf(s+'='+s)===-1){d=p.slice(-1-(++i)).join('.');document.cookie=s+'='+s+';domain='+d+';';}
document.cookie=s+'=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain='+d+';';utag.loader.SC('utag_main',{'vapi_domain':d});return d;}());}());}
var mbox,mboxes=__TEALIUM.adobe.target.mboxes,event,target;u.loaded=true;at(config);if(!u.mboxListener){target=window.adobe&&window.adobe.target;u.mboxListener=true;for(event in target.event){if(u.hasOwnProperty.call(target.event,event)){if(document.addEventListener){document.addEventListener(target.event[event],u.eventListener,false);}else if(document.attachEvent){document.attachEvent(target.event[event],u.eventListener);}}}}
if(mboxes){for(var i=0,len=mboxes.length;i<len;i++){mbox=mboxes[i];if(mbox.type==="create"){(function(mbox){var params;if(mbox.args.length>1){function parseParams(params){var paramObj={};function splitParams(paramStr){var result=paramStr.indexOf("=");if(result===-1)return null;return[paramStr.substr(0,result),paramStr.substr(result+1)];}
var split;for(var i=0;i<params.length;i++){split=splitParams(params[i]);if(!split)continue;paramObj[split[0]]=split[1];}
return paramObj;}
params=parseParams(mbox.args.slice(1));}
adobe.target.getOffer({"mbox":mbox.args[0],"params":params,"success":function(offers){adobe.target.applyOffer({"mbox":mbox.args[0],"selector":mbox.selector,"offer":offers});},"error":function(status,error){utag.DB("at.js getOffer Error");utag.DB(status);utag.DB(error);},"timeout":5000});}(mbox));}else if(mbox.type==="define"){window.mboxDefine.apply(null,mbox.args);}else if(mbox.type==="update"){window.mboxUpdate.apply(null,mbox.args);}else if(mbox.type==="getOffer"){window.adobe.target.getOffer.apply(null,mbox.args);}}
mboxes.length=0;}
if(b._corder){var _cprod=b._cprod?b._cprod.slice(0):[];adobe.target.trackEvent({"mbox":'orderConfirmPage',"params":{'orderId':b._corder,'productPurchasedId':_cprod.join(','),'orderTotal':b._ctotal}});}
if(u.events){for(c=0;c<u.events.length;c++){u.trackEvent(u.events[f]);}}
if(u.data.evt){u.trackEvent(u.data.evt);}});}};try{utag.o[loader].loader.LOAD(id);}catch(e){utag.loader.LOAD(id);}})('485','luxottica.ray-ban');}catch(e){}

//tealium universal tag - utag.241 ut4.0.202005190941, Copyright 2020 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1};u.queue=[];u.map={"Tags__VarsCustom1":"project_guid"};u.extend=[function(a,b,c,d,e,f,g){if(1){d=b['Page_Country'];if(typeof d=='undefined')return;c=[{'US':'17307919-93d2-44a7-9e46-558bfb3501f2'},{'GB':'d399dbb3-6d33-4e92-b81d-fc9da43cab45'},{'DE':'2ca9cbf7-1ba4-4d1c-a1af-fe64aaf6d7f4'},{'FR':'2dcf96a5-d748-4067-be7a-582fca093c97'},{'IT':'c0f25486-7aa2-432a-9579-f23273a329d3'},{'ES':'ee18c983-2251-4340-8dbf-ee665fcd9c05'}];var m=false;for(e=0;e<c.length;e++){for(f in c[e]){if(d==f){b['Tags__VarsCustom1']=c[e][f];m=true};};if(m)break};}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f;u.data={"base_url":"","partition":"www46","project_guid":"","ptc":"/ptc/","events":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("event")===0){u.data.events.push(b[d]);}else{u.data[e[f]]=b[d];}}}}
u.loader_cb=function(){if(u.data.events.length>0&&typeof ClickTaleEvent==="function"){for(i=0;i<u.data.events.length;i++){ClickTaleEvent(u.data.events[i]);}}};u.callBack=function(){var data={};while(data=u.queue.shift()){u.data=data.data;u.loader_cb();}};if(u.initialized){u.loader_cb();}else{u.queue.push({"data":u.data});if(!u.scriptrequested){u.scriptrequested=true;u.data.base_url=u.data.base_url||(((document.location.protocol==="https:")?"https://cdnssl.clicktale.net/":"http://cdn.clicktale.net/")+u.data.partition+u.data.ptc+u.data.project_guid+".js");u.loader({"type":"script","src":u.data.base_url,"cb":u.callBack,"loc":"script","id":"utag_241"});}}
}};utag.o[loader].loader.LOAD(id);}("241","luxottica.ray-ban"));}catch(error){utag.DB(error);}

//tealium universal tag - utag.465 ut4.0.202005190941, Copyright 2020 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};u.isEmptyObject=function(o,a){for(a in o){if(u.hasOwn(o,a)){return false;}}return true;};u.toBoolean=function(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";};u.hasgtagjs=function(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0){return true;}}
var data_layer_name=""||"dataLayer";window[data_layer_name]=window[data_layer_name]||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};var cross_track_domains="";if(cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;};u.scriptrequested=u.hasgtagjs();u.o=window[window.gtagRename];u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.map={"Tags__VarsCustom1":"advertiser_id","Tags__VarsCustom2":"activity_group","Tags__VarsCustom3":"activity","Tags__VarsCustom4":"counting_method","Tags__VarsCustom5":"event","Page_Name":"custom.u1","Products_Id_Csv":"custom.u3","Page_DeviceType":"custom.u4","Products_Category_Csv":"custom.u5","Products_Frame_Array":"custom.u6","Products_Lens_Array":"custom.u7","Products_Price_Csv":"custom.u8"};u.extend=[function(a,b,c,d,e,f,g){if(1){d=b['Page_Country'];if(typeof d=='undefined')return;c=[{'DE':'DC-9259149'},{'FR':'DC-9257991'},{'GB':'DC-9263001'},{'IT':'DC-9262941'},{'MEA':'DC-9298256'},{'RU':'DC-9259521'}];var m=false;for(e=0;e<c.length;e++){for(f in c[e]){if(d==f){b['Tags__VarsCustom1']=c[e][f];m=true};};if(m)break};}},function(a,b){try{if(1){if(b.Page_Country.match(/mea/i)&&location.pathname.match(/\/mea\/(en|ar|fr)/i)){if(b.Page_Type.match(/home/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkae_0";}
if(b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkae_0";}
if(location.pathname.match(/\/products\/sun/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkae_00";}
if(location.pathname.match(/\/products\/optics/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkae_000";}
if(location.pathname.match(/\/products\/optics/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkae_00";}
if(location.pathname.match(/\/store-locator/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkae_001";}}
if(b.Page_Country.match(/de/i)){if(b.Page_Type.match(/home/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_0";}
if(b.Page_Type.match(/Landing/i)&&b.Page_Section2.match(/Remix/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_008";}
if(b.Page_Type.match(/Pcp/i)&&b.Tracking_EventId.match(/WCS-X-PCP-NewConfiguration-Init/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkde_0";}
if(b.Page_Type.match(/thankyou/i)){b.Tags__VarsCustom2="sales0";b.Tags__VarsCustom3="mkde_0";}
if(location.pathname.match(/\/sonnenbrillen\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_00";}
if(location.pathname.match(/\/sonnenbrillen/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkde_00";}
if(location.pathname.match(/\/sehbrillen\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_001";}
if(location.pathname.match(/\/sehbrillen/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkde_000";}
if(location.pathname.match(/\/exklusive-angebote\/ausverkauf\/plp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_003";}
if(location.pathname.match(/\/sonnenbrillen\/sonderausgabe\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_004";}
if(location.pathname.match(/\/geschenke\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_005";}
if(location.pathname.match(/\/ShopCar/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_006";}
if(location.pathname.match(/\/store-locator/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkde_007";}}
if(b.Page_Country.match(/fr/i)){if(b.Page_Type.match(/home/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_0";}
if(location.pathname.match(/\/lunettes-de-soleil\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_00";}
if(location.pathname.match(/\/lunettes-de-soleil/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkfr_0";}
if(b.Page_Type.match(/thankyou/i)){b.Tags__VarsCustom2="saler0";b.Tags__VarsCustom3="mkfr_0";}
if(location.pathname.match(/\/lunettes-de-vue\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_000";}
if(location.pathname.match(/\/lunettes-de-vue/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkfr_00";}
if(b.Page_Type.match(/Landing/i)&&b.Page_Section2.match(/Remix/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_005";}
if(b.Page_Type.match(/Pcp/i)&&b.Tracking_EventId.match(/WCS-X-PCP-NewConfiguration-Init/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkfr_000";}
if(location.pathname.match(/\/lunettes-de-soleil\/edition-speciale\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_001";}
if(location.pathname.match(/\/cadeaux\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_002";}
if(location.pathname.match(/\/ShopCartDisplayView/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_003";}
if(location.pathname.match(/\/store-locator/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkfr_004";}}
if(b.Page_Country.match(/uk|gb/i)){if(b.Page_Type.match(/home/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_0";}
if(location.pathname.match(/\/sunglasses\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_00";}
if(location.pathname.match(/\/sunglasses/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkgb_0";}
if(b.Page_Type.match(/thankyou/i)){b.Tags__VarsCustom2="saleh0";b.Tags__VarsCustom3="mkgb_0";}
if(location.pathname.match(/\/eyeglasses\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_000";}
if(location.pathname.match(/\/eyeglasses/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkgb_00";}
if(b.Page_Type.match(/Landing/i)&&b.Page_Section2.match(/Remix/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_006";}
if(b.Page_Type.match(/Pcp/i)&&b.Tracking_EventId.match(/WCS-X-PCP-NewConfiguration-Init/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkgb_000";}
if(location.pathname.match(/\/sunglasses\/special-edition\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_001";}
if(location.pathname.match(/\/ShopCartDisplayView/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_002";}
if(location.pathname.match(/\/store-locator/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_003";}
if(location.pathname.match(/\/gifts\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkgb_004";}}
if(b.Page_Country.match(/it/i)){if(b.Page_Type.match(/home/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_0";}
if(location.pathname.match(/\/occhiali-da-sole\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_00";}
if(location.pathname.match(/\/occhiali-da-sole/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkit_0";}
if(b.Page_Type.match(/thankyou/i)){b.Tags__VarsCustom2="salee0";b.Tags__VarsCustom3="mkit_0";}
if(location.pathname.match(/\/occhiali-da-vista\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_000";}
if(location.pathname.match(/\/occhiali-da-vista/i)&&b.Page_Type.match(/Pdp/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkit_00";}
if(b.Page_Type.match(/Landing/i)&&b.Page_Section2.match(/Remix/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_004";}
if(b.Page_Type.match(/Pcp/i)&&b.Tracking_EventId.match(/WCS-X-PCP-NewConfiguration-Init/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkit_000";}
if(location.pathname.match(/\/occhiali-da-sole\/edizione-speciale\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_001";}
if(location.pathname.match(/\/regali\/clp/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_002";}
if(location.pathname.match(/\/ShopCartDisplayView/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkit_003";}}
if(b.Page_Country.match(/ru/i)){if(b.Page_Type.match(/home/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkru_0";}
if(location.pathname.match(/\/products\/sun/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkru_00";if(b.Page_Type.match(/Pdp|Products_sun_/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkru_0";}}
if(location.pathname.match(/\/products\/optics/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkru_000";if(b.Page_Type.match(/Pdp|Products_optics_/i)){b.Tags__VarsCustom2="produ0";b.Tags__VarsCustom3="mkru_00";}}
if(location.pathname.match(/\/store-locator/i)){b.Tags__VarsCustom2="landi0";b.Tags__VarsCustom3="mkru_001";}}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_type'].toString().toLowerCase()!='confirmation'.toLowerCase()){b['Tags__VarsCustom4']='standard';try{b['Tags__VarsCustom5']=["conversion"]}catch(e){}}}catch(e){utag.DB(e)}},function(a,b){try{if(b['page_type'].toString().toLowerCase()=='confirmation'.toLowerCase()){b['Tags__VarsCustom4']='transactions';try{b['Tags__VarsCustom5']=["purchase"]}catch(e){}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:465");utag.DB(b);var c,d,e,f,h,i,j,k,_event,p,key;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"https://www.googletagmanager.com/gtag/js","advertiser_id":"","activity_group":"","activity":"","counting_method":"","fire_purchase":"true","custom_scripts":"true","data_layer_name":"","session_id":"","product_id":[],"product_quantity":[],"product_unit_price":[],"dc_custom_params":{},"event_name":"","event":[],"custom":{}};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){if(typeof utag_err!='undefined'){utag_err.push({e:'extension error:'+e,s:utag.cfg.path+'utag.'+id+'.js',l:c,t:'ex'})}}};utag.DB("send:465:EXTENSIONS");utag.DB(b);for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}else{h=d.split(":");if(h.length===2&&b[h[0]]===h[1]){if(u.map[d]){u.data.event=u.data.event.concat(u.map[d].split(","));}}}}
utag.DB("send:465:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(typeof(u.data.advertiser_id)==="string"){u.data.advertiser_id=u.data.advertiser_id.split(",");}
if(typeof(u.data.activity_group)==="string"){u.data.activity_group=u.data.activity_group.split(",");}
if(typeof(u.data.activity)==="string"){u.data.activity=u.data.activity.split(",");}
if(typeof(u.data.counting_method)==="string"){u.data.counting_method=u.data.counting_method.split(",");}
if(typeof(u.data.session_id)==="string"){u.data.session_id=u.data.session_id.split(",");}
if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(!u.data.advertiser_id){utag.DB(u.id+": Tag not fired: Required attribute not populated");return;}
for(i=0;i<u.data.advertiser_id.length;i++){if(!/^[a-zA-Z]{2}-/.test(u.data.advertiser_id[i])){u.data.advertiser_id[i]="DC-"+u.data.advertiser_id[i];}}
u.data.base_url+="?id="+(u.data.advertiser_id[0]);if(u.data.data_layer_name){u.data.base_url=u.data.base_url+"&l="+u.data.data_layer_name;}
for(i=0;i<u.data.advertiser_id.length;i++){u.o("config",u.data.advertiser_id[i]);}
if(u.data.order_id){for(i=0;i<u.data.event.length;i++){if(u.data.event[i]==="purchase"){p=true;}}
if(!p&&u.toBoolean(u.data.fire_purchase)){u.data.event.push("purchase");if(u.data.counting_method[0]===""){u.data.counting_method[0]="transactions";}}}
var total_qty=0;if(typeof(u.data.product_quantity)==="number"){total_qty=u.data.product_quantity;}else if(u.data.product_quantity.length===1){total_qty=u.data.product_quantity[0];}else if(u.data.product_quantity.length>1){for(i=0;i<u.data.product_quantity.length;i++){total_qty+=parseInt(u.data.product_quantity[i],10);}}else{total_qty=1;}
for(i=0;i<u.data.event.length;i++){_event=u.data.event[i];for(j=0;j<u.data.advertiser_id.length;j++){var eventIdData={};if(u.data.custom_scripts==="true"||u.data.custom_scripts){eventIdData.allow_custom_scripts=true;}else if(u.data.custom_scripts==="false"||!u.data.custom_scripts){eventIdData.allow_custom_scripts=false;}
if(u.data.session_id.length===1&&u.data.session_id[0]!==""){eventIdData.session_id=u.data.session_id[0];}else if(u.data.session_id[j]!==""){eventIdData.session_id=u.data.session_id[j];}
if(u.data.order_total){eventIdData.value=u.data.order_total;eventIdData.transaction_id=u.data.order_id;}
if(u.data.product_quantity){eventIdData.quantity=total_qty;}
eventIdData.items=[];for(k=0;k<u.data.product_id.length;k++){if(typeof(u.data.product_unit_price[k])==="undefined"||typeof(u.data.product_quantity[k])==="undefined"){utag.DB("No matching unit price or quantity for product ID "+u.data.product_id[k]);}else{eventIdData.items.push({"id":u.data.product_id[k],"price":u.data.product_unit_price[k],"quantity":u.data.product_quantity[k]});}}
for(key in u.data.custom){eventIdData[key]=u.data.custom[key];}
if(!u.isEmptyObject(u.data.dc_custom_params)){eventIdData.dc_custom_params={};for(key in u.data.dc_custom_params){eventIdData.dc_custom_params[key]=u.data.dc_custom_params[key];}}
if(u.data.counting_method[j]&&u.data.counting_method[j]!==u.data.counting_method[j].toLowerCase()){u.data.counting_method[j]=u.data.counting_method[j].toLowerCase();utag.DB("Counting Method not supplied in proper case - converted to lower case");}
eventIdData.send_to=u.data.advertiser_id[j]+"/"+u.data.activity_group[j]+"/"+u.data.activity[j]+"+"+u.data.counting_method[j];if(_event==="purchase"){u.o("event","purchase",eventIdData);}
if(_event==="conversion"){u.o("event","conversion",eventIdData);}}}
if(!u.hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_465","attrs":{}});}
utag.DB("send:465:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("465","luxottica.ray-ban"));}catch(error){utag.DB(error);}
(function(){ if(typeof utag!='undefined'){utag.initcatch=true;for(var i in utag.loader.GV(utag.loader.cfg)){var b=utag.loader.cfg[i];if(b.load!=4){utag.initcatch=false;break};if(b.wait==1){utag.initcatch=false;break}};if(utag.initcatch)utag.handler.INIT();} })();