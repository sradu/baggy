function getIosVersion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}}function checkIosPlatform(){p=navigator.platform.toLowerCase(),u=navigator.userAgent.toLowerCase(),v=navigator.vendor,"undefined"!=typeof v&&(v=v.toLowerCase());var a=getIosVersion();return((-1!==p.indexOf("ipad")||-1!==p.indexOf("iphone")||-1!==p.indexOf("ipod")||-1!==p.indexOf("mac"))&&void 0!==a&&a[0]>=7&&!0===checkSafari(u,v)||-1!==p.indexOf("mac")&&!0===checkSafari(u,v))&&(alerts("....... IOS >= 7 or mac&safari... "),!0)}function checkSafari(b,a){return-1!==b.indexOf("safari")&&-1!==a.indexOf("apple")}function setCookie(a,d,b){var e=new Date;b=3650,e.setDate(e.getDate()+b);var c=d+"; domain=.shoprunner.com; path=/; expires="+e.toUTCString();document.cookie=a+"="+c}function getCookie(b){var c,a,e,d=document.cookie.split(";");for(c=0;c<d.length;c++)if(a=d[c].substr(0,d[c].indexOf("=")),e=d[c].substr(d[c].indexOf("=")+1),(a=a.replace(/^\s+|\s+$/g,""))==b)return stripped_y=stripQuotes(e),""!==stripped_y&&"undefined"!=typeof stripped_y?unescape(stripped_y):unescape(e)}function stripQuotes(a){return newStr="",void 0!==a&&(fChar=a.substring(0,1),lChar=a.substring(a.length-1,a.length),start='"'===fChar||"'"===fChar?1:0,end='"'===lChar||"'"===lChar?a.length-1:a.length,newStr=a.substring(start,end)),newStr}function alerts(b){try{"true"===window.localStorage.debug_alerts&&console.log(b)}catch(a){}}function gup(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);return null!==c&&c[1]}function setit(a){if(window.localStorage){try{window.localStorage.sr_ssotoken=a,window.localStorage.sr_ismember=!0}catch(e){alerts("Unable to write to local storage "+e)}alerts("Local Storage SSO set to "+a+".")}setCookie("sr_ssotoken",a,3650),setCookie("sr_ismember",!0,3650),alerts("Cookie SSO set to "+a+".")}function setLocalStorage(a,b){if(window.localStorage)try{window.localStorage[a]=b,alerts("Local Storage "+a+"set to "+b)}catch(e){alerts("Unable to write to local storage "+e)}setCookie(a,b,3650),alerts("Cookie "+a+" set to "+b)}gup("sr_ssotoken")&&""===gup("sr_ssotoken")?setit("false"):gup("sr_ssotoken")&&setit(gup("sr_ssotoken")),gup("sr_website_logout")&&setLocalStorage("sr_website_logout",gup("sr_website_logout"));var sr_$={actions:{}};!function(){var b,c,a,e,i=1,g="postMessage",d="addEventListener",h=window[g]&&void 0===window.opera;sr_$.actions.postMessage=function(j,l,k){if(l)return k=k||parent,h?k[g](j,l.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):l&&(k.location=l.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+j),!0},sr_$.actions.receiveMessage=e=function(l,k,j){h?(l&&(a&&e(),a=function(m){l(m)}),window[d]?window[l?d:"removeEventListener"]("message",a,!1):window[l?"attachEvent":"detachEvent"]("onmessage",a)):(b&&clearInterval(b),b=null,l&&(j="number"==typeof k?k:"number"==typeof j?j:100,b=setInterval(function(){var n=document.location.hash,m=/^#?\d+&/;n!==c&&m.test(n)&&(c=n,l({data:n.replace(m,"")}))},j)))}}();var tok=checkIosPlatform()||void 0===window.localStorage||""===window.localStorage.sr_ssotoken?getCookie("sr_ssotoken"):window.localStorage.sr_ssotoken,mem=checkIosPlatform()||void 0===window.localStorage||""===window.localStorage.sr_ismember?getCookie("sr_ismember"):window.localStorage.sr_ismember;tok&&""!==tok?(sr_$.actions.postMessage('{"sso":"'+tok+'","mem":"'+mem+'"}',gup("purl"),parent),alerts("Sending SSO Token.")):alerts("No SSO Token.");