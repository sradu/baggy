var StampedFn=StampedFn||function(L,P){var s,A,q={DEFAULT_ENDPOINT:L.stamped_ajax_url||"//stamped.io/api",SECURE_ENDPOINT:L.stamped_ajax_secure_url||"https://stamped.io/api",metafields:L.mainWidgetMetafields||"",exclude_main_css:L.stamped_exclude_main_css||!1,exclude_font:L.stamped_disable_font||!1,disable_single_review:L.stamped_disable_review_single||!1,is_preview:L.isStampedLauncherPreview||!1,modal_ugc_image_viewer:!0!==L.stamped_modal_ugc_type_background?"image":"background",is_init_rewards:!0,referral_code:null,is_rewards_code_copy:!1,is_ignore_submit_error:!1},_=!1,r=!1;L.StampedGlobalOptions={},L.isInitializedStamped=!1;var C,n,a,l,d,o,p,m,c,u,g,h,v,t=[],f=[],w=[],I={},y="div#stamped-main-widget",b={},S="html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video { margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline; }";function k(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||L.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function D(e){if("click"===e.type)return!0;if("keypress"!==e.type)return!1;var t=e.charCode||e.keyCode;return 32===t||13===t||void 0}function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=P.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}String.prototype.formatStringStamped=function(){for(var e=this,t=0;t<arguments.length;t++)var a=new RegExp("\\{"+t+"\\}","gi"),e=e.replace(a,arguments[t]);return e},"function"!=typeof L.CustomEvent&&(e.prototype=L.Event.prototype,L.CustomEvent=e),L.lazyLoadOptionsStamped={elements_selector:".stamped-lazyload"},L.addEventListener("LazyLoad::Initialized",function(e){L.LazyLoadStamped=e.detail.instance},!1);var O,T,x;!function(){"use strict";function r(e,t){var a,s=new e(t);try{a=new CustomEvent("LazyLoad::Initialized",{detail:{instance:s}})}catch(e){(a=P.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:s})}try{L.dispatchEvent(a)}catch(t){}}function m(e,t){return e.getAttribute("data-"+t)}function i(e,t,a){var s="data-"+t;null!==a?e.setAttribute(s,a):e.removeAttribute(s)}function n(e){return"true"===m(e,"was-processed")}function c(e,t){return i(e,"ll-timeout",t)}function u(e){return m(e,"ll-timeout")}function g(e,t){e&&e(t)}function h(e,t){e._loadingCount+=t,0===e._elements.length&&0===e._loadingCount&&g(e._settings.callback_finish)}function s(e){for(var t,a=[],s=0;t=e.children[s];s+=1)"SOURCE"===t.tagName&&a.push(t);return a}function a(e,t,a){a&&e.setAttribute(t,a)}function d(e,t){a(e,"sizes",m(e,t.data_sizes)),a(e,"srcset",m(e,t.data_srcset)),a(e,"src",m(e,t.data_src))}function l(e,t){I?e.classList.add(t):e.className+=(e.className?" ":"")+t}function o(e,t,a){e.addEventListener(t,a)}function p(e,t,a){e.removeEventListener(t,a)}function v(e,t,a){p(e,"load",t),p(e,"loadeddata",t),p(e,"error",a)}function f(e,t,a){var s,r,i=a._settings,n=t?i.class_loaded:i.class_error,d=t?i.callback_loaded:i.callback_error,o=e.target;s=o,r=i.class_loading,I?s.classList.remove(r):s.className=s.className.replace(new RegExp("(^|\\s+)"+r+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""),l(o,n),g(d,o),h(a,-1)}function w(a,s){function r(e){f(e,!0,s),v(a,r,n)}var e,t,i,n=function e(t){f(t,!1,s),v(a,r,e)};i=n,o(e=a,"load",t=r),o(e,"loadeddata",t),o(e,"error",i)}function y(e,t){var a=t._observer;E(e,t),a&&t._settings.auto_unobserve&&a.unobserve(e)}function b(e){var t=u(e);t&&(clearTimeout(t),c(e,null))}function S(p){return!!C&&(p._observer=new IntersectionObserver(function(e){e.forEach(function(e){return e.isIntersecting||0<e.intersectionRatio?(s=e.target,l=(r=p)._settings,g(l.callback_enter,s),void(l.load_delay?(i=s,d=(n=r)._settings.load_delay,(o=u(i))||(o=setTimeout(function(){y(i,n),b(i)},d),c(i,o))):y(s,r))):(t=e.target,a=p._settings,g(a.callback_exit,t),void(a.load_delay&&b(t)));var t,a,s,r,i,n,d,o,l})},{root:(e=p._settings).container===P?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),!0);var e}function k(e,t){return s=e||(a=t).container.querySelectorAll(a.elements_selector),Array.prototype.slice.call(s).filter(function(e){return!n(e)});var a,s}function e(e,t){this._settings=R({},O,e),this._loadingCount=0,S(this),this.update(t)}var t=void 0!==L,_=t&&!("onscroll"in L)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),C=t&&"IntersectionObserver"in L,I=t&&"classList"in P.createElement("p"),O={elements_selector:"img",container:_||t?P:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",class_loading:"stamped-lazyload-loading",class_loaded:"stamped-lazyload-loaded",class_error:"stamped-lazyload-error",load_delay:0,auto_unobserve:!0,callback_enter:null,callback_exit:null,callback_reveal:null,callback_loaded:null,callback_error:null,callback_finish:null,use_native:!1},T={IMG:function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&s(a).forEach(function(e){d(e,t)}),d(e,t)},IFRAME:function(e,t){a(e,"src",m(e,t.data_src))},VIDEO:function(e,t){s(e).forEach(function(e){a(e,"src",m(e,t.data_src))}),a(e,"src",m(e,t.data_src)),e.load()}},x=["IMG","IFRAME","VIDEO"],E=function(e,t,a){var s=t._settings;!a&&n(e)||(-1<x.indexOf(e.tagName)&&(w(e,t),l(e,s.class_loading)),function(e,t){var a,s,r,i,n,d,o=t._settings,l=e.tagName,p=T[l];if(p)return p(e,o),h(t,1),t._elements=(a=t._elements,s=e,a.filter(function(e){return e!==s}));n=m(r=e,(i=o).data_src),d=m(r,i.data_bg),n&&(r.style.backgroundImage='url("'.concat(n,'")')),d&&(r.style.backgroundImage=d)}(e,t),i(e,"was-processed","true"),g(s.callback_reveal,e),g(s.callback_set,e))},U=["IMG","IFRAME"];e.prototype={update:function(e){var t,a=this,s=this._settings;this._elements=k(e,s),!_&&this._observer?(s.use_native&&"loading"in HTMLImageElement.prototype&&((t=this)._elements.forEach(function(e){-1!==U.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),E(e,t))}),this._elements=k(e,s)),this._elements.forEach(function(e){a._observer.observe(e)})):this.loadAll()},destroy:function(){var t=this;this._observer&&(this._elements.forEach(function(e){t._observer.unobserve(e)}),this._observer=null),this._elements=null,this._settings=null},load:function(e,t){E(e,this,t)},loadAll:function(){var t=this;this._elements.forEach(function(e){y(e,t)})}},t&&function(e,t){if(t)if(t.length)for(var a,s=0;a=t[s];s+=1)r(e,a);else r(e,t)}(e,L.lazyLoadOptionsStamped)}();function E(e,t){t?(Ue("Using included jQ"),A=t,Ue(L.jQueryStamped=A)):(Ue("Loaded jQ"),L.jQueryStamped=A),/msie/.test(L.navigator.userAgent.toLowerCase())&&(A.support.cors=!0),1!=q.exclude_font&&A("head").append(A("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"}));var a=Ee("stamped_referral_code")||Ee("stamped_ref");a&&(Fe("stamped_referral_code",{code:a}),q.referral_code=a);var s=Ne("stamped_referral_code");s&&s.code&&(q.referral_code=s.code),Ue("Library Starting..."),A.isReady?U():A(P).ready(function(){U()}),setTimeout(function(){r||(Ue("Library not started, fallback"),U())},3e3)}function U(){Ue("Started library"),Me("stamped:init:starting"),F(),N(),r=!0}function F(){if(Ue("Starting UGC..."),(C=A(y)).length){if(A.trim(C.html())){ee(),oe(),re(),se(),Y(),ie();try{L.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}}else Z();A(P).on("click keypress",".stamped-summary-ratings .summary-rating",function(e){var t,a,s;!0===D(e)&&(a=(t=A(this).find(".summary-rating-bar")).attr("data-rating"),s=t.hasClass("selected"),A(".stamped-summary-ratings .summary-rating").each(function(){A(this).removeClass("selected")}),A(".summary-rating-bar").each(function(){A(this).removeClass("selected")}),a&&(s?(Ie(1),A(".stamped-summary-ratings").removeClass("selected")):(t.addClass("selected"),A(this).addClass("selected"),A(".stamped-summary-ratings").addClass("selected"),Ie(1,a))))}),A(P).on("mouseover mouseout",".stamped-form-review-rating a.fa",function(e){var t=e.currentTarget,a=A(t).attr("data-value"),s=A(t).parent();"mouseover"===e.type?(s.find("a.fa:lt("+a+")").removeClass("fa-star-o").addClass("fa-star"),s.find("a.fa:gt("+(a-1)+")").removeClass("spr-icon-star-hover").addClass("fa-star-o")):s.find("a.fa").removeClass("fa-star").addClass("fa-star-o")}),A(P).on("click keypress",".stamped-tabs li",function(e){!0===D(e)&&ue(this)}),A(P).on("keypress",".stamped-summary-actions-newreview",function(e){!0===D(e)&&_e("reviews")}),A(P).on("keypress",".stamped-summary-actions-newquestion",function(e){!0===D(e)&&_e("reviews")}),A(P).on("click keypress","#shopry-rating-wrapper a.shopry-thumbs-up, #shopry-rating-wrapper a.shopry-thumbs-down, #shopry-rating-holder a.shopry-thumbs-up, #shopry-rating-holder a.shopry-thumbs-down, #stamped-rating-holder a.stamped-thumbs-up, #stamped-rating-holder a.stamped-thumbs-down, .stamped-rating-holder a.stamped-thumbs-up, .stamped-rating-holder a.stamped-thumbs-down",function(e){var t,a,s,r;!0===D(e)&&(t=A(this).attr("data-review-id"),a=A(this).attr("data-rating"),s=C.attr("data-product-id"),(r=A(this)).parent().fadeTo("slow",.3),r.addClass("disable-link"),A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/reviews/vote",data:{productId:s,reviewId:t,vote:a,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl},success:function(e){var t,a;1!=e&&-1!=e||(t=(t=r.find(".stamped-fa").html()).replace("&nbsp;","").trim(),a=parseInt(t),r.find(".stamped-fa").html("&nbsp; "+(a+e))),r.parent().fadeTo("slow",1),r.removeClass("disable-link")}}))}),A(P).on("click keypress",".stamped-share-button,.stamped-share-icon",function(e){!0===D(e)&&A(this).parent().find(".stamped-share-links").fadeToggle()}),A(P).on("click keypress",".stamped-summary-actions-mobile-filter",function(e){var t;!0===D(e)&&((t=A(".stamped-filters-wrapper")).hasClass("stamped-mobile-visible")?(t.slideUp(),t.removeClass("stamped-mobile-visible")):(t.slideDown(),t.addClass("stamped-mobile-visible")))}),A(P).on("click keypress",".stamped-summary-keywords-list li",function(e){var t;!0===D(e)&&((t=A(this)).hasClass("selected")?(A(".stamped-summary-keywords-list li").removeClass("selected"),A(C).removeAttr("data-keyword")):(A(".stamped-summary-keywords-list li").removeClass("selected"),t.addClass("selected"),A(C).attr("data-keyword",t.text().trim())),A(".stamped-summary-actions-clear").show(),Ie(1))}),A(P).on("change keyup",".stamped-reviews-search-input",function(e){var t=A(this).val();t?(A(".stamped-reviews-search-clear").show(),A(".stamped-reviews",C).attr("data-filtered","true")):(A(".stamped-reviews-search-clear").hide(),A(".stamped-reviews",C).removeAttr("data-filtered")),13==e.keyCode&&(t=A(this).val())&&(A(C).attr("data-search",t.trim()),A(".stamped-summary-actions-clear").show(),ne(),Ie(1))}),A(P).on("click keypress",".stamped-reviews-search-button",function(e){var t;!0!==D(event)||(t=A(".stamped-reviews-search-input").val())&&(A(C).attr("data-search",t.trim()),A(".stamped-summary-actions-clear").show(),ne(),Ie(1))}),A(P).on("click keypress",".stamped-summary-actions-clear",function(e){!0===D(e)&&Oe()}),A(P).on("click keypress",".stamped-reviews-search-clear",function(e){!0===D(e)&&(A(".stamped-reviews-search-clear").hide(),A(".stamped-reviews-search-input").val(""),A(C).removeAttr("data-search"),Ie(1))}),A(P).one("stamped:reviews:loaded",function(){Ue("Main Widget event triggered reload once"),ee(),oe(),re(),ie(),Ee("write_review")&&_e("review"),Ee("write_question")&&_e("question")}),A(P).on("stamped:reviews:loaded",function(e){Ue("Main Widget event triggered reload"),w=[],se(),Y();try{L.LazyLoadStamped&&LazyLoadStamped.update&&LazyLoadStamped.update()}catch(e){}})}A(P).one("stamped:launcher:loaded",function(e){var t=Ee("rewards-launcher");t&&("open"==t&&K(),-1<t.indexOf("view-")&&(K(!0),B(t)))}),te(),ae();var e,t=Ee("stamped_r_id");t&&1!=q.disable_single_review&&(e=t,A.ajax({type:"GET",url:q.SECURE_ENDPOINT+"/widget/reviews",data:{reviewIds:e,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,type:"single",showAvatar:"True",minRating:1},success:function(e){e.data.length&&StampedFn.openUGCModal(e.data,0,P,1,!1,0)},error:function(e){}}))}function N(e){Ue("Starting Rewards...");var t=A("#stamped-rewards-init");if(e&&e.customer)return Ue("Started Rewards with direct data"),b=e,void G();e?(Ue("Started Rewards with JS data"),b.customer=e,j()):0<t.length?(Ue("Started Rewards with div data"),b.customer={customerId:t.data("customer-id"),customerEmail:t.data("customer-email"),customerFirstName:t.data("customer-first-name"),customerLastName:t.data("customer-last-name"),customerTags:t.data("customer-tags"),totalOrders:0,totalSpent:0,isAcceptMarketing:t.data("customer-accepts-marketing"),authToken:t.data("key-auth")},j()):Ue("Started Rewards no init customer data")}function j(){Ue("Loading Rewards API init...");var e=q.metafields||"";b&&b.customer&&e&&(b.customer.metafields=e);var t=JSON.stringify(b.customer),a=q.is_test;A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/init?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,debug:null,isTest:a,isPreview:q.is_preview,referralCode:q.referral_code}),xhrFields:{withCredentials:!0},data:t,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e,t,a){Me("stamped:rewards:init"),b=e,G()}})}function G(){var e;A("#stamped-rewards-init").length||((e=P.createElement("div")).setAttribute("id","stamped-rewards-init"),P.body.appendChild(e)),b&&b.html&&((n=A("#stamped-rewards-init")).html(b.html.main),function(){d=A(".stamped-rewards-launcher",n),o=A(".stamped-launcher-button",n),c=A("<iframe>");var s=o.html();Ue("Func _buildIframeLauncher: width:"+o.width(),1),Ue("Func _buildIframeLauncher: outerWidth:"+o.outerWidth(),1),Ue("Func _buildIframeLauncher: var launcherWidth:"+(v=o.width()+40),1),o.width(v),o.html(c),d.hide(),setTimeout(function(){u=c[0].contentWindow.document,c[0].contentWindow.StampedFn=StampedFn,c[0].contentWindow.jQuery=jQuery;var e=A("body",u),t=A("head",u);e.html(s),e.append(A("#stamped-rewards-main-css",n).clone()),t.append(A("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/widget.min.css",type:"text/css"}));var a=u.createElement("script");a.type="text/javascript",a.src="//kit.fontawesome.com/59de3073ed.js",a.setAttribute("data-observe-mutations","true"),u.body.appendChild(a),t.append("<style>"+S+' body { overflow:hidden; } .stamped-launcher-icon-opened { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; display:inline-block; width: 100%; margin-top: -2px; text-align:center;}</style>'),k()&&e.attr("data-mobile",!0),p=A(".stamped-launcher-icon-closed",e),m=A(".stamped-launcher-icon-opened",e),setTimeout(function(){d.fadeIn()},800)},800)}(),function(){a=A(".stamped-rewards-base",n),$launcherCss=A("#stamped-rewards-main-css",n).clone(),g=A("<iframe>");var r=a.html();a.html(g),setTimeout(function(){h=g[0].contentWindow.document,g[0].contentWindow.StampedFn=StampedFn,g[0].contentWindow.jQuery=jQuery;var e=A("body",h),t=A("head",h);e.html(r),e.append(A("#stamped-rewards-main-css",n).clone()),t.append(A("<link/>",{rel:"stylesheet",href:"//cdn1.stamped.io/files/widget.min.css",type:"text/css"})).append(A("<link/>",{rel:"stylesheet",href:"//fonts.googleapis.com/css?family=Open+Sans:400,600&display=swap",type:"text/css"})),t.append("<script>window.FontAwesomeConfig = { searchPseudoElements: true };<\/script>");var a,s=h.createElement("script");s.type="text/javascript",s.src="//kit.fontawesome.com/59de3073ed.js",s.setAttribute("data-observe-mutations","true"),s.setAttribute("data-search-pseudo-elements","true"),h.body.appendChild(s),e.append("<style>"+S+' .stamped-rewards-window { font-family:"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; }</style>'),k()&&e.attr("data-mobile",!0),b.customer&&b.customer.customerEmail?e.attr("data-logged-in",!0):e.attr("data-logged-in",!1),1==b.branding&&e.attr("data-branding",!0),$wrapperCards=A("#stamped-rewards-cards",h),$wrapperViews=A("#stamped-rewards-views",h),A(h).on("click",".stamped-rewards-header-close",function(){K()}),A(P).on("touchstart",function(){a=!0}),A(P).on("touchmove",function(){a=!1}),A(P).on("click touchend",function(e){var t;"click"===e.type&&(a=!0),a&&("stamped-rewards-init"===e.target.id||A(e.target).parents("#stamped-rewards-init").length||A(e.target).parents(".stamped-rewards-base").length||A(e.target).parents(".stamped-rewards-launcher").length||A(e.target).parents("#stamped-rewards-widget").length||(t=A(".stamped-rewards-base",n).hasClass("opened"),setTimeout(function(){t&&StampedFn.toggleLauncher()},300)))}),A(h).on("click",'[data-campaign-completed="false"] .stamped-reward-card-button-earn',function(){var e,t,s,r,a,i,n,d,o,l=A(this).parent(".stamped-rewards-card-earn"),p=l.data("campaign-id"),m=l.data("event-type");"AccountBirthday"==m?((e=A(".stamped-rewards-birthday-input-holder",h)).show(),(t=A(".stamped-rewards-birthday-input-holder input",h).val())&&(i=A(this),n=l,d=t,o=function(){e.hide()},X(i,"loading",!0),A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/addBirthday?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,dateBirthday:d}),data:b.customer,success:function(e,t,a){X(i,"active",!0,null,function(){n.attr("data-campaign-completed","true")}),o&&o()}}))):"Review"==m||"ReviewPhoto"==m||"ReviewVideo"==m?(A('.stamped-rewards-header-menu span[data-target="reviews"]',h).trigger("click"),B("main")):(s=A(this),r=l,a=p,X(s,"loading",!0),A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/add?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,campaignId:a}),data:b.customer,dataType:"json",success:function(e,t,a){X(s,"active",!0,null,function(){1==e&&r.attr("data-campaign-completed","true")}),W()}}),"SocialFollowInstagram"!=m&&"SocialFollowFacebook"!=m&&"SocialShareFacebook"!=m&&"SocialFollowTwitter"!=m&&"SocialShareTwitter"!=m&&"SocialYouTube"!=m||function(e){var t=b.links;{"SocialFollowInstagram"==e?L.open(t.instagram,"_blank").focus():"SocialFollowFacebook"==e?L.open("https://www.facebook.com/plugins/page.php?href="+t.facebook,"_blank","location=yes,height=250,width=340,top=50,left=50,scrollbars=yes,status=yes"):"SocialShareFacebook"==e?L.open("https://www.facebook.com/sharer/sharer.php?u="+t.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"):"SocialFollowTwitter"==e?L.open(t.twitter,"_blank").focus():"SocialShareTwitter"==e?L.open("https://twitter.com/intent/tweet?url="+t.shop,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"):"SocialYouTube"==e&&L.open(t.youtube,"_blank")}}(m))}),A(h).on("click",'[data-campaign-redeemable="true"] .stamped-reward-card-button-spend',function(){var e=A(this).parent(".stamped-rewards-card-spend"),t=e.data("campaign-id");"Variable"==e.data("coupon-type")?B("view-redeem-variable",null,{entityId:t}):z(A(this),{campaignId:t},function(e){B("view-coupon",null,e.rewardCampaignCoupon),W()})}),A(h).on("click",".stamped-reward-referral-platforms button",function(){var e,t=A(this).attr("href");t&&(e=t,L.open(e,"_blank","location=yes,height=500,width=500,top=50,left=50,scrollbars=yes,status=yes"))}),A(h).on("click",".stamped-rewards-header-menu span",function(){var e=A(this).attr("data-target");e!=$wrapperCards.attr("data-target")&&($wrapperCards.attr("data-target",e),V(e),A(".stamped-rewards-content-container",h).scrollTop(0),A(".stamped-rewards-header-menu .active",h).removeClass("active"),A(this,h).addClass("active"))}),A(".stamped-rewards-content-container",h).on("scroll",function(){var e=A(".stamped-rewards-content-container",h).scrollTop();if(e<=1)return A(".stamped-rewards-background",h).height("200px"),void A(".stamped-rewards-header",h).height("auto");var t=A(".stamped-rewards-header-content",h).outerHeight()+15;A(".stamped-rewards-header",h).css("min-height","70px");var a=200;a-=e,A(".stamped-rewards-background",h).height(a);var s=t;s-=e,A(".stamped-rewards-header",h).height(s)}),V("rewards"),Me("stamped:launcher:loaded")},1e3)}(),function(){var e=b;e.points&&(A("[id=stamped-rewards-points-placeholder]").html(e.points.points_current_with_name).attr("onclick","StampedFn.toggleRewardsModal();"),A('[id=stamped-rewards-points-placeholder][data-type="points-only"]').html(e.points.points).attr("onclick","StampedFn.toggleRewardsModal();"));e.customer&&A("[id=stamped-rewards-referral-placeholder]").html(e.customer.urlReferral);{var s,r;0<A("#stamped-rewards-widget").length&&(s=[],r=1,A("[id=stamped-rewards-widget]").each(function(e){var t=A(this);t.attr("data-element-id",r);var a=ve(t);s.push(a),r++}),fe("rewards",s))}}())}function K(e){var t=a.hasClass("opened");A("body",h).addClass("opened"),t?1!=e&&(Ue("Func _toggleRewardsModal: var launcherWidth:"+v,1),a.removeClass("opened"),a.fadeOut(),d.removeClass("opened"),p.removeClass("rotateIn"),p.addClass("rotateOut"),m.removeClass("fadeOut"),m.addClass("fadeIn"),o.animate({width:v+"px"},0),setTimeout(function(){B("main")},1e3),Me("stamped:launcher:closed")):(setTimeout(function(){a.addClass("opened")},100),d.addClass("opened"),a.fadeIn(),p.addClass("rotateIn"),p.removeClass("rotateOut"),m.addClass("fadeOut"),m.removeClass("fadeIn"),o.animate({width:"40px"},0),A(".stamped-rewards-content-container",h).scrollTop(0),A(".stamped-rewards-header",h).css("height","auto"),Me("stamped:launcher:opened"),"true"!=be("stamped-launcher-opened")&&(A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/tracking/event?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,source:"launcher",event:"open"}),dataType:"json",success:function(e,t,a){}}),ye("stamped-launcher-opened",!0,1)))}function M(e,t,a){var s=e.search,r=e.customOptionTitle?e.customOptionTitle+"||"+e.customOptionValue:"",i=e.topic,n=s||i||r,d=i?3:r?2:1;A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/tracking/event?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,event:"search",source:"m"}),data:JSON.stringify({source:"m",sourceId:t,type:d,text:n,results:a}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e,t,a){}})}function W(s){A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/points?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl}),data:b.customer,dataType:"json",success:function(e,t,a){setTimeout(function(){A(".stamped-rewards-header-main-points, .stamped-rewards-header-small-points",h).html(e.points_current_with_name)},5e3),s&&s(e)}})}function z(s,r,i){X(s,"loading",!0),r=r||{},A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/redeem?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,campaignId:r.campaignId,points:r.points}),data:b.customer,dataType:"json",success:function(e,t,a){r.campaignId&&X(s,"active",!0,1),i&&i(e)}})}function V(e){$wrapperCards.html(""),A("body",h).attr("data-view",e);for(var t=0;t<b.html.cards.length;t++){var a,s=b.html.cards[t];s&&s.html&&e==s.type&&((a=A(s.html)).attr("data-key",s.key),$wrapperCards.append(a))}}function B(s,e,r){l=A(".stamped-rewards-window",h),A(".stamped-rewards-content-container",h).scrollTop(0),A(".stamped-rewards-header-nav",h).attr("onclick","StampedFn.loadLauncherView('main');"),A("body",h).attr("data-view",s);var i=A(e).attr("data-title");if(l)if("main"==s){l.removeClass("stamped-rewards-nav-small"),l.addClass("stamped-rewards-nav-big"),A(".stamped-rewards-header-main, .stamped-rewards-header-menu",h).fadeIn(),A(".stamped-rewards-header-small",h).hide();var t=A(".stamped-rewards-header-content",h).outerHeight()+15;A(".stamped-rewards-header",h).height(t),A(".stamped-rewards-background",h).height("200"),$wrapperViews.hide(),$wrapperCards.fadeIn()}else{for(var a,n=!1,d=0;d<b.html.views.length;d++){var o=b.html.views[d];o.key==s&&(o.title&&(i=o.title),n=!0,H(o.html),Q(s,i,r))}n||(H(),Q(s,i,r),a=null,r&&r.entityId&&(a=r.entityId),A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/v2/rewards/cardview?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,viewKey:s,entityId:a,referralCode:q.referral_code}),data:b.customer,dataType:"json",success:function(e,t,a){e&&e.html?(b.html.views.push(e),setTimeout(function(){H(e.html,!1),Q(s,e.title||i,r)},1e3)):B("main")},error:function(){B("main")}}))}}function H(e,t){var a;e?(a=A(e),$wrapperViews.html(a),$wrapperViews.removeClass("loading")):($wrapperViews.html(""),A(".stamped-view-loader",$wrapperViews).length||$wrapperViews.append(A('<div class="stamped-view-loader"></div>')),$wrapperViews.addClass("loading")),0!=t&&(l.addClass("stamped-rewards-nav-small"),l.removeClass("stamped-rewards-nav-big"),A(".stamped-rewards-header-main, .stamped-rewards-header-menu",h).hide(),A(".stamped-rewards-header-small",h).fadeIn(),$wrapperCards.hide(),$wrapperViews.fadeIn())}function Q(e,t,s){var a,r,i,n,d,o,l,p=(s?s.viewTitle:t)||t;function m(){var e=$selectorInput.val(),t=e/d*o,a=new Intl.NumberFormat("en-US",{style:"currency",currency:n});A("#redeem-points",$wrapperViews).text(r.formatStringStamped(e,i)),A("#redeem-amount",$wrapperViews).text(a.format(t))}"view-coupon"==e&&(A(".stamped-reward-coupon-code",$wrapperViews).text(s.couponCode),A(".stamped-reward-card-title",$wrapperViews).html(s.title),A(".stamped-rewards-header-nav",h).attr("onclick","StampedFn.loadLauncherView('view-your-rewards');")),"view-earnings"==e&&b&&b.customer&&((a=A('[data-event-type="AccountBirthday"]',h)).length&&(b.customer.dateBirthday?a.attr("data-birthday","true"):(a.attr("data-birthday","false"),a.prepend(A('<div class="stamped-rewards-birthday-input-holder"> Enter your birthday: <input type="date" class="stamped-rewards-birthday-input" placeholder="yyyy-mm-dd" /> </div>').hide())))),"view-redeem-variable"==e&&($selectorInput=A(".range-slider__range",$wrapperViews),$selectorInput.length&&(r=$selectorInput.data("format-points"),i=$selectorInput.data("format-points-name"),n=$selectorInput.data("currency"),d=$selectorInput.attr("step"),o=$selectorInput.data("discount-value"),$selectorInput.on("input",function(){m()}),A(".stamped-rewards-content-action-button ",$wrapperViews).on("click",function(){var e,t,a;e=this,t=$selectorInput.val(),a={campaignId:s.entityId,points:t},StampedFn.rewardsRedeem($(e),a,function(e){var t=e.rewardCampaignCoupon.couponCode,a=e.rewardCampaignCoupon.title;B("view-coupon",null,{couponCode:t,title:a,viewTitle:a})})}),m())),p&&(l=p,A(".stamped-rewards-header-small-title",h).text(l))}function J(e){X(A("#stamped-rewards-apply-code",h),e)}function X(t,e,a,s,r){var i;"loading"==e?(i=t.width(),t.attr("data-original-text",t.text()),t.addClass("stamped-button-disabled"),10<=i&&t.width(i),t.html('<span class="stamped-button-icon stamped-button-loading"></span>')):(a||t.html('<span class="stamped-button-icon stamped-button-completed"></span>'),setTimeout(function(){var e=t.attr("data-original-text");t.html(e),t.removeClass("stamped-button-disabled"),t.width("auto"),r&&r()},s||7878))}function Y(){Ue("Func initWidgetType");var e,t,a,s=A(".stamped-container",C).attr("data-widget-style");"slider"==s?(Ue(x=A(".stamped-reviews",C),1),Ue("Func initWidgetType: var initialized:"+(e=x&&x.hasClass("slick-initialized")),1),e?(A(".stamped-reviews > .stamped-review",C).each(function(e,t){x.slick("slickAdd",t)}),A('.stamped-reviews [class*="stamped-review"]',C).length<=0?A("button.slick-arrow").hide():A("button.slick-arrow").show()):Re("https://cdn.shopify.com/s/files/1/0638/7747/files/slick.min.js",function(){x.slick({dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:4,slide:".stamped-review",initialSlide:0,rows:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),x.on("afterChange",function(e,t,a){var s;A(".slick-next.slick-arrow").hasClass("slick-disabled")&&((s=A(".stamped-pagination .next a")).length&&s.click())})})):"masonry"==s&&(t={1500:4,1200:3,700:2,500:1},L.macyInstanceConfig&&L.macyInstanceConfig.breakAt&&(t=L.macyInstanceConfig.breakAt),Re("//s3-us-west-2.amazonaws.com/stamped.io/cdn/js/macy2.js",function(){L.macyInstanceStamped=Macy({container:".stamped-reviews",margin:{x:15,y:15},breakAt:t}),Me("stamped:macy:loaded")})),!A(".stamped-sort-select").length||(a=C.attr("data-sort")||A(".stamped-container",C).attr("data-widget-sort"))&&"none"!==A('.stamped-sort-select option[value="'+a+'"]').css("display")&&A(".stamped-sort-select").val(a)}function Z(e){C&&C.length&&!e||(C=A(y)),pe()}function ee(){Ue("Creating Q&A"),ce()}function te(){!function(){var e;{Ue("Loading Badges..."),!(t=A(".stamped-product-reviews-badge[data-id]")).length||(e=A.map(t,function(e){if(!A.trim(A(e).html())||A(e).attr("data-type")||A(e).attr("data-product-type")||A(e).attr("data-product-sku")||A(e).attr("data-product-title"))return{productId:A(e).attr("data-id"),productType:A(e).attr("data-product-type"),productSKU:A(e).attr("data-product-sku")||A(e).attr("data-product-sku2"),productTitle:A(e).attr("data-product-title")}}))&&e.length&&(JSON.stringify(e),A.ajax({type:"POST",dataType:"json",contentType:"application/json",url:q.SECURE_ENDPOINT+"/widget/badges",data:JSON.stringify({productIds:e,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl}),success:function(r){t.each(function(e){var a=A(this).attr("data-id"),t=A(this).attr("data-type"),s=A.map(r,function(e,t){if(e.productId==a)return t})[0];0<=s&&(!t||"review"==t)?A(this).html(r[s].badge):0<=s&&"qna"==t&&A(this).html(r[s].badgeqna)}),Me("stamped:badges:loaded")},error:function(e){}}))}A(".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first").length&&A(P).on("click",".stamped-product-reviews-badge[data-id].stamped-main-badge, .stamped-product-reviews-badge:first",function(){"qna"===A(this).attr("data-type")?(A("#stamped-questions-placeholder").length?ke("#stamped-questions-placeholder"):(ue(null,"questions"),ke(y)),A(".stamped-badge-caption[data-questions]").length&&"0"===A(".stamped-badge-caption[data-questions]").attr("data-questions")&&A(".new-question-form").show()):(ue(null,"reviews"),ke(y))})}()}function ae(){var s,r;0<A("#stamped-reviews-widget").length&&(s=[],r=1,A("[id=stamped-reviews-widget]").each(function(e){var t=A(this);t.attr("data-element-id",r);var a=ve(t);s.push(a),r++}),fe("ugc",s))}function se(){var i=A(C).attr("data-limit-words")||A(".stamped-container",C).attr("data-widget-limit-words"),n=A(C).attr("data-keyword"),d=A(C).attr("data-search");(i&&0<i||n||d)&&A(".stamped-review",C).each(function(e){var t,a,s,r=A(".stamped-review-content-body:first",this);!r.length||(t=A(r).html()).indexOf("stamped-review-read-more")<=-1&&(n||d?(n&&(a=me(t,n)),d&&(a=me(t,d)),A(r).html(a)):(s=t.split(" ")).length>i&&(txtTrimmed=s.slice(0,i).join(" ")+"...",A(r).html(txtTrimmed),A(r).append('<a class="stamped-review-read-more" style="margin-left:10px; cursor:pointer;">read more</span>'),A(r).append('<span class="original-review" style="display:none !important;">'+t+"</span>")))}),A(".stamped-review-reply .stamped-review-reply-body, .stamped-review-reply .stamped-review-content-body").each(function(){var e;A(this).attr("data-link-processed")||(A(this).attr("data-link-processed",!0),e=A(this).html(),A(this).html(e.linkify()))})}function re(){var e=A(C).attr("data-keywords");if(e){A(".stamped-reviews-filter-label").show(),A(".stamped-summary-keywords").show(),A(C).removeAttr("data-keywords"),A(".stamped-summary-keywords-list",C).html("");var t="",a=e.split(",");for(i=0;i<a.length;i++)t+="<li>"+a[i]+"</li>";A(t).appendTo(A(".stamped-summary-keywords-list",C))}}function ie(){A(P).on("click keypress",".stamped-review-read-more",function(e){var t;!0===D(e)&&(A(this).closest(".stamped-review-content-body").find(".stamped-review-read-more").hide(),t=A(this).closest(".stamped-review-content-body").find(".original-review").html(),A(this).closest(".stamped-review-content-body").html(t),L.macyInstanceStamped&&L.macyInstanceStamped.reInit())})}function ne(){A(".stamped-summary-ratings").removeClass("selected"),A(".stamped-summary-ratings .summary-rating").each(function(){A(this).removeClass("selected")}),A(".summary-rating-bar").each(function(){A(this).removeClass("selected")})}O=void 0!==L?L:this,T=function(){function a(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(n(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e))}function n(e){return parseInt(e)}function o(e,t,a){t=p[t]?t:p[a]?a:"en";for(var s=0,r=e<0?1:0,i=e=Math.abs(e);m[s]<=e&&s<6;s++)e/=m[s];return(0===(s*=2)?9:1)<(e=n(e))&&(s+=1),p[t](e,s,i)[r].replace("%s",e)}function l(e,t){return((t=t?a(t):new Date)-a(e))/1e3}function i(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}function s(e,t){this.nowDate=e,this.defaultLocale=t||"en"}function e(e,t){return new s(e,t)}var r="second_minute_hour_day_week_month_month".split("_"),d="秒_分钟_小时_天_周_月_年".split("_"),p={en:function(e,t){if(0===t)return["just now","right now"];var a=r[parseInt(t/2)];return 1<e&&(a+="s"),[e+" "+a+" ago","in "+e+" "+a]},zh_CN:function(e,t){if(0===t)return["刚刚","片刻后"];var a=d[parseInt(t/2)];return[e+a+"前",e+a+"后"]}},m=[60,60,24,7,365/7/12,1],c="datetime",u="data-tid",g={};return s.prototype.doRender=function(e,t,a){var s,r,i,n=l(t,this.nowDate),d=this;e.innerHTML=o(n,a,this.defaultLocale),g[s=setTimeout(function(){d.doRender(e,t,a),delete g[s]},Math.min(1e3*function(e){for(var t=1,a=0,s=Math.abs(e);m[a]<=e&&a<6;a++)e/=m[a],t*=m[a];return s=(s%=t)?t-s:t,Math.ceil(s)}(n),2147483647))]=0,i=s,(r=e).setAttribute?r.setAttribute(u,i):r.attr&&r.attr(u,i)},s.prototype.formatDateString=function(e,t){return o(l(e,this.nowDate),t,this.defaultLocale)},s.prototype.render=function(e,t){void 0===e.length&&(e=[e]);for(var a,s=0,r=e.length;s<r;s++)this.doRender(e[s],(a=e[s]).dataset.timeagoStamped?a.dataset.timeagoStamped:i(a,c),t)},s.prototype.setLocale=function(e){this.defaultLocale=e},e.register=function(e,t){p[e]=t},e.cancel=function(e){var t;if(e)(t=i(e,u))&&(clearTimeout(t),delete g[t]);else{for(t in g)clearTimeout(t);g={}}},e},"object"==typeof module&&module.exports?(module.exports=T(),module.exports.default=module.exports):O.timeagoStamped=T();var de=0;function oe(){var r,g;function i(t,a){var e,o,s;e=t,o=function(e){g=e},(s=new FileReader).onload=function(e){var t=new DataView(e.target.result);if(65496!=t.getUint16(0,!1))return o(-2);for(var a=t.byteLength,s=2;s<a;){var r=t.getUint16(s,!1);if(s+=2,65505==r){if(1165519206!=t.getUint32(s+=2,!1))return o(-1);var i=18761==t.getUint16(s+=6,!1);s+=t.getUint32(s+4,i);var n=t.getUint16(s,i);s+=2;for(var d=0;d<n;d++)if(274==t.getUint16(s+12*d,i))return o(t.getUint16(s+12*d+8,i))}else{if(65280!=(65280&r))break;s+=t.getUint16(s,!1)}}return o(-1)},s.readAsArrayBuffer(e.slice(0,65536));var r=new FileReader;r.onloadend=function(){var p,m,c,e,u;console.log("process file"),p=r.result,m=t.type,c=t.name,e=a,(u=new Image).src=p,u.onload=function(t){var e,a,s,r,i,n,d,o=u.width,l=u.height;1500<o||1500<l?(l<o?(a=l*(1500/o),e=1500):(e=o*(1500/l),a=1500),(s=P.createElement("canvas")).width=e,s.height=a,s.getContext("2d").drawImage(this,0,0,e,a),p=s.toDataURL(m),A(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+t+'"><i class="fa fa-spin fa-spinner" /><img src="'+p+'" width="70" /><span style="display:none;">'+c+'</span><div class="stamped-file-photo-remove" data-index="'+t+'">x</div></div>'),g&&1!=g?(r=p,i=g,n=function(e){h(p=e,t)},(d=new Image).onload=function(){var e=d.width,t=d.height,a=P.createElement("canvas"),s=a.getContext("2d");switch(4<i&&i<9?(a.width=t,a.height=e):(a.width=e,a.height=t),i){case 2:s.transform(-1,0,0,1,e,0);break;case 3:s.transform(-1,0,0,-1,e,t);break;case 4:s.transform(1,0,0,-1,0,t);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,t,0);break;case 7:s.transform(0,-1,-1,0,t,e);break;case 8:s.transform(0,-1,1,0,0,e)}s.drawImage(d,0,0),n(a.toDataURL())},d.src=r):h(p,t)):(A(".stamped-file-holder").append('<div class="stamped-file-photo" data-index="'+t+'"><i class="fa fa-spin fa-spinner" /><img src="'+p+'" width="70" /><span style="display:none;">'+c+'</span><div class="stamped-file-photo-remove" data-index="'+t+'">x</div></div>'),h(p,t))}(e),u.onerror=function(){console.log("There was an error processing your file!")}},r.onerror=function(){console.log("There was an error reading the file!")},r.readAsDataURL(t)}function h(e,t){var a=C.attr("data-product-id"),s={imagea:e.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,"")};Me("stamped:photo:uploading"),A(".stamped-button-primary",C).attr("disabled","disabled"),A.ajax({type:"POST",url:"//stamped.io/api/widget/upload?"+A.param(Se({productId:a,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl})),data:JSON.stringify(s),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){setTimeout(function(){e&&(f.push(e),n(e,t))},1e3),setTimeout(function(){Me("stamped:photo:uploaded"),A(".stamped-button-primary",C).removeAttr("disabled")},2e3)},error:function(e){f.length;'"max"'==e.responseText?alert("Upload up to 3 images"):console.log("An error occured, please try again later."),setTimeout(function(){Me("stamped:photo:uploaded"),A(".stamped-button-primary",C).removeAttr("disabled")},2e3)}})}L.File&&L.FileReader&&L.FormData?((r=A("#stamped-file-uploader-input")).on("change",function(e){for(var t=e.target.files,a=0;a<t.length;a++){var s=t[a];if(s)if(/^image\//i.test(s.type)){if(console.log("is image, begin upload"),3<=de)return void Me("stamped:photo:maxed");i(s,++de)}else Me("stamped:photo:invalid"),console.log("Not a valid image!")}r.val("")}),A(P).on("click",".stamped-file-photo-remove",function(){var e=A(this).attr("data-index");f.splice(e,1),A('.stamped-file-photo[data-index="'+e+'"]').remove()})):console.log("File upload is not supported!");var n=function(e,t){Ue("Photo upload complete idx"+t),A(".stamped-file-photo[data-index="+t+"] .fa").remove()}}var le=null;function pe(p,m,e,t){var a,s,r,i,n,d,o,l,c,u,g,h,v,f,w,y,b,S,k;C.length&&!_&&(Ue("Loading Main Widget..."),a=C.attr("data-product-id"),s=C.attr("data-product-ids"),r=C.attr("data-name"),i=C.attr("data-product-type"),n=C.attr("data-product-sku"),d=C.attr("data-user-reference"),o=C.attr("data-take-reviews"),l=C.attr("data-keyword"),c=C.attr("data-widget-language"),u=C.attr("data-widget-type"),g=C.attr("data-load-type")||A(".stamped-container",C).attr("data-widget-load-type"),h=C.attr("data-search"),v=C.attr("data-cache")||null,f=A(".stamped-container",C).attr("data-widget-style"),w=C.attr("data-tags-exclude"),y=q.metafields,"slider"==f&&(g="continue"),r=r&&r.replace("!",""),m=m||(C.attr("data-sort")||A(".stamped-container",C).attr("data-widget-sort")),"continue"===g&&(t=!0),A("#stamped-main-widget-placeholder").length&&A("#stamped-main-widget-placeholder").append(C),_=!0,p&&!t&&ke(".stamped-reviews"),C.addClass("stamped-main-widget-loading"),b=A.param(Se({productId:a,productIds:s,productName:r,productType:i,productSKU:n,userReference:d,page:p||1,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,take:o||5,sort:m,rating:e,keyword:l,widgetLanguage:c,widgetType:u,search:h,isUseCache:v,tagsExclude:w})),A.isEmptyObject(I)||(b+="&"+A.param(I)),k={type:(S=y.length)?"POST":"GET",data:S?JSON.stringify({metafields:y}):null,dataType:"json",url:q.SECURE_ENDPOINT+"/widget"+(S?"/preview":"")+"?"+b,success:function(e){Ue("Loaded Main Widget..."),_=!1,C.removeClass("stamped-main-widget-loading");var t,a,s,r,i,n,d=e.product,o=e.widget,l=A("#stamped-main-widget .stamped-container").length;A(".question-form-wrapper").clone(),A(".stamped-questions").clone();l||C.empty().html(d),t="function"==typeof A.parseHTML?A.parseHTML(o):A(o),0==A(".stamped-content",C).children().length?A(".stamped-content",C).append(A(t)):(a=A(".stamped-reviews",C),s=A('[class="stamped-review"]',t),("continue"!==g||1===p&&p)&&A('.stamped-reviews [class*="stamped-review"]',C).remove(),r=A(".stamped-pagination",t).attr("data-page",p),(i=A(".stamped-reviews .stamped-pagination",C)).length?A(s).insertBefore(i):A(s).appendTo(".stamped-reviews",C),n=A(".stamped-tabs",t),A(".stamped-tabs",C).replaceWith(n),r.length?i.length?i.replaceWith(r):a.append(r):i.remove()),m&&A(".stamped-sort-select",C).length&&"none"!==A('.stamped-sort-select option[value="'+m+'"]',C).css("display")&&(A(".stamped-sort-select",C).val(m),A(".stamped-container",C).attr("data-widget-sort",m)),A(".new-review-form").hide(),A(".new-question-form").hide(),Me("stamped:reviews:loaded")},error:function(e){}},y.length&&(k.contentType="application/json"),null!=le&&le.abort(),le=A.ajax(k)),l&&M({topic:l},a),h&&M({search:h},a)}function me(e,t){return e=e.replace(new RegExp(t+"(?!([^<]+)?<)","gi"),'<span class="stamped-keyword-highlight">$&</span>')}function ce(l,e){if((C=A(y)).length){var e=C.attr("data-product-id"),t=C.attr("data-product-sku"),a=C.attr("data-product-type"),s=C.attr("data-name"),p=C.attr("data-take-questions")||5;if(!e)return;Ue("Loading Q&A"),A.ajax({type:"GET",url:q.SECURE_ENDPOINT+"/widget/questions",data:{productId:e,productSKU:t,productType:a,productTitle:s,page:l||1,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,take:p||5},success:function(e){var t,a,s,r,i,n,d,o;1==e.a&&A(".stamped-questions").length&&(t=e.result,a=e.t,s=e.form,e.p,r=e.avatar,A("#tab-questions").text(),A("#tab-questions").attr("data-count",a),function(e){{var t;A(".stamped-questions").length&&!A(".question-form-wrapper").length&&(t=A('<div class="question-form-wrapper">').html(e),A(".new-review-form").before(t))}}(s),i=A('<div class="stamped-questions">'),A(".stamped-questions").html(""),i.append(t),r&&(n=A(".stamped-review #stamped-review-avatar",i),d=A('<img src="'+r+'" width="100">'),n.html(d)),(o=A(".stamped-questions-placeholder")).length?(A(".stamped-questions",o).html(""),A(".stamped-questions",o).replaceWith(i),A(".stamped-questions",o).length||(A(".stamped-questions").appendTo(o),A(".stamped-questions").replaceWith(i)),A(".stamped-questions",o).show(),A("#tab-questions").hide(),A(".question-form-wrapper").prependTo(o),A(".stamped-summary-actions-newquestion").prependTo(o)):(A(".stamped-questions").replaceWith(i),l?A(".stamped-questions").show():A(".stamped-questions").hide()),function(e,t,a){var s=!(0<e)||e/a<1?1:Math.ceil(e/a);if(1==s)return;var r='<div class="stamped-pagination" id="stamped-pagination-question"><div><span id="stamped-pagination-prev" class="previous"><a onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t-1)+'"><</a></span><span id="pages"></span><span id="stamped-pagination-next" class="next"><a onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+(t+1)+'">></a></span></div></div>',i=A(".stamped-questions"),n=A(".stamped-questions-placeholder");n.length&&(i=A(".stamped-questions",n));var d=A(".stamped-pagination",i);d.length?d.replaceWith(r):i.append(r);d=A(".stamped-pagination",i);var e=s,t=t,o=[];if(o.push(1),e<=7){for(p=2;p<e;p++)o.push(p);e==t&&o.push(t)}{var l;8<=e&&(1<=t-2&&(t-2!=1&&o.push(t-2),o.push(t-1)),1!=t&&o.push(t),(l=t+2)<=e&&(o.push(t+1),l!=e&&o.push(t+2)))}1==t||1==t?A("#stamped-pagination-prev",d).hide():A("#stamped-pagination-prev",d).show();e==t||1==e?A("#stamped-pagination-next",d).hide():A("#stamped-pagination-next",d).show();e!=t&&o.push(e);for(var p=0;p<o.length;p++){o[p]==t?A("#pages",d).append(' <span class="page active"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+o[p]+'">'+o[p]+"</a></span> "):A("#pages",d).append(' <span class="page"><a style="cursor:pointer;" onclick="StampedFn.pageQuestions(this)" data-product-id="" data-page="'+o[p]+'">'+o[p]+"</a></span> ")}}(a,l||1,p),o.length?l&&ke(".stamped-questions-placeholder"):l&&ke(y),A(".stamped-review-reply-body",i).each(function(){var e=A(this).html();A(this).html(e.linkify())}),Me("stamped:questions:loaded"))}})}}function ue(e,t){A("#stamped-questions-placeholder, .stamped-questions-placeholder").length||(A(".stamped-tabs #tab-reviews").removeClass("active"),A(".stamped-tabs #tab-questions").removeClass("active"),"questions"==t?A(".stamped-tabs #tab-questions").addClass("active"):"reviews"==t&&A(".stamped-tabs #tab-reviews").addClass("active"),e&&(A(e).addClass("active"),t=A(e).data("type")),"reviews"==t?(A(".stamped-reviews").show(),A(".stamped-reviews-filter").show(),A(".stamped-questions").hide(),A("#stamped-sort-select").show()):"questions"==t&&(A(".stamped-reviews").hide(),A(".stamped-reviews-filter").hide(),A(".stamped-questions").show(),A("#stamped-sort-select").hide()),A(".new-review-form").hide(),A(".new-question-form").hide())}function ge(e){var t=function(e,t){for(var a=[],s=0;s<t;)a[s++]=e;return a.join("")}("★",e.reviewRating),a=C.attr("data-image-url")||"",s="https://stamped.io/facebookpost?caption="+t+" "+encodeURIComponent(e.reviewTitle)+"&name="+t+" "+encodeURIComponent(e.reviewTitle)+"&description="+encodeURIComponent(e.reviewMessage)+"&link="+encodeURIComponent(e.productUrl)+"&picture="+encodeURIComponent(a.replace("%3F","?")),r="https://www.facebook.com/dialog/feed?app_id=222664514734026&display=popup&link="+encodeURIComponent(s)+"&name="+encodeURIComponent(e.reviewTitle)+"&redirect_uri=https://stamped.io/shares?productId="+e.productId,i="https://twitter.com/intent/tweet?text="+t+" "+e.reviewMessage.substr(0,140)+"&url="+encodeURIComponent(e.productUrl),n="https://plus.google.com/share?url="+encodeURIComponent(e.productUrl),d=A(".stamped-thank-you .stamped-share-links");A(".facebook",d).attr("href",r),A(".twitter",d).attr("href",i),A(".google",d).attr("href",n)}var he=[];function ve(e,t){var a=A(e),s=a.attr("data-element-id"),r=a.attr("data-widget-type"),i=(a.attr("data-widget-persist-data"),a.attr("data-review-id")),n=a.attr("data-review-ids")?a.attr("data-review-ids").toString().split(","):null,d=a.attr("data-product-id"),o=a.attr("data-product-ids")?a.attr("data-product-ids").toString().split(","):null,l=a.attr("data-product-category")||a.attr("data-product-type"),p=a.attr("data-product-brand"),m=a.attr("data-product-sku"),c=a.attr("data-limit-words"),u=a.attr("data-random"),g=a.attr("data-show-avatar"),h=a.attr("data-take"),v=a.attr("data-fill-empty"),f=a.attr("data-min-rating"),w=a.attr("data-min-length"),y=a.attr("data-rating"),b=a.attr("data-tags"),S=a.attr("data-tags-exclude"),k=a.attr("data-syndication")||!0,_=a.data("with-photos"),C=a.data("sort-reviews"),I=a.data("widget-data"),O=a.data("widget-language"),T=a.data("instagram-gallery-id"),x=a.data("customer-email"),E=a.data("customer-first-name"),U=a.data("customer-id"),R=a.data("is-preview");return{type:r,reviewId:i,reviewIds:n,productId:d,productIds:o,productCategory:l,productBrand:p,productSKU:m,limitWords:c,random:u,showAvatar:g,isFillEmpty:v,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,page:t,skip:h,minRating:f,minLength:w,rating:y,isWithPhotos:_,sortReviews:C,instagramGalleryId:T,dataType:I,widgetLanguage:O,tags:b,tagsExclude:S,isSyndication:k,elementId:s,customerEmail:x,customerFirstName:E,customerExternalId:U,isPreview:R}}function fe(d,e){var t=q.SECURE_ENDPOINT+"/widget/reviews/batch";A.ajax({type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({data:e}),xhrFields:{withCredentials:!0},url:t,success:function(e,t,a){for(var s,r=e.length,i=100,n=0;n<r;n++){e[n]&&(i+=50,s=e[n].elementId,we(A("rewards"==d?'#stamped-rewards-widget[data-element-id="'+s+'"]':'#stamped-reviews-widget[data-element-id="'+s+'"]'),e[n],e.translations,i))}}})}function we(o,l,e,t){setTimeout(function(){var e,t,a,s,r,i,n,d;l&&(e=l.template,t=l.lang,a=o.attr("data-widget-type"),s=o.data("widget-persist-data")||!1,A(o).attr("data-lang",t||"en"),"instagram-feed"!=a&&"visual-gallery"!=a&&1!=s&&A(o).html(""),"single"==a?(o.append(e),StampedWidgetSingleFn,StampedWidgetSingleFn.init(l.data,o,A)):"full-page"==a||"full-page-nps"==a?(r=o.attr("data-rich-snippet"),i="/"==location.pathname,0<l.total&&"true"==r&&!i&&(n={"@context":"http://schema.org","@type":"Product",name:l.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:l.rating,reviewCount:l.total}},(d=P.createElement("script")).type="application/ld+json",d.innerHTML=JSON.stringify(n),P.getElementsByTagName("head")[0].appendChild(d)),o.append(e),StampedWidgetFullPageFn,StampedWidgetFullPageFn.init(l,o,A)):"full-page-multiple"==a?(o.append(e),StampedWidgetFullPageMultipleFn,StampedWidgetFullPageMultipleFn.init(l,o,A)):"reviews-highlight"==a?(o.append(e),StampedWidgetReviewsHighlightFn,StampedWidgetReviewsHighlightFn.init(l,o,A)):"people-highlight"==a?(o.append(e),StampedWidgetPeopleHighlightFn,StampedWidgetPeopleHighlightFn.init(l,o,A)):"drawer"==a?(o.append(e),StampedWidgetDrawerFn,StampedWidgetDrawerFn.init(l,o,A)):"carousel"==a?(o.append(e),StampedCarouselFn,StampedCarouselFn.init(l,o,A)):"carousel-nps"==a?(o.append(e),StampedCarouselNPSFn,StampedCarouselNPSFn.init(l,o,A)):"carousel-photos"==a?(o.append(e),StampedCarouselPhotosFn,StampedCarouselPhotosFn.init(l.data,o,A)):"site-badge"==a?(r=o.attr("data-rich-snippet"),i="/"==location.pathname,0<l.total&&"true"==r&&!i&&(n={"@context":"http://schema.org","@type":"Product",name:l.shop,aggregateRating:{"@type":"AggregateRating",ratingValue:l.rating,reviewCount:l.total}},(d=P.createElement("script")).type="application/ld+json",d.innerHTML=JSON.stringify(n),P.getElementsByTagName("head")[0].appendChild(d)),o.append(e),StampedSiteBadgeFn,StampedSiteBadgeFn.init(l,o,A)):"top-rated"==a?(o.append(e),StampedTopRatedFn,StampedTopRatedFn.init(l,o,A)):"wall-photos"==a?(o.append(e),StampedWallPhotosFn,StampedWallPhotosFn.init(l,o,A)):"checkout-comments"==a?(o.append(e),StampedCheckoutCommentsFn,StampedCheckoutCommentsFn.init(l,o,A)):"instagram-feed"==a?(L.stampedInstagramDataArr&&!A(o).is(":empty")||o.append(e),StampedInstagramFeedFn,StampedInstagramFeedFn.init(l,o,A)):"visual-gallery"==a?(L.stampedVisualGalleryDataArr||o.append(e),StampedVisualGalleryFeedFn,StampedVisualGalleryFeedFn.init(l,o,A)):"facebook-messenger-optin"==a?(StampedFacebookMessengerOptinFn,StampedFacebookMessengerOptinFn.init(l,o,A)):"nps-submission-form"==a?(o.append(e),StampedNPSSubmissionForm,StampedNPSSubmissionForm.init(l,o,A)):"rewards-summary"==a?(o.append(e),StampedRewardsSummary,StampedRewardsSummary.init(l,o,A)):"rewards-how-it-works"==a?(o.append(e),StampedRewardsHowItWorks,StampedRewardsHowItWorks.init(l,o,A)):"rewards-referral-modal"==a?(o.append(e),StampedRewardsReferralModal,StampedRewardsReferralModal.init(l,o,A)):"rewards-referral-claim-modal"==a?(o.append(e),StampedRewardsReferralClaimModal,StampedRewardsReferralClaimModal.init(l,o,A)):"rewards-earnings"==a?(o.append(e),StampedRewardsEarnings,StampedRewardsEarnings.init(l,o,A)):"rewards-spendings"==a?(o.append(e),StampedRewardsSpendings,StampedRewardsSpendings.init(l,o,A)):"rewards-referral"==a?(o.append(e),StampedRewardsReferral,StampedRewardsReferral.init(l,o,A)):"rewards-redeem-variable-slider"==a?(o.append(e),StampedRewardsRedeemVariableSlider,StampedRewardsRedeemVariableSlider.init(l,o,A)):"rewards-redeem-select-options"==a?(o.append(e),StampedRewardsRedeemSelectOptions,StampedRewardsRedeemSelectOptions.init(l,o,A)):"widget-development"==a&&(StampedWidgetDevFn,StampedWidgetDevFn.init(l,o,A)),Me("stamped:reviews:widget:loaded"))},t)}function ye(e,t,a){var s,r;r=a?((s=new Date).setTime(s.getTime()+24*a*60*60*1e3),"; expires="+s.toGMTString()):"",P.cookie=e+"="+t+r+"; path=/; SameSite=None; Secure"}function be(e){for(var t=e+"=",a=P.cookie.split(";"),s=0;s<a.length;s++){for(var r=a[s];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function Se(e){for(var t in e)null!==e[t]&&""!==e[t]&&void 0!==e[t]||delete e[t];return e}function ke(e){var t,a,s,r;A(e).length&&("false"===(t=A(y).attr("data-animation"))||(a=A(e),s=A("html, body"),r=A(y).attr("data-offset")||1,k()&&(r=A(y).attr("data-offset-mobile")||1),s.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove",function(){s.stop()}),s.animate({scrollTop:a.offset().top-r},t||1e3,function(){s.off("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove")})))}function _e(e){var t,a;"review"==e?(ue(null,"reviews"),t=A(".new-review-form"),(a=A(".new-question-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(400,function(){ke(".new-review-form")}),t.addClass("stamped-visible"))):"question"==e&&(ue(null,"questions"),t=A(".new-question-form"),(a=A(".new-review-form")).slideUp(),a.removeClass("stamped-visible"),t.hasClass("stamped-visible")?(t.slideUp(),t.removeClass("stamped-visible")):(t.slideDown(400,function(){ke(".new-question-form")}),t.addClass("stamped-visible")))}function Ce(e,t,a,s){A(y).length&&(ge(e),A(".stamped-user-review",C).hide(),A(".stamped-thank-you",C).show(),t.reviewRating<3?(A(".stamped-thank-you p",C).hide(),A(".stamped-thank-you .stamped-share-links",C).hide()):(A(".stamped-thank-you p",C).show(),A(".stamped-thank-you .stamped-share-links",C).show()),A(".new-review-form",C).hide(),A(".edit-review-form",C).hide(),A(".stamped-summary-actions-newreview").hide(),A("#stamped-button-submit",C).removeAttr("disabled"),s&&A("#stamped-button-submit",C).val(s),ke(y),function(e,t,a){if(null!=be("stamped-user-reviews")){for(var s=JSON.parse(be("stamped-user-reviews")),r=!1,i=0;i<s.length;i++)if(s[i].pid==e){r=!0,s[i];break}!r&&e&&t&&1==a&&(10<=s.length&&s.splice(0,1),s.push({pid:e,v:t}),ye("stamped-user-reviews",JSON.stringify(s),1))}else{var n;e&&t&&1==a&&(n=[{pid:e,v:t}],ye("stamped-user-reviews",JSON.stringify(n),1))}}(a.productId,t.userReference,!0)),Me("stamped:reviews:submitted")}function Ie(e,t,a){A||jQuery&&(A=jQuery),a&&A(a).closest(y).length&&(C=A(a).closest(y));C.attr("data-product-id");var s,r=A(".stamped-summary-ratings.selected .summary-rating-bar.selected",C).attr("data-rating");r&&(t=r),A(".stamped-sort-select",C).length&&(s=A(".stamped-sort-select",C).val()),pe(e,s,t)}function Oe(){var e;A("select.stamped-filter-select").each(function(){A(this).val("")}),A(".stamped-summary-keywords-list li").removeClass("selected"),A(C).removeAttr("data-keyword"),A(".stamped-summary-actions-clear").hide(),A(".stamped-reviews",C).removeAttr("data-filtered"),A(".stamped-sort-select").length&&(e=A(".stamped-sort-select").val()),I={},A(".stamped-reviews-search-input").val(""),A(".stamped-reviews-search-clear").hide(),A(C).removeAttr("data-search"),ne(),pe(1,e,null,!0)}String.linkify||(String.prototype.linkify=function(){return this.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,'<a href="$&">$&</a>').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,'$1<a href="http://$2">$2</a>').replace(/[\w.]+@[a-zA-Z_-]+?(?:\.[a-zA-Z]{2,6})+/gim,'<a href="mailto:$&">$&</a>')});var Te=!1,xe=null;function Ee(e,t){t=t||L.location.href,e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function Ue(e,t){var a="true"==Ee("stamped_debug")||1==L.stamped_debug,s=L.stamped_debug_level||Ee("stamped_debug_level");a&&(t||console.log("[Stamped.io]",e),t&&s&&console.log("[Stamped.io level"+s+"]",e))}function Re(e,t){(s=P.createElement("script")).type="text/javascript",s.charset="UTF-8",s.src=e;var a=P.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a),s.onload=s.onreadystatechange=t}function Fe(e,t){return"undefined"!=typeof Storage&&(localStorage.setItem(e,JSON.stringify(t)),1)}function Ne(t){if("undefined"==typeof Storage)return!1;var a;try{a=JSON.parse(localStorage.getItem(t))||null}catch(e){a=localStorage.getItem(t)}return a}function je(e,t){var a,s,r="stamped_app_key",i=Ne(r);i&&i.apiKey?(Ue(i),Me("stamped:init:getAppKey",{detail:i}),Ge(i)):((a=new XMLHttpRequest).onreadystatechange=function(){var e,t;4!==a.readyState||200!==a.status||(e=JSON.parse(a.responseText))&&e.apiKey&&(Fe(r,e),Me("stamped:init:getAppKey",{detail:e}),!0===e.skip||(appKey=e.apiKey,t={apiKey:appKey},"undefined"!=typeof Shopify?t.storeUrl=Shopify.shop:t.sId=e.sId,Ge(t)))},s="","shopify"==e?s="shopShopifyDomain="+t:"bigcommerce"==e&&(s="storeHash="+t),a.open("GET","//stamped.io/api/getappkey?"+s,!0),a.send())}function Ge(e){if(1==L.isInitializedStamped)return Ue("Already initalized"),StampedFn.loadWidget(!0),void StampedFn.loadDisplayWidgets();var t;L.isInitializedStamped=!0,e&&(L.StampedGlobalOptions=e),L.StampedGlobalOptions&&L.StampedGlobalOptions.apiKey&&(t="true"==Ee("stamped_force_jquery"),"undefined"==typeof jQuery||1==t?Re("https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js",function(){A=jQuery.noConflict(!0),E(),L.isInitializedStamped=!0}):(E(0,jQuery),L.isInitializedStamped=!0))}var Le=P.getElementById("stamped-script-widget"),Pe="";(Le=Le||P.getElementById("stamped-script-init"))&&(Pe=Le.src);var Ae,qe=!1;if((0<Pe.indexOf("skipCss=true")||1==q.exclude_main_css)&&(qe=!0),qe||function(e){for(var t=P.styleSheets,a=0,s=t.length;a<s;a++)if(t[a]&&t[a].href&&-1<t[a].href.indexOf(e))return;var r=P.createElement("link");r.rel="stylesheet",r.href=e,r.type="text/css";var i,n=P.getElementsByTagName("link")[0];n?n.parentNode.insertBefore(r,n):(i=P.getElementsByTagName("head")[0],r.setAttribute("async",""),i.appendChild(r))}("//cdn1.stamped.io/files/widget.min.css"),"undefined"!=typeof Shopify){var De,Ke=!1;if(Shopify.shop&&(null!=Le&&(-1<Pe.indexOf("skip=true")&&(Ke=!0),!(De=Le.getAttribute("data-api-key"))&&-1<Pe.indexOf("apiKey")&&(De=Ee("apiKey",Pe)),De&&(Ke=!0,Ge({apiKey:De,storeUrl:Shopify.shop}))),Ke||je("shopify",Shopify.shop)),Shopify.Checkout&&"undefined"==typeof StampedShopifyCheckout){if("function"==typeof L.StampedShopifyCheckout)return!1;Re("//cdn1.stamped.io/files/shopify-checkout.min.js",function(){Me("stamped:script-shopify-checkout:loaded")})}}function Me(e,t){var a;L.CustomEvent?a=new CustomEvent(e,t):(a=P.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t);try{P.dispatchEvent(a)}catch(e){}}return null==Le||(Ae=Le.getAttribute("data-store-hash"))&&je("bigcommerce",Ae),{init:Ge,initRewards:N,reloadUGC:F,toggleForm:_e,setRating:function(e){var t,a,s=A(e).parents(".new-review-form"),r=A(e).attr("data-value"),i=A(e).parent();s.find("input[name='reviewRating']").val(r),t=r,(a=i).find("a:lt("+t+")").removeClass("fa-star-o").addClass("fa-star-checked"),a.find("a:gt("+(t-1)+")").removeClass("fa-star-checked").addClass("fa-star-o")},submitForm:function(e){var t,a,s=C.data("label-submitting"),r=A(".new-review-form .stamped-button-primary",C).val(),i=null;(a=function(e){var t={};A(e).hasClass("new-review-form")||(e=A(e).parents(".new-review-form"));var a=A("input,textarea,select,radio",e).serializeArray();return A.each(a,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t}(e)).reviewRating&&a.author&&(t={productName:C.attr("data-name"),productId:C.attr("data-product-id"),productSKU:C.attr("data-product-sku"),productDescription:C.attr("data-description"),productImageUrl:C.attr("data-image-url"),productUrl:C.attr("data-url"),reviewSource:"widget",userReference:C.attr("data-user-reference")},i=a=A.extend(a,t),a=(a=A.param(a)).replace(/%0D%0A/g,"%0A"),A.ajax({url:q.SECURE_ENDPOINT+"/reviews2?"+A.param(Se({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,photos:f.join()})),type:"POST",data:a,beforeSend:function(e){A("#stamped-button-submit",C).attr("disabled","disabled"),s&&A("#stamped-button-submit",C).val(s)},error:function(e){Me("stamped:reviews:submitError"),1==q.is_ignore_submit_error?Ce(i,e,t,r):(A("#stamped-button-submit",C).removeAttr("disabled"),r&&A("#stamped-button-submit",C).val(r))},success:function(e){Ce(i,e,t,r)}}))},submitQuestionForm:function(){var e,t,a,s,r,i,n=A("#new-question-form"),d=A(y);n.length&&d.length&&(e=d.data("name"),t=d.data("description"),a=d.data("product-sku"),s=d.data("url"),r=d.data("image-url"),(i=n.serializeArray()).push({name:"productName",value:e}),i.push({name:"productDescription",value:t}),i.push({name:"productSKU",value:a}),i.push({name:"productUrl",value:s}),i.push({name:"productImageUrl",value:r}),i.push({name:"apiKey",value:L.StampedGlobalOptions.apiKey}),i.push({name:"sId",value:L.StampedGlobalOptions.sId}),i.push({name:"storeUrl",value:L.StampedGlobalOptions.storeUrl}),A('input[type="submit"]',n).attr("disabled","disabled"),A.ajax({type:"POST",url:"//stamped.io/api/questions",data:A.param(i),crossDomain:!0,success:function(e){A("#new-question-form").hide(),A(".stamped-form-message-success").show(),A("#new-question-form")[0].reset(),A('input[type="submit"]',n).removeAttr("disabled")}}))},toggleFormEdit:function(){A(".edit-review-form",C).toggle()},pageQuestions:function(e){var t=C.attr("data-product-id");ce(A(e).data("page"),t)},pageReviews:Ie,sortReviews:function(e){C.attr("data-product-id"),e.value&&pe(1,e.value,null,!0)},filterReviews:function(e){var t=A("option:first-child",e).text(),a=e.value;I={};var s,r=1;A("select.stamped-filter-select").each(function(){var e=A("option:first-child",this).text(),t=this.value;I["qt"+r]=e,I["qv"+r]=t,r++}),A(".stamped-summary-actions-clear").show(),A(".stamped-reviews",C).attr("data-filtered","true"),A(".stamped-sort-select").length&&(s=A(".stamped-sort-select").val()),pe(1,s,null,!0),M({customOptionTitle:t,customOptionValue:a},C.attr("data-product-id"))},filterClear:Oe,pageWidget:function(e){var s,t,a,r,i=A(e).data("page"),n=A(e).closest("#stamped-reviews-widget");n.attr("data-page",i),s=n,t=i,a=q.SECURE_ENDPOINT+"/widget/reviews",r=ve(s,t),A.ajax({type:"GET",url:a+"?"+A.param(Se(r)),dataType:"json",success:function(e,t,a){we(s,e)}})},loadBadges:te,loadWidget:Z,loadDisplayWidgets:ae,voteReview:function(e,t,a){var s=A(e);s.parent().fadeTo("slow",.3),s.addClass("disable-link"),A.ajax({type:"POST",url:q.SECURE_ENDPOINT+"/reviews/vote",data:{reviewId:t,vote:a,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl},success:function(e){var t,a;1!==e&&-1!==e||(t=s.attr("data-count"),a=parseInt(t),s.attr("data-count",a+e)),s.parent().fadeTo("slow",1),s.removeClass("disable-link")}})},openUGCModal:function(I,e,t,a,s,O,T,x){var E;1!==a&&a||(I=function(e,t){var a=[];for(i=0;i<e.length;i++){var s=e[i];if(1!=t||s.reviewUserPhotos||s.reviewUserVideos){var r={photos:[],videos:[],name:s.author,via:"Photos",title:s.reviewTitle,body:s.reviewMessage,date:s.reviewDate,reply:s.reviewReply,dateReplied:s.dateReplied,dateFull:s.dateCreated,verifiedType:s.reviewVerifiedType,rating:s.reviewRating,products:[{url:s.productUrl,title:s.productName,imageUrl:s.productImageLargeUrl,imageLargeUrl:s.productImageLargeUrl}],review_id:s.id,votes:{up:s.reviewVotesUp,down:s.reviewVotesDown},options:[]};if(s.reviewUserPhotos||s.reviewUserVideos){if(s.reviewUserVideos){var n=s.reviewUserVideos.split(",");for(ii=0;ii<n.length;ii++){var d="//cdn.stamped.io/uploads/videos/"+n[ii],o="//cdn.stamped.io/uploads/videos/"+n[ii]+".jpg";d.indexOf(".mp4")<0&&(d+=".mp4"),0<=d.indexOf("nothumb")&&(o=""),r.photos.push({videoUrl:d,imageThumbnailUrl:o})}}if(s.reviewUserPhotos){var l=s.reviewUserPhotos.split(",");for(ii=0;ii<l.length;ii++)r.photos.push({imageUrl:"//cdn.stamped.io/uploads/photos/"+l[ii],imageThumbnailUrl:"//cdn.stamped.io/uploads/photos/thumb/"+l[ii]})}}else r.photos.push({imageUrl:s.productImageLargeUrl,imageThumbnailUrl:s.productImageUrl});if(s.reviewOptionsList&&s.reviewOptionsList.length)for(ii=0;ii<s.reviewOptionsList.length;ii++)r.options.push({message:s.reviewOptionsList[ii].message,value:s.reviewOptionsList[ii].value});a.push(r)}}return a}(I,s)),null!=I||I.length||g(e,O);var r,n='<div class="stamped-ugc-modal" data-lang="'+(T=T||"en")+'"> <div class="stamped-ugc-modal-wrapper"><a href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close show-mobile" style="display:none;" tabindex="0">X</a> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-previous" data-direction="left" tabindex="0" aria-label="Previous Photo"> <i class="stamped-fa stamped-fa-angle-left"></i> </div> <div class="stamped-ugc-modal-image-wrapper"> <div class="stamped-ugc-modal-image"></div> <ul></ul> </div> <div class="stamped-ugc-modal-content"> <a href="javascript:void(0)" title="Close" aria-label="Close" role="button" class="stamped-modal-close" tabindex="0">X</a> <div class="stamped-ugc-modal-content-wrapper"> <div class="stamped-ugc-modal-user"> <div class="stamped-ugc-modal-user-source"></div><div class="stamped-ugc-modal-user-username"></div> </div> <div class="stamped-ugc-modal-caption"></div><div class="stamped-ugc-modal-votes"></div> <div class="stamped-ugc-modal-tags"> <a aria-label="Link to Product" {0} target="_top"> <div class="stamped-ugc-modal-tags-product-image-wrapper"><img {1} class="stamped-ugc-modal-tags-product-image" onerror=\'this.style.display = "none"\' alt="Product Image" /></div> <div class="stamped-ugc-modal-tags-product-title">{2}</div> <div class="stamped-ugc-modal-tags-btn"></div> </a> </div> </div> </div> <div class="stamped-ugc-modal-nav stamped-ugc-modal-nav-next" data-direction="right" tabindex="0" aria-label="Next Photo"> <i class="stamped-fa stamped-fa-angle-right"></i> </div> <div class="stamped-ugc-modal-list-photos"><ul></ul></div> </div> </div>',U=(A(t).attr("data-hover-text"),A(t).attr("data-shop-button-text"),A(t).attr("data-url-param")||""),R=A(t).attr("data-url-store")||L.stamped_global_url_store||"";A(t).attr("data-cropped"),A(t).attr("data-page"),A(t).attr("data-take"),A("#stamped-ugc-modal").length||((E=A(n)).attr("data-modal-type",a),A(E).appendTo(P.body));for(var d,o,l="",p=I.length,F=F||A(".stamped-ugc-modal-tags:first",E).html(),m=I?I.length:0,N=0;N<p;N++){var c=I[N],u=c.imageUrl;u&&(l+=templateBlock.formatStringStamped(m,u),m++),c.photos.length&&c.photos[0].imageUrl&&(he[N]=new Image,he[N].src=c.photos[0].imageUrl)}function j(){var e=Number(A(this).text())+1,t=A(this).data("image-url");A(".stamped-ugc-modal-image-wrapper ul li").removeClass("active"),A(".stamped-ugc-modal-image-wrapper ul li:nth-child("+e+")").addClass("active"),"image"==q.modal_ugc_gallery?A(".stamped-ugc-modal-image",E).append('<img src="'+t+'" alt="Customer Photo" />'):A(".stamped-ugc-modal-image",E).css("background-image","url("+t+")"),Me("stamped:ugcmodal:paged")}function G(){var e=A(this).data("index-review"),t=A(this).data("index-photo");A(".stamped-ugc-modal-list-photos ul li").removeClass("active"),A(".stamped-ugc-modal-list-photos ul li[data-index-review="+e+"][data-index-photo="+t+"]").addClass("active"),g(e,t),Me("stamped:ugcmodal:paged")}A(".stamped-ugc-media-block-template",t).append(l),A(t).keydown(function(e){if(37===e.keyCode)h("left");else{if(39!==e.keyCode)return;h("right")}}),r||(A(P).on("click keypress",".stamped-modal-close, .stamped-ugc-modal.open",function(e){if(!0===D(e)){if(e.target!=this)return;E.remove(),A("body").removeClass("stamped-modal-open")}}),E.on("click keypress",".stamped-ugc-modal-nav-previous, .stamped-ugc-modal-nav-next",function(e){var t;!0===D(e)&&(t=A(this).attr("data-direction"),h(t))}),P.addEventListener("touchstart",function(e){d=e.touches[0].clientX,o=e.touches[0].clientY},!1),P.addEventListener("touchmove",function(e){if(!d||!o)return;var t=e.touches[0].clientX,a=e.touches[0].clientY,s=d-t,r=o-a;Math.abs(s)>Math.abs(r)&&h(0<s?"right":"left");o=d=null},!1),o=d=null),r=!0;var g=function(e,t){var a,s,r=I[e];if(null!=r&&null!=r.photos){if(null!==t?(O=t)>r.photos.length-1&&(O=0):(!O||O>r.photos.length-1)&&(O=0),!A(".stamped-ugc-modal-list-photos ul li",E).length)for(var i=0;i<I.length;i++)for(var n=0;n<I[i].photos.length;n++){var d=e==i&&t==n?"active":"",o=(I[i].photos[n].imageUrl,I[i].photos[n].imageThumbnailUrl),l=P.createElement("li");l.className=d,l.innerHTML="";var p=P.createAttribute("data-index-review");p.value=i,l.setAttributeNode(p),(m=P.createAttribute("data-index-photo")).value=n,l.setAttributeNode(m),l.style.background="url("+o+")",A(".stamped-ugc-modal-list-photos ul",E).append(l),l.onclick=G}for(null!=r.photos[O]&&(a=r.photos[O].imageUrl,s=r.photos[O].videoUrl,a?"image"==q.modal_ugc_image_viewer?A(".stamped-ugc-modal-image",E).html('<img src="'+a+'" alt="Customer Photo" />'):A(".stamped-ugc-modal-image",E).css("background-image","url("+a+")"):s&&A(".stamped-ugc-modal-image",E).fadeOut("",function(){A(".stamped-ugc-modal-image",E).css("background-image",'url("")'),A(".stamped-ugc-modal-image",E).html('<video class="stamped-ugc-modal-video" src="'+s+'" width="100%" controls autoplay style="width: 100%; height: 100%;max-height: 600px; position: absolute;" />'),A(this).fadeIn()})),A(".stamped-ugc-modal-image-wrapper ul",E).html(""),ii=0;ii<r.photos.length;ii++){var m,c=ii===O?"active":"",u=P.createElement("li");u.className=c,u.innerHTML=ii,(m=P.createAttribute("data-image-url")).value=r.photos[ii].imageUrl,u.setAttributeNode(m),A(".stamped-ugc-modal-image-wrapper ul",E).append(u),u.onclick=j}A(".stamped-ugc-modal-user-source").text(r.via),A(".stamped-ugc-modal-user-username",E).text(r.name);var g="Verified Buyer",h="Shop Now";x&&"en"!=T&&(g=x.label_verified_buyer||g,h=x.label_shop_now||h),A(".stamped-ugc-modal-user-username",E).append('<span class="stamped-verified-badge">'+g+"</span>"),A(".stamped-ugc-modal-tags-btn",E).append("<span>"+h+"</span>");var v="";if(r.rating){for(var f=0;f<r.rating;f++)v+='<i class="stamped-fa stamped-fa-star"></i>';for(f=0;f<5-r.rating;f++)v+='<i class="stamped-fa stamped-fa-star-o"></i>'}var w,y="";if(r.options&&r.options.length){for(y+='<ul class="">',N=0;N<r.options.length;N++){var b=r.options[N].message,S=r.options[N].value;y+='<li data-value="'+b.toString().toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")+'"><span class="stamped-ugc-modal-options-message">'+b+'</span> <span class="stamped-ugc-modal-options-value">'+S+"</span></li>"}y+="</ul>"}r.reply||(r.reply=""),w=r.dateFull?new Date(r.dateFull):new Date(r.date);var k=(new timeagoStamped).formatDateString(w);for("en"!=T&&(k=r.date),A(".stamped-ugc-modal-caption",E).html('<div class="stamped-ugc-modal-date" data-date="'+r.date+'">'+k+'</div><div class="stamped-ugc-modal-caption-rating">'+v+'</div><div class="stamped-ugc-modal-caption-options">'+y+'</div><div class="stamped-ugc-modal-caption-title">'+(r.title||"")+'</div> <div class="stamped-ugc-modal-caption-body">'+r.body+'</div> <div class="stamped-ugc-modal-caption-reply">'+r.reply+"</div>"),A(".stamped-ugc-modal-votes",E).html('<span class="stamped-ugc-modal-vote-up" data-count="'+r.votes.up+'" onclick="StampedFn.voteReview(this, '+r.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-up"></i></span><span class="stamped-ugc-modal-vote-down" data-count="'+r.votes.down+'" onclick="StampedFn.voteReview(this, '+r.review_id+',1)"><i class="stamped-fa stamped-fa-thumbs-down"></i></span>'),A(".stamped-ugc-modal-tags",E).html(""),N=0;N<r.products.length;N++){var _=r.products[N];_.title=_.title?_.title:"",R?(_.url=_.url.replace("?storeUrl=https://",""),_.url=_.url+"?storeUrl="+R):U&&(_.url=_.url+"?param="+U);var C=_.imageUrl||_.imageLargeUrl;_.imageUrl?A(".stamped-ugc-modal-tags",E).append(F.formatStringStamped('href="'+_.url+'"','src="'+C+'"',_.title)):A(".stamped-ugc-modal-tags",E).append(F.formatStringStamped('href="'+_.url+'"',"",_.title))}E.hasClass("open")||(E.addClass("open"),A("body").addClass("stamped-modal-open"),Me("stamped:ugcmodal:open")),E.attr("data-review-index",e),E.attr("data-photo-index",O)}},h=function(e){if(E.hasClass("open")){E.attr("data-review-index"),E.attr("data-photo-index");if("left"==e)A(".stamped-ugc-modal-list-photos ul li.active").prev().click();else{if("right"!=e)return;var t=A(".stamped-ugc-modal-list-photos ul li.active").next();A(t.click()),t.length||"instagram"==E.attr("data-modal-type")&&Me("stamped:ugcmodal:last")}}};null!=I&&I.length&&g(e,O)},openUGCPhoto:function(i,e,n,t){if(Te){for(var a=null,s=0;s<w.length;s++)w[s].id==i&&(a=s);null!=a&&StampedFn.openUGCModal(w,a,A(y),null,null,n,xe),Te=!1}else{Te=!0;var r=q.SECURE_ENDPOINT+"/widget/reviews",d=A(C).attr("data-product-sku")||"",o="",l="",p=[];!0===t?(e=A(C).attr("data-product-id")||"",o=A(C).attr("data-name")||"",l=A(C).attr("data-product-type")||""):A(".stamped-reviews .stamped-review",C).each(function(){var e=A(this).attr("id");(e=e.replace("stamped-review-",""))&&p.push(e)}),A.ajax({type:"GET",url:r+"?"+A.param(Se({type:"widget-carousel-photos",reviewIds:p,productId:e,productSKU:d,productType:l,productTitle:o,random:!1,isFillEmpty:!1,page:1,skip:100,minRating:1,isWithPhotos:!0,apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl})),dataType:"json",success:function(e,t,a){w=e.data;for(var s=null,r=0;r<w.length;r++)w[r].id==i&&(s=r);null!=s&&(xe=e.lang,StampedFn.openUGCModal(w,s,A(y),null,null,n,xe,e.translations)),Te=!1,0}})}return!1},initOptions:L.StampedGlobalOptions,loadSurveyOptin:function(e){var t,a=setInterval(function(){void 0!==L.StampedGlobalOptions&&(null!==e&&e.orderId&&A.ajax({type:"GET",url:"//stamped.io/api/plugin/facebookmessenger?"+A.param(Se({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,orderId:e.orderId,customerEmail:e.customerEmail})),success:function(e){A("body").append(e.html);var t=A("#stamped-facebook-optin .fb-send-to-messenger")[0].outerHTML,a=P.createElement("iframe");a.height="100",a.width="100%";var s="<!DOCTYPE html> <html> <head> <meta charset='utf-8' /> <title></title> </head> <script> var fbPageId, fbUserRef; window.fbAsyncInit = function() { FB.init({ appId : '222664514734026', xfbml : true, version : 'v6.0' }); FB.Event.subscribe('send_to_messenger', function(e) { var modal = window.top.document.getElementById('stamped-facebook-optin'); if (e.event == 'rendered'){ modal.style.display = 'block'; } if (e.event == 'opt_in'){ console.log('hide'); modal.style.display = 'none'; } }); }; (function(d, s, id){ var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) {return;} js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/sdk.js'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk') ); <\/script> <body>"+t+"</body> </html>";P.body.appendChild(a),A(a).appendTo("#stamped-facebook-optin .fb-send-to-messenger"),a.contentWindow.document.open(),a.contentWindow.document.write(s),a.contentWindow.document.close()}}),clearInterval(a)),5<=++t&&clearInterval(a)},2e3)},closeSurveyOptin:function(){A("#stamped-facebook-optin").remove()},triggerEvent:Me,on:function(e,t){P.addEventListener?P.addEventListener(e,t):P.attachEvent("on"+e,function(){t.call(P)})},jQuery:A,stampedLog:Ue,getOptions:function(){return q},setOptions:function(e){Object.assign(q,e)},getLoggedInCustomer:function(){return b.customer},getDataRewards:function(){return b},loadLauncherView:B,toggleLauncher:K,toggleRewardsModal:K,rewardsApplyCode:function(e){var t=A(".stamped-reward-coupon-code",h).text(),a=A("#stamped-rewards-apply-code",h).text(),s=b.links;J("loading");var r,i,n,d,o=q.is_rewards_code_copy||-1<a.indexOf("Copy");return Me("stamped:rewards:coupon:applied",{detail:t}),1==o?(r=t,(i=P.createElement("span")).appendChild(P.createTextNode(r)),i.id="tempCopyToClipboard",P.body.append(i),(n=P.createRange()).selectNode(i),L.getSelection().removeAllRanges(),L.getSelection().addRange(n),P.execCommand("copy"),L.getSelection().removeAllRanges(),i.remove(),J("active")):(d=s.shop+"/discount/"+t,e&&e.skip||A.ajax({type:"GET",url:d,data:{},success:function(e,t,a){J("active")}})),{code:t,setState:J}},rewardsReferralClaimCode:function(){var e=A("#referral_claim_email",h),t=A("#stamped-rewards-claim-code",h),a=e.val(),s=StampedFn.getOptions();a&&(X(t,"loading",!0),A.ajax({type:"POST",url:s.SECURE_ENDPOINT+"/v2/rewards/referral/claim?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,email:a,referralCode:s.referral_code,debug:null}),dataType:"json",success:function(e,t,a){B("view-coupon",null,{couponCode:e.couponCode,title:e.title,viewTitle:e.title})},error:function(e){var t=e.responseJSON.message;A(".stamped-reward-card-error",h).text(t)},complete:function(){X(t,"active",!0,1e3)}}))},rewardsReferralSendEmail:function(e){var t=A("#email-to",h),a=A("#email-message",h),s=A(e),r=t.val(),i=(a.val(),StampedFn.getOptions());r&&(X(s,"loading",!0),A.ajax({type:"POST",url:i.SECURE_ENDPOINT+"/v2/rewards/referral/send?"+A.param({apiKey:L.StampedGlobalOptions.apiKey,sId:L.StampedGlobalOptions.sId,storeUrl:L.StampedGlobalOptions.storeUrl,fromEmail:b.customer.customerEmail,toEmail:r,debug:null}),data:{},success:function(e,t,a){},error:function(e){},complete:function(){X(s,"active",!1,3e4)}}))},rewardsLink:function(e){var t=b.links;"login"==e?top.location.href=t.login:"signup"==e&&(top.location.href=t.signup)},rewardsRedeem:z,rewardsPointsRefresh:W}}(window,document);